(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[]]);!function(n){function e(e){for(var r,i,s=e[0],c=e[1],l=e[2],u=0,f=[];u<s.length;u++)i=s[u],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&f.push(a[i][0]),a[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(n[r]=c[r]);for(p&&p(e);f.length;)f.shift()();return o.push.apply(o,l||[]),t()}function t(){for(var n,e=0;e<o.length;e++){for(var t=o[e],r=!0,s=1;s<t.length;s++){var c=t[s];0!==a[c]&&(r=!1)}r&&(o.splice(e--,1),n=i(i.s=t[0]))}return n}var r={},a={1:0},o=[];function i(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}i.e=function(n){var e=[],t=a[n];if(0!==t)if(t)e.push(t[2]);else{var r=new Promise((function(e,r){t=a[n]=[e,r]}));e.push(t[2]=r);var o,s=document.createElement("script");s.charset="utf-8",s.timeout=120,i.nc&&s.setAttribute("nonce",i.nc),s.src=function(n){return i.p+"assets/js/"+({}[n]||n)+"."+{2:"5d5e6ca1",3:"c173c7f3",4:"72779179",5:"825c88e0",6:"d93ced19",7:"2ecb8dde",8:"51c238de",9:"93b5e4aa",10:"42dc92f5",11:"c8e502f6"}[n]+".js"}(n);var c=new Error;o=function(e){s.onerror=s.onload=null,clearTimeout(l);var t=a[n];if(0!==t){if(t){var r=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src;c.message="Loading chunk "+n+" failed.\n("+r+": "+o+")",c.name="ChunkLoadError",c.type=r,c.request=o,t[1](c)}a[n]=void 0}};var l=setTimeout((function(){o({type:"timeout",target:s})}),12e4);s.onerror=s.onload=o,document.head.appendChild(s)}return Promise.all(e)},i.m=n,i.c=r,i.d=function(n,e,t){i.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:t})},i.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},i.t=function(n,e){if(1&e&&(n=i(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var t=Object.create(null);if(i.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var r in n)i.d(t,r,function(e){return n[e]}.bind(null,r));return t},i.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return i.d(e,"a",e),e},i.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},i.p="/ccc-docs/",i.oe=function(n){throw console.error(n),n};var s=window.webpackJsonp=window.webpackJsonp||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var p=c;o.push([232,0]),t()}([function(n,e){var t=function(n){return n&&n.Math==Math&&n};n.exports=t("object"==typeof globalThis&&globalThis)||t("object"==typeof window&&window)||t("object"==typeof self&&self)||t("object"==typeof global&&global)||function(){return this}()||Function("return this")()},function(n,e,t){var r=t(60),a=Function.prototype,o=a.bind,i=a.call,s=r&&o.bind(i,i);n.exports=r?function(n){return n&&s(n)}:function(n){return n&&function(){return i.apply(n,arguments)}}},function(n,e,t){var r=t(0),a=t(39).f,o=t(23),i=t(14),s=t(108),c=t(114),l=t(100);n.exports=function(n,e){var t,p,u,f,d,m=n.target,h=n.global,b=n.stat;if(t=h?r:b?r[m]||s(m,{}):(r[m]||{}).prototype)for(p in e){if(f=e[p],u=n.noTargetGet?(d=a(t,p))&&d.value:t[p],!l(h?p:m+(b?".":"#")+p,n.forced)&&void 0!==u){if(typeof f==typeof u)continue;c(f,u)}(n.sham||u&&u.sham)&&o(f,"sham",!0),i(t,p,f,n)}}},function(n,e){n.exports=function(n){try{return!!n()}catch(n){return!0}}},function(n,e){n.exports=function(n){return"function"==typeof n}},function(n,e,t){var r=t(0),a=t(76),o=t(10),i=t(77),s=t(109),c=t(151),l=a("wks"),p=r.Symbol,u=p&&p.for,f=c?p:p&&p.withoutSetter||i;n.exports=function(n){if(!o(l,n)||!s&&"string"!=typeof l[n]){var e="Symbol."+n;s&&o(p,n)?l[n]=p[n]:l[n]=c&&u?u(e):f(e)}return l[n]}},function(n,e,t){var r=t(117),a=t(14),o=t(248);r||a(Object.prototype,"toString",o,{unsafe:!0})},function(n,e,t){var r=t(0),a=t(8),o=r.String,i=r.TypeError;n.exports=function(n){if(a(n))return n;throw i(o(n)+" is not an object")}},function(n,e,t){var r=t(4);n.exports=function(n){return"object"==typeof n?null!==n:r(n)}},function(n,e,t){var r=t(3);n.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(n,e,t){var r=t(1),a=t(15),o=r({}.hasOwnProperty);n.exports=Object.hasOwn||function(n,e){return o(a(n),e)}},function(n,e,t){var r=t(60),a=Function.prototype.call;n.exports=r?a.bind(a):function(){return a.apply(a,arguments)}},function(n,e,t){var r=t(0),a=t(73),o=r.String;n.exports=function(n){if("Symbol"===a(n))throw TypeError("Cannot convert a Symbol value to a string");return o(n)}},function(n,e,t){var r=t(0),a=t(9),o=t(153),i=t(152),s=t(7),c=t(79),l=r.TypeError,p=Object.defineProperty,u=Object.getOwnPropertyDescriptor;e.f=a?i?function(n,e,t){if(s(n),e=c(e),s(t),"function"==typeof n&&"prototype"===e&&"value"in t&&"writable"in t&&!t.writable){var r=u(n,e);r&&r.writable&&(n[e]=t.value,t={configurable:"configurable"in t?t.configurable:r.configurable,enumerable:"enumerable"in t?t.enumerable:r.enumerable,writable:!1})}return p(n,e,t)}:p:function(n,e,t){if(s(n),e=c(e),s(t),o)try{return p(n,e,t)}catch(n){}if("get"in t||"set"in t)throw l("Accessors not supported");return"value"in t&&(n[e]=t.value),n}},function(n,e,t){var r=t(0),a=t(4),o=t(10),i=t(23),s=t(108),c=t(84),l=t(36),p=t(63).CONFIGURABLE,u=l.get,f=l.enforce,d=String(String).split("String");(n.exports=function(n,e,t,c){var l,u=!!c&&!!c.unsafe,m=!!c&&!!c.enumerable,h=!!c&&!!c.noTargetGet,b=c&&void 0!==c.name?c.name:e;a(t)&&("Symbol("===String(b).slice(0,7)&&(b="["+String(b).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!o(t,"name")||p&&t.name!==b)&&i(t,"name",b),(l=f(t)).source||(l.source=d.join("string"==typeof b?b:""))),n!==r?(u?!h&&n[e]&&(m=!0):delete n[e],m?n[e]=t:i(n,e,t)):m?n[e]=t:s(e,t)})(Function.prototype,"toString",(function(){return a(this)&&u(this).source||c(this)}))},function(n,e,t){var r=t(0),a=t(17),o=r.Object;n.exports=function(n){return o(a(n))}},function(n,e,t){var r=t(0),a=t(4),o=function(n){return a(n)?n:void 0};n.exports=function(n,e){return arguments.length<2?o(r[n]):r[n]&&r[n][e]}},function(n,e,t){var r=t(0).TypeError;n.exports=function(n){if(null==n)throw r("Can't call method on "+n);return n}},function(n,e,t){"use strict";var r=t(2),a=t(90);r({target:"RegExp",proto:!0,forced:/./.exec!==a},{exec:a})},function(n,e,t){var r=t(59),a=t(17);n.exports=function(n){return r(a(n))}},function(n,e,t){var r=t(50);n.exports=function(n){return r(n.length)}},function(n,e,t){var r=t(1),a=r({}.toString),o=r("".slice);n.exports=function(n){return o(a(n),8,-1)}},function(n,e){n.exports=!1},function(n,e,t){var r=t(9),a=t(13),o=t(47);n.exports=r?function(n,e,t){return a.f(n,e,o(1,t))}:function(n,e,t){return n[e]=t,n}},function(n,e,t){"use strict";var r=t(170).charAt,a=t(12),o=t(36),i=t(157),s=o.set,c=o.getterFor("String Iterator");i(String,"String",(function(n){s(this,{type:"String Iterator",string:a(n),index:0})}),(function(){var n,e=c(this),t=e.string,a=e.index;return a>=t.length?{value:void 0,done:!0}:(n=r(t,a),e.index+=n.length,{value:n,done:!1})}))},function(n,e,t){var r=t(14),a=t(264),o=Error.prototype;o.toString!==a&&r(o,"toString",a)},function(n,e){var t=Array.isArray;n.exports=t},function(n,e,t){var r=t(16);n.exports=r("navigator","userAgent")||""},function(n,e,t){var r=t(186),a="object"==typeof self&&self&&self.Object===Object&&self,o=r||a||Function("return this")();n.exports=o},function(n,e,t){"use strict";function r(n,e,t,r,a,o,i,s){var c,l="function"==typeof n?n.options:n;if(e&&(l.render=e,l.staticRenderFns=t,l._compiled=!0),r&&(l.functional=!0),o&&(l._scopeId="data-v-"+o),i?(c=function(n){(n=n||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(n=__VUE_SSR_CONTEXT__),a&&a.call(this,n),n&&n._registeredComponents&&n._registeredComponents.add(i)},l._ssrRegister=c):a&&(c=s?function(){a.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:a),c)if(l.functional){l._injectStyles=c;var p=l.render;l.render=function(n,e){return c.call(e),p(n,e)}}else{var u=l.beforeCreate;l.beforeCreate=u?[].concat(u,c):[c]}return{exports:n,options:l}}t.d(e,"a",(function(){return r}))},function(n,e,t){"use strict";var r=t(2),a=t(54).filter;r({target:"Array",proto:!0,forced:!t(88)("filter")},{filter:function(n){return a(this,n,arguments.length>1?arguments[1]:void 0)}})},function(n,e,t){var r=t(0),a=t(171),o=t(172),i=t(139),s=t(23),c=t(5),l=c("iterator"),p=c("toStringTag"),u=i.values,f=function(n,e){if(n){if(n[l]!==u)try{s(n,l,u)}catch(e){n[l]=u}if(n[p]||s(n,p,e),a[e])for(var t in i)if(n[t]!==i[t])try{s(n,t,i[t])}catch(e){n[t]=i[t]}}};for(var d in a)f(r[d]&&r[d].prototype,d);f(o,"DOMTokenList")},function(n,e,t){var r,a=t(7),o=t(140),i=t(112),s=t(61),c=t(156),l=t(78),p=t(83),u=p("IE_PROTO"),f=function(){},d=function(n){return"<script>"+n+"<\/script>"},m=function(n){n.write(d("")),n.close();var e=n.parentWindow.Object;return n=null,e},h=function(){try{r=new ActiveXObject("htmlfile")}catch(n){}var n,e;h="undefined"!=typeof document?document.domain&&r?m(r):((e=l("iframe")).style.display="none",c.appendChild(e),e.src=String("javascript:"),(n=e.contentWindow.document).open(),n.write(d("document.F=Object")),n.close(),n.F):m(r);for(var t=i.length;t--;)delete h.prototype[i[t]];return h()};s[u]=!0,n.exports=Object.create||function(n,e){var t;return null!==n?(f.prototype=a(n),t=new f,f.prototype=null,t[u]=n):t=h(),void 0===e?t:o.f(t,e)}},function(n,e,t){var r=t(1);n.exports=r({}.isPrototypeOf)},function(n,e,t){var r=t(60),a=Function.prototype,o=a.apply,i=a.call;n.exports="object"==typeof Reflect&&Reflect.apply||(r?i.bind(o):function(){return i.apply(o,arguments)})},function(n,e,t){var r=t(0),a=t(4),o=t(81),i=r.TypeError;n.exports=function(n){if(a(n))return n;throw i(o(n)+" is not a function")}},function(n,e,t){var r,a,o,i=t(234),s=t(0),c=t(1),l=t(8),p=t(23),u=t(10),f=t(107),d=t(83),m=t(61),h=s.TypeError,b=s.WeakMap;if(i||f.state){var g=f.state||(f.state=new b),v=c(g.get),y=c(g.has),x=c(g.set);r=function(n,e){if(y(g,n))throw new h("Object already initialized");return e.facade=n,x(g,n,e),e},a=function(n){return v(g,n)||{}},o=function(n){return y(g,n)}}else{var w=d("state");m[w]=!0,r=function(n,e){if(u(n,w))throw new h("Object already initialized");return e.facade=n,p(n,w,e),e},a=function(n){return u(n,w)?n[w]:{}},o=function(n){return u(n,w)}}n.exports={set:r,get:a,has:o,enforce:function(n){return o(n)?a(n):r(n,{})},getterFor:function(n){return function(e){var t;if(!l(e)||(t=a(e)).type!==n)throw h("Incompatible receiver, "+n+" required");return t}}}},function(n,e,t){"use strict";var r=t(2),a=t(176);r({target:"Array",proto:!0,forced:[].forEach!=a},{forEach:a})},function(n,e,t){var r=t(0),a=t(171),o=t(172),i=t(176),s=t(23),c=function(n){if(n&&n.forEach!==i)try{s(n,"forEach",i)}catch(e){n.forEach=i}};for(var l in a)a[l]&&c(r[l]&&r[l].prototype);c(o)},function(n,e,t){var r=t(9),a=t(11),o=t(113),i=t(47),s=t(19),c=t(79),l=t(10),p=t(153),u=Object.getOwnPropertyDescriptor;e.f=r?u:function(n,e){if(n=s(n),e=c(e),p)try{return u(n,e)}catch(n){}if(l(n,e))return i(!a(o.f,n,e),n[e])}},function(n,e,t){var r=t(2),a=t(0),o=t(34),i=t(260),s=a.WebAssembly,c=7!==Error("e",{cause:7}).cause,l=function(n,e){var t={};t[n]=i(n,e,c),r({global:!0,forced:c},t)},p=function(n,e){if(s&&s[n]){var t={};t[n]=i("WebAssembly."+n,e,c),r({target:"WebAssembly",stat:!0,forced:c},t)}};l("Error",(function(n){return function(e){return o(n,this,arguments)}})),l("EvalError",(function(n){return function(e){return o(n,this,arguments)}})),l("RangeError",(function(n){return function(e){return o(n,this,arguments)}})),l("ReferenceError",(function(n){return function(e){return o(n,this,arguments)}})),l("SyntaxError",(function(n){return function(e){return o(n,this,arguments)}})),l("TypeError",(function(n){return function(e){return o(n,this,arguments)}})),l("URIError",(function(n){return function(e){return o(n,this,arguments)}})),p("CompileError",(function(n){return function(e){return o(n,this,arguments)}})),p("LinkError",(function(n){return function(e){return o(n,this,arguments)}})),p("RuntimeError",(function(n){return function(e){return o(n,this,arguments)}}))},function(n,e,t){var r=t(284),a=t(287);n.exports=function(n,e){var t=a(n,e);return r(t)?t:void 0}},function(n,e,t){"use strict";t.d(e,"e",(function(){return r})),t.d(e,"b",(function(){return o})),t.d(e,"j",(function(){return i})),t.d(e,"g",(function(){return c})),t.d(e,"h",(function(){return l})),t.d(e,"i",(function(){return p})),t.d(e,"c",(function(){return u})),t.d(e,"f",(function(){return f})),t.d(e,"l",(function(){return d})),t.d(e,"m",(function(){return m})),t.d(e,"d",(function(){return b})),t.d(e,"k",(function(){return g})),t.d(e,"n",(function(){return v})),t.d(e,"a",(function(){return x}));t(18),t(44),t(134),t(72),t(132),t(106),t(43),t(37),t(6),t(38),t(30),t(75),t(98),t(150),t(70),t(206),t(25),t(138);var r=/#.*$/,a=/\.(md|html)$/,o=/\/$/,i=/^[a-z]+:/i;function s(n){return decodeURI(n).replace(r,"").replace(a,"")}function c(n){return i.test(n)}function l(n){return/^mailto:/.test(n)}function p(n){return/^tel:/.test(n)}function u(n){if(c(n))return n;var e=n.match(r),t=e?e[0]:"",a=s(n);return o.test(a)?n:a+".html"+t}function f(n,e){var t=n.hash,a=function(n){var e=n.match(r);if(e)return e[0]}(e);return(!a||t===a)&&s(n.path)===s(e)}function d(n,e,t){if(c(e))return{type:"external",path:e};t&&(e=function(n,e,t){var r=n.charAt(0);if("/"===r)return n;if("?"===r||"#"===r)return e+n;var a=e.split("/");t&&a[a.length-1]||a.pop();for(var o=n.replace(/^\//,"").split("/"),i=0;i<o.length;i++){var s=o[i];".."===s?a.pop():"."!==s&&a.push(s)}""!==a[0]&&a.unshift("");return a.join("/")}(e,t));for(var r=s(e),a=0;a<n.length;a++)if(s(n[a].regularPath)===r)return Object.assign({},n[a],{type:"page",path:u(n[a].path)});return console.error('[vuepress] No matching page found for sidebar item "'.concat(e,'"')),{}}function m(n,e,t,r){var a=t.pages,o=t.themeConfig,i=r&&o.locales&&o.locales[r]||o;if("auto"===(n.frontmatter.sidebar||i.sidebar||o.sidebar))return h(n);var s=i.sidebar||o.sidebar;if(s){var c=function(n,e){if(Array.isArray(e))return{base:"/",config:e};for(var t in e)if(0===(r=n,/(\.html|\/)$/.test(r)?r:r+"/").indexOf(encodeURI(t)))return{base:t,config:e[t]};var r;return{}}(e,s),l=c.base,p=c.config;return"auto"===p?h(n):p?p.map((function(n){return function n(e,t,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if("string"==typeof e)return d(t,e,r);if(Array.isArray(e))return Object.assign(d(t,e[0],r),{title:e[1]});a>3&&console.error("[vuepress] detected a too deep nested sidebar group.");var o=e.children||[];return 0===o.length&&e.path?Object.assign(d(t,e.path,r),{title:e.title}):{type:"group",path:e.path,title:e.title,sidebarDepth:e.sidebarDepth,initialOpenGroupIndex:e.initialOpenGroupIndex,children:o.map((function(e){return n(e,t,r,a+1)})),collapsable:!1!==e.collapsable}}(n,a,l)})):[]}return[]}function h(n){var e=b(n.headers||[]);return[{type:"group",collapsable:!1,title:n.title,path:null,children:e.map((function(e){return{type:"auto",title:e.title,basePath:n.path,path:n.path+"#"+e.slug,children:e.children||[]}}))}]}function b(n){var e;return(n=n.map((function(n){return Object.assign({},n)}))).forEach((function(n){2===n.level?e=n:e&&(e.children||(e.children=[])).push(n)})),n.filter((function(n){return 2===n.level}))}function g(n){return Object.assign(n,{type:n.items&&n.items.length?"links":"link"})}function v(n){return Object.prototype.toString.call(n).match(/\[object (.*?)\]/)[1].toLowerCase()}function y(n){var e=n.frontmatter.date||n.lastUpdated||new Date,t=new Date(e);return"Invalid Date"==t&&e&&(t=new Date(e.replace(/-/g,"/"))),t.getTime()}function x(n,e){return y(e)-y(n)}},function(n,e,t){"use strict";var r=t(2),a=t(54).map;r({target:"Array",proto:!0,forced:!t(88)("map")},{map:function(n){return a(this,n,arguments.length>1?arguments[1]:void 0)}})},function(n,e,t){"use strict";var r=t(34),a=t(11),o=t(1),i=t(104),s=t(3),c=t(7),l=t(4),p=t(52),u=t(50),f=t(12),d=t(17),m=t(121),h=t(46),b=t(265),g=t(105),v=t(5)("replace"),y=Math.max,x=Math.min,w=o([].concat),S=o([].push),_=o("".indexOf),k=o("".slice),C="$0"==="a".replace(/./,"$0"),A=!!/./[v]&&""===/./[v]("a","$0");i("replace",(function(n,e,t){var o=A?"$":"$0";return[function(n,t){var r=d(this),o=null==n?void 0:h(n,v);return o?a(o,n,r,t):a(e,f(r),n,t)},function(n,a){var i=c(this),s=f(n);if("string"==typeof a&&-1===_(a,o)&&-1===_(a,"$<")){var d=t(e,i,s,a);if(d.done)return d.value}var h=l(a);h||(a=f(a));var v=i.global;if(v){var C=i.unicode;i.lastIndex=0}for(var A=[];;){var j=g(i,s);if(null===j)break;if(S(A,j),!v)break;""===f(j[0])&&(i.lastIndex=m(s,u(i.lastIndex),C))}for(var P,T="",O=0,E=0;E<A.length;E++){for(var B=f((j=A[E])[0]),I=y(x(p(j.index),s.length),0),L=[],M=1;M<j.length;M++)S(L,void 0===(P=j[M])?P:String(P));var D=j.groups;if(h){var R=w([B],L,I,s);void 0!==D&&S(R,D);var $=f(r(a,void 0,R))}else $=b(B,s,I,L,D,a);I>=O&&(T+=k(s,O,I)+$,O=I+B.length)}return T+k(s,O)}]}),!!s((function(){var n=/./;return n.exec=function(){var n=[];return n.groups={a:"7"},n},"7"!=="".replace(n,"$<a>")}))||!C||A)},function(n,e,t){"use strict";var r=t(3);n.exports=function(n,e){var t=[][n];return!!t&&r((function(){t.call(null,e||function(){throw 1},1)}))}},function(n,e,t){var r=t(35);n.exports=function(n,e){var t=n[e];return null==t?void 0:r(t)}},function(n,e){n.exports=function(n,e){return{enumerable:!(1&n),configurable:!(2&n),writable:!(4&n),value:e}}},function(n,e){n.exports=function(n){return null!=n&&"object"==typeof n}},function(n,e,t){var r,a,o=t(0),i=t(27),s=o.process,c=o.Deno,l=s&&s.versions||c&&c.version,p=l&&l.v8;p&&(a=(r=p.split("."))[0]>0&&r[0]<4?1:+(r[0]+r[1])),!a&&i&&(!(r=i.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=i.match(/Chrome\/(\d+)/))&&(a=+r[1]),n.exports=a},function(n,e,t){var r=t(52),a=Math.min;n.exports=function(n){return n>0?a(r(n),9007199254740991):0}},function(n,e,t){"use strict";var r=t(2),a=t(0),o=t(57),i=t(85),s=t(8),c=t(111),l=t(20),p=t(19),u=t(66),f=t(5),d=t(88),m=t(65),h=d("slice"),b=f("species"),g=a.Array,v=Math.max;r({target:"Array",proto:!0,forced:!h},{slice:function(n,e){var t,r,a,f=p(this),d=l(f),h=c(n,d),y=c(void 0===e?d:e,d);if(o(f)&&(t=f.constructor,(i(t)&&(t===g||o(t.prototype))||s(t)&&null===(t=t[b]))&&(t=void 0),t===g||void 0===t))return m(f,h,y);for(r=new(void 0===t?g:t)(v(y-h,0)),a=0;h<y;h++,a++)h in f&&u(r,a,f[h]);return r.length=a,r}})},function(n,e){var t=Math.ceil,r=Math.floor;n.exports=function(n){var e=+n;return e!=e||0===e?0:(e>0?r:t)(e)}},function(n,e,t){var r=t(1),a=t(35),o=t(60),i=r(r.bind);n.exports=function(n,e){return a(n),void 0===e?n:o?i(n,e):function(){return n.apply(e,arguments)}}},function(n,e,t){var r=t(53),a=t(1),o=t(59),i=t(15),s=t(20),c=t(142),l=a([].push),p=function(n){var e=1==n,t=2==n,a=3==n,p=4==n,u=6==n,f=7==n,d=5==n||u;return function(m,h,b,g){for(var v,y,x=i(m),w=o(x),S=r(h,b),_=s(w),k=0,C=g||c,A=e?C(m,_):t||f?C(m,0):void 0;_>k;k++)if((d||k in w)&&(y=S(v=w[k],k,x),n))if(e)A[k]=y;else if(y)switch(n){case 3:return!0;case 5:return v;case 6:return k;case 2:l(A,v)}else switch(n){case 4:return!1;case 7:l(A,v)}return u?-1:a||p?p:A}};n.exports={forEach:p(0),map:p(1),filter:p(2),some:p(3),every:p(4),find:p(5),findIndex:p(6),filterReject:p(7)}},function(n,e,t){var r=t(155),a=t(112).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(n){return r(n,a)}},function(n,e,t){var r=t(13).f,a=t(10),o=t(5)("toStringTag");n.exports=function(n,e,t){n&&!t&&(n=n.prototype),n&&!a(n,o)&&r(n,o,{configurable:!0,value:e})}},function(n,e,t){var r=t(21);n.exports=Array.isArray||function(n){return"Array"==r(n)}},function(n,e,t){var r=t(67),a=t(269),o=t(270),i=r?r.toStringTag:void 0;n.exports=function(n){return null==n?void 0===n?"[object Undefined]":"[object Null]":i&&i in Object(n)?a(n):o(n)}},function(n,e,t){var r=t(0),a=t(1),o=t(3),i=t(21),s=r.Object,c=a("".split);n.exports=o((function(){return!s("z").propertyIsEnumerable(0)}))?function(n){return"String"==i(n)?c(n,""):s(n)}:s},function(n,e,t){var r=t(3);n.exports=!r((function(){var n=function(){}.bind();return"function"!=typeof n||n.hasOwnProperty("prototype")}))},function(n,e){n.exports={}},function(n,e){n.exports={}},function(n,e,t){var r=t(9),a=t(10),o=Function.prototype,i=r&&Object.getOwnPropertyDescriptor,s=a(o,"name"),c=s&&"something"===function(){}.name,l=s&&(!r||r&&i(o,"name").configurable);n.exports={EXISTS:s,PROPER:c,CONFIGURABLE:l}},function(n,e,t){var r=t(1),a=t(7),o=t(235);n.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var n,e=!1,t={};try{(n=r(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(t,[]),e=t instanceof Array}catch(n){}return function(t,r){return a(t),o(r),e?n(t,r):t.__proto__=r,t}}():void 0)},function(n,e,t){var r=t(1);n.exports=r([].slice)},function(n,e,t){"use strict";var r=t(79),a=t(13),o=t(47);n.exports=function(n,e,t){var i=r(e);i in n?a.f(n,i,o(0,t)):n[i]=t}},function(n,e,t){var r=t(28).Symbol;n.exports=r},function(n,e,t){"use strict";t.d(e,"a",(function(){return o}));t(75);var r=t(69);t(74),t(89),t(6),t(120),t(24),t(31),t(181);var a=t(96);t(40),t(25);function o(n){return function(n){if(Array.isArray(n))return Object(r.a)(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||Object(a.a)(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(n,e,t){"use strict";function r(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}t.d(e,"a",(function(){return r}))},function(n,e,t){"use strict";var r=t(2),a=t(0),o=t(3),i=t(57),s=t(8),c=t(15),l=t(20),p=t(66),u=t(142),f=t(88),d=t(5),m=t(49),h=d("isConcatSpreadable"),b=a.TypeError,g=m>=51||!o((function(){var n=[];return n[h]=!1,n.concat()[0]!==n})),v=f("concat"),y=function(n){if(!s(n))return!1;var e=n[h];return void 0!==e?!!e:i(n)};r({target:"Array",proto:!0,forced:!g||!v},{concat:function(n){var e,t,r,a,o,i=c(this),s=u(i,0),f=0;for(e=-1,r=arguments.length;e<r;e++)if(y(o=-1===e?i:arguments[e])){if(f+(a=l(o))>9007199254740991)throw b("Maximum allowed index exceeded");for(t=0;t<a;t++,f++)t in o&&p(s,f,o[t])}else{if(f>=9007199254740991)throw b("Maximum allowed index exceeded");p(s,f++,o)}return s.length=f,s}})},function(n,e,t){var r=t(2),a=t(0),o=t(34),i=t(4),s=t(27),c=t(65),l=/MSIE .\./.test(s),p=a.Function,u=function(n){return function(e,t){var r=arguments.length>2,a=r?c(arguments,2):void 0;return n(r?function(){o(i(e)?e:p(e),this,a)}:e,t)}};r({global:!0,bind:!0,forced:l},{setTimeout:u(a.setTimeout),setInterval:u(a.setInterval)})},function(n,e,t){"use strict";t(18);var r,a,o=t(2),i=t(0),s=t(11),c=t(1),l=t(4),p=t(8),u=(r=!1,(a=/[ac]/).exec=function(){return r=!0,/./.exec.apply(this,arguments)},!0===a.test("abc")&&r),f=i.Error,d=c(/./.test);o({target:"RegExp",proto:!0,forced:!u},{test:function(n){var e=this.exec;if(!l(e))return d(this,n);var t=s(e,this,n);if(null!==t&&!p(t))throw new f("RegExp exec method returned something other than an Object or null");return!!t}})},function(n,e,t){var r=t(0),a=t(117),o=t(4),i=t(21),s=t(5)("toStringTag"),c=r.Object,l="Arguments"==i(function(){return arguments}());n.exports=a?i:function(n){var e,t,r;return void 0===n?"Undefined":null===n?"Null":"string"==typeof(t=function(n,e){try{return n[e]}catch(n){}}(e=c(n),s))?t:l?i(e):"Object"==(r=i(e))&&o(e.callee)?"Arguments":r}},function(n,e,t){"use strict";var r=t(2),a=t(0),o=t(16),i=t(34),s=t(11),c=t(1),l=t(22),p=t(9),u=t(109),f=t(3),d=t(10),m=t(57),h=t(4),b=t(8),g=t(33),v=t(80),y=t(7),x=t(15),w=t(19),S=t(79),_=t(12),k=t(47),C=t(32),A=t(82),j=t(55),P=t(178),T=t(115),O=t(39),E=t(13),B=t(140),I=t(113),L=t(65),M=t(14),D=t(76),R=t(83),$=t(61),F=t(77),q=t(5),z=t(179),N=t(180),U=t(56),J=t(36),X=t(54).forEach,V=R("hidden"),H=q("toPrimitive"),Q=J.set,W=J.getterFor("Symbol"),G=Object.prototype,Y=a.Symbol,K=Y&&Y.prototype,Z=a.TypeError,nn=a.QObject,en=o("JSON","stringify"),tn=O.f,rn=E.f,an=P.f,on=I.f,sn=c([].push),cn=D("symbols"),ln=D("op-symbols"),pn=D("string-to-symbol-registry"),un=D("symbol-to-string-registry"),fn=D("wks"),dn=!nn||!nn.prototype||!nn.prototype.findChild,mn=p&&f((function(){return 7!=C(rn({},"a",{get:function(){return rn(this,"a",{value:7}).a}})).a}))?function(n,e,t){var r=tn(G,e);r&&delete G[e],rn(n,e,t),r&&n!==G&&rn(G,e,r)}:rn,hn=function(n,e){var t=cn[n]=C(K);return Q(t,{type:"Symbol",tag:n,description:e}),p||(t.description=e),t},bn=function(n,e,t){n===G&&bn(ln,e,t),y(n);var r=S(e);return y(t),d(cn,r)?(t.enumerable?(d(n,V)&&n[V][r]&&(n[V][r]=!1),t=C(t,{enumerable:k(0,!1)})):(d(n,V)||rn(n,V,k(1,{})),n[V][r]=!0),mn(n,r,t)):rn(n,r,t)},gn=function(n,e){y(n);var t=w(e),r=A(t).concat(wn(t));return X(r,(function(e){p&&!s(vn,t,e)||bn(n,e,t[e])})),n},vn=function(n){var e=S(n),t=s(on,this,e);return!(this===G&&d(cn,e)&&!d(ln,e))&&(!(t||!d(this,e)||!d(cn,e)||d(this,V)&&this[V][e])||t)},yn=function(n,e){var t=w(n),r=S(e);if(t!==G||!d(cn,r)||d(ln,r)){var a=tn(t,r);return!a||!d(cn,r)||d(t,V)&&t[V][r]||(a.enumerable=!0),a}},xn=function(n){var e=an(w(n)),t=[];return X(e,(function(n){d(cn,n)||d($,n)||sn(t,n)})),t},wn=function(n){var e=n===G,t=an(e?ln:w(n)),r=[];return X(t,(function(n){!d(cn,n)||e&&!d(G,n)||sn(r,cn[n])})),r};(u||(M(K=(Y=function(){if(g(K,this))throw Z("Symbol is not a constructor");var n=arguments.length&&void 0!==arguments[0]?_(arguments[0]):void 0,e=F(n),t=function(n){this===G&&s(t,ln,n),d(this,V)&&d(this[V],e)&&(this[V][e]=!1),mn(this,e,k(1,n))};return p&&dn&&mn(G,e,{configurable:!0,set:t}),hn(e,n)}).prototype,"toString",(function(){return W(this).tag})),M(Y,"withoutSetter",(function(n){return hn(F(n),n)})),I.f=vn,E.f=bn,B.f=gn,O.f=yn,j.f=P.f=xn,T.f=wn,z.f=function(n){return hn(q(n),n)},p&&(rn(K,"description",{configurable:!0,get:function(){return W(this).description}}),l||M(G,"propertyIsEnumerable",vn,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!u,sham:!u},{Symbol:Y}),X(A(fn),(function(n){N(n)})),r({target:"Symbol",stat:!0,forced:!u},{for:function(n){var e=_(n);if(d(pn,e))return pn[e];var t=Y(e);return pn[e]=t,un[t]=e,t},keyFor:function(n){if(!v(n))throw Z(n+" is not a symbol");if(d(un,n))return un[n]},useSetter:function(){dn=!0},useSimple:function(){dn=!1}}),r({target:"Object",stat:!0,forced:!u,sham:!p},{create:function(n,e){return void 0===e?C(n):gn(C(n),e)},defineProperty:bn,defineProperties:gn,getOwnPropertyDescriptor:yn}),r({target:"Object",stat:!0,forced:!u},{getOwnPropertyNames:xn,getOwnPropertySymbols:wn}),r({target:"Object",stat:!0,forced:f((function(){T.f(1)}))},{getOwnPropertySymbols:function(n){return T.f(x(n))}}),en)&&r({target:"JSON",stat:!0,forced:!u||f((function(){var n=Y();return"[null]"!=en([n])||"{}"!=en({a:n})||"{}"!=en(Object(n))}))},{stringify:function(n,e,t){var r=L(arguments),a=e;if((b(e)||void 0!==n)&&!v(n))return m(e)||(e=function(n,e){if(h(a)&&(e=s(a,this,n,e)),!v(e))return e}),r[1]=e,i(en,null,r)}});if(!K[H]){var Sn=K.valueOf;M(K,H,(function(n){return s(Sn,this)}))}U(Y,"Symbol"),$[V]=!0},function(n,e,t){t(2)({target:"Array",stat:!0},{isArray:t(57)})},function(n,e,t){var r=t(22),a=t(107);(n.exports=function(n,e){return a[n]||(a[n]=void 0!==e?e:{})})("versions",[]).push({version:"3.20.3",mode:r?"pure":"global",copyright:"Â© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.20.3/LICENSE",source:"https://github.com/zloirock/core-js"})},function(n,e,t){var r=t(1),a=0,o=Math.random(),i=r(1..toString);n.exports=function(n){return"Symbol("+(void 0===n?"":n)+")_"+i(++a+o,36)}},function(n,e,t){var r=t(0),a=t(8),o=r.document,i=a(o)&&a(o.createElement);n.exports=function(n){return i?o.createElement(n):{}}},function(n,e,t){var r=t(154),a=t(80);n.exports=function(n){var e=r(n,"string");return a(e)?e:e+""}},function(n,e,t){var r=t(0),a=t(16),o=t(4),i=t(33),s=t(151),c=r.Object;n.exports=s?function(n){return"symbol"==typeof n}:function(n){var e=a("Symbol");return o(e)&&i(e.prototype,c(n))}},function(n,e,t){var r=t(0).String;n.exports=function(n){try{return r(n)}catch(n){return"Object"}}},function(n,e,t){var r=t(155),a=t(112);n.exports=Object.keys||function(n){return r(n,a)}},function(n,e,t){var r=t(76),a=t(77),o=r("keys");n.exports=function(n){return o[n]||(o[n]=a(n))}},function(n,e,t){var r=t(1),a=t(4),o=t(107),i=r(Function.toString);a(o.inspectSource)||(o.inspectSource=function(n){return i(n)}),n.exports=o.inspectSource},function(n,e,t){var r=t(1),a=t(3),o=t(4),i=t(73),s=t(16),c=t(84),l=function(){},p=[],u=s("Reflect","construct"),f=/^\s*(?:class|function)\b/,d=r(f.exec),m=!f.exec(l),h=function(n){if(!o(n))return!1;try{return u(l,p,n),!0}catch(n){return!1}},b=function(n){if(!o(n))return!1;switch(i(n)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return m||!!d(f,c(n))}catch(n){return!0}};b.sham=!0,n.exports=!u||a((function(){var n;return h(h.call)||!h(Object)||!h((function(){n=!0}))||n}))?b:h},function(n,e,t){var r=t(21),a=t(0);n.exports="process"==r(a.process)},function(n,e,t){"use strict";t.d(e,"a",(function(){return a}));t(6);function r(n,e,t,r,a,o,i){try{var s=n[o](i),c=s.value}catch(n){return void t(n)}s.done?e(c):Promise.resolve(c).then(r,a)}function a(n){return function(){var e=this,t=arguments;return new Promise((function(a,o){var i=n.apply(e,t);function s(n){r(i,a,o,s,c,"next",n)}function c(n){r(i,a,o,s,c,"throw",n)}s(void 0)}))}}},function(n,e,t){var r=t(3),a=t(5),o=t(49),i=a("species");n.exports=function(n){return o>=51||!r((function(){var e=[];return(e.constructor={})[i]=function(){return{foo:1}},1!==e[n](Boolean).foo}))}},function(n,e,t){"use strict";var r=t(2),a=t(9),o=t(0),i=t(1),s=t(10),c=t(4),l=t(33),p=t(12),u=t(13).f,f=t(114),d=o.Symbol,m=d&&d.prototype;if(a&&c(d)&&(!("description"in m)||void 0!==d().description)){var h={},b=function(){var n=arguments.length<1||void 0===arguments[0]?void 0:p(arguments[0]),e=l(m,this)?new d(n):void 0===n?d():d(n);return""===n&&(h[e]=!0),e};f(b,d),b.prototype=m,m.constructor=b;var g="Symbol(test)"==String(d("test")),v=i(m.toString),y=i(m.valueOf),x=/^Symbol\((.*)\)[^)]+$/,w=i("".replace),S=i("".slice);u(m,"description",{configurable:!0,get:function(){var n=y(this),e=v(n);if(s(h,n))return"";var t=g?S(e,7,-1):w(e,x,"$1");return""===t?void 0:t}}),r({global:!0,forced:!0},{Symbol:b})}},function(n,e,t){"use strict";var r,a,o=t(11),i=t(1),s=t(12),c=t(144),l=t(103),p=t(76),u=t(32),f=t(36).get,d=t(219),m=t(225),h=p("native-string-replace",String.prototype.replace),b=RegExp.prototype.exec,g=b,v=i("".charAt),y=i("".indexOf),x=i("".replace),w=i("".slice),S=(a=/b*/g,o(b,r=/a/,"a"),o(b,a,"a"),0!==r.lastIndex||0!==a.lastIndex),_=l.BROKEN_CARET,k=void 0!==/()??/.exec("")[1];(S||k||_||d||m)&&(g=function(n){var e,t,r,a,i,l,p,d=this,m=f(d),C=s(n),A=m.raw;if(A)return A.lastIndex=d.lastIndex,e=o(g,A,C),d.lastIndex=A.lastIndex,e;var j=m.groups,P=_&&d.sticky,T=o(c,d),O=d.source,E=0,B=C;if(P&&(T=x(T,"y",""),-1===y(T,"g")&&(T+="g"),B=w(C,d.lastIndex),d.lastIndex>0&&(!d.multiline||d.multiline&&"\n"!==v(C,d.lastIndex-1))&&(O="(?: "+O+")",B=" "+B,E++),t=new RegExp("^(?:"+O+")",T)),k&&(t=new RegExp("^"+O+"$(?!\\s)",T)),S&&(r=d.lastIndex),a=o(b,P?t:d,B),P?a?(a.input=w(a.input,E),a[0]=w(a[0],E),a.index=d.lastIndex,d.lastIndex+=a[0].length):d.lastIndex=0:S&&a&&(d.lastIndex=d.global?a.index+a[0].length:r),k&&a&&a.length>1&&o(h,a[0],t,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(a[i]=void 0)})),a&&j)for(a.groups=l=u(null),i=0;i<j.length;i++)l[(p=j[i])[0]]=a[p[1]];return a}),n.exports=g},function(n,e,t){var r=t(274),a=t(275),o=t(276),i=t(277),s=t(278);function c(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=a,c.prototype.get=o,c.prototype.has=i,c.prototype.set=s,n.exports=c},function(n,e,t){var r=t(188);n.exports=function(n,e){for(var t=n.length;t--;)if(r(n[t][0],e))return t;return-1}},function(n,e,t){var r=t(41)(Object,"create");n.exports=r},function(n,e,t){var r=t(296);n.exports=function(n,e){var t=n.__data__;return r(e)?t["string"==typeof e?"string":"hash"]:t.map}},function(n,e,t){var r=t(129);n.exports=function(n){if("string"==typeof n||r(n))return n;var e=n+"";return"0"==e&&1/n==-1/0?"-0":e}},function(n,e,t){"use strict";t.d(e,"a",(function(){return a}));t(51),t(6),t(102),t(181),t(24),t(18),t(72);var r=t(69);function a(n,e){if(n){if("string"==typeof n)return Object(r.a)(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);return"Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t?Array.from(n):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Object(r.a)(n,e):void 0}}},function(n,e,t){var r,a;
/* NProgress, (c) 2013, 2014 Rico Sta. Cruz - http://ricostacruz.com/nprogress
 * @license MIT */void 0===(a="function"==typeof(r=function(){var n,e,t={version:"0.2.0"},r=t.settings={minimum:.08,easing:"ease",positionUsing:"",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};function a(n,e,t){return n<e?e:n>t?t:n}function o(n){return 100*(-1+n)}t.configure=function(n){var e,t;for(e in n)void 0!==(t=n[e])&&n.hasOwnProperty(e)&&(r[e]=t);return this},t.status=null,t.set=function(n){var e=t.isStarted();n=a(n,r.minimum,1),t.status=1===n?null:n;var c=t.render(!e),l=c.querySelector(r.barSelector),p=r.speed,u=r.easing;return c.offsetWidth,i((function(e){""===r.positionUsing&&(r.positionUsing=t.getPositioningCSS()),s(l,function(n,e,t){var a;return(a="translate3d"===r.positionUsing?{transform:"translate3d("+o(n)+"%,0,0)"}:"translate"===r.positionUsing?{transform:"translate("+o(n)+"%,0)"}:{"margin-left":o(n)+"%"}).transition="all "+e+"ms "+t,a}(n,p,u)),1===n?(s(c,{transition:"none",opacity:1}),c.offsetWidth,setTimeout((function(){s(c,{transition:"all "+p+"ms linear",opacity:0}),setTimeout((function(){t.remove(),e()}),p)}),p)):setTimeout(e,p)})),this},t.isStarted=function(){return"number"==typeof t.status},t.start=function(){t.status||t.set(0);var n=function(){setTimeout((function(){t.status&&(t.trickle(),n())}),r.trickleSpeed)};return r.trickle&&n(),this},t.done=function(n){return n||t.status?t.inc(.3+.5*Math.random()).set(1):this},t.inc=function(n){var e=t.status;return e?("number"!=typeof n&&(n=(1-e)*a(Math.random()*e,.1,.95)),e=a(e+n,0,.994),t.set(e)):t.start()},t.trickle=function(){return t.inc(Math.random()*r.trickleRate)},n=0,e=0,t.promise=function(r){return r&&"resolved"!==r.state()?(0===e&&t.start(),n++,e++,r.always((function(){0==--e?(n=0,t.done()):t.set((n-e)/n)})),this):this},t.render=function(n){if(t.isRendered())return document.getElementById("nprogress");l(document.documentElement,"nprogress-busy");var e=document.createElement("div");e.id="nprogress",e.innerHTML=r.template;var a,i=e.querySelector(r.barSelector),c=n?"-100":o(t.status||0),p=document.querySelector(r.parent);return s(i,{transition:"all 0 linear",transform:"translate3d("+c+"%,0,0)"}),r.showSpinner||(a=e.querySelector(r.spinnerSelector))&&f(a),p!=document.body&&l(p,"nprogress-custom-parent"),p.appendChild(e),e},t.remove=function(){p(document.documentElement,"nprogress-busy"),p(document.querySelector(r.parent),"nprogress-custom-parent");var n=document.getElementById("nprogress");n&&f(n)},t.isRendered=function(){return!!document.getElementById("nprogress")},t.getPositioningCSS=function(){var n=document.body.style,e="WebkitTransform"in n?"Webkit":"MozTransform"in n?"Moz":"msTransform"in n?"ms":"OTransform"in n?"O":"";return e+"Perspective"in n?"translate3d":e+"Transform"in n?"translate":"margin"};var i=function(){var n=[];function e(){var t=n.shift();t&&t(e)}return function(t){n.push(t),1==n.length&&e()}}(),s=function(){var n=["Webkit","O","Moz","ms"],e={};function t(t){return t=t.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,(function(n,e){return e.toUpperCase()})),e[t]||(e[t]=function(e){var t=document.body.style;if(e in t)return e;for(var r,a=n.length,o=e.charAt(0).toUpperCase()+e.slice(1);a--;)if((r=n[a]+o)in t)return r;return e}(t))}function r(n,e,r){e=t(e),n.style[e]=r}return function(n,e){var t,a,o=arguments;if(2==o.length)for(t in e)void 0!==(a=e[t])&&e.hasOwnProperty(t)&&r(n,t,a);else r(n,o[1],o[2])}}();function c(n,e){return("string"==typeof n?n:u(n)).indexOf(" "+e+" ")>=0}function l(n,e){var t=u(n),r=t+e;c(t,e)||(n.className=r.substring(1))}function p(n,e){var t,r=u(n);c(n,e)&&(t=r.replace(" "+e+" "," "),n.className=t.substring(1,t.length-1))}function u(n){return(" "+(n.className||"")+" ").replace(/\s+/gi," ")}function f(n){n&&n.parentNode&&n.parentNode.removeChild(n)}return t})?r.call(e,t,e,n):r)||(n.exports=a)},function(n,e,t){"use strict";var r=t(2),a=t(1),o=t(110).indexOf,i=t(45),s=a([].indexOf),c=!!s&&1/s([1],1,-0)<0,l=i("indexOf");r({target:"Array",proto:!0,forced:c||!l},{indexOf:function(n){var e=arguments.length>1?arguments[1]:void 0;return c?s(this,n,e)||0:o(this,n,e)}})},function(n,e,t){var r=t(2),a=t(15),o=t(82);r({target:"Object",stat:!0,forced:t(3)((function(){o(1)}))},{keys:function(n){return o(a(n))}})},function(n,e,t){var r=t(3),a=t(4),o=/#|\.prototype\./,i=function(n,e){var t=c[s(n)];return t==p||t!=l&&(a(e)?r(e):!!e)},s=i.normalize=function(n){return String(n).replace(o,".").toLowerCase()},c=i.data={},l=i.NATIVE="N",p=i.POLYFILL="P";n.exports=i},function(n,e,t){var r=t(73),a=t(46),o=t(62),i=t(5)("iterator");n.exports=function(n){if(null!=n)return a(n,i)||a(n,"@@iterator")||o[r(n)]}},function(n,e,t){var r=t(9),a=t(63).EXISTS,o=t(1),i=t(13).f,s=Function.prototype,c=o(s.toString),l=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,p=o(l.exec);r&&!a&&i(s,"name",{configurable:!0,get:function(){try{return p(l,c(this))[1]}catch(n){return""}}})},function(n,e,t){var r=t(3),a=t(0).RegExp,o=r((function(){var n=a("a","y");return n.lastIndex=2,null!=n.exec("abcd")})),i=o||r((function(){return!a("a","y").sticky})),s=o||r((function(){var n=a("^r","gy");return n.lastIndex=2,null!=n.exec("str")}));n.exports={BROKEN_CARET:s,MISSED_STICKY:i,UNSUPPORTED_Y:o}},function(n,e,t){"use strict";t(18);var r=t(1),a=t(14),o=t(90),i=t(3),s=t(5),c=t(23),l=s("species"),p=RegExp.prototype;n.exports=function(n,e,t,u){var f=s(n),d=!i((function(){var e={};return e[f]=function(){return 7},7!=""[n](e)})),m=d&&!i((function(){var e=!1,t=/a/;return"split"===n&&((t={}).constructor={},t.constructor[l]=function(){return t},t.flags="",t[f]=/./[f]),t.exec=function(){return e=!0,null},t[f](""),!e}));if(!d||!m||t){var h=r(/./[f]),b=e(f,""[n],(function(n,e,t,a,i){var s=r(n),c=e.exec;return c===o||c===p.exec?d&&!i?{done:!0,value:h(e,t,a)}:{done:!0,value:s(t,e,a)}:{done:!1}}));a(String.prototype,n,b[0]),a(p,f,b[1])}u&&c(p[f],"sham",!0)}},function(n,e,t){var r=t(0),a=t(11),o=t(7),i=t(4),s=t(21),c=t(90),l=r.TypeError;n.exports=function(n,e){var t=n.exec;if(i(t)){var r=a(t,n,e);return null!==r&&o(r),r}if("RegExp"===s(n))return a(c,n,e);throw l("RegExp#exec called on incompatible receiver")}},function(n,e,t){"use strict";var r=t(2),a=t(1),o=t(59),i=t(19),s=t(45),c=a([].join),l=o!=Object,p=s("join",",");r({target:"Array",proto:!0,forced:l||!p},{join:function(n){return c(i(this),void 0===n?",":n)}})},function(n,e,t){var r=t(0),a=t(108),o=r["__core-js_shared__"]||a("__core-js_shared__",{});n.exports=o},function(n,e,t){var r=t(0),a=Object.defineProperty;n.exports=function(n,e){try{a(r,n,{value:e,configurable:!0,writable:!0})}catch(t){r[n]=e}return e}},function(n,e,t){var r=t(49),a=t(3);n.exports=!!Object.getOwnPropertySymbols&&!a((function(){var n=Symbol();return!String(n)||!(Object(n)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},function(n,e,t){var r=t(19),a=t(111),o=t(20),i=function(n){return function(e,t,i){var s,c=r(e),l=o(c),p=a(i,l);if(n&&t!=t){for(;l>p;)if((s=c[p++])!=s)return!0}else for(;l>p;p++)if((n||p in c)&&c[p]===t)return n||p||0;return!n&&-1}};n.exports={includes:i(!0),indexOf:i(!1)}},function(n,e,t){var r=t(52),a=Math.max,o=Math.min;n.exports=function(n,e){var t=r(n);return t<0?a(t+e,0):o(t,e)}},function(n,e){n.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(n,e,t){"use strict";var r={}.propertyIsEnumerable,a=Object.getOwnPropertyDescriptor,o=a&&!r.call({1:2},1);e.f=o?function(n){var e=a(this,n);return!!e&&e.enumerable}:r},function(n,e,t){var r=t(10),a=t(158),o=t(39),i=t(13);n.exports=function(n,e,t){for(var s=a(e),c=i.f,l=o.f,p=0;p<s.length;p++){var u=s[p];r(n,u)||t&&r(t,u)||c(n,u,l(e,u))}}},function(n,e){e.f=Object.getOwnPropertySymbols},function(n,e,t){var r=t(0),a=t(10),o=t(4),i=t(15),s=t(83),c=t(160),l=s("IE_PROTO"),p=r.Object,u=p.prototype;n.exports=c?p.getPrototypeOf:function(n){var e=i(n);if(a(e,l))return e[l];var t=e.constructor;return o(t)&&e instanceof t?t.prototype:e instanceof p?u:null}},function(n,e,t){var r={};r[t(5)("toStringTag")]="z",n.exports="[object z]"===String(r)},function(n,e,t){var r=t(7),a=t(165),o=t(5)("species");n.exports=function(n,e){var t,i=r(n).constructor;return void 0===i||null==(t=r(i)[o])?e:a(t)}},function(n,e,t){var r=t(0),a=t(111),o=t(20),i=t(66),s=r.Array,c=Math.max;n.exports=function(n,e,t){for(var r=o(n),l=a(e,r),p=a(void 0===t?r:t,r),u=s(c(p-l,0)),f=0;l<p;l++,f++)i(u,f,n[l]);return u.length=f,u}},function(n,e,t){t(180)("iterator")},function(n,e,t){"use strict";var r=t(170).charAt;n.exports=function(n,e,t){return e+(t?r(n,e).length:1)}},function(n,e,t){var r=t(268),a=t(48),o=Object.prototype,i=o.hasOwnProperty,s=o.propertyIsEnumerable,c=r(function(){return arguments}())?r:function(n){return a(n)&&i.call(n,"callee")&&!s.call(n,"callee")};n.exports=c},function(n,e,t){var r=t(41)(t(28),"Map");n.exports=r},function(n,e){n.exports=function(n){var e=typeof n;return null!=n&&("object"==e||"function"==e)}},function(n,e,t){var r=t(288),a=t(295),o=t(297),i=t(298),s=t(299);function c(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=a,c.prototype.get=o,c.prototype.has=i,c.prototype.set=s,n.exports=c},function(n,e){n.exports=function(n){var e=-1,t=Array(n.size);return n.forEach((function(n){t[++e]=n})),t}},function(n,e){n.exports=function(n){return"number"==typeof n&&n>-1&&n%1==0&&n<=9007199254740991}},function(n,e,t){var r=t(26),a=t(129),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;n.exports=function(n,e){if(r(n))return!1;var t=typeof n;return!("number"!=t&&"symbol"!=t&&"boolean"!=t&&null!=n&&!a(n))||(i.test(n)||!o.test(n)||null!=e&&n in Object(e))}},function(n,e,t){var r=t(58),a=t(48);n.exports=function(n){return"symbol"==typeof n||a(n)&&"[object Symbol]"==r(n)}},function(n,e){n.exports=function(n){return n}},function(n,e,t){"use strict";t.d(e,"a",(function(){return a}));t(75);t(74),t(89),t(6),t(120),t(24),t(31);var r=t(96);t(40),t(25);function a(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var t=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var r,a,o=[],i=!0,s=!1;try{for(t=t.call(n);!(i=(r=t.next()).done)&&(o.push(r.value),!e||o.length!==e);i=!0);}catch(n){s=!0,a=n}finally{try{i||null==t.return||t.return()}finally{if(s)throw a}}return o}}(n,e)||Object(r.a)(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(n,e,t){"use strict";var r=t(34),a=t(11),o=t(1),i=t(104),s=t(143),c=t(7),l=t(17),p=t(118),u=t(121),f=t(50),d=t(12),m=t(46),h=t(119),b=t(105),g=t(90),v=t(103),y=t(3),x=v.UNSUPPORTED_Y,w=Math.min,S=[].push,_=o(/./.exec),k=o(S),C=o("".slice);i("split",(function(n,e,t){var o;return o="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(n,t){var o=d(l(this)),i=void 0===t?4294967295:t>>>0;if(0===i)return[];if(void 0===n)return[o];if(!s(n))return a(e,o,n,i);for(var c,p,u,f=[],m=(n.ignoreCase?"i":"")+(n.multiline?"m":"")+(n.unicode?"u":"")+(n.sticky?"y":""),b=0,v=new RegExp(n.source,m+"g");(c=a(g,v,o))&&!((p=v.lastIndex)>b&&(k(f,C(o,b,c.index)),c.length>1&&c.index<o.length&&r(S,f,h(c,1)),u=c[0].length,b=p,f.length>=i));)v.lastIndex===c.index&&v.lastIndex++;return b===o.length?!u&&_(v,"")||k(f,""):k(f,C(o,b)),f.length>i?h(f,0,i):f}:"0".split(void 0,0).length?function(n,t){return void 0===n&&0===t?[]:a(e,this,n,t)}:e,[function(e,t){var r=l(this),i=null==e?void 0:m(e,n);return i?a(i,e,r,t):a(o,d(r),e,t)},function(n,r){var a=c(this),i=d(n),s=t(o,a,i,r,o!==e);if(s.done)return s.value;var l=p(a,RegExp),m=a.unicode,h=(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(x?"g":"y"),g=new l(x?"^(?:"+a.source+")":a,h),v=void 0===r?4294967295:r>>>0;if(0===v)return[];if(0===i.length)return null===b(g,i)?[i]:[];for(var y=0,S=0,_=[];S<i.length;){g.lastIndex=x?0:S;var A,j=b(g,x?C(i,S):i);if(null===j||(A=w(f(g.lastIndex+(x?S:0)),i.length))===y)S=u(i,S,m);else{if(k(_,C(i,y,S)),_.length===v)return _;for(var P=1;P<=j.length-1;P++)if(k(_,j[P]),_.length===v)return _;S=y=A}}return k(_,C(i,y)),_}]}),!!y((function(){var n=/(?:)/,e=n.exec;n.exec=function(){return e.apply(this,arguments)};var t="ab".split(n);return 2!==t.length||"a"!==t[0]||"b"!==t[1]})),x)},function(n,e,t){"use strict";var r=t(2),a=t(54).some;r({target:"Array",proto:!0,forced:!t(45)("some")},{some:function(n){return a(this,n,arguments.length>1?arguments[1]:void 0)}})},function(n,e,t){"use strict";var r=t(11),a=t(104),o=t(7),i=t(50),s=t(12),c=t(17),l=t(46),p=t(121),u=t(105);a("match",(function(n,e,t){return[function(e){var t=c(this),a=null==e?void 0:l(e,n);return a?r(a,e,t):new RegExp(e)[n](s(t))},function(n){var r=o(this),a=s(n),c=t(e,r,a);if(c.done)return c.value;if(!r.global)return u(r,a);var l=r.unicode;r.lastIndex=0;for(var f,d=[],m=0;null!==(f=u(r,a));){var h=s(f[0]);d[m]=h,""===h&&(r.lastIndex=p(a,i(r.lastIndex),l)),m++}return 0===m?null:d}]}))},function(n,e,t){var r=t(5),a=t(32),o=t(13),i=r("unscopables"),s=Array.prototype;null==s[i]&&o.f(s,i,{configurable:!0,value:a(null)}),n.exports=function(n){s[i][n]=!0}},function(n,e,t){var r=function(n){"use strict";var e=Object.prototype,t=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function s(n,e,t){return Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}),n[e]}try{s({},"")}catch(n){s=function(n,e,t){return n[e]=t}}function c(n,e,t,r){var a=e&&e.prototype instanceof u?e:u,o=Object.create(a.prototype),i=new _(r||[]);return o._invoke=function(n,e,t){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return C()}for(t.method=a,t.arg=o;;){var i=t.delegate;if(i){var s=x(i,t);if(s){if(s===p)continue;return s}}if("next"===t.method)t.sent=t._sent=t.arg;else if("throw"===t.method){if("suspendedStart"===r)throw r="completed",t.arg;t.dispatchException(t.arg)}else"return"===t.method&&t.abrupt("return",t.arg);r="executing";var c=l(n,e,t);if("normal"===c.type){if(r=t.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:t.done}}"throw"===c.type&&(r="completed",t.method="throw",t.arg=c.arg)}}}(n,t,i),o}function l(n,e,t){try{return{type:"normal",arg:n.call(e,t)}}catch(n){return{type:"throw",arg:n}}}n.wrap=c;var p={};function u(){}function f(){}function d(){}var m={};s(m,a,(function(){return this}));var h=Object.getPrototypeOf,b=h&&h(h(k([])));b&&b!==e&&t.call(b,a)&&(m=b);var g=d.prototype=u.prototype=Object.create(m);function v(n){["next","throw","return"].forEach((function(e){s(n,e,(function(n){return this._invoke(e,n)}))}))}function y(n,e){var r;this._invoke=function(a,o){function i(){return new e((function(r,i){!function r(a,o,i,s){var c=l(n[a],n,o);if("throw"!==c.type){var p=c.arg,u=p.value;return u&&"object"==typeof u&&t.call(u,"__await")?e.resolve(u.__await).then((function(n){r("next",n,i,s)}),(function(n){r("throw",n,i,s)})):e.resolve(u).then((function(n){p.value=n,i(p)}),(function(n){return r("throw",n,i,s)}))}s(c.arg)}(a,o,r,i)}))}return r=r?r.then(i,i):i()}}function x(n,e){var t=n.iterator[e.method];if(void 0===t){if(e.delegate=null,"throw"===e.method){if(n.iterator.return&&(e.method="return",e.arg=void 0,x(n,e),"throw"===e.method))return p;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var r=l(t,n.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,p;var a=r.arg;return a?a.done?(e[n.resultName]=a.value,e.next=n.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,p):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function w(n){var e={tryLoc:n[0]};1 in n&&(e.catchLoc=n[1]),2 in n&&(e.finallyLoc=n[2],e.afterLoc=n[3]),this.tryEntries.push(e)}function S(n){var e=n.completion||{};e.type="normal",delete e.arg,n.completion=e}function _(n){this.tryEntries=[{tryLoc:"root"}],n.forEach(w,this),this.reset(!0)}function k(n){if(n){var e=n[a];if(e)return e.call(n);if("function"==typeof n.next)return n;if(!isNaN(n.length)){var r=-1,o=function e(){for(;++r<n.length;)if(t.call(n,r))return e.value=n[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return f.prototype=d,s(g,"constructor",d),s(d,"constructor",f),f.displayName=s(d,i,"GeneratorFunction"),n.isGeneratorFunction=function(n){var e="function"==typeof n&&n.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},n.mark=function(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,d):(n.__proto__=d,s(n,i,"GeneratorFunction")),n.prototype=Object.create(g),n},n.awrap=function(n){return{__await:n}},v(y.prototype),s(y.prototype,o,(function(){return this})),n.AsyncIterator=y,n.async=function(e,t,r,a,o){void 0===o&&(o=Promise);var i=new y(c(e,t,r,a),o);return n.isGeneratorFunction(t)?i:i.next().then((function(n){return n.done?n.value:i.next()}))},v(g),s(g,i,"Generator"),s(g,a,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),n.keys=function(n){var e=[];for(var t in n)e.push(t);return e.reverse(),function t(){for(;e.length;){var r=e.pop();if(r in n)return t.value=r,t.done=!1,t}return t.done=!0,t}},n.values=k,_.prototype={constructor:_,reset:function(n){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!n)for(var e in this)"t"===e.charAt(0)&&t.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var n=this.tryEntries[0].completion;if("throw"===n.type)throw n.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var e=this;function r(t,r){return i.type="throw",i.arg=n,e.next=t,r&&(e.method="next",e.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=t.call(o,"catchLoc"),c=t.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(n,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&t.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===n||"continue"===n)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=n,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(i)},complete:function(n,e){if("throw"===n.type)throw n.arg;return"break"===n.type||"continue"===n.type?this.next=n.arg:"return"===n.type?(this.rval=this.arg=n.arg,this.method="return",this.next="end"):"normal"===n.type&&e&&(this.next=e),p},finish:function(n){for(var e=this.tryEntries.length-1;e>=0;--e){var t=this.tryEntries[e];if(t.finallyLoc===n)return this.complete(t.completion,t.afterLoc),S(t),p}},catch:function(n){for(var e=this.tryEntries.length-1;e>=0;--e){var t=this.tryEntries[e];if(t.tryLoc===n){var r=t.completion;if("throw"===r.type){var a=r.arg;S(t)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(n,e,t){return this.delegate={iterator:k(n),resultName:e,nextLoc:t},"next"===this.method&&(this.arg=void 0),p}},n}(n.exports);try{regeneratorRuntime=r}catch(n){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},function(n,e,t){var r=t(2),a=t(9),o=t(13).f;r({target:"Object",stat:!0,forced:Object.defineProperty!==o,sham:!a},{defineProperty:o})},function(n,e,t){"use strict";var r=t(1),a=t(63).PROPER,o=t(14),i=t(7),s=t(33),c=t(12),l=t(3),p=t(144),u=RegExp.prototype,f=u.toString,d=r(p),m=l((function(){return"/a/b"!=f.call({source:"a",flags:"b"})})),h=a&&"toString"!=f.name;(m||h)&&o(RegExp.prototype,"toString",(function(){var n=i(this),e=c(n.source),t=n.flags;return"/"+e+"/"+c(void 0===t&&s(u,n)&&!("flags"in u)?d(n):t)}),{unsafe:!0})},function(n,e,t){"use strict";var r=t(19),a=t(135),o=t(62),i=t(36),s=t(13).f,c=t(157),l=t(22),p=t(9),u=i.set,f=i.getterFor("Array Iterator");n.exports=c(Array,"Array",(function(n,e){u(this,{type:"Array Iterator",target:r(n),index:0,kind:e})}),(function(){var n=f(this),e=n.target,t=n.kind,r=n.index++;return!e||r>=e.length?(n.target=void 0,{value:void 0,done:!0}):"keys"==t?{value:r,done:!1}:"values"==t?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values");var d=o.Arguments=o.Array;if(a("keys"),a("values"),a("entries"),!l&&p&&"values"!==d.name)try{s(d,"name",{value:"values"})}catch(n){}},function(n,e,t){var r=t(9),a=t(152),o=t(13),i=t(7),s=t(19),c=t(82);e.f=r&&!a?Object.defineProperties:function(n,e){i(n);for(var t,r=s(e),a=c(e),l=a.length,p=0;l>p;)o.f(n,t=a[p++],r[t]);return n}},function(n,e,t){var r=t(0),a=t(11),o=t(35),i=t(7),s=t(81),c=t(101),l=r.TypeError;n.exports=function(n,e){var t=arguments.length<2?c(n):e;if(o(t))return i(a(t,n));throw l(s(n)+" is not iterable")}},function(n,e,t){var r=t(249);n.exports=function(n,e){return new(r(n))(0===e?0:e)}},function(n,e,t){var r=t(8),a=t(21),o=t(5)("match");n.exports=function(n){var e;return r(n)&&(void 0!==(e=n[o])?!!e:"RegExp"==a(n))}},function(n,e,t){"use strict";var r=t(7);n.exports=function(){var n=r(this),e="";return n.global&&(e+="g"),n.ignoreCase&&(e+="i"),n.multiline&&(e+="m"),n.dotAll&&(e+="s"),n.unicode&&(e+="u"),n.sticky&&(e+="y"),e}},function(n,e,t){var r=t(4),a=t(8),o=t(64);n.exports=function(n,e,t){var i,s;return o&&r(i=e.constructor)&&i!==t&&a(s=i.prototype)&&s!==t.prototype&&o(n,s),n}},function(n,e){n.exports=function(n){return n.webpackPolyfill||(n.deprecate=function(){},n.paths=[],n.children||(n.children=[]),Object.defineProperty(n,"loaded",{enumerable:!0,get:function(){return n.l}}),Object.defineProperty(n,"id",{enumerable:!0,get:function(){return n.i}}),n.webpackPolyfill=1),n}},function(n,e){var t=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,o=/^0o[0-7]+$/i,i=parseInt,s="object"==typeof global&&global&&global.Object===Object&&global,c="object"==typeof self&&self&&self.Object===Object&&self,l=s||c||Function("return this")(),p=Object.prototype.toString,u=Math.max,f=Math.min,d=function(){return l.Date.now()};function m(n){var e=typeof n;return!!n&&("object"==e||"function"==e)}function h(n){if("number"==typeof n)return n;if(function(n){return"symbol"==typeof n||function(n){return!!n&&"object"==typeof n}(n)&&"[object Symbol]"==p.call(n)}(n))return NaN;if(m(n)){var e="function"==typeof n.valueOf?n.valueOf():n;n=m(e)?e+"":e}if("string"!=typeof n)return 0===n?n:+n;n=n.replace(t,"");var s=a.test(n);return s||o.test(n)?i(n.slice(2),s?2:8):r.test(n)?NaN:+n}n.exports=function(n,e,t){var r,a,o,i,s,c,l=0,p=!1,b=!1,g=!0;if("function"!=typeof n)throw new TypeError("Expected a function");function v(e){var t=r,o=a;return r=a=void 0,l=e,i=n.apply(o,t)}function y(n){return l=n,s=setTimeout(w,e),p?v(n):i}function x(n){var t=n-c;return void 0===c||t>=e||t<0||b&&n-l>=o}function w(){var n=d();if(x(n))return S(n);s=setTimeout(w,function(n){var t=e-(n-c);return b?f(t,o-(n-l)):t}(n))}function S(n){return s=void 0,g&&r?v(n):(r=a=void 0,i)}function _(){var n=d(),t=x(n);if(r=arguments,a=this,c=n,t){if(void 0===s)return y(c);if(b)return s=setTimeout(w,e),v(c)}return void 0===s&&(s=setTimeout(w,e)),i}return e=h(e)||0,m(t)&&(p=!!t.leading,o=(b="maxWait"in t)?u(h(t.maxWait)||0,e):o,g="trailing"in t?!!t.trailing:g),_.cancel=function(){void 0!==s&&clearTimeout(s),l=0,r=c=a=s=void 0},_.flush=function(){return void 0===s?i:S(d())},_}},function(n,e,t){var r=t(1),a=t(17),o=t(12),i=t(149),s=r("".replace),c="["+i+"]",l=RegExp("^"+c+c+"*"),p=RegExp(c+c+"*$"),u=function(n){return function(e){var t=o(a(e));return 1&n&&(t=s(t,l,"")),2&n&&(t=s(t,p,"")),t}};n.exports={start:u(1),end:u(2),trim:u(3)}},function(n,e){n.exports="\t\n\v\f\r Â áââââââââââââ¯âã\u2028\u2029\ufeff"},function(n,e,t){var r=t(1),a=t(14),o=Date.prototype,i=r(o.toString),s=r(o.getTime);"Invalid Date"!=String(new Date(NaN))&&a(o,"toString",(function(){var n=s(this);return n==n?i(this):"Invalid Date"}))},function(n,e,t){var r=t(109);n.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(n,e,t){var r=t(9),a=t(3);n.exports=r&&a((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},function(n,e,t){var r=t(9),a=t(3),o=t(78);n.exports=!r&&!a((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},function(n,e,t){var r=t(0),a=t(11),o=t(8),i=t(80),s=t(46),c=t(233),l=t(5),p=r.TypeError,u=l("toPrimitive");n.exports=function(n,e){if(!o(n)||i(n))return n;var t,r=s(n,u);if(r){if(void 0===e&&(e="default"),t=a(r,n,e),!o(t)||i(t))return t;throw p("Can't convert object to primitive value")}return void 0===e&&(e="number"),c(n,e)}},function(n,e,t){var r=t(1),a=t(10),o=t(19),i=t(110).indexOf,s=t(61),c=r([].push);n.exports=function(n,e){var t,r=o(n),l=0,p=[];for(t in r)!a(s,t)&&a(r,t)&&c(p,t);for(;e.length>l;)a(r,t=e[l++])&&(~i(p,t)||c(p,t));return p}},function(n,e,t){var r=t(16);n.exports=r("document","documentElement")},function(n,e,t){"use strict";var r=t(2),a=t(11),o=t(22),i=t(63),s=t(4),c=t(220),l=t(116),p=t(64),u=t(56),f=t(23),d=t(14),m=t(5),h=t(62),b=t(159),g=i.PROPER,v=i.CONFIGURABLE,y=b.IteratorPrototype,x=b.BUGGY_SAFARI_ITERATORS,w=m("iterator"),S=function(){return this};n.exports=function(n,e,t,i,m,b,_){c(t,e,i);var k,C,A,j=function(n){if(n===m&&B)return B;if(!x&&n in O)return O[n];switch(n){case"keys":case"values":case"entries":return function(){return new t(this,n)}}return function(){return new t(this)}},P=e+" Iterator",T=!1,O=n.prototype,E=O[w]||O["@@iterator"]||m&&O[m],B=!x&&E||j(m),I="Array"==e&&O.entries||E;if(I&&(k=l(I.call(new n)))!==Object.prototype&&k.next&&(o||l(k)===y||(p?p(k,y):s(k[w])||d(k,w,S)),u(k,P,!0,!0),o&&(h[P]=S)),g&&"values"==m&&E&&"values"!==E.name&&(!o&&v?f(O,"name","values"):(T=!0,B=function(){return a(E,this)})),m)if(C={values:j("values"),keys:b?B:j("keys"),entries:j("entries")},_)for(A in C)(x||T||!(A in O))&&d(O,A,C[A]);else r({target:e,proto:!0,forced:x||T},C);return o&&!_||O[w]===B||d(O,w,B,{name:m}),h[e]=B,C}},function(n,e,t){var r=t(16),a=t(1),o=t(55),i=t(115),s=t(7),c=a([].concat);n.exports=r("Reflect","ownKeys")||function(n){var e=o.f(s(n)),t=i.f;return t?c(e,t(n)):e}},function(n,e,t){"use strict";var r,a,o,i=t(3),s=t(4),c=t(32),l=t(116),p=t(14),u=t(5),f=t(22),d=u("iterator"),m=!1;[].keys&&("next"in(o=[].keys())?(a=l(l(o)))!==Object.prototype&&(r=a):m=!0),null==r||i((function(){var n={};return r[d].call(n)!==n}))?r={}:f&&(r=c(r)),s(r[d])||p(r,d,(function(){return this})),n.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:m}},function(n,e,t){var r=t(3);n.exports=!r((function(){function n(){}return n.prototype.constructor=null,Object.getPrototypeOf(new n)!==n.prototype}))},function(n,e,t){var r=t(0);n.exports=r.Promise},function(n,e,t){var r=t(5),a=t(62),o=r("iterator"),i=Array.prototype;n.exports=function(n){return void 0!==n&&(a.Array===n||i[o]===n)}},function(n,e,t){var r=t(11),a=t(7),o=t(46);n.exports=function(n,e,t){var i,s;a(n);try{if(!(i=o(n,"return"))){if("throw"===e)throw t;return t}i=r(i,n)}catch(n){s=!0,i=n}if("throw"===e)throw t;if(s)throw i;return a(i),t}},function(n,e,t){var r=t(5)("iterator"),a=!1;try{var o=0,i={next:function(){return{done:!!o++}},return:function(){a=!0}};i[r]=function(){return this},Array.from(i,(function(){throw 2}))}catch(n){}n.exports=function(n,e){if(!e&&!a)return!1;var t=!1;try{var o={};o[r]=function(){return{next:function(){return{done:t=!0}}}},n(o)}catch(n){}return t}},function(n,e,t){var r=t(0),a=t(85),o=t(81),i=r.TypeError;n.exports=function(n){if(a(n))return n;throw i(o(n)+" is not a constructor")}},function(n,e,t){var r,a,o,i,s=t(0),c=t(34),l=t(53),p=t(4),u=t(10),f=t(3),d=t(156),m=t(65),h=t(78),b=t(167),g=t(86),v=s.setImmediate,y=s.clearImmediate,x=s.process,w=s.Dispatch,S=s.Function,_=s.MessageChannel,k=s.String,C=0,A={};try{r=s.location}catch(n){}var j=function(n){if(u(A,n)){var e=A[n];delete A[n],e()}},P=function(n){return function(){j(n)}},T=function(n){j(n.data)},O=function(n){s.postMessage(k(n),r.protocol+"//"+r.host)};v&&y||(v=function(n){var e=m(arguments,1);return A[++C]=function(){c(p(n)?n:S(n),void 0,e)},a(C),C},y=function(n){delete A[n]},g?a=function(n){x.nextTick(P(n))}:w&&w.now?a=function(n){w.now(P(n))}:_&&!b?(i=(o=new _).port2,o.port1.onmessage=T,a=l(i.postMessage,i)):s.addEventListener&&p(s.postMessage)&&!s.importScripts&&r&&"file:"!==r.protocol&&!f(O)?(a=O,s.addEventListener("message",T,!1)):a="onreadystatechange"in h("script")?function(n){d.appendChild(h("script")).onreadystatechange=function(){d.removeChild(this),j(n)}}:function(n){setTimeout(P(n),0)}),n.exports={set:v,clear:y}},function(n,e,t){var r=t(27);n.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(r)},function(n,e,t){var r=t(7),a=t(8),o=t(169);n.exports=function(n,e){if(r(n),a(e)&&e.constructor===n)return e;var t=o.f(n);return(0,t.resolve)(e),t.promise}},function(n,e,t){"use strict";var r=t(35),a=function(n){var e,t;this.promise=new n((function(n,r){if(void 0!==e||void 0!==t)throw TypeError("Bad Promise constructor");e=n,t=r})),this.resolve=r(e),this.reject=r(t)};n.exports.f=function(n){return new a(n)}},function(n,e,t){var r=t(1),a=t(52),o=t(12),i=t(17),s=r("".charAt),c=r("".charCodeAt),l=r("".slice),p=function(n){return function(e,t){var r,p,u=o(i(e)),f=a(t),d=u.length;return f<0||f>=d?n?"":void 0:(r=c(u,f))<55296||r>56319||f+1===d||(p=c(u,f+1))<56320||p>57343?n?s(u,f):r:n?l(u,f,f+2):p-56320+(r-55296<<10)+65536}};n.exports={codeAt:p(!1),charAt:p(!0)}},function(n,e){n.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(n,e,t){var r=t(78)("span").classList,a=r&&r.constructor&&r.constructor.prototype;n.exports=a===Object.prototype?void 0:a},function(n,e,t){var r=t(2),a=t(3),o=t(15),i=t(116),s=t(160);r({target:"Object",stat:!0,forced:a((function(){i(1)})),sham:!s},{getPrototypeOf:function(n){return i(o(n))}})},function(n,e,t){var r=t(0),a=t(143),o=r.TypeError;n.exports=function(n){if(a(n))throw o("The method doesn't accept regular expressions");return n}},function(n,e,t){var r=t(5)("match");n.exports=function(n){var e=/./;try{"/./"[n](e)}catch(t){try{return e[r]=!1,"/./"[n](e)}catch(n){}}return!1}},function(n,e,t){"use strict";var r=t(54).forEach,a=t(45)("forEach");n.exports=a?[].forEach:function(n){return r(this,n,arguments.length>1?arguments[1]:void 0)}},function(n,e,t){var r=t(3);n.exports=!r((function(){return Object.isExtensible(Object.preventExtensions({}))}))},function(n,e,t){var r=t(21),a=t(19),o=t(55).f,i=t(119),s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];n.exports.f=function(n){return s&&"Window"==r(n)?function(n){try{return o(n)}catch(n){return i(s)}}(n):o(a(n))}},function(n,e,t){var r=t(5);e.f=r},function(n,e,t){var r=t(257),a=t(10),o=t(179),i=t(13).f;n.exports=function(n){var e=r.Symbol||(r.Symbol={});a(e,n)||i(e,n,{value:o.f(n)})}},function(n,e,t){var r=t(2),a=t(258);r({target:"Array",stat:!0,forced:!t(164)((function(n){Array.from(n)}))},{from:a})},function(n,e,t){var r=t(12);n.exports=function(n,e){return void 0===n?arguments.length<2?"":e:r(n)}},function(n,e,t){t(2)({target:"Object",stat:!0,sham:!t(9)},{create:t(32)})},function(n,e,t){var r=t(2),a=t(0),o=t(16),i=t(34),s=t(1),c=t(3),l=a.Array,p=o("JSON","stringify"),u=s(/./.exec),f=s("".charAt),d=s("".charCodeAt),m=s("".replace),h=s(1..toString),b=/[\uD800-\uDFFF]/g,g=/^[\uD800-\uDBFF]$/,v=/^[\uDC00-\uDFFF]$/,y=function(n,e,t){var r=f(t,e-1),a=f(t,e+1);return u(g,n)&&!u(v,a)||u(v,n)&&!u(g,r)?"\\u"+h(d(n,0),16):n},x=c((function(){return'"\\udf06\\ud834"'!==p("\udf06\ud834")||'"\\udead"'!==p("\udead")}));p&&r({target:"JSON",stat:!0,forced:x},{stringify:function(n,e,t){for(var r=0,a=arguments.length,o=l(a);r<a;r++)o[r]=arguments[r];var s=i(p,null,o);return"string"==typeof s?m(s,b,y):s}})},function(n,e){n.exports=function(n,e){for(var t=-1,r=e.length,a=n.length;++t<r;)n[a+t]=e[t];return n}},function(n,e){var t="object"==typeof global&&global&&global.Object===Object&&global;n.exports=t},function(n,e,t){var r=t(91),a=t(279),o=t(280),i=t(281),s=t(282),c=t(283);function l(n){var e=this.__data__=new r(n);this.size=e.size}l.prototype.clear=a,l.prototype.delete=o,l.prototype.get=i,l.prototype.has=s,l.prototype.set=c,n.exports=l},function(n,e){n.exports=function(n,e){return n===e||n!=n&&e!=e}},function(n,e,t){var r=t(58),a=t(124);n.exports=function(n){if(!a(n))return!1;var e=r(n);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},function(n,e){var t=Function.prototype.toString;n.exports=function(n){if(null!=n){try{return t.call(n)}catch(n){}try{return n+""}catch(n){}}return""}},function(n,e,t){var r=t(300),a=t(48);n.exports=function n(e,t,o,i,s){return e===t||(null==e||null==t||!a(e)&&!a(t)?e!=e&&t!=t:r(e,t,o,i,n,s))}},function(n,e,t){var r=t(193),a=t(303),o=t(194);n.exports=function(n,e,t,i,s,c){var l=1&t,p=n.length,u=e.length;if(p!=u&&!(l&&u>p))return!1;var f=c.get(n),d=c.get(e);if(f&&d)return f==e&&d==n;var m=-1,h=!0,b=2&t?new r:void 0;for(c.set(n,e),c.set(e,n);++m<p;){var g=n[m],v=e[m];if(i)var y=l?i(v,g,m,e,n,c):i(g,v,m,n,e,c);if(void 0!==y){if(y)continue;h=!1;break}if(b){if(!a(e,(function(n,e){if(!o(b,e)&&(g===n||s(g,n,t,i,c)))return b.push(e)}))){h=!1;break}}else if(g!==v&&!s(g,v,t,i,c)){h=!1;break}}return c.delete(n),c.delete(e),h}},function(n,e,t){var r=t(125),a=t(301),o=t(302);function i(n){var e=-1,t=null==n?0:n.length;for(this.__data__=new r;++e<t;)this.add(n[e])}i.prototype.add=i.prototype.push=a,i.prototype.has=o,n.exports=i},function(n,e){n.exports=function(n,e){return n.has(e)}},function(n,e,t){var r=t(313),a=t(319),o=t(199);n.exports=function(n){return o(n)?r(n):a(n)}},function(n,e,t){(function(n){var r=t(28),a=t(315),o=e&&!e.nodeType&&e,i=o&&"object"==typeof n&&n&&!n.nodeType&&n,s=i&&i.exports===o?r.Buffer:void 0,c=(s?s.isBuffer:void 0)||a;n.exports=c}).call(this,t(146)(n))},function(n,e){var t=/^(?:0|[1-9]\d*)$/;n.exports=function(n,e){var r=typeof n;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&t.test(n))&&n>-1&&n%1==0&&n<e}},function(n,e,t){var r=t(316),a=t(317),o=t(318),i=o&&o.isTypedArray,s=i?a(i):r;n.exports=s},function(n,e,t){var r=t(189),a=t(127);n.exports=function(n){return null!=n&&a(n.length)&&!r(n)}},function(n,e,t){var r=t(41)(t(28),"Set");n.exports=r},function(n,e,t){var r=t(124);n.exports=function(n){return n==n&&!r(n)}},function(n,e){n.exports=function(n,e){return function(t){return null!=t&&(t[n]===e&&(void 0!==e||n in Object(t)))}}},function(n,e,t){var r=t(204),a=t(95);n.exports=function(n,e){for(var t=0,o=(e=r(e,n)).length;null!=n&&t<o;)n=n[a(e[t++])];return t&&t==o?n:void 0}},function(n,e,t){var r=t(26),a=t(128),o=t(330),i=t(333);n.exports=function(n,e){return r(n)?n:a(n,e)?[n]:o(i(n))}},function(n,e,t){"use strict";var r=t(0),a=t(1),o=t(35),i=t(8),s=t(10),c=t(65),l=t(60),p=r.Function,u=a([].concat),f=a([].join),d={},m=function(n,e,t){if(!s(d,e)){for(var r=[],a=0;a<e;a++)r[a]="a["+a+"]";d[e]=p("C,a","return new C("+f(r,",")+")")}return d[e](n,t)};n.exports=l?p.bind:function(n){var e=o(this),t=e.prototype,r=c(arguments,1),a=function(){var t=u(r,c(arguments));return this instanceof a?m(e,t.length,t):e.apply(n,t)};return i(t)&&(a.prototype=t),a}},function(n,e,t){"use strict";var r=t(2),a=t(366).start;r({target:"String",proto:!0,forced:t(368)},{padStart:function(n){return a(this,n,arguments.length>1?arguments[1]:void 0)}})},function(n,e,t){},function(n,e,t){},function(n,e,t){t(2)({target:"Object",stat:!0},{setPrototypeOf:t(64)})},function(n,e,t){var r=t(2),a=t(16),o=t(34),i=t(205),s=t(165),c=t(7),l=t(8),p=t(32),u=t(3),f=a("Reflect","construct"),d=Object.prototype,m=[].push,h=u((function(){function n(){}return!(f((function(){}),[],n)instanceof n)})),b=!u((function(){f((function(){}))})),g=h||b;r({target:"Reflect",stat:!0,forced:g,sham:g},{construct:function(n,e){s(n),c(e);var t=arguments.length<3?n:s(arguments[2]);if(b&&!h)return f(n,e,t);if(n==t){switch(e.length){case 0:return new n;case 1:return new n(e[0]);case 2:return new n(e[0],e[1]);case 3:return new n(e[0],e[1],e[2]);case 4:return new n(e[0],e[1],e[2],e[3])}var r=[null];return o(m,r,e),new(o(i,n,r))}var a=t.prototype,u=p(l(a)?a:d),g=o(n,u,e);return l(g)?g:u}})},function(n,e,t){var r=t(2),a=t(0),o=t(56);r({global:!0},{Reflect:{}}),o(a.Reflect,"Reflect",!0)},function(n,e,t){},function(n,e,t){},function(n,e,t){var r=t(266),a=t(271),o=t(342),i=t(350),s=t(359),c=t(228),l=o((function(n){var e=c(n);return s(e)&&(e=void 0),i(r(n,1,s,!0),a(e,2))}));n.exports=l},function(n,e,t){"use strict";
/*!
 * escape-html
 * Copyright(c) 2012-2013 TJ Holowaychuk
 * Copyright(c) 2015 Andreas Lubbe
 * Copyright(c) 2015 Tiancheng "Timothy" Gu
 * MIT Licensed
 */var r=/["'&<>]/;n.exports=function(n){var e,t=""+n,a=r.exec(t);if(!a)return t;var o="",i=0,s=0;for(i=a.index;i<t.length;i++){switch(t.charCodeAt(i)){case 34:e="&quot;";break;case 38:e="&amp;";break;case 39:e="&#39;";break;case 60:e="&lt;";break;case 62:e="&gt;";break;default:continue}s!==i&&(o+=t.substring(s,i)),s=i+1,o+=e}return s!==i?o+t.substring(s,i):o}},function(n,e,t){"use strict";t.r(e);var r={name:"CodeBlock",props:{title:{type:String,required:!0},active:{type:Boolean,default:!1}}},a=(t(369),t(29)),o=Object(a.a)(r,(function(){var n=this.$createElement;return(this._self._c||n)("div",{staticClass:"theme-code-block",class:{"theme-code-block__active":this.active}},[this._t("default")],2)}),[],!1,null,"4f1e9d0c",null);e.default=o.exports},function(n,e,t){"use strict";t.r(e);t(37),t(6),t(38),t(43),t(30);var r={name:"CodeGroup",data:function(){return{codeTabs:[],activeCodeTabIndex:-1}},watch:{activeCodeTabIndex:function(n){this.codeTabs.forEach((function(n){n.elm.classList.remove("theme-code-block__active")})),this.codeTabs[n].elm.classList.add("theme-code-block__active")}},mounted:function(){var n=this;this.codeTabs=(this.$slots.default||[]).filter((function(n){return Boolean(n.componentOptions)})).map((function(e,t){return""===e.componentOptions.propsData.active&&(n.activeCodeTabIndex=t),{title:e.componentOptions.propsData.title,elm:e.elm}})),-1===this.activeCodeTabIndex&&this.codeTabs.length>0&&(this.activeCodeTabIndex=0)},methods:{changeCodeTab:function(n){this.activeCodeTabIndex=n}}},a=(t(370),t(29)),o=Object(a.a)(r,(function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{staticClass:"theme-code-group"},[t("div",{staticClass:"theme-code-group__nav"},[t("ul",{staticClass:"theme-code-group__ul"},n._l(n.codeTabs,(function(e,r){return t("li",{key:e.title,staticClass:"theme-code-group__li"},[t("button",{staticClass:"theme-code-group__nav-tab",class:{"theme-code-group__nav-tab-active":r===n.activeCodeTabIndex},on:{click:function(e){return n.changeCodeTab(r)}}},[n._v("\n            "+n._s(e.title)+"\n          ")])])})),0)]),n._v(" "),n._t("default"),n._v(" "),n.codeTabs.length<1?t("pre",{staticClass:"pre-blank"},[n._v("// Make sure to add code blocks to your code group")]):n._e()],2)}),[],!1,null,"2f5f1757",null);e.default=o.exports},function(n,e,t){"use strict";var r=t(9),a=t(0),o=t(1),i=t(100),s=t(14),c=t(10),l=t(145),p=t(33),u=t(80),f=t(154),d=t(3),m=t(55).f,h=t(39).f,b=t(13).f,g=t(364),v=t(148).trim,y=a.Number,x=y.prototype,w=a.TypeError,S=o("".slice),_=o("".charCodeAt),k=function(n){var e=f(n,"number");return"bigint"==typeof e?e:C(e)},C=function(n){var e,t,r,a,o,i,s,c,l=f(n,"number");if(u(l))throw w("Cannot convert a Symbol value to a number");if("string"==typeof l&&l.length>2)if(l=v(l),43===(e=_(l,0))||45===e){if(88===(t=_(l,2))||120===t)return NaN}else if(48===e){switch(_(l,1)){case 66:case 98:r=2,a=49;break;case 79:case 111:r=8,a=55;break;default:return+l}for(i=(o=S(l,2)).length,s=0;s<i;s++)if((c=_(o,s))<48||c>a)return NaN;return parseInt(o,r)}return+l};if(i("Number",!y(" 0o1")||!y("0b1")||y("+0x1"))){for(var A,j=function(n){var e=arguments.length<1?0:y(k(n)),t=this;return p(x,t)&&d((function(){g(t)}))?l(Object(e),t,j):e},P=r?m(y):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),T=0;P.length>T;T++)c(y,A=P[T])&&!c(j,A)&&b(j,A,h(y,A));j.prototype=x,x.constructor=j,s(a,"Number",j)}},function(n,e,t){var r=t(3),a=t(0).RegExp;n.exports=r((function(){var n=a(".","s");return!(n.dotAll&&n.exec("\n")&&"s"===n.flags)}))},function(n,e,t){"use strict";var r=t(159).IteratorPrototype,a=t(32),o=t(47),i=t(56),s=t(62),c=function(){return this};n.exports=function(n,e,t,l){var p=e+" Iterator";return n.prototype=a(r,{next:o(+!l,t)}),i(n,p,!1,!0),s[p]=c,n}},function(n,e,t){var r=t(14);n.exports=function(n,e,t){for(var a in e)r(n,a,e[a],t);return n}},function(n,e,t){"use strict";var r=t(16),a=t(13),o=t(5),i=t(9),s=o("species");n.exports=function(n){var e=r(n),t=a.f;i&&e&&!e[s]&&t(e,s,{configurable:!0,get:function(){return this}})}},function(n,e,t){var r=t(0),a=t(33),o=r.TypeError;n.exports=function(n,e){if(a(e,n))return n;throw o("Incorrect invocation")}},function(n,e,t){var r=t(2),a=t(9),o=t(158),i=t(19),s=t(39),c=t(66);r({target:"Object",stat:!0,sham:!a},{getOwnPropertyDescriptors:function(n){for(var e,t,r=i(n),a=s.f,l=o(r),p={},u=0;l.length>u;)void 0!==(t=a(r,e=l[u++]))&&c(p,e,t);return p}})},function(n,e,t){var r=t(3),a=t(0).RegExp;n.exports=r((function(){var n=a("(?<a>b)","g");return"b"!==n.exec("b").groups.a||"bc"!=="b".replace(n,"$<a>c")}))},function(n,e,t){"use strict";var r=t(2),a=t(110).includes,o=t(135);r({target:"Array",proto:!0},{includes:function(n){return a(this,n,arguments.length>1?arguments[1]:void 0)}}),o("includes")},function(n,e,t){"use strict";var r=t(2),a=t(1),o=t(174),i=t(17),s=t(12),c=t(175),l=a("".indexOf);r({target:"String",proto:!0,forced:!c("includes")},{includes:function(n){return!!~l(s(i(this)),s(o(n)),arguments.length>1?arguments[1]:void 0)}})},function(n,e){n.exports=function(n){var e=null==n?0:n.length;return e?n[e-1]:void 0}},function(n,e,t){"use strict";var r=t(2),a=t(148).trim;r({target:"String",proto:!0,forced:t(362)("trim")},{trim:function(){return a(this)}})},function(n,e,t){var r=t(119),a=Math.floor,o=function(n,e){var t=n.length,c=a(t/2);return t<8?i(n,e):s(n,o(r(n,0,c),e),o(r(n,c),e),e)},i=function(n,e){for(var t,r,a=n.length,o=1;o<a;){for(r=o,t=n[o];r&&e(n[r-1],t)>0;)n[r]=n[--r];r!==o++&&(n[r]=t)}return n},s=function(n,e,t,r){for(var a=e.length,o=t.length,i=0,s=0;i<a||s<o;)n[i+s]=i<a&&s<o?r(e[i],t[s])<=0?e[i++]:t[s++]:i<a?e[i++]:t[s++];return n};n.exports=o},function(n,e,t){var r=t(0),a=t(9),o=t(103).MISSED_STICKY,i=t(21),s=t(13).f,c=t(36).get,l=RegExp.prototype,p=r.TypeError;a&&o&&s(l,"sticky",{configurable:!0,get:function(){if(this!==l){if("RegExp"===i(this))return!!c(this).sticky;throw p("Incompatible receiver, RegExp required")}}})},function(n,e,t){n.exports=t(379)},function(n,e,t){var r=t(0),a=t(11),o=t(4),i=t(8),s=r.TypeError;n.exports=function(n,e){var t,r;if("string"===e&&o(t=n.toString)&&!i(r=a(t,n)))return r;if(o(t=n.valueOf)&&!i(r=a(t,n)))return r;if("string"!==e&&o(t=n.toString)&&!i(r=a(t,n)))return r;throw s("Can't convert object to primitive value")}},function(n,e,t){var r=t(0),a=t(4),o=t(84),i=r.WeakMap;n.exports=a(i)&&/native code/.test(o(i))},function(n,e,t){var r=t(0),a=t(4),o=r.String,i=r.TypeError;n.exports=function(n){if("object"==typeof n||a(n))return n;throw i("Can't set "+o(n)+" as a prototype")}},function(n,e,t){"use strict";var r,a,o,i,s=t(2),c=t(22),l=t(0),p=t(16),u=t(11),f=t(161),d=t(14),m=t(221),h=t(64),b=t(56),g=t(222),v=t(35),y=t(4),x=t(8),w=t(223),S=t(84),_=t(237),k=t(164),C=t(118),A=t(166).set,j=t(238),P=t(168),T=t(241),O=t(169),E=t(242),B=t(243),I=t(36),L=t(100),M=t(5),D=t(244),R=t(86),$=t(49),F=M("species"),q="Promise",z=I.getterFor(q),N=I.set,U=I.getterFor(q),J=f&&f.prototype,X=f,V=J,H=l.TypeError,Q=l.document,W=l.process,G=O.f,Y=G,K=!!(Q&&Q.createEvent&&l.dispatchEvent),Z=y(l.PromiseRejectionEvent),nn=!1,en=L(q,(function(){var n=S(X),e=n!==String(X);if(!e&&66===$)return!0;if(c&&!V.finally)return!0;if($>=51&&/native code/.test(n))return!1;var t=new X((function(n){n(1)})),r=function(n){n((function(){}),(function(){}))};return(t.constructor={})[F]=r,!(nn=t.then((function(){}))instanceof r)||!e&&D&&!Z})),tn=en||!k((function(n){X.all(n).catch((function(){}))})),rn=function(n){var e;return!(!x(n)||!y(e=n.then))&&e},an=function(n,e){var t,r,a,o=e.value,i=1==e.state,s=i?n.ok:n.fail,c=n.resolve,l=n.reject,p=n.domain;try{s?(i||(2===e.rejection&&pn(e),e.rejection=1),!0===s?t=o:(p&&p.enter(),t=s(o),p&&(p.exit(),a=!0)),t===n.promise?l(H("Promise-chain cycle")):(r=rn(t))?u(r,t,c,l):c(t)):l(o)}catch(n){p&&!a&&p.exit(),l(n)}},on=function(n,e){n.notified||(n.notified=!0,j((function(){for(var t,r=n.reactions;t=r.get();)an(t,n);n.notified=!1,e&&!n.rejection&&cn(n)})))},sn=function(n,e,t){var r,a;K?((r=Q.createEvent("Event")).promise=e,r.reason=t,r.initEvent(n,!1,!0),l.dispatchEvent(r)):r={promise:e,reason:t},!Z&&(a=l["on"+n])?a(r):"unhandledrejection"===n&&T("Unhandled promise rejection",t)},cn=function(n){u(A,l,(function(){var e,t=n.facade,r=n.value;if(ln(n)&&(e=E((function(){R?W.emit("unhandledRejection",r,t):sn("unhandledrejection",t,r)})),n.rejection=R||ln(n)?2:1,e.error))throw e.value}))},ln=function(n){return 1!==n.rejection&&!n.parent},pn=function(n){u(A,l,(function(){var e=n.facade;R?W.emit("rejectionHandled",e):sn("rejectionhandled",e,n.value)}))},un=function(n,e,t){return function(r){n(e,r,t)}},fn=function(n,e,t){n.done||(n.done=!0,t&&(n=t),n.value=e,n.state=2,on(n,!0))},dn=function(n,e,t){if(!n.done){n.done=!0,t&&(n=t);try{if(n.facade===e)throw H("Promise can't be resolved itself");var r=rn(e);r?j((function(){var t={done:!1};try{u(r,e,un(dn,t,n),un(fn,t,n))}catch(e){fn(t,e,n)}})):(n.value=e,n.state=1,on(n,!1))}catch(e){fn({done:!1},e,n)}}};if(en&&(V=(X=function(n){w(this,V),v(n),u(r,this);var e=z(this);try{n(un(dn,e),un(fn,e))}catch(n){fn(e,n)}}).prototype,(r=function(n){N(this,{type:q,done:!1,notified:!1,parent:!1,reactions:new B,rejection:!1,state:0,value:void 0})}).prototype=m(V,{then:function(n,e){var t=U(this),r=G(C(this,X));return t.parent=!0,r.ok=!y(n)||n,r.fail=y(e)&&e,r.domain=R?W.domain:void 0,0==t.state?t.reactions.add(r):j((function(){an(r,t)})),r.promise},catch:function(n){return this.then(void 0,n)}}),a=function(){var n=new r,e=z(n);this.promise=n,this.resolve=un(dn,e),this.reject=un(fn,e)},O.f=G=function(n){return n===X||n===o?new a(n):Y(n)},!c&&y(f)&&J!==Object.prototype)){i=J.then,nn||(d(J,"then",(function(n,e){var t=this;return new X((function(n,e){u(i,t,n,e)})).then(n,e)}),{unsafe:!0}),d(J,"catch",V.catch,{unsafe:!0}));try{delete J.constructor}catch(n){}h&&h(J,V)}s({global:!0,wrap:!0,forced:en},{Promise:X}),b(X,q,!1,!0),g(q),o=p(q),s({target:q,stat:!0,forced:en},{reject:function(n){var e=G(this);return u(e.reject,void 0,n),e.promise}}),s({target:q,stat:!0,forced:c||en},{resolve:function(n){return P(c&&this===o?X:this,n)}}),s({target:q,stat:!0,forced:tn},{all:function(n){var e=this,t=G(e),r=t.resolve,a=t.reject,o=E((function(){var t=v(e.resolve),o=[],i=0,s=1;_(n,(function(n){var c=i++,l=!1;s++,u(t,e,n).then((function(n){l||(l=!0,o[c]=n,--s||r(o))}),a)})),--s||r(o)}));return o.error&&a(o.value),t.promise},race:function(n){var e=this,t=G(e),r=t.reject,a=E((function(){var a=v(e.resolve);_(n,(function(n){u(a,e,n).then(t.resolve,r)}))}));return a.error&&r(a.value),t.promise}})},function(n,e,t){var r=t(0),a=t(53),o=t(11),i=t(7),s=t(81),c=t(162),l=t(20),p=t(33),u=t(141),f=t(101),d=t(163),m=r.TypeError,h=function(n,e){this.stopped=n,this.result=e},b=h.prototype;n.exports=function(n,e,t){var r,g,v,y,x,w,S,_=t&&t.that,k=!(!t||!t.AS_ENTRIES),C=!(!t||!t.IS_ITERATOR),A=!(!t||!t.INTERRUPTED),j=a(e,_),P=function(n){return r&&d(r,"normal",n),new h(!0,n)},T=function(n){return k?(i(n),A?j(n[0],n[1],P):j(n[0],n[1])):A?j(n,P):j(n)};if(C)r=n;else{if(!(g=f(n)))throw m(s(n)+" is not iterable");if(c(g)){for(v=0,y=l(n);y>v;v++)if((x=T(n[v]))&&p(b,x))return x;return new h(!1)}r=u(n,g)}for(w=r.next;!(S=o(w,r)).done;){try{x=T(S.value)}catch(n){d(r,"throw",n)}if("object"==typeof x&&x&&p(b,x))return x}return new h(!1)}},function(n,e,t){var r,a,o,i,s,c,l,p,u=t(0),f=t(53),d=t(39).f,m=t(166).set,h=t(167),b=t(239),g=t(240),v=t(86),y=u.MutationObserver||u.WebKitMutationObserver,x=u.document,w=u.process,S=u.Promise,_=d(u,"queueMicrotask"),k=_&&_.value;k||(r=function(){var n,e;for(v&&(n=w.domain)&&n.exit();a;){e=a.fn,a=a.next;try{e()}catch(n){throw a?i():o=void 0,n}}o=void 0,n&&n.enter()},h||v||g||!y||!x?!b&&S&&S.resolve?((l=S.resolve(void 0)).constructor=S,p=f(l.then,l),i=function(){p(r)}):v?i=function(){w.nextTick(r)}:(m=f(m,u),i=function(){m(r)}):(s=!0,c=x.createTextNode(""),new y(r).observe(c,{characterData:!0}),i=function(){c.data=s=!s})),n.exports=k||function(n){var e={fn:n,next:void 0};o&&(o.next=e),a||(a=e,i()),o=e}},function(n,e,t){var r=t(27),a=t(0);n.exports=/ipad|iphone|ipod/i.test(r)&&void 0!==a.Pebble},function(n,e,t){var r=t(27);n.exports=/web0s(?!.*chrome)/i.test(r)},function(n,e,t){var r=t(0);n.exports=function(n,e){var t=r.console;t&&t.error&&(1==arguments.length?t.error(n):t.error(n,e))}},function(n,e){n.exports=function(n){try{return{error:!1,value:n()}}catch(n){return{error:!0,value:n}}}},function(n,e){var t=function(){this.head=null,this.tail=null};t.prototype={add:function(n){var e={item:n,next:null};this.head?this.tail.next=e:this.head=e,this.tail=e},get:function(){var n=this.head;if(n)return this.head=n.next,this.tail===n&&(this.tail=null),n.item}},n.exports=t},function(n,e){n.exports="object"==typeof window},function(n,e,t){var r=t(2),a=t(246);r({target:"Object",stat:!0,forced:Object.assign!==a},{assign:a})},function(n,e,t){"use strict";var r=t(9),a=t(1),o=t(11),i=t(3),s=t(82),c=t(115),l=t(113),p=t(15),u=t(59),f=Object.assign,d=Object.defineProperty,m=a([].concat);n.exports=!f||i((function(){if(r&&1!==f({b:1},f(d({},"a",{enumerable:!0,get:function(){d(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var n={},e={},t=Symbol();return n[t]=7,"abcdefghijklmnopqrst".split("").forEach((function(n){e[n]=n})),7!=f({},n)[t]||"abcdefghijklmnopqrst"!=s(f({},e)).join("")}))?function(n,e){for(var t=p(n),a=arguments.length,i=1,f=c.f,d=l.f;a>i;)for(var h,b=u(arguments[i++]),g=f?m(s(b),f(b)):s(b),v=g.length,y=0;v>y;)h=g[y++],r&&!o(d,b,h)||(t[h]=b[h]);return t}:f},function(n,e,t){"use strict";var r=t(2),a=t(22),o=t(161),i=t(3),s=t(16),c=t(4),l=t(118),p=t(168),u=t(14);if(r({target:"Promise",proto:!0,real:!0,forced:!!o&&i((function(){o.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(n){var e=l(this,s("Promise")),t=c(n);return this.then(t?function(t){return p(e,n()).then((function(){return t}))}:n,t?function(t){return p(e,n()).then((function(){throw t}))}:n)}}),!a&&c(o)){var f=s("Promise").prototype.finally;o.prototype.finally!==f&&u(o.prototype,"finally",f,{unsafe:!0})}},function(n,e,t){"use strict";var r=t(117),a=t(73);n.exports=r?{}.toString:function(){return"[object "+a(this)+"]"}},function(n,e,t){var r=t(0),a=t(57),o=t(85),i=t(8),s=t(5)("species"),c=r.Array;n.exports=function(n){var e;return a(n)&&(e=n.constructor,(o(e)&&(e===c||a(e.prototype))||i(e)&&null===(e=e[s]))&&(e=void 0)),void 0===e?c:e}},function(n,e,t){"use strict";var r=t(2),a=t(251).left,o=t(45),i=t(49),s=t(86);r({target:"Array",proto:!0,forced:!o("reduce")||!s&&i>79&&i<83},{reduce:function(n){var e=arguments.length;return a(this,n,e,e>1?arguments[1]:void 0)}})},function(n,e,t){var r=t(0),a=t(35),o=t(15),i=t(59),s=t(20),c=r.TypeError,l=function(n){return function(e,t,r,l){a(t);var p=o(e),u=i(p),f=s(p),d=n?f-1:0,m=n?-1:1;if(r<2)for(;;){if(d in u){l=u[d],d+=m;break}if(d+=m,n?d<0:f<=d)throw c("Reduce of empty array with no initial value")}for(;n?d>=0:f>d;d+=m)d in u&&(l=t(l,u[d],d,p));return l}};n.exports={left:l(!1),right:l(!0)}},function(n,e,t){"use strict";var r,a=t(2),o=t(1),i=t(39).f,s=t(50),c=t(12),l=t(174),p=t(17),u=t(175),f=t(22),d=o("".startsWith),m=o("".slice),h=Math.min,b=u("startsWith");a({target:"String",proto:!0,forced:!!(f||b||(r=i(String.prototype,"startsWith"),!r||r.writable))&&!b},{startsWith:function(n){var e=c(p(this));l(n);var t=s(h(arguments.length>1?arguments[1]:void 0,e.length)),r=c(n);return d?d(e,r,t):m(e,t,t+r.length)===r}})},function(n,e,t){var r=t(2),a=t(177),o=t(3),i=t(8),s=t(254).onFreeze,c=Object.freeze;r({target:"Object",stat:!0,forced:o((function(){c(1)})),sham:!a},{freeze:function(n){return c&&i(n)?c(s(n)):n}})},function(n,e,t){var r=t(2),a=t(1),o=t(61),i=t(8),s=t(10),c=t(13).f,l=t(55),p=t(178),u=t(255),f=t(77),d=t(177),m=!1,h=f("meta"),b=0,g=function(n){c(n,h,{value:{objectID:"O"+b++,weakData:{}}})},v=n.exports={enable:function(){v.enable=function(){},m=!0;var n=l.f,e=a([].splice),t={};t[h]=1,n(t).length&&(l.f=function(t){for(var r=n(t),a=0,o=r.length;a<o;a++)if(r[a]===h){e(r,a,1);break}return r},r({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:p.f}))},fastKey:function(n,e){if(!i(n))return"symbol"==typeof n?n:("string"==typeof n?"S":"P")+n;if(!s(n,h)){if(!u(n))return"F";if(!e)return"E";g(n)}return n[h].objectID},getWeakData:function(n,e){if(!s(n,h)){if(!u(n))return!0;if(!e)return!1;g(n)}return n[h].weakData},onFreeze:function(n){return d&&m&&u(n)&&!s(n,h)&&g(n),n}};o[h]=!0},function(n,e,t){var r=t(3),a=t(8),o=t(21),i=t(256),s=Object.isExtensible,c=r((function(){s(1)}));n.exports=c||i?function(n){return!!a(n)&&((!i||"ArrayBuffer"!=o(n))&&(!s||s(n)))}:s},function(n,e,t){var r=t(3);n.exports=r((function(){if("function"==typeof ArrayBuffer){var n=new ArrayBuffer(8);Object.isExtensible(n)&&Object.defineProperty(n,"a",{value:8})}}))},function(n,e,t){var r=t(0);n.exports=r},function(n,e,t){"use strict";var r=t(0),a=t(53),o=t(11),i=t(15),s=t(259),c=t(162),l=t(85),p=t(20),u=t(66),f=t(141),d=t(101),m=r.Array;n.exports=function(n){var e=i(n),t=l(this),r=arguments.length,h=r>1?arguments[1]:void 0,b=void 0!==h;b&&(h=a(h,r>2?arguments[2]:void 0));var g,v,y,x,w,S,_=d(e),k=0;if(!_||this==m&&c(_))for(g=p(e),v=t?new this(g):m(g);g>k;k++)S=b?h(e[k],k):e[k],u(v,k,S);else for(w=(x=f(e,_)).next,v=t?new this:[];!(y=o(w,x)).done;k++)S=b?s(x,h,[y.value,k],!0):y.value,u(v,k,S);return v.length=k,v}},function(n,e,t){var r=t(7),a=t(163);n.exports=function(n,e,t,o){try{return o?e(r(t)[0],t[1]):e(t)}catch(e){a(n,"throw",e)}}},function(n,e,t){"use strict";var r=t(16),a=t(10),o=t(23),i=t(33),s=t(64),c=t(114),l=t(145),p=t(182),u=t(261),f=t(262),d=t(263),m=t(22);n.exports=function(n,e,t,h){var b=h?2:1,g=n.split("."),v=g[g.length-1],y=r.apply(null,g);if(y){var x=y.prototype;if(!m&&a(x,"cause")&&delete x.cause,!t)return y;var w=r("Error"),S=e((function(n,e){var t=p(h?e:n,void 0),r=h?new y(n):new y;return void 0!==t&&o(r,"message",t),d&&o(r,"stack",f(r.stack,2)),this&&i(x,this)&&l(r,this,S),arguments.length>b&&u(r,arguments[b]),r}));if(S.prototype=x,"Error"!==v&&(s?s(S,w):c(S,w,{name:!0})),c(S,y),!m)try{x.name!==v&&o(x,"name",v),x.constructor=S}catch(n){}return S}}},function(n,e,t){var r=t(8),a=t(23);n.exports=function(n,e){r(e)&&"cause"in e&&a(n,"cause",e.cause)}},function(n,e,t){var r=t(1)("".replace),a=String(Error("zxcasd").stack),o=/\n\s*at [^:]*:[^\n]*/,i=o.test(a);n.exports=function(n,e){if(i&&"string"==typeof n)for(;e--;)n=r(n,o,"");return n}},function(n,e,t){var r=t(3),a=t(47);n.exports=!r((function(){var n=Error("a");return!("stack"in n)||(Object.defineProperty(n,"stack",a(1,7)),7!==n.stack)}))},function(n,e,t){"use strict";var r=t(9),a=t(3),o=t(7),i=t(32),s=t(182),c=Error.prototype.toString,l=a((function(){if(r){var n=i(Object.defineProperty({},"name",{get:function(){return this===n}}));if("true"!==c.call(n))return!0}return"2: 1"!==c.call({message:1,name:2})||"Error"!==c.call({})}));n.exports=l?function(){var n=o(this),e=s(n.name,"Error"),t=s(n.message);return e?t?e+": "+t:e:t}:c},function(n,e,t){var r=t(1),a=t(15),o=Math.floor,i=r("".charAt),s=r("".replace),c=r("".slice),l=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,p=/\$([$&'`]|\d{1,2})/g;n.exports=function(n,e,t,r,u,f){var d=t+n.length,m=r.length,h=p;return void 0!==u&&(u=a(u),h=l),s(f,h,(function(a,s){var l;switch(i(s,0)){case"$":return"$";case"&":return n;case"`":return c(e,0,t);case"'":return c(e,d);case"<":l=u[c(s,1,-1)];break;default:var p=+s;if(0===p)return a;if(p>m){var f=o(p/10);return 0===f?a:f<=m?void 0===r[f-1]?i(s,1):r[f-1]+i(s,1):a}l=r[p-1]}return void 0===l?"":l}))}},function(n,e,t){var r=t(185),a=t(267);n.exports=function n(e,t,o,i,s){var c=-1,l=e.length;for(o||(o=a),s||(s=[]);++c<l;){var p=e[c];t>0&&o(p)?t>1?n(p,t-1,o,i,s):r(s,p):i||(s[s.length]=p)}return s}},function(n,e,t){var r=t(67),a=t(122),o=t(26),i=r?r.isConcatSpreadable:void 0;n.exports=function(n){return o(n)||a(n)||!!(i&&n&&n[i])}},function(n,e,t){var r=t(58),a=t(48);n.exports=function(n){return a(n)&&"[object Arguments]"==r(n)}},function(n,e,t){var r=t(67),a=Object.prototype,o=a.hasOwnProperty,i=a.toString,s=r?r.toStringTag:void 0;n.exports=function(n){var e=o.call(n,s),t=n[s];try{n[s]=void 0;var r=!0}catch(n){}var a=i.call(n);return r&&(e?n[s]=t:delete n[s]),a}},function(n,e){var t=Object.prototype.toString;n.exports=function(n){return t.call(n)}},function(n,e,t){var r=t(272),a=t(328),o=t(130),i=t(26),s=t(339);n.exports=function(n){return"function"==typeof n?n:null==n?o:"object"==typeof n?i(n)?a(n[0],n[1]):r(n):s(n)}},function(n,e,t){var r=t(273),a=t(327),o=t(202);n.exports=function(n){var e=a(n);return 1==e.length&&e[0][2]?o(e[0][0],e[0][1]):function(t){return t===n||r(t,n,e)}}},function(n,e,t){var r=t(187),a=t(191);n.exports=function(n,e,t,o){var i=t.length,s=i,c=!o;if(null==n)return!s;for(n=Object(n);i--;){var l=t[i];if(c&&l[2]?l[1]!==n[l[0]]:!(l[0]in n))return!1}for(;++i<s;){var p=(l=t[i])[0],u=n[p],f=l[1];if(c&&l[2]){if(void 0===u&&!(p in n))return!1}else{var d=new r;if(o)var m=o(u,f,p,n,e,d);if(!(void 0===m?a(f,u,3,o,d):m))return!1}}return!0}},function(n,e){n.exports=function(){this.__data__=[],this.size=0}},function(n,e,t){var r=t(92),a=Array.prototype.splice;n.exports=function(n){var e=this.__data__,t=r(e,n);return!(t<0)&&(t==e.length-1?e.pop():a.call(e,t,1),--this.size,!0)}},function(n,e,t){var r=t(92);n.exports=function(n){var e=this.__data__,t=r(e,n);return t<0?void 0:e[t][1]}},function(n,e,t){var r=t(92);n.exports=function(n){return r(this.__data__,n)>-1}},function(n,e,t){var r=t(92);n.exports=function(n,e){var t=this.__data__,a=r(t,n);return a<0?(++this.size,t.push([n,e])):t[a][1]=e,this}},function(n,e,t){var r=t(91);n.exports=function(){this.__data__=new r,this.size=0}},function(n,e){n.exports=function(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}},function(n,e){n.exports=function(n){return this.__data__.get(n)}},function(n,e){n.exports=function(n){return this.__data__.has(n)}},function(n,e,t){var r=t(91),a=t(123),o=t(125);n.exports=function(n,e){var t=this.__data__;if(t instanceof r){var i=t.__data__;if(!a||i.length<199)return i.push([n,e]),this.size=++t.size,this;t=this.__data__=new o(i)}return t.set(n,e),this.size=t.size,this}},function(n,e,t){var r=t(189),a=t(285),o=t(124),i=t(190),s=/^\[object .+?Constructor\]$/,c=Function.prototype,l=Object.prototype,p=c.toString,u=l.hasOwnProperty,f=RegExp("^"+p.call(u).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");n.exports=function(n){return!(!o(n)||a(n))&&(r(n)?f:s).test(i(n))}},function(n,e,t){var r,a=t(286),o=(r=/[^.]+$/.exec(a&&a.keys&&a.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";n.exports=function(n){return!!o&&o in n}},function(n,e,t){var r=t(28)["__core-js_shared__"];n.exports=r},function(n,e){n.exports=function(n,e){return null==n?void 0:n[e]}},function(n,e,t){var r=t(289),a=t(91),o=t(123);n.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||a),string:new r}}},function(n,e,t){var r=t(290),a=t(291),o=t(292),i=t(293),s=t(294);function c(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=a,c.prototype.get=o,c.prototype.has=i,c.prototype.set=s,n.exports=c},function(n,e,t){var r=t(93);n.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(n,e){n.exports=function(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}},function(n,e,t){var r=t(93),a=Object.prototype.hasOwnProperty;n.exports=function(n){var e=this.__data__;if(r){var t=e[n];return"__lodash_hash_undefined__"===t?void 0:t}return a.call(e,n)?e[n]:void 0}},function(n,e,t){var r=t(93),a=Object.prototype.hasOwnProperty;n.exports=function(n){var e=this.__data__;return r?void 0!==e[n]:a.call(e,n)}},function(n,e,t){var r=t(93);n.exports=function(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=r&&void 0===e?"__lodash_hash_undefined__":e,this}},function(n,e,t){var r=t(94);n.exports=function(n){var e=r(this,n).delete(n);return this.size-=e?1:0,e}},function(n,e){n.exports=function(n){var e=typeof n;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==n:null===n}},function(n,e,t){var r=t(94);n.exports=function(n){return r(this,n).get(n)}},function(n,e,t){var r=t(94);n.exports=function(n){return r(this,n).has(n)}},function(n,e,t){var r=t(94);n.exports=function(n,e){var t=r(this,n),a=t.size;return t.set(n,e),this.size+=t.size==a?0:1,this}},function(n,e,t){var r=t(187),a=t(192),o=t(304),i=t(307),s=t(323),c=t(26),l=t(196),p=t(198),u="[object Object]",f=Object.prototype.hasOwnProperty;n.exports=function(n,e,t,d,m,h){var b=c(n),g=c(e),v=b?"[object Array]":s(n),y=g?"[object Array]":s(e),x=(v="[object Arguments]"==v?u:v)==u,w=(y="[object Arguments]"==y?u:y)==u,S=v==y;if(S&&l(n)){if(!l(e))return!1;b=!0,x=!1}if(S&&!x)return h||(h=new r),b||p(n)?a(n,e,t,d,m,h):o(n,e,v,t,d,m,h);if(!(1&t)){var _=x&&f.call(n,"__wrapped__"),k=w&&f.call(e,"__wrapped__");if(_||k){var C=_?n.value():n,A=k?e.value():e;return h||(h=new r),m(C,A,t,d,h)}}return!!S&&(h||(h=new r),i(n,e,t,d,m,h))}},function(n,e){n.exports=function(n){return this.__data__.set(n,"__lodash_hash_undefined__"),this}},function(n,e){n.exports=function(n){return this.__data__.has(n)}},function(n,e){n.exports=function(n,e){for(var t=-1,r=null==n?0:n.length;++t<r;)if(e(n[t],t,n))return!0;return!1}},function(n,e,t){var r=t(67),a=t(305),o=t(188),i=t(192),s=t(306),c=t(126),l=r?r.prototype:void 0,p=l?l.valueOf:void 0;n.exports=function(n,e,t,r,l,u,f){switch(t){case"[object DataView]":if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(n.byteLength!=e.byteLength||!u(new a(n),new a(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return o(+n,+e);case"[object Error]":return n.name==e.name&&n.message==e.message;case"[object RegExp]":case"[object String]":return n==e+"";case"[object Map]":var d=s;case"[object Set]":var m=1&r;if(d||(d=c),n.size!=e.size&&!m)return!1;var h=f.get(n);if(h)return h==e;r|=2,f.set(n,e);var b=i(d(n),d(e),r,l,u,f);return f.delete(n),b;case"[object Symbol]":if(p)return p.call(n)==p.call(e)}return!1}},function(n,e,t){var r=t(28).Uint8Array;n.exports=r},function(n,e){n.exports=function(n){var e=-1,t=Array(n.size);return n.forEach((function(n,r){t[++e]=[r,n]})),t}},function(n,e,t){var r=t(308),a=Object.prototype.hasOwnProperty;n.exports=function(n,e,t,o,i,s){var c=1&t,l=r(n),p=l.length;if(p!=r(e).length&&!c)return!1;for(var u=p;u--;){var f=l[u];if(!(c?f in e:a.call(e,f)))return!1}var d=s.get(n),m=s.get(e);if(d&&m)return d==e&&m==n;var h=!0;s.set(n,e),s.set(e,n);for(var b=c;++u<p;){var g=n[f=l[u]],v=e[f];if(o)var y=c?o(v,g,f,e,n,s):o(g,v,f,n,e,s);if(!(void 0===y?g===v||i(g,v,t,o,s):y)){h=!1;break}b||(b="constructor"==f)}if(h&&!b){var x=n.constructor,w=e.constructor;x==w||!("constructor"in n)||!("constructor"in e)||"function"==typeof x&&x instanceof x&&"function"==typeof w&&w instanceof w||(h=!1)}return s.delete(n),s.delete(e),h}},function(n,e,t){var r=t(309),a=t(310),o=t(195);n.exports=function(n){return r(n,o,a)}},function(n,e,t){var r=t(185),a=t(26);n.exports=function(n,e,t){var o=e(n);return a(n)?o:r(o,t(n))}},function(n,e,t){var r=t(311),a=t(312),o=Object.prototype.propertyIsEnumerable,i=Object.getOwnPropertySymbols,s=i?function(n){return null==n?[]:(n=Object(n),r(i(n),(function(e){return o.call(n,e)})))}:a;n.exports=s},function(n,e){n.exports=function(n,e){for(var t=-1,r=null==n?0:n.length,a=0,o=[];++t<r;){var i=n[t];e(i,t,n)&&(o[a++]=i)}return o}},function(n,e){n.exports=function(){return[]}},function(n,e,t){var r=t(314),a=t(122),o=t(26),i=t(196),s=t(197),c=t(198),l=Object.prototype.hasOwnProperty;n.exports=function(n,e){var t=o(n),p=!t&&a(n),u=!t&&!p&&i(n),f=!t&&!p&&!u&&c(n),d=t||p||u||f,m=d?r(n.length,String):[],h=m.length;for(var b in n)!e&&!l.call(n,b)||d&&("length"==b||u&&("offset"==b||"parent"==b)||f&&("buffer"==b||"byteLength"==b||"byteOffset"==b)||s(b,h))||m.push(b);return m}},function(n,e){n.exports=function(n,e){for(var t=-1,r=Array(n);++t<n;)r[t]=e(t);return r}},function(n,e){n.exports=function(){return!1}},function(n,e,t){var r=t(58),a=t(127),o=t(48),i={};i["[object Float32Array]"]=i["[object Float64Array]"]=i["[object Int8Array]"]=i["[object Int16Array]"]=i["[object Int32Array]"]=i["[object Uint8Array]"]=i["[object Uint8ClampedArray]"]=i["[object Uint16Array]"]=i["[object Uint32Array]"]=!0,i["[object Arguments]"]=i["[object Array]"]=i["[object ArrayBuffer]"]=i["[object Boolean]"]=i["[object DataView]"]=i["[object Date]"]=i["[object Error]"]=i["[object Function]"]=i["[object Map]"]=i["[object Number]"]=i["[object Object]"]=i["[object RegExp]"]=i["[object Set]"]=i["[object String]"]=i["[object WeakMap]"]=!1,n.exports=function(n){return o(n)&&a(n.length)&&!!i[r(n)]}},function(n,e){n.exports=function(n){return function(e){return n(e)}}},function(n,e,t){(function(n){var r=t(186),a=e&&!e.nodeType&&e,o=a&&"object"==typeof n&&n&&!n.nodeType&&n,i=o&&o.exports===a&&r.process,s=function(){try{var n=o&&o.require&&o.require("util").types;return n||i&&i.binding&&i.binding("util")}catch(n){}}();n.exports=s}).call(this,t(146)(n))},function(n,e,t){var r=t(320),a=t(321),o=Object.prototype.hasOwnProperty;n.exports=function(n){if(!r(n))return a(n);var e=[];for(var t in Object(n))o.call(n,t)&&"constructor"!=t&&e.push(t);return e}},function(n,e){var t=Object.prototype;n.exports=function(n){var e=n&&n.constructor;return n===("function"==typeof e&&e.prototype||t)}},function(n,e,t){var r=t(322)(Object.keys,Object);n.exports=r},function(n,e){n.exports=function(n,e){return function(t){return n(e(t))}}},function(n,e,t){var r=t(324),a=t(123),o=t(325),i=t(200),s=t(326),c=t(58),l=t(190),p=l(r),u=l(a),f=l(o),d=l(i),m=l(s),h=c;(r&&"[object DataView]"!=h(new r(new ArrayBuffer(1)))||a&&"[object Map]"!=h(new a)||o&&"[object Promise]"!=h(o.resolve())||i&&"[object Set]"!=h(new i)||s&&"[object WeakMap]"!=h(new s))&&(h=function(n){var e=c(n),t="[object Object]"==e?n.constructor:void 0,r=t?l(t):"";if(r)switch(r){case p:return"[object DataView]";case u:return"[object Map]";case f:return"[object Promise]";case d:return"[object Set]";case m:return"[object WeakMap]"}return e}),n.exports=h},function(n,e,t){var r=t(41)(t(28),"DataView");n.exports=r},function(n,e,t){var r=t(41)(t(28),"Promise");n.exports=r},function(n,e,t){var r=t(41)(t(28),"WeakMap");n.exports=r},function(n,e,t){var r=t(201),a=t(195);n.exports=function(n){for(var e=a(n),t=e.length;t--;){var o=e[t],i=n[o];e[t]=[o,i,r(i)]}return e}},function(n,e,t){var r=t(191),a=t(329),o=t(336),i=t(128),s=t(201),c=t(202),l=t(95);n.exports=function(n,e){return i(n)&&s(e)?c(l(n),e):function(t){var i=a(t,n);return void 0===i&&i===e?o(t,n):r(e,i,3)}}},function(n,e,t){var r=t(203);n.exports=function(n,e,t){var a=null==n?void 0:r(n,e);return void 0===a?t:a}},function(n,e,t){var r=t(331),a=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,i=r((function(n){var e=[];return 46===n.charCodeAt(0)&&e.push(""),n.replace(a,(function(n,t,r,a){e.push(r?a.replace(o,"$1"):t||n)})),e}));n.exports=i},function(n,e,t){var r=t(332);n.exports=function(n){var e=r(n,(function(n){return 500===t.size&&t.clear(),n})),t=e.cache;return e}},function(n,e,t){var r=t(125);function a(n,e){if("function"!=typeof n||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var t=function(){var r=arguments,a=e?e.apply(this,r):r[0],o=t.cache;if(o.has(a))return o.get(a);var i=n.apply(this,r);return t.cache=o.set(a,i)||o,i};return t.cache=new(a.Cache||r),t}a.Cache=r,n.exports=a},function(n,e,t){var r=t(334);n.exports=function(n){return null==n?"":r(n)}},function(n,e,t){var r=t(67),a=t(335),o=t(26),i=t(129),s=r?r.prototype:void 0,c=s?s.toString:void 0;n.exports=function n(e){if("string"==typeof e)return e;if(o(e))return a(e,n)+"";if(i(e))return c?c.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},function(n,e){n.exports=function(n,e){for(var t=-1,r=null==n?0:n.length,a=Array(r);++t<r;)a[t]=e(n[t],t,n);return a}},function(n,e,t){var r=t(337),a=t(338);n.exports=function(n,e){return null!=n&&a(n,e,r)}},function(n,e){n.exports=function(n,e){return null!=n&&e in Object(n)}},function(n,e,t){var r=t(204),a=t(122),o=t(26),i=t(197),s=t(127),c=t(95);n.exports=function(n,e,t){for(var l=-1,p=(e=r(e,n)).length,u=!1;++l<p;){var f=c(e[l]);if(!(u=null!=n&&t(n,f)))break;n=n[f]}return u||++l!=p?u:!!(p=null==n?0:n.length)&&s(p)&&i(f,p)&&(o(n)||a(n))}},function(n,e,t){var r=t(340),a=t(341),o=t(128),i=t(95);n.exports=function(n){return o(n)?r(i(n)):a(n)}},function(n,e){n.exports=function(n){return function(e){return null==e?void 0:e[n]}}},function(n,e,t){var r=t(203);n.exports=function(n){return function(e){return r(e,n)}}},function(n,e,t){var r=t(130),a=t(343),o=t(345);n.exports=function(n,e){return o(a(n,e,r),n+"")}},function(n,e,t){var r=t(344),a=Math.max;n.exports=function(n,e,t){return e=a(void 0===e?n.length-1:e,0),function(){for(var o=arguments,i=-1,s=a(o.length-e,0),c=Array(s);++i<s;)c[i]=o[e+i];i=-1;for(var l=Array(e+1);++i<e;)l[i]=o[i];return l[e]=t(c),r(n,this,l)}}},function(n,e){n.exports=function(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}},function(n,e,t){var r=t(346),a=t(349)(r);n.exports=a},function(n,e,t){var r=t(347),a=t(348),o=t(130),i=a?function(n,e){return a(n,"toString",{configurable:!0,enumerable:!1,value:r(e),writable:!0})}:o;n.exports=i},function(n,e){n.exports=function(n){return function(){return n}}},function(n,e,t){var r=t(41),a=function(){try{var n=r(Object,"defineProperty");return n({},"",{}),n}catch(n){}}();n.exports=a},function(n,e){var t=Date.now;n.exports=function(n){var e=0,r=0;return function(){var a=t(),o=16-(a-r);if(r=a,o>0){if(++e>=800)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}},function(n,e,t){var r=t(193),a=t(351),o=t(356),i=t(194),s=t(357),c=t(126);n.exports=function(n,e,t){var l=-1,p=a,u=n.length,f=!0,d=[],m=d;if(t)f=!1,p=o;else if(u>=200){var h=e?null:s(n);if(h)return c(h);f=!1,p=i,m=new r}else m=e?[]:d;n:for(;++l<u;){var b=n[l],g=e?e(b):b;if(b=t||0!==b?b:0,f&&g==g){for(var v=m.length;v--;)if(m[v]===g)continue n;e&&m.push(g),d.push(b)}else p(m,g,t)||(m!==d&&m.push(g),d.push(b))}return d}},function(n,e,t){var r=t(352);n.exports=function(n,e){return!!(null==n?0:n.length)&&r(n,e,0)>-1}},function(n,e,t){var r=t(353),a=t(354),o=t(355);n.exports=function(n,e,t){return e==e?o(n,e,t):r(n,a,t)}},function(n,e){n.exports=function(n,e,t,r){for(var a=n.length,o=t+(r?1:-1);r?o--:++o<a;)if(e(n[o],o,n))return o;return-1}},function(n,e){n.exports=function(n){return n!=n}},function(n,e){n.exports=function(n,e,t){for(var r=t-1,a=n.length;++r<a;)if(n[r]===e)return r;return-1}},function(n,e){n.exports=function(n,e,t){for(var r=-1,a=null==n?0:n.length;++r<a;)if(t(e,n[r]))return!0;return!1}},function(n,e,t){var r=t(200),a=t(358),o=t(126),i=r&&1/o(new r([,-0]))[1]==1/0?function(n){return new r(n)}:a;n.exports=i},function(n,e){n.exports=function(){}},function(n,e,t){var r=t(199),a=t(48);n.exports=function(n){return a(n)&&r(n)}},function(n,e,t){},function(n,e,t){},function(n,e,t){var r=t(63).PROPER,a=t(3),o=t(149);n.exports=function(n){return a((function(){return!!o[n]()||"âÂá "!=="âÂá "[n]()||r&&o[n].name!==n}))}},function(n,e,t){var r=t(2),a=t(205);r({target:"Function",proto:!0,forced:Function.bind!==a},{bind:a})},function(n,e,t){var r=t(1);n.exports=r(1..valueOf)},function(n,e){},function(n,e,t){var r=t(1),a=t(50),o=t(12),i=t(367),s=t(17),c=r(i),l=r("".slice),p=Math.ceil,u=function(n){return function(e,t,r){var i,u,f=o(s(e)),d=a(t),m=f.length,h=void 0===r?" ":o(r);return d<=m||""==h?f:((u=c(h,p((i=d-m)/h.length))).length>i&&(u=l(u,0,i)),n?f+u:u+f)}};n.exports={start:u(!1),end:u(!0)}},function(n,e,t){"use strict";var r=t(0),a=t(52),o=t(12),i=t(17),s=r.RangeError;n.exports=function(n){var e=o(i(this)),t="",r=a(n);if(r<0||r==1/0)throw s("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(e+=e))1&r&&(t+=e);return t}},function(n,e,t){var r=t(27);n.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(r)},function(n,e,t){"use strict";t(207)},function(n,e,t){"use strict";t(208)},function(n,e,t){"use strict";var r=t(2),a=t(1),o=t(35),i=t(15),s=t(20),c=t(12),l=t(3),p=t(230),u=t(45),f=t(372),d=t(373),m=t(49),h=t(374),b=[],g=a(b.sort),v=a(b.push),y=l((function(){b.sort(void 0)})),x=l((function(){b.sort(null)})),w=u("sort"),S=!l((function(){if(m)return m<70;if(!(f&&f>3)){if(d)return!0;if(h)return h<603;var n,e,t,r,a="";for(n=65;n<76;n++){switch(e=String.fromCharCode(n),n){case 66:case 69:case 70:case 72:t=3;break;case 68:case 71:t=4;break;default:t=2}for(r=0;r<47;r++)b.push({k:e+r,v:t})}for(b.sort((function(n,e){return e.v-n.v})),r=0;r<b.length;r++)e=b[r].k.charAt(0),a.charAt(a.length-1)!==e&&(a+=e);return"DGBEFHACIJK"!==a}}));r({target:"Array",proto:!0,forced:y||!x||!w||!S},{sort:function(n){void 0!==n&&o(n);var e=i(this);if(S)return void 0===n?g(e):g(e,n);var t,r,a=[],l=s(e);for(r=0;r<l;r++)r in e&&v(a,e[r]);for(p(a,function(n){return function(e,t){return void 0===t?-1:void 0===e?1:void 0!==n?+n(e,t)||0:c(e)>c(t)?1:-1}}(n)),t=a.length,r=0;r<t;)e[r]=a[r++];for(;r<l;)delete e[r++];return e}})},function(n,e,t){var r=t(27).match(/firefox\/(\d+)/i);n.exports=!!r&&+r[1]},function(n,e,t){var r=t(27);n.exports=/MSIE|Trident/.test(r)},function(n,e,t){var r=t(27).match(/AppleWebKit\/(\d+)\./);n.exports=!!r&&+r[1]},function(n,e,t){},function(n,e,t){},function(n,e,t){"use strict";t(212)},function(n,e,t){"use strict";t(213)},function(n,e,t){"use strict";t.r(e);t(139),t(236),t(245),t(247);var r=t(87),a=(t(136),t(51),t(6),t(24),t(31),t(43),t(30),Object.freeze({}));function o(n){return null==n}function i(n){return null!=n}function s(n){return!0===n}function c(n){return"string"==typeof n||"number"==typeof n||"symbol"==typeof n||"boolean"==typeof n}function l(n){return null!==n&&"object"==typeof n}var p=Object.prototype.toString;function u(n){return"[object Object]"===p.call(n)}function f(n){return"[object RegExp]"===p.call(n)}function d(n){var e=parseFloat(String(n));return e>=0&&Math.floor(e)===e&&isFinite(n)}function m(n){return i(n)&&"function"==typeof n.then&&"function"==typeof n.catch}function h(n){return null==n?"":Array.isArray(n)||u(n)&&n.toString===p?JSON.stringify(n,null,2):String(n)}function b(n){var e=parseFloat(n);return isNaN(e)?n:e}function g(n,e){for(var t=Object.create(null),r=n.split(","),a=0;a<r.length;a++)t[r[a]]=!0;return e?function(n){return t[n.toLowerCase()]}:function(n){return t[n]}}g("slot,component",!0);var v=g("key,ref,slot,slot-scope,is");function y(n,e){if(n.length){var t=n.indexOf(e);if(t>-1)return n.splice(t,1)}}var x=Object.prototype.hasOwnProperty;function w(n,e){return x.call(n,e)}function S(n){var e=Object.create(null);return function(t){return e[t]||(e[t]=n(t))}}var _=/-(\w)/g,k=S((function(n){return n.replace(_,(function(n,e){return e?e.toUpperCase():""}))})),C=S((function(n){return n.charAt(0).toUpperCase()+n.slice(1)})),A=/\B([A-Z])/g,j=S((function(n){return n.replace(A,"-$1").toLowerCase()}));var P=Function.prototype.bind?function(n,e){return n.bind(e)}:function(n,e){function t(t){var r=arguments.length;return r?r>1?n.apply(e,arguments):n.call(e,t):n.call(e)}return t._length=n.length,t};function T(n,e){e=e||0;for(var t=n.length-e,r=new Array(t);t--;)r[t]=n[t+e];return r}function O(n,e){for(var t in e)n[t]=e[t];return n}function E(n){for(var e={},t=0;t<n.length;t++)n[t]&&O(e,n[t]);return e}function B(n,e,t){}var I=function(n,e,t){return!1},L=function(n){return n};function M(n,e){if(n===e)return!0;var t=l(n),r=l(e);if(!t||!r)return!t&&!r&&String(n)===String(e);try{var a=Array.isArray(n),o=Array.isArray(e);if(a&&o)return n.length===e.length&&n.every((function(n,t){return M(n,e[t])}));if(n instanceof Date&&e instanceof Date)return n.getTime()===e.getTime();if(a||o)return!1;var i=Object.keys(n),s=Object.keys(e);return i.length===s.length&&i.every((function(t){return M(n[t],e[t])}))}catch(n){return!1}}function D(n,e){for(var t=0;t<n.length;t++)if(M(n[t],e))return t;return-1}function R(n){var e=!1;return function(){e||(e=!0,n.apply(this,arguments))}}var $=["component","directive","filter"],F=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch"],q={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:I,isReservedAttr:I,isUnknownElement:I,getTagNamespace:B,parsePlatformTagName:L,mustUseProp:I,async:!0,_lifecycleHooks:F},z=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/;function N(n,e,t,r){Object.defineProperty(n,e,{value:t,enumerable:!!r,writable:!0,configurable:!0})}var U=new RegExp("[^"+z.source+".$_\\d]");var J,X="__proto__"in{},V="undefined"!=typeof window,H="undefined"!=typeof WXEnvironment&&!!WXEnvironment.platform,Q=H&&WXEnvironment.platform.toLowerCase(),W=V&&window.navigator.userAgent.toLowerCase(),G=W&&/msie|trident/.test(W),Y=W&&W.indexOf("msie 9.0")>0,K=W&&W.indexOf("edge/")>0,Z=(W&&W.indexOf("android"),W&&/iphone|ipad|ipod|ios/.test(W)||"ios"===Q),nn=(W&&/chrome\/\d+/.test(W),W&&/phantomjs/.test(W),W&&W.match(/firefox\/(\d+)/)),en={}.watch,tn=!1;if(V)try{var rn={};Object.defineProperty(rn,"passive",{get:function(){tn=!0}}),window.addEventListener("test-passive",null,rn)}catch(n){}var an=function(){return void 0===J&&(J=!V&&!H&&"undefined"!=typeof global&&(global.process&&"server"===global.process.env.VUE_ENV)),J},on=V&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function sn(n){return"function"==typeof n&&/native code/.test(n.toString())}var cn,ln="undefined"!=typeof Symbol&&sn(Symbol)&&"undefined"!=typeof Reflect&&sn(Reflect.ownKeys);cn="undefined"!=typeof Set&&sn(Set)?Set:function(){function n(){this.set=Object.create(null)}return n.prototype.has=function(n){return!0===this.set[n]},n.prototype.add=function(n){this.set[n]=!0},n.prototype.clear=function(){this.set=Object.create(null)},n}();var pn=B,un=0,fn=function(){this.id=un++,this.subs=[]};fn.prototype.addSub=function(n){this.subs.push(n)},fn.prototype.removeSub=function(n){y(this.subs,n)},fn.prototype.depend=function(){fn.target&&fn.target.addDep(this)},fn.prototype.notify=function(){var n=this.subs.slice();for(var e=0,t=n.length;e<t;e++)n[e].update()},fn.target=null;var dn=[];function mn(n){dn.push(n),fn.target=n}function hn(){dn.pop(),fn.target=dn[dn.length-1]}var bn=function(n,e,t,r,a,o,i,s){this.tag=n,this.data=e,this.children=t,this.text=r,this.elm=a,this.ns=void 0,this.context=o,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=e&&e.key,this.componentOptions=i,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=s,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1},gn={child:{configurable:!0}};gn.child.get=function(){return this.componentInstance},Object.defineProperties(bn.prototype,gn);var vn=function(n){void 0===n&&(n="");var e=new bn;return e.text=n,e.isComment=!0,e};function yn(n){return new bn(void 0,void 0,void 0,String(n))}function xn(n){var e=new bn(n.tag,n.data,n.children&&n.children.slice(),n.text,n.elm,n.context,n.componentOptions,n.asyncFactory);return e.ns=n.ns,e.isStatic=n.isStatic,e.key=n.key,e.isComment=n.isComment,e.fnContext=n.fnContext,e.fnOptions=n.fnOptions,e.fnScopeId=n.fnScopeId,e.asyncMeta=n.asyncMeta,e.isCloned=!0,e}var wn=Array.prototype,Sn=Object.create(wn);["push","pop","shift","unshift","splice","sort","reverse"].forEach((function(n){var e=wn[n];N(Sn,n,(function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];var a,o=e.apply(this,t),i=this.__ob__;switch(n){case"push":case"unshift":a=t;break;case"splice":a=t.slice(2)}return a&&i.observeArray(a),i.dep.notify(),o}))}));var _n=Object.getOwnPropertyNames(Sn),kn=!0;function Cn(n){kn=n}var An=function(n){this.value=n,this.dep=new fn,this.vmCount=0,N(n,"__ob__",this),Array.isArray(n)?(X?function(n,e){n.__proto__=e}(n,Sn):function(n,e,t){for(var r=0,a=t.length;r<a;r++){var o=t[r];N(n,o,e[o])}}(n,Sn,_n),this.observeArray(n)):this.walk(n)};function jn(n,e){var t;if(l(n)&&!(n instanceof bn))return w(n,"__ob__")&&n.__ob__ instanceof An?t=n.__ob__:kn&&!an()&&(Array.isArray(n)||u(n))&&Object.isExtensible(n)&&!n._isVue&&(t=new An(n)),e&&t&&t.vmCount++,t}function Pn(n,e,t,r,a){var o=new fn,i=Object.getOwnPropertyDescriptor(n,e);if(!i||!1!==i.configurable){var s=i&&i.get,c=i&&i.set;s&&!c||2!==arguments.length||(t=n[e]);var l=!a&&jn(t);Object.defineProperty(n,e,{enumerable:!0,configurable:!0,get:function(){var e=s?s.call(n):t;return fn.target&&(o.depend(),l&&(l.dep.depend(),Array.isArray(e)&&En(e))),e},set:function(e){var r=s?s.call(n):t;e===r||e!=e&&r!=r||s&&!c||(c?c.call(n,e):t=e,l=!a&&jn(e),o.notify())}})}}function Tn(n,e,t){if(Array.isArray(n)&&d(e))return n.length=Math.max(n.length,e),n.splice(e,1,t),t;if(e in n&&!(e in Object.prototype))return n[e]=t,t;var r=n.__ob__;return n._isVue||r&&r.vmCount?t:r?(Pn(r.value,e,t),r.dep.notify(),t):(n[e]=t,t)}function On(n,e){if(Array.isArray(n)&&d(e))n.splice(e,1);else{var t=n.__ob__;n._isVue||t&&t.vmCount||w(n,e)&&(delete n[e],t&&t.dep.notify())}}function En(n){for(var e=void 0,t=0,r=n.length;t<r;t++)(e=n[t])&&e.__ob__&&e.__ob__.dep.depend(),Array.isArray(e)&&En(e)}An.prototype.walk=function(n){for(var e=Object.keys(n),t=0;t<e.length;t++)Pn(n,e[t])},An.prototype.observeArray=function(n){for(var e=0,t=n.length;e<t;e++)jn(n[e])};var Bn=q.optionMergeStrategies;function In(n,e){if(!e)return n;for(var t,r,a,o=ln?Reflect.ownKeys(e):Object.keys(e),i=0;i<o.length;i++)"__ob__"!==(t=o[i])&&(r=n[t],a=e[t],w(n,t)?r!==a&&u(r)&&u(a)&&In(r,a):Tn(n,t,a));return n}function Ln(n,e,t){return t?function(){var r="function"==typeof e?e.call(t,t):e,a="function"==typeof n?n.call(t,t):n;return r?In(r,a):a}:e?n?function(){return In("function"==typeof e?e.call(this,this):e,"function"==typeof n?n.call(this,this):n)}:e:n}function Mn(n,e){var t=e?n?n.concat(e):Array.isArray(e)?e:[e]:n;return t?function(n){for(var e=[],t=0;t<n.length;t++)-1===e.indexOf(n[t])&&e.push(n[t]);return e}(t):t}function Dn(n,e,t,r){var a=Object.create(n||null);return e?O(a,e):a}Bn.data=function(n,e,t){return t?Ln(n,e,t):e&&"function"!=typeof e?n:Ln(n,e)},F.forEach((function(n){Bn[n]=Mn})),$.forEach((function(n){Bn[n+"s"]=Dn})),Bn.watch=function(n,e,t,r){if(n===en&&(n=void 0),e===en&&(e=void 0),!e)return Object.create(n||null);if(!n)return e;var a={};for(var o in O(a,n),e){var i=a[o],s=e[o];i&&!Array.isArray(i)&&(i=[i]),a[o]=i?i.concat(s):Array.isArray(s)?s:[s]}return a},Bn.props=Bn.methods=Bn.inject=Bn.computed=function(n,e,t,r){if(!n)return e;var a=Object.create(null);return O(a,n),e&&O(a,e),a},Bn.provide=Ln;var Rn=function(n,e){return void 0===e?n:e};function $n(n,e,t){if("function"==typeof e&&(e=e.options),function(n,e){var t=n.props;if(t){var r,a,o={};if(Array.isArray(t))for(r=t.length;r--;)"string"==typeof(a=t[r])&&(o[k(a)]={type:null});else if(u(t))for(var i in t)a=t[i],o[k(i)]=u(a)?a:{type:a};else 0;n.props=o}}(e),function(n,e){var t=n.inject;if(t){var r=n.inject={};if(Array.isArray(t))for(var a=0;a<t.length;a++)r[t[a]]={from:t[a]};else if(u(t))for(var o in t){var i=t[o];r[o]=u(i)?O({from:o},i):{from:i}}else 0}}(e),function(n){var e=n.directives;if(e)for(var t in e){var r=e[t];"function"==typeof r&&(e[t]={bind:r,update:r})}}(e),!e._base&&(e.extends&&(n=$n(n,e.extends,t)),e.mixins))for(var r=0,a=e.mixins.length;r<a;r++)n=$n(n,e.mixins[r],t);var o,i={};for(o in n)s(o);for(o in e)w(n,o)||s(o);function s(r){var a=Bn[r]||Rn;i[r]=a(n[r],e[r],t,r)}return i}function Fn(n,e,t,r){if("string"==typeof t){var a=n[e];if(w(a,t))return a[t];var o=k(t);if(w(a,o))return a[o];var i=C(o);return w(a,i)?a[i]:a[t]||a[o]||a[i]}}function qn(n,e,t,r){var a=e[n],o=!w(t,n),i=t[n],s=Jn(Boolean,a.type);if(s>-1)if(o&&!w(a,"default"))i=!1;else if(""===i||i===j(n)){var c=Jn(String,a.type);(c<0||s<c)&&(i=!0)}if(void 0===i){i=function(n,e,t){if(!w(e,"default"))return;var r=e.default;0;if(n&&n.$options.propsData&&void 0===n.$options.propsData[t]&&void 0!==n._props[t])return n._props[t];return"function"==typeof r&&"Function"!==Nn(e.type)?r.call(n):r}(r,a,n);var l=kn;Cn(!0),jn(i),Cn(l)}return i}var zn=/^\s*function (\w+)/;function Nn(n){var e=n&&n.toString().match(zn);return e?e[1]:""}function Un(n,e){return Nn(n)===Nn(e)}function Jn(n,e){if(!Array.isArray(e))return Un(e,n)?0:-1;for(var t=0,r=e.length;t<r;t++)if(Un(e[t],n))return t;return-1}function Xn(n,e,t){mn();try{if(e)for(var r=e;r=r.$parent;){var a=r.$options.errorCaptured;if(a)for(var o=0;o<a.length;o++)try{if(!1===a[o].call(r,n,e,t))return}catch(n){Hn(n,r,"errorCaptured hook")}}Hn(n,e,t)}finally{hn()}}function Vn(n,e,t,r,a){var o;try{(o=t?n.apply(e,t):n.call(e))&&!o._isVue&&m(o)&&!o._handled&&(o.catch((function(n){return Xn(n,r,a+" (Promise/async)")})),o._handled=!0)}catch(n){Xn(n,r,a)}return o}function Hn(n,e,t){if(q.errorHandler)try{return q.errorHandler.call(null,n,e,t)}catch(e){e!==n&&Qn(e,null,"config.errorHandler")}Qn(n,e,t)}function Qn(n,e,t){if(!V&&!H||"undefined"==typeof console)throw n;console.error(n)}var Wn,Gn=!1,Yn=[],Kn=!1;function Zn(){Kn=!1;var n=Yn.slice(0);Yn.length=0;for(var e=0;e<n.length;e++)n[e]()}if("undefined"!=typeof Promise&&sn(Promise)){var ne=Promise.resolve();Wn=function(){ne.then(Zn),Z&&setTimeout(B)},Gn=!0}else if(G||"undefined"==typeof MutationObserver||!sn(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())Wn="undefined"!=typeof setImmediate&&sn(setImmediate)?function(){setImmediate(Zn)}:function(){setTimeout(Zn,0)};else{var ee=1,te=new MutationObserver(Zn),re=document.createTextNode(String(ee));te.observe(re,{characterData:!0}),Wn=function(){ee=(ee+1)%2,re.data=String(ee)},Gn=!0}function ae(n,e){var t;if(Yn.push((function(){if(n)try{n.call(e)}catch(n){Xn(n,e,"nextTick")}else t&&t(e)})),Kn||(Kn=!0,Wn()),!n&&"undefined"!=typeof Promise)return new Promise((function(n){t=n}))}var oe=new cn;function ie(n){!function n(e,t){var r,a,o=Array.isArray(e);if(!o&&!l(e)||Object.isFrozen(e)||e instanceof bn)return;if(e.__ob__){var i=e.__ob__.dep.id;if(t.has(i))return;t.add(i)}if(o)for(r=e.length;r--;)n(e[r],t);else for(a=Object.keys(e),r=a.length;r--;)n(e[a[r]],t)}(n,oe),oe.clear()}var se=S((function(n){var e="&"===n.charAt(0),t="~"===(n=e?n.slice(1):n).charAt(0),r="!"===(n=t?n.slice(1):n).charAt(0);return{name:n=r?n.slice(1):n,once:t,capture:r,passive:e}}));function ce(n,e){function t(){var n=arguments,r=t.fns;if(!Array.isArray(r))return Vn(r,null,arguments,e,"v-on handler");for(var a=r.slice(),o=0;o<a.length;o++)Vn(a[o],null,n,e,"v-on handler")}return t.fns=n,t}function le(n,e,t,r,a,i){var c,l,p,u;for(c in n)l=n[c],p=e[c],u=se(c),o(l)||(o(p)?(o(l.fns)&&(l=n[c]=ce(l,i)),s(u.once)&&(l=n[c]=a(u.name,l,u.capture)),t(u.name,l,u.capture,u.passive,u.params)):l!==p&&(p.fns=l,n[c]=p));for(c in e)o(n[c])&&r((u=se(c)).name,e[c],u.capture)}function pe(n,e,t){var r;n instanceof bn&&(n=n.data.hook||(n.data.hook={}));var a=n[e];function c(){t.apply(this,arguments),y(r.fns,c)}o(a)?r=ce([c]):i(a.fns)&&s(a.merged)?(r=a).fns.push(c):r=ce([a,c]),r.merged=!0,n[e]=r}function ue(n,e,t,r,a){if(i(e)){if(w(e,t))return n[t]=e[t],a||delete e[t],!0;if(w(e,r))return n[t]=e[r],a||delete e[r],!0}return!1}function fe(n){return c(n)?[yn(n)]:Array.isArray(n)?function n(e,t){var r,a,l,p,u=[];for(r=0;r<e.length;r++)o(a=e[r])||"boolean"==typeof a||(l=u.length-1,p=u[l],Array.isArray(a)?a.length>0&&(de((a=n(a,(t||"")+"_"+r))[0])&&de(p)&&(u[l]=yn(p.text+a[0].text),a.shift()),u.push.apply(u,a)):c(a)?de(p)?u[l]=yn(p.text+a):""!==a&&u.push(yn(a)):de(a)&&de(p)?u[l]=yn(p.text+a.text):(s(e._isVList)&&i(a.tag)&&o(a.key)&&i(t)&&(a.key="__vlist"+t+"_"+r+"__"),u.push(a)));return u}(n):void 0}function de(n){return i(n)&&i(n.text)&&!1===n.isComment}function me(n,e){if(n){for(var t=Object.create(null),r=ln?Reflect.ownKeys(n):Object.keys(n),a=0;a<r.length;a++){var o=r[a];if("__ob__"!==o){for(var i=n[o].from,s=e;s;){if(s._provided&&w(s._provided,i)){t[o]=s._provided[i];break}s=s.$parent}if(!s)if("default"in n[o]){var c=n[o].default;t[o]="function"==typeof c?c.call(e):c}else 0}}return t}}function he(n,e){if(!n||!n.length)return{};for(var t={},r=0,a=n.length;r<a;r++){var o=n[r],i=o.data;if(i&&i.attrs&&i.attrs.slot&&delete i.attrs.slot,o.context!==e&&o.fnContext!==e||!i||null==i.slot)(t.default||(t.default=[])).push(o);else{var s=i.slot,c=t[s]||(t[s]=[]);"template"===o.tag?c.push.apply(c,o.children||[]):c.push(o)}}for(var l in t)t[l].every(be)&&delete t[l];return t}function be(n){return n.isComment&&!n.asyncFactory||" "===n.text}function ge(n){return n.isComment&&n.asyncFactory}function ve(n,e,t){var r,o=Object.keys(e).length>0,i=n?!!n.$stable:!o,s=n&&n.$key;if(n){if(n._normalized)return n._normalized;if(i&&t&&t!==a&&s===t.$key&&!o&&!t.$hasNormal)return t;for(var c in r={},n)n[c]&&"$"!==c[0]&&(r[c]=ye(e,c,n[c]))}else r={};for(var l in e)l in r||(r[l]=xe(e,l));return n&&Object.isExtensible(n)&&(n._normalized=r),N(r,"$stable",i),N(r,"$key",s),N(r,"$hasNormal",o),r}function ye(n,e,t){var r=function(){var n=arguments.length?t.apply(null,arguments):t({}),e=(n=n&&"object"==typeof n&&!Array.isArray(n)?[n]:fe(n))&&n[0];return n&&(!e||1===n.length&&e.isComment&&!ge(e))?void 0:n};return t.proxy&&Object.defineProperty(n,e,{get:r,enumerable:!0,configurable:!0}),r}function xe(n,e){return function(){return n[e]}}function we(n,e){var t,r,a,o,s;if(Array.isArray(n)||"string"==typeof n)for(t=new Array(n.length),r=0,a=n.length;r<a;r++)t[r]=e(n[r],r);else if("number"==typeof n)for(t=new Array(n),r=0;r<n;r++)t[r]=e(r+1,r);else if(l(n))if(ln&&n[Symbol.iterator]){t=[];for(var c=n[Symbol.iterator](),p=c.next();!p.done;)t.push(e(p.value,t.length)),p=c.next()}else for(o=Object.keys(n),t=new Array(o.length),r=0,a=o.length;r<a;r++)s=o[r],t[r]=e(n[s],s,r);return i(t)||(t=[]),t._isVList=!0,t}function Se(n,e,t,r){var a,o=this.$scopedSlots[n];o?(t=t||{},r&&(t=O(O({},r),t)),a=o(t)||("function"==typeof e?e():e)):a=this.$slots[n]||("function"==typeof e?e():e);var i=t&&t.slot;return i?this.$createElement("template",{slot:i},a):a}function _e(n){return Fn(this.$options,"filters",n)||L}function ke(n,e){return Array.isArray(n)?-1===n.indexOf(e):n!==e}function Ce(n,e,t,r,a){var o=q.keyCodes[e]||t;return a&&r&&!q.keyCodes[e]?ke(a,r):o?ke(o,n):r?j(r)!==e:void 0===n}function Ae(n,e,t,r,a){if(t)if(l(t)){var o;Array.isArray(t)&&(t=E(t));var i=function(i){if("class"===i||"style"===i||v(i))o=n;else{var s=n.attrs&&n.attrs.type;o=r||q.mustUseProp(e,s,i)?n.domProps||(n.domProps={}):n.attrs||(n.attrs={})}var c=k(i),l=j(i);c in o||l in o||(o[i]=t[i],a&&((n.on||(n.on={}))["update:"+i]=function(n){t[i]=n}))};for(var s in t)i(s)}else;return n}function je(n,e){var t=this._staticTrees||(this._staticTrees=[]),r=t[n];return r&&!e||Te(r=t[n]=this.$options.staticRenderFns[n].call(this._renderProxy,null,this),"__static__"+n,!1),r}function Pe(n,e,t){return Te(n,"__once__"+e+(t?"_"+t:""),!0),n}function Te(n,e,t){if(Array.isArray(n))for(var r=0;r<n.length;r++)n[r]&&"string"!=typeof n[r]&&Oe(n[r],e+"_"+r,t);else Oe(n,e,t)}function Oe(n,e,t){n.isStatic=!0,n.key=e,n.isOnce=t}function Ee(n,e){if(e)if(u(e)){var t=n.on=n.on?O({},n.on):{};for(var r in e){var a=t[r],o=e[r];t[r]=a?[].concat(a,o):o}}else;return n}function Be(n,e,t,r){e=e||{$stable:!t};for(var a=0;a<n.length;a++){var o=n[a];Array.isArray(o)?Be(o,e,t):o&&(o.proxy&&(o.fn.proxy=!0),e[o.key]=o.fn)}return r&&(e.$key=r),e}function Ie(n,e){for(var t=0;t<e.length;t+=2){var r=e[t];"string"==typeof r&&r&&(n[e[t]]=e[t+1])}return n}function Le(n,e){return"string"==typeof n?e+n:n}function Me(n){n._o=Pe,n._n=b,n._s=h,n._l=we,n._t=Se,n._q=M,n._i=D,n._m=je,n._f=_e,n._k=Ce,n._b=Ae,n._v=yn,n._e=vn,n._u=Be,n._g=Ee,n._d=Ie,n._p=Le}function De(n,e,t,r,o){var i,c=this,l=o.options;w(r,"_uid")?(i=Object.create(r))._original=r:(i=r,r=r._original);var p=s(l._compiled),u=!p;this.data=n,this.props=e,this.children=t,this.parent=r,this.listeners=n.on||a,this.injections=me(l.inject,r),this.slots=function(){return c.$slots||ve(n.scopedSlots,c.$slots=he(t,r)),c.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return ve(n.scopedSlots,this.slots())}}),p&&(this.$options=l,this.$slots=this.slots(),this.$scopedSlots=ve(n.scopedSlots,this.$slots)),l._scopeId?this._c=function(n,e,t,a){var o=Ue(i,n,e,t,a,u);return o&&!Array.isArray(o)&&(o.fnScopeId=l._scopeId,o.fnContext=r),o}:this._c=function(n,e,t,r){return Ue(i,n,e,t,r,u)}}function Re(n,e,t,r,a){var o=xn(n);return o.fnContext=t,o.fnOptions=r,e.slot&&((o.data||(o.data={})).slot=e.slot),o}function $e(n,e){for(var t in e)n[k(t)]=e[t]}Me(De.prototype);var Fe={init:function(n,e){if(n.componentInstance&&!n.componentInstance._isDestroyed&&n.data.keepAlive){var t=n;Fe.prepatch(t,t)}else{(n.componentInstance=function(n,e){var t={_isComponent:!0,_parentVnode:n,parent:e},r=n.data.inlineTemplate;i(r)&&(t.render=r.render,t.staticRenderFns=r.staticRenderFns);return new n.componentOptions.Ctor(t)}(n,Ke)).$mount(e?n.elm:void 0,e)}},prepatch:function(n,e){var t=e.componentOptions;!function(n,e,t,r,o){0;var i=r.data.scopedSlots,s=n.$scopedSlots,c=!!(i&&!i.$stable||s!==a&&!s.$stable||i&&n.$scopedSlots.$key!==i.$key||!i&&n.$scopedSlots.$key),l=!!(o||n.$options._renderChildren||c);n.$options._parentVnode=r,n.$vnode=r,n._vnode&&(n._vnode.parent=r);if(n.$options._renderChildren=o,n.$attrs=r.data.attrs||a,n.$listeners=t||a,e&&n.$options.props){Cn(!1);for(var p=n._props,u=n.$options._propKeys||[],f=0;f<u.length;f++){var d=u[f],m=n.$options.props;p[d]=qn(d,m,e,n)}Cn(!0),n.$options.propsData=e}t=t||a;var h=n.$options._parentListeners;n.$options._parentListeners=t,Ye(n,t,h),l&&(n.$slots=he(o,r.context),n.$forceUpdate());0}(e.componentInstance=n.componentInstance,t.propsData,t.listeners,e,t.children)},insert:function(n){var e,t=n.context,r=n.componentInstance;r._isMounted||(r._isMounted=!0,tt(r,"mounted")),n.data.keepAlive&&(t._isMounted?((e=r)._inactive=!1,at.push(e)):et(r,!0))},destroy:function(n){var e=n.componentInstance;e._isDestroyed||(n.data.keepAlive?function n(e,t){if(t&&(e._directInactive=!0,nt(e)))return;if(!e._inactive){e._inactive=!0;for(var r=0;r<e.$children.length;r++)n(e.$children[r]);tt(e,"deactivated")}}(e,!0):e.$destroy())}},qe=Object.keys(Fe);function ze(n,e,t,r,c){if(!o(n)){var p=t.$options._base;if(l(n)&&(n=p.extend(n)),"function"==typeof n){var u;if(o(n.cid)&&void 0===(n=function(n,e){if(s(n.error)&&i(n.errorComp))return n.errorComp;if(i(n.resolved))return n.resolved;var t=Xe;t&&i(n.owners)&&-1===n.owners.indexOf(t)&&n.owners.push(t);if(s(n.loading)&&i(n.loadingComp))return n.loadingComp;if(t&&!i(n.owners)){var r=n.owners=[t],a=!0,c=null,p=null;t.$on("hook:destroyed",(function(){return y(r,t)}));var u=function(n){for(var e=0,t=r.length;e<t;e++)r[e].$forceUpdate();n&&(r.length=0,null!==c&&(clearTimeout(c),c=null),null!==p&&(clearTimeout(p),p=null))},f=R((function(t){n.resolved=Ve(t,e),a?r.length=0:u(!0)})),d=R((function(e){i(n.errorComp)&&(n.error=!0,u(!0))})),h=n(f,d);return l(h)&&(m(h)?o(n.resolved)&&h.then(f,d):m(h.component)&&(h.component.then(f,d),i(h.error)&&(n.errorComp=Ve(h.error,e)),i(h.loading)&&(n.loadingComp=Ve(h.loading,e),0===h.delay?n.loading=!0:c=setTimeout((function(){c=null,o(n.resolved)&&o(n.error)&&(n.loading=!0,u(!1))}),h.delay||200)),i(h.timeout)&&(p=setTimeout((function(){p=null,o(n.resolved)&&d(null)}),h.timeout)))),a=!1,n.loading?n.loadingComp:n.resolved}}(u=n,p)))return function(n,e,t,r,a){var o=vn();return o.asyncFactory=n,o.asyncMeta={data:e,context:t,children:r,tag:a},o}(u,e,t,r,c);e=e||{},kt(n),i(e.model)&&function(n,e){var t=n.model&&n.model.prop||"value",r=n.model&&n.model.event||"input";(e.attrs||(e.attrs={}))[t]=e.model.value;var a=e.on||(e.on={}),o=a[r],s=e.model.callback;i(o)?(Array.isArray(o)?-1===o.indexOf(s):o!==s)&&(a[r]=[s].concat(o)):a[r]=s}(n.options,e);var f=function(n,e,t){var r=e.options.props;if(!o(r)){var a={},s=n.attrs,c=n.props;if(i(s)||i(c))for(var l in r){var p=j(l);ue(a,c,l,p,!0)||ue(a,s,l,p,!1)}return a}}(e,n);if(s(n.options.functional))return function(n,e,t,r,o){var s=n.options,c={},l=s.props;if(i(l))for(var p in l)c[p]=qn(p,l,e||a);else i(t.attrs)&&$e(c,t.attrs),i(t.props)&&$e(c,t.props);var u=new De(t,c,o,r,n),f=s.render.call(null,u._c,u);if(f instanceof bn)return Re(f,t,u.parent,s,u);if(Array.isArray(f)){for(var d=fe(f)||[],m=new Array(d.length),h=0;h<d.length;h++)m[h]=Re(d[h],t,u.parent,s,u);return m}}(n,f,e,t,r);var d=e.on;if(e.on=e.nativeOn,s(n.options.abstract)){var h=e.slot;e={},h&&(e.slot=h)}!function(n){for(var e=n.hook||(n.hook={}),t=0;t<qe.length;t++){var r=qe[t],a=e[r],o=Fe[r];a===o||a&&a._merged||(e[r]=a?Ne(o,a):o)}}(e);var b=n.options.name||c;return new bn("vue-component-"+n.cid+(b?"-"+b:""),e,void 0,void 0,void 0,t,{Ctor:n,propsData:f,listeners:d,tag:c,children:r},u)}}}function Ne(n,e){var t=function(t,r){n(t,r),e(t,r)};return t._merged=!0,t}function Ue(n,e,t,r,a,p){return(Array.isArray(t)||c(t))&&(a=r,r=t,t=void 0),s(p)&&(a=2),function(n,e,t,r,a){if(i(t)&&i(t.__ob__))return vn();i(t)&&i(t.is)&&(e=t.is);if(!e)return vn();0;Array.isArray(r)&&"function"==typeof r[0]&&((t=t||{}).scopedSlots={default:r[0]},r.length=0);2===a?r=fe(r):1===a&&(r=function(n){for(var e=0;e<n.length;e++)if(Array.isArray(n[e]))return Array.prototype.concat.apply([],n);return n}(r));var c,p;if("string"==typeof e){var u;p=n.$vnode&&n.$vnode.ns||q.getTagNamespace(e),c=q.isReservedTag(e)?new bn(q.parsePlatformTagName(e),t,r,void 0,void 0,n):t&&t.pre||!i(u=Fn(n.$options,"components",e))?new bn(e,t,r,void 0,void 0,n):ze(u,t,n,r,e)}else c=ze(e,t,n,r);return Array.isArray(c)?c:i(c)?(i(p)&&function n(e,t,r){e.ns=t,"foreignObject"===e.tag&&(t=void 0,r=!0);if(i(e.children))for(var a=0,c=e.children.length;a<c;a++){var l=e.children[a];i(l.tag)&&(o(l.ns)||s(r)&&"svg"!==l.tag)&&n(l,t,r)}}(c,p),i(t)&&function(n){l(n.style)&&ie(n.style);l(n.class)&&ie(n.class)}(t),c):vn()}(n,e,t,r,a)}var Je,Xe=null;function Ve(n,e){return(n.__esModule||ln&&"Module"===n[Symbol.toStringTag])&&(n=n.default),l(n)?e.extend(n):n}function He(n){if(Array.isArray(n))for(var e=0;e<n.length;e++){var t=n[e];if(i(t)&&(i(t.componentOptions)||ge(t)))return t}}function Qe(n,e){Je.$on(n,e)}function We(n,e){Je.$off(n,e)}function Ge(n,e){var t=Je;return function r(){var a=e.apply(null,arguments);null!==a&&t.$off(n,r)}}function Ye(n,e,t){Je=n,le(e,t||{},Qe,We,Ge,n),Je=void 0}var Ke=null;function Ze(n){var e=Ke;return Ke=n,function(){Ke=e}}function nt(n){for(;n&&(n=n.$parent);)if(n._inactive)return!0;return!1}function et(n,e){if(e){if(n._directInactive=!1,nt(n))return}else if(n._directInactive)return;if(n._inactive||null===n._inactive){n._inactive=!1;for(var t=0;t<n.$children.length;t++)et(n.$children[t]);tt(n,"activated")}}function tt(n,e){mn();var t=n.$options[e],r=e+" hook";if(t)for(var a=0,o=t.length;a<o;a++)Vn(t[a],n,null,n,r);n._hasHookEvent&&n.$emit("hook:"+e),hn()}var rt=[],at=[],ot={},it=!1,st=!1,ct=0;var lt=0,pt=Date.now;if(V&&!G){var ut=window.performance;ut&&"function"==typeof ut.now&&pt()>document.createEvent("Event").timeStamp&&(pt=function(){return ut.now()})}function ft(){var n,e;for(lt=pt(),st=!0,rt.sort((function(n,e){return n.id-e.id})),ct=0;ct<rt.length;ct++)(n=rt[ct]).before&&n.before(),e=n.id,ot[e]=null,n.run();var t=at.slice(),r=rt.slice();ct=rt.length=at.length=0,ot={},it=st=!1,function(n){for(var e=0;e<n.length;e++)n[e]._inactive=!0,et(n[e],!0)}(t),function(n){var e=n.length;for(;e--;){var t=n[e],r=t.vm;r._watcher===t&&r._isMounted&&!r._isDestroyed&&tt(r,"updated")}}(r),on&&q.devtools&&on.emit("flush")}var dt=0,mt=function(n,e,t,r,a){this.vm=n,a&&(n._watcher=this),n._watchers.push(this),r?(this.deep=!!r.deep,this.user=!!r.user,this.lazy=!!r.lazy,this.sync=!!r.sync,this.before=r.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=t,this.id=++dt,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new cn,this.newDepIds=new cn,this.expression="","function"==typeof e?this.getter=e:(this.getter=function(n){if(!U.test(n)){var e=n.split(".");return function(n){for(var t=0;t<e.length;t++){if(!n)return;n=n[e[t]]}return n}}}(e),this.getter||(this.getter=B)),this.value=this.lazy?void 0:this.get()};mt.prototype.get=function(){var n;mn(this);var e=this.vm;try{n=this.getter.call(e,e)}catch(n){if(!this.user)throw n;Xn(n,e,'getter for watcher "'+this.expression+'"')}finally{this.deep&&ie(n),hn(),this.cleanupDeps()}return n},mt.prototype.addDep=function(n){var e=n.id;this.newDepIds.has(e)||(this.newDepIds.add(e),this.newDeps.push(n),this.depIds.has(e)||n.addSub(this))},mt.prototype.cleanupDeps=function(){for(var n=this.deps.length;n--;){var e=this.deps[n];this.newDepIds.has(e.id)||e.removeSub(this)}var t=this.depIds;this.depIds=this.newDepIds,this.newDepIds=t,this.newDepIds.clear(),t=this.deps,this.deps=this.newDeps,this.newDeps=t,this.newDeps.length=0},mt.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():function(n){var e=n.id;if(null==ot[e]){if(ot[e]=!0,st){for(var t=rt.length-1;t>ct&&rt[t].id>n.id;)t--;rt.splice(t+1,0,n)}else rt.push(n);it||(it=!0,ae(ft))}}(this)},mt.prototype.run=function(){if(this.active){var n=this.get();if(n!==this.value||l(n)||this.deep){var e=this.value;if(this.value=n,this.user){var t='callback for watcher "'+this.expression+'"';Vn(this.cb,this.vm,[n,e],this.vm,t)}else this.cb.call(this.vm,n,e)}}},mt.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},mt.prototype.depend=function(){for(var n=this.deps.length;n--;)this.deps[n].depend()},mt.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||y(this.vm._watchers,this);for(var n=this.deps.length;n--;)this.deps[n].removeSub(this);this.active=!1}};var ht={enumerable:!0,configurable:!0,get:B,set:B};function bt(n,e,t){ht.get=function(){return this[e][t]},ht.set=function(n){this[e][t]=n},Object.defineProperty(n,t,ht)}function gt(n){n._watchers=[];var e=n.$options;e.props&&function(n,e){var t=n.$options.propsData||{},r=n._props={},a=n.$options._propKeys=[];n.$parent&&Cn(!1);var o=function(o){a.push(o);var i=qn(o,e,t,n);Pn(r,o,i),o in n||bt(n,"_props",o)};for(var i in e)o(i);Cn(!0)}(n,e.props),e.methods&&function(n,e){n.$options.props;for(var t in e)n[t]="function"!=typeof e[t]?B:P(e[t],n)}(n,e.methods),e.data?function(n){var e=n.$options.data;u(e=n._data="function"==typeof e?function(n,e){mn();try{return n.call(e,e)}catch(n){return Xn(n,e,"data()"),{}}finally{hn()}}(e,n):e||{})||(e={});var t=Object.keys(e),r=n.$options.props,a=(n.$options.methods,t.length);for(;a--;){var o=t[a];0,r&&w(r,o)||(i=void 0,36!==(i=(o+"").charCodeAt(0))&&95!==i&&bt(n,"_data",o))}var i;jn(e,!0)}(n):jn(n._data={},!0),e.computed&&function(n,e){var t=n._computedWatchers=Object.create(null),r=an();for(var a in e){var o=e[a],i="function"==typeof o?o:o.get;0,r||(t[a]=new mt(n,i||B,B,vt)),a in n||yt(n,a,o)}}(n,e.computed),e.watch&&e.watch!==en&&function(n,e){for(var t in e){var r=e[t];if(Array.isArray(r))for(var a=0;a<r.length;a++)St(n,t,r[a]);else St(n,t,r)}}(n,e.watch)}var vt={lazy:!0};function yt(n,e,t){var r=!an();"function"==typeof t?(ht.get=r?xt(e):wt(t),ht.set=B):(ht.get=t.get?r&&!1!==t.cache?xt(e):wt(t.get):B,ht.set=t.set||B),Object.defineProperty(n,e,ht)}function xt(n){return function(){var e=this._computedWatchers&&this._computedWatchers[n];if(e)return e.dirty&&e.evaluate(),fn.target&&e.depend(),e.value}}function wt(n){return function(){return n.call(this,this)}}function St(n,e,t,r){return u(t)&&(r=t,t=t.handler),"string"==typeof t&&(t=n[t]),n.$watch(e,t,r)}var _t=0;function kt(n){var e=n.options;if(n.super){var t=kt(n.super);if(t!==n.superOptions){n.superOptions=t;var r=function(n){var e,t=n.options,r=n.sealedOptions;for(var a in t)t[a]!==r[a]&&(e||(e={}),e[a]=t[a]);return e}(n);r&&O(n.extendOptions,r),(e=n.options=$n(t,n.extendOptions)).name&&(e.components[e.name]=n)}}return e}function Ct(n){this._init(n)}function At(n){n.cid=0;var e=1;n.extend=function(n){n=n||{};var t=this,r=t.cid,a=n._Ctor||(n._Ctor={});if(a[r])return a[r];var o=n.name||t.options.name;var i=function(n){this._init(n)};return(i.prototype=Object.create(t.prototype)).constructor=i,i.cid=e++,i.options=$n(t.options,n),i.super=t,i.options.props&&function(n){var e=n.options.props;for(var t in e)bt(n.prototype,"_props",t)}(i),i.options.computed&&function(n){var e=n.options.computed;for(var t in e)yt(n.prototype,t,e[t])}(i),i.extend=t.extend,i.mixin=t.mixin,i.use=t.use,$.forEach((function(n){i[n]=t[n]})),o&&(i.options.components[o]=i),i.superOptions=t.options,i.extendOptions=n,i.sealedOptions=O({},i.options),a[r]=i,i}}function jt(n){return n&&(n.Ctor.options.name||n.tag)}function Pt(n,e){return Array.isArray(n)?n.indexOf(e)>-1:"string"==typeof n?n.split(",").indexOf(e)>-1:!!f(n)&&n.test(e)}function Tt(n,e){var t=n.cache,r=n.keys,a=n._vnode;for(var o in t){var i=t[o];if(i){var s=i.name;s&&!e(s)&&Ot(t,o,r,a)}}}function Ot(n,e,t,r){var a=n[e];!a||r&&a.tag===r.tag||a.componentInstance.$destroy(),n[e]=null,y(t,e)}!function(n){n.prototype._init=function(n){var e=this;e._uid=_t++,e._isVue=!0,n&&n._isComponent?function(n,e){var t=n.$options=Object.create(n.constructor.options),r=e._parentVnode;t.parent=e.parent,t._parentVnode=r;var a=r.componentOptions;t.propsData=a.propsData,t._parentListeners=a.listeners,t._renderChildren=a.children,t._componentTag=a.tag,e.render&&(t.render=e.render,t.staticRenderFns=e.staticRenderFns)}(e,n):e.$options=$n(kt(e.constructor),n||{},e),e._renderProxy=e,e._self=e,function(n){var e=n.$options,t=e.parent;if(t&&!e.abstract){for(;t.$options.abstract&&t.$parent;)t=t.$parent;t.$children.push(n)}n.$parent=t,n.$root=t?t.$root:n,n.$children=[],n.$refs={},n._watcher=null,n._inactive=null,n._directInactive=!1,n._isMounted=!1,n._isDestroyed=!1,n._isBeingDestroyed=!1}(e),function(n){n._events=Object.create(null),n._hasHookEvent=!1;var e=n.$options._parentListeners;e&&Ye(n,e)}(e),function(n){n._vnode=null,n._staticTrees=null;var e=n.$options,t=n.$vnode=e._parentVnode,r=t&&t.context;n.$slots=he(e._renderChildren,r),n.$scopedSlots=a,n._c=function(e,t,r,a){return Ue(n,e,t,r,a,!1)},n.$createElement=function(e,t,r,a){return Ue(n,e,t,r,a,!0)};var o=t&&t.data;Pn(n,"$attrs",o&&o.attrs||a,null,!0),Pn(n,"$listeners",e._parentListeners||a,null,!0)}(e),tt(e,"beforeCreate"),function(n){var e=me(n.$options.inject,n);e&&(Cn(!1),Object.keys(e).forEach((function(t){Pn(n,t,e[t])})),Cn(!0))}(e),gt(e),function(n){var e=n.$options.provide;e&&(n._provided="function"==typeof e?e.call(n):e)}(e),tt(e,"created"),e.$options.el&&e.$mount(e.$options.el)}}(Ct),function(n){var e={get:function(){return this._data}},t={get:function(){return this._props}};Object.defineProperty(n.prototype,"$data",e),Object.defineProperty(n.prototype,"$props",t),n.prototype.$set=Tn,n.prototype.$delete=On,n.prototype.$watch=function(n,e,t){if(u(e))return St(this,n,e,t);(t=t||{}).user=!0;var r=new mt(this,n,e,t);if(t.immediate){var a='callback for immediate watcher "'+r.expression+'"';mn(),Vn(e,this,[r.value],this,a),hn()}return function(){r.teardown()}}}(Ct),function(n){var e=/^hook:/;n.prototype.$on=function(n,t){var r=this;if(Array.isArray(n))for(var a=0,o=n.length;a<o;a++)r.$on(n[a],t);else(r._events[n]||(r._events[n]=[])).push(t),e.test(n)&&(r._hasHookEvent=!0);return r},n.prototype.$once=function(n,e){var t=this;function r(){t.$off(n,r),e.apply(t,arguments)}return r.fn=e,t.$on(n,r),t},n.prototype.$off=function(n,e){var t=this;if(!arguments.length)return t._events=Object.create(null),t;if(Array.isArray(n)){for(var r=0,a=n.length;r<a;r++)t.$off(n[r],e);return t}var o,i=t._events[n];if(!i)return t;if(!e)return t._events[n]=null,t;for(var s=i.length;s--;)if((o=i[s])===e||o.fn===e){i.splice(s,1);break}return t},n.prototype.$emit=function(n){var e=this,t=e._events[n];if(t){t=t.length>1?T(t):t;for(var r=T(arguments,1),a='event handler for "'+n+'"',o=0,i=t.length;o<i;o++)Vn(t[o],e,r,e,a)}return e}}(Ct),function(n){n.prototype._update=function(n,e){var t=this,r=t.$el,a=t._vnode,o=Ze(t);t._vnode=n,t.$el=a?t.__patch__(a,n):t.__patch__(t.$el,n,e,!1),o(),r&&(r.__vue__=null),t.$el&&(t.$el.__vue__=t),t.$vnode&&t.$parent&&t.$vnode===t.$parent._vnode&&(t.$parent.$el=t.$el)},n.prototype.$forceUpdate=function(){this._watcher&&this._watcher.update()},n.prototype.$destroy=function(){var n=this;if(!n._isBeingDestroyed){tt(n,"beforeDestroy"),n._isBeingDestroyed=!0;var e=n.$parent;!e||e._isBeingDestroyed||n.$options.abstract||y(e.$children,n),n._watcher&&n._watcher.teardown();for(var t=n._watchers.length;t--;)n._watchers[t].teardown();n._data.__ob__&&n._data.__ob__.vmCount--,n._isDestroyed=!0,n.__patch__(n._vnode,null),tt(n,"destroyed"),n.$off(),n.$el&&(n.$el.__vue__=null),n.$vnode&&(n.$vnode.parent=null)}}}(Ct),function(n){Me(n.prototype),n.prototype.$nextTick=function(n){return ae(n,this)},n.prototype._render=function(){var n,e=this,t=e.$options,r=t.render,a=t._parentVnode;a&&(e.$scopedSlots=ve(a.data.scopedSlots,e.$slots,e.$scopedSlots)),e.$vnode=a;try{Xe=e,n=r.call(e._renderProxy,e.$createElement)}catch(t){Xn(t,e,"render"),n=e._vnode}finally{Xe=null}return Array.isArray(n)&&1===n.length&&(n=n[0]),n instanceof bn||(n=vn()),n.parent=a,n}}(Ct);var Et=[String,RegExp,Array],Bt={KeepAlive:{name:"keep-alive",abstract:!0,props:{include:Et,exclude:Et,max:[String,Number]},methods:{cacheVNode:function(){var n=this.cache,e=this.keys,t=this.vnodeToCache,r=this.keyToCache;if(t){var a=t.tag,o=t.componentInstance,i=t.componentOptions;n[r]={name:jt(i),tag:a,componentInstance:o},e.push(r),this.max&&e.length>parseInt(this.max)&&Ot(n,e[0],e,this._vnode),this.vnodeToCache=null}}},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var n in this.cache)Ot(this.cache,n,this.keys)},mounted:function(){var n=this;this.cacheVNode(),this.$watch("include",(function(e){Tt(n,(function(n){return Pt(e,n)}))})),this.$watch("exclude",(function(e){Tt(n,(function(n){return!Pt(e,n)}))}))},updated:function(){this.cacheVNode()},render:function(){var n=this.$slots.default,e=He(n),t=e&&e.componentOptions;if(t){var r=jt(t),a=this.include,o=this.exclude;if(a&&(!r||!Pt(a,r))||o&&r&&Pt(o,r))return e;var i=this.cache,s=this.keys,c=null==e.key?t.Ctor.cid+(t.tag?"::"+t.tag:""):e.key;i[c]?(e.componentInstance=i[c].componentInstance,y(s,c),s.push(c)):(this.vnodeToCache=e,this.keyToCache=c),e.data.keepAlive=!0}return e||n&&n[0]}}};!function(n){var e={get:function(){return q}};Object.defineProperty(n,"config",e),n.util={warn:pn,extend:O,mergeOptions:$n,defineReactive:Pn},n.set=Tn,n.delete=On,n.nextTick=ae,n.observable=function(n){return jn(n),n},n.options=Object.create(null),$.forEach((function(e){n.options[e+"s"]=Object.create(null)})),n.options._base=n,O(n.options.components,Bt),function(n){n.use=function(n){var e=this._installedPlugins||(this._installedPlugins=[]);if(e.indexOf(n)>-1)return this;var t=T(arguments,1);return t.unshift(this),"function"==typeof n.install?n.install.apply(n,t):"function"==typeof n&&n.apply(null,t),e.push(n),this}}(n),function(n){n.mixin=function(n){return this.options=$n(this.options,n),this}}(n),At(n),function(n){$.forEach((function(e){n[e]=function(n,t){return t?("component"===e&&u(t)&&(t.name=t.name||n,t=this.options._base.extend(t)),"directive"===e&&"function"==typeof t&&(t={bind:t,update:t}),this.options[e+"s"][n]=t,t):this.options[e+"s"][n]}}))}(n)}(Ct),Object.defineProperty(Ct.prototype,"$isServer",{get:an}),Object.defineProperty(Ct.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(Ct,"FunctionalRenderContext",{value:De}),Ct.version="2.6.14";var It=g("style,class"),Lt=g("input,textarea,option,select,progress"),Mt=g("contenteditable,draggable,spellcheck"),Dt=g("events,caret,typing,plaintext-only"),Rt=g("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,truespeed,typemustmatch,visible"),$t="http://www.w3.org/1999/xlink",Ft=function(n){return":"===n.charAt(5)&&"xlink"===n.slice(0,5)},qt=function(n){return Ft(n)?n.slice(6,n.length):""},zt=function(n){return null==n||!1===n};function Nt(n){for(var e=n.data,t=n,r=n;i(r.componentInstance);)(r=r.componentInstance._vnode)&&r.data&&(e=Ut(r.data,e));for(;i(t=t.parent);)t&&t.data&&(e=Ut(e,t.data));return function(n,e){if(i(n)||i(e))return Jt(n,Xt(e));return""}(e.staticClass,e.class)}function Ut(n,e){return{staticClass:Jt(n.staticClass,e.staticClass),class:i(n.class)?[n.class,e.class]:e.class}}function Jt(n,e){return n?e?n+" "+e:n:e||""}function Xt(n){return Array.isArray(n)?function(n){for(var e,t="",r=0,a=n.length;r<a;r++)i(e=Xt(n[r]))&&""!==e&&(t&&(t+=" "),t+=e);return t}(n):l(n)?function(n){var e="";for(var t in n)n[t]&&(e&&(e+=" "),e+=t);return e}(n):"string"==typeof n?n:""}var Vt={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},Ht=g("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),Qt=g("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignobject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),Wt=function(n){return Ht(n)||Qt(n)};var Gt=Object.create(null);var Yt=g("text,number,password,search,email,tel,url");var Kt=Object.freeze({createElement:function(n,e){var t=document.createElement(n);return"select"!==n||e.data&&e.data.attrs&&void 0!==e.data.attrs.multiple&&t.setAttribute("multiple","multiple"),t},createElementNS:function(n,e){return document.createElementNS(Vt[n],e)},createTextNode:function(n){return document.createTextNode(n)},createComment:function(n){return document.createComment(n)},insertBefore:function(n,e,t){n.insertBefore(e,t)},removeChild:function(n,e){n.removeChild(e)},appendChild:function(n,e){n.appendChild(e)},parentNode:function(n){return n.parentNode},nextSibling:function(n){return n.nextSibling},tagName:function(n){return n.tagName},setTextContent:function(n,e){n.textContent=e},setStyleScope:function(n,e){n.setAttribute(e,"")}}),Zt={create:function(n,e){nr(e)},update:function(n,e){n.data.ref!==e.data.ref&&(nr(n,!0),nr(e))},destroy:function(n){nr(n,!0)}};function nr(n,e){var t=n.data.ref;if(i(t)){var r=n.context,a=n.componentInstance||n.elm,o=r.$refs;e?Array.isArray(o[t])?y(o[t],a):o[t]===a&&(o[t]=void 0):n.data.refInFor?Array.isArray(o[t])?o[t].indexOf(a)<0&&o[t].push(a):o[t]=[a]:o[t]=a}}var er=new bn("",{},[]),tr=["create","activate","update","remove","destroy"];function rr(n,e){return n.key===e.key&&n.asyncFactory===e.asyncFactory&&(n.tag===e.tag&&n.isComment===e.isComment&&i(n.data)===i(e.data)&&function(n,e){if("input"!==n.tag)return!0;var t,r=i(t=n.data)&&i(t=t.attrs)&&t.type,a=i(t=e.data)&&i(t=t.attrs)&&t.type;return r===a||Yt(r)&&Yt(a)}(n,e)||s(n.isAsyncPlaceholder)&&o(e.asyncFactory.error))}function ar(n,e,t){var r,a,o={};for(r=e;r<=t;++r)i(a=n[r].key)&&(o[a]=r);return o}var or={create:ir,update:ir,destroy:function(n){ir(n,er)}};function ir(n,e){(n.data.directives||e.data.directives)&&function(n,e){var t,r,a,o=n===er,i=e===er,s=cr(n.data.directives,n.context),c=cr(e.data.directives,e.context),l=[],p=[];for(t in c)r=s[t],a=c[t],r?(a.oldValue=r.value,a.oldArg=r.arg,pr(a,"update",e,n),a.def&&a.def.componentUpdated&&p.push(a)):(pr(a,"bind",e,n),a.def&&a.def.inserted&&l.push(a));if(l.length){var u=function(){for(var t=0;t<l.length;t++)pr(l[t],"inserted",e,n)};o?pe(e,"insert",u):u()}p.length&&pe(e,"postpatch",(function(){for(var t=0;t<p.length;t++)pr(p[t],"componentUpdated",e,n)}));if(!o)for(t in s)c[t]||pr(s[t],"unbind",n,n,i)}(n,e)}var sr=Object.create(null);function cr(n,e){var t,r,a=Object.create(null);if(!n)return a;for(t=0;t<n.length;t++)(r=n[t]).modifiers||(r.modifiers=sr),a[lr(r)]=r,r.def=Fn(e.$options,"directives",r.name);return a}function lr(n){return n.rawName||n.name+"."+Object.keys(n.modifiers||{}).join(".")}function pr(n,e,t,r,a){var o=n.def&&n.def[e];if(o)try{o(t.elm,n,t,r,a)}catch(r){Xn(r,t.context,"directive "+n.name+" "+e+" hook")}}var ur=[Zt,or];function fr(n,e){var t=e.componentOptions;if(!(i(t)&&!1===t.Ctor.options.inheritAttrs||o(n.data.attrs)&&o(e.data.attrs))){var r,a,s=e.elm,c=n.data.attrs||{},l=e.data.attrs||{};for(r in i(l.__ob__)&&(l=e.data.attrs=O({},l)),l)a=l[r],c[r]!==a&&dr(s,r,a,e.data.pre);for(r in(G||K)&&l.value!==c.value&&dr(s,"value",l.value),c)o(l[r])&&(Ft(r)?s.removeAttributeNS($t,qt(r)):Mt(r)||s.removeAttribute(r))}}function dr(n,e,t,r){r||n.tagName.indexOf("-")>-1?mr(n,e,t):Rt(e)?zt(t)?n.removeAttribute(e):(t="allowfullscreen"===e&&"EMBED"===n.tagName?"true":e,n.setAttribute(e,t)):Mt(e)?n.setAttribute(e,function(n,e){return zt(e)||"false"===e?"false":"contenteditable"===n&&Dt(e)?e:"true"}(e,t)):Ft(e)?zt(t)?n.removeAttributeNS($t,qt(e)):n.setAttributeNS($t,e,t):mr(n,e,t)}function mr(n,e,t){if(zt(t))n.removeAttribute(e);else{if(G&&!Y&&"TEXTAREA"===n.tagName&&"placeholder"===e&&""!==t&&!n.__ieph){var r=function(e){e.stopImmediatePropagation(),n.removeEventListener("input",r)};n.addEventListener("input",r),n.__ieph=!0}n.setAttribute(e,t)}}var hr={create:fr,update:fr};function br(n,e){var t=e.elm,r=e.data,a=n.data;if(!(o(r.staticClass)&&o(r.class)&&(o(a)||o(a.staticClass)&&o(a.class)))){var s=Nt(e),c=t._transitionClasses;i(c)&&(s=Jt(s,Xt(c))),s!==t._prevClass&&(t.setAttribute("class",s),t._prevClass=s)}}var gr,vr={create:br,update:br};function yr(n,e,t){var r=gr;return function a(){var o=e.apply(null,arguments);null!==o&&Sr(n,a,t,r)}}var xr=Gn&&!(nn&&Number(nn[1])<=53);function wr(n,e,t,r){if(xr){var a=lt,o=e;e=o._wrapper=function(n){if(n.target===n.currentTarget||n.timeStamp>=a||n.timeStamp<=0||n.target.ownerDocument!==document)return o.apply(this,arguments)}}gr.addEventListener(n,e,tn?{capture:t,passive:r}:t)}function Sr(n,e,t,r){(r||gr).removeEventListener(n,e._wrapper||e,t)}function _r(n,e){if(!o(n.data.on)||!o(e.data.on)){var t=e.data.on||{},r=n.data.on||{};gr=e.elm,function(n){if(i(n.__r)){var e=G?"change":"input";n[e]=[].concat(n.__r,n[e]||[]),delete n.__r}i(n.__c)&&(n.change=[].concat(n.__c,n.change||[]),delete n.__c)}(t),le(t,r,wr,Sr,yr,e.context),gr=void 0}}var kr,Cr={create:_r,update:_r};function Ar(n,e){if(!o(n.data.domProps)||!o(e.data.domProps)){var t,r,a=e.elm,s=n.data.domProps||{},c=e.data.domProps||{};for(t in i(c.__ob__)&&(c=e.data.domProps=O({},c)),s)t in c||(a[t]="");for(t in c){if(r=c[t],"textContent"===t||"innerHTML"===t){if(e.children&&(e.children.length=0),r===s[t])continue;1===a.childNodes.length&&a.removeChild(a.childNodes[0])}if("value"===t&&"PROGRESS"!==a.tagName){a._value=r;var l=o(r)?"":String(r);jr(a,l)&&(a.value=l)}else if("innerHTML"===t&&Qt(a.tagName)&&o(a.innerHTML)){(kr=kr||document.createElement("div")).innerHTML="<svg>"+r+"</svg>";for(var p=kr.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;p.firstChild;)a.appendChild(p.firstChild)}else if(r!==s[t])try{a[t]=r}catch(n){}}}}function jr(n,e){return!n.composing&&("OPTION"===n.tagName||function(n,e){var t=!0;try{t=document.activeElement!==n}catch(n){}return t&&n.value!==e}(n,e)||function(n,e){var t=n.value,r=n._vModifiers;if(i(r)){if(r.number)return b(t)!==b(e);if(r.trim)return t.trim()!==e.trim()}return t!==e}(n,e))}var Pr={create:Ar,update:Ar},Tr=S((function(n){var e={},t=/:(.+)/;return n.split(/;(?![^(]*\))/g).forEach((function(n){if(n){var r=n.split(t);r.length>1&&(e[r[0].trim()]=r[1].trim())}})),e}));function Or(n){var e=Er(n.style);return n.staticStyle?O(n.staticStyle,e):e}function Er(n){return Array.isArray(n)?E(n):"string"==typeof n?Tr(n):n}var Br,Ir=/^--/,Lr=/\s*!important$/,Mr=function(n,e,t){if(Ir.test(e))n.style.setProperty(e,t);else if(Lr.test(t))n.style.setProperty(j(e),t.replace(Lr,""),"important");else{var r=Rr(e);if(Array.isArray(t))for(var a=0,o=t.length;a<o;a++)n.style[r]=t[a];else n.style[r]=t}},Dr=["Webkit","Moz","ms"],Rr=S((function(n){if(Br=Br||document.createElement("div").style,"filter"!==(n=k(n))&&n in Br)return n;for(var e=n.charAt(0).toUpperCase()+n.slice(1),t=0;t<Dr.length;t++){var r=Dr[t]+e;if(r in Br)return r}}));function $r(n,e){var t=e.data,r=n.data;if(!(o(t.staticStyle)&&o(t.style)&&o(r.staticStyle)&&o(r.style))){var a,s,c=e.elm,l=r.staticStyle,p=r.normalizedStyle||r.style||{},u=l||p,f=Er(e.data.style)||{};e.data.normalizedStyle=i(f.__ob__)?O({},f):f;var d=function(n,e){var t,r={};if(e)for(var a=n;a.componentInstance;)(a=a.componentInstance._vnode)&&a.data&&(t=Or(a.data))&&O(r,t);(t=Or(n.data))&&O(r,t);for(var o=n;o=o.parent;)o.data&&(t=Or(o.data))&&O(r,t);return r}(e,!0);for(s in u)o(d[s])&&Mr(c,s,"");for(s in d)(a=d[s])!==u[s]&&Mr(c,s,null==a?"":a)}}var Fr={create:$r,update:$r},qr=/\s+/;function zr(n,e){if(e&&(e=e.trim()))if(n.classList)e.indexOf(" ")>-1?e.split(qr).forEach((function(e){return n.classList.add(e)})):n.classList.add(e);else{var t=" "+(n.getAttribute("class")||"")+" ";t.indexOf(" "+e+" ")<0&&n.setAttribute("class",(t+e).trim())}}function Nr(n,e){if(e&&(e=e.trim()))if(n.classList)e.indexOf(" ")>-1?e.split(qr).forEach((function(e){return n.classList.remove(e)})):n.classList.remove(e),n.classList.length||n.removeAttribute("class");else{for(var t=" "+(n.getAttribute("class")||"")+" ",r=" "+e+" ";t.indexOf(r)>=0;)t=t.replace(r," ");(t=t.trim())?n.setAttribute("class",t):n.removeAttribute("class")}}function Ur(n){if(n){if("object"==typeof n){var e={};return!1!==n.css&&O(e,Jr(n.name||"v")),O(e,n),e}return"string"==typeof n?Jr(n):void 0}}var Jr=S((function(n){return{enterClass:n+"-enter",enterToClass:n+"-enter-to",enterActiveClass:n+"-enter-active",leaveClass:n+"-leave",leaveToClass:n+"-leave-to",leaveActiveClass:n+"-leave-active"}})),Xr=V&&!Y,Vr="transition",Hr="transitionend",Qr="animation",Wr="animationend";Xr&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(Vr="WebkitTransition",Hr="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(Qr="WebkitAnimation",Wr="webkitAnimationEnd"));var Gr=V?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(n){return n()};function Yr(n){Gr((function(){Gr(n)}))}function Kr(n,e){var t=n._transitionClasses||(n._transitionClasses=[]);t.indexOf(e)<0&&(t.push(e),zr(n,e))}function Zr(n,e){n._transitionClasses&&y(n._transitionClasses,e),Nr(n,e)}function na(n,e,t){var r=ta(n,e),a=r.type,o=r.timeout,i=r.propCount;if(!a)return t();var s="transition"===a?Hr:Wr,c=0,l=function(){n.removeEventListener(s,p),t()},p=function(e){e.target===n&&++c>=i&&l()};setTimeout((function(){c<i&&l()}),o+1),n.addEventListener(s,p)}var ea=/\b(transform|all)(,|$)/;function ta(n,e){var t,r=window.getComputedStyle(n),a=(r[Vr+"Delay"]||"").split(", "),o=(r[Vr+"Duration"]||"").split(", "),i=ra(a,o),s=(r[Qr+"Delay"]||"").split(", "),c=(r[Qr+"Duration"]||"").split(", "),l=ra(s,c),p=0,u=0;return"transition"===e?i>0&&(t="transition",p=i,u=o.length):"animation"===e?l>0&&(t="animation",p=l,u=c.length):u=(t=(p=Math.max(i,l))>0?i>l?"transition":"animation":null)?"transition"===t?o.length:c.length:0,{type:t,timeout:p,propCount:u,hasTransform:"transition"===t&&ea.test(r[Vr+"Property"])}}function ra(n,e){for(;n.length<e.length;)n=n.concat(n);return Math.max.apply(null,e.map((function(e,t){return aa(e)+aa(n[t])})))}function aa(n){return 1e3*Number(n.slice(0,-1).replace(",","."))}function oa(n,e){var t=n.elm;i(t._leaveCb)&&(t._leaveCb.cancelled=!0,t._leaveCb());var r=Ur(n.data.transition);if(!o(r)&&!i(t._enterCb)&&1===t.nodeType){for(var a=r.css,s=r.type,c=r.enterClass,p=r.enterToClass,u=r.enterActiveClass,f=r.appearClass,d=r.appearToClass,m=r.appearActiveClass,h=r.beforeEnter,g=r.enter,v=r.afterEnter,y=r.enterCancelled,x=r.beforeAppear,w=r.appear,S=r.afterAppear,_=r.appearCancelled,k=r.duration,C=Ke,A=Ke.$vnode;A&&A.parent;)C=A.context,A=A.parent;var j=!C._isMounted||!n.isRootInsert;if(!j||w||""===w){var P=j&&f?f:c,T=j&&m?m:u,O=j&&d?d:p,E=j&&x||h,B=j&&"function"==typeof w?w:g,I=j&&S||v,L=j&&_||y,M=b(l(k)?k.enter:k);0;var D=!1!==a&&!Y,$=ca(B),F=t._enterCb=R((function(){D&&(Zr(t,O),Zr(t,T)),F.cancelled?(D&&Zr(t,P),L&&L(t)):I&&I(t),t._enterCb=null}));n.data.show||pe(n,"insert",(function(){var e=t.parentNode,r=e&&e._pending&&e._pending[n.key];r&&r.tag===n.tag&&r.elm._leaveCb&&r.elm._leaveCb(),B&&B(t,F)})),E&&E(t),D&&(Kr(t,P),Kr(t,T),Yr((function(){Zr(t,P),F.cancelled||(Kr(t,O),$||(sa(M)?setTimeout(F,M):na(t,s,F)))}))),n.data.show&&(e&&e(),B&&B(t,F)),D||$||F()}}}function ia(n,e){var t=n.elm;i(t._enterCb)&&(t._enterCb.cancelled=!0,t._enterCb());var r=Ur(n.data.transition);if(o(r)||1!==t.nodeType)return e();if(!i(t._leaveCb)){var a=r.css,s=r.type,c=r.leaveClass,p=r.leaveToClass,u=r.leaveActiveClass,f=r.beforeLeave,d=r.leave,m=r.afterLeave,h=r.leaveCancelled,g=r.delayLeave,v=r.duration,y=!1!==a&&!Y,x=ca(d),w=b(l(v)?v.leave:v);0;var S=t._leaveCb=R((function(){t.parentNode&&t.parentNode._pending&&(t.parentNode._pending[n.key]=null),y&&(Zr(t,p),Zr(t,u)),S.cancelled?(y&&Zr(t,c),h&&h(t)):(e(),m&&m(t)),t._leaveCb=null}));g?g(_):_()}function _(){S.cancelled||(!n.data.show&&t.parentNode&&((t.parentNode._pending||(t.parentNode._pending={}))[n.key]=n),f&&f(t),y&&(Kr(t,c),Kr(t,u),Yr((function(){Zr(t,c),S.cancelled||(Kr(t,p),x||(sa(w)?setTimeout(S,w):na(t,s,S)))}))),d&&d(t,S),y||x||S())}}function sa(n){return"number"==typeof n&&!isNaN(n)}function ca(n){if(o(n))return!1;var e=n.fns;return i(e)?ca(Array.isArray(e)?e[0]:e):(n._length||n.length)>1}function la(n,e){!0!==e.data.show&&oa(e)}var pa=function(n){var e,t,r={},a=n.modules,l=n.nodeOps;for(e=0;e<tr.length;++e)for(r[tr[e]]=[],t=0;t<a.length;++t)i(a[t][tr[e]])&&r[tr[e]].push(a[t][tr[e]]);function p(n){var e=l.parentNode(n);i(e)&&l.removeChild(e,n)}function u(n,e,t,a,o,c,p){if(i(n.elm)&&i(c)&&(n=c[p]=xn(n)),n.isRootInsert=!o,!function(n,e,t,a){var o=n.data;if(i(o)){var c=i(n.componentInstance)&&o.keepAlive;if(i(o=o.hook)&&i(o=o.init)&&o(n,!1),i(n.componentInstance))return f(n,e),d(t,n.elm,a),s(c)&&function(n,e,t,a){var o,s=n;for(;s.componentInstance;)if(s=s.componentInstance._vnode,i(o=s.data)&&i(o=o.transition)){for(o=0;o<r.activate.length;++o)r.activate[o](er,s);e.push(s);break}d(t,n.elm,a)}(n,e,t,a),!0}}(n,e,t,a)){var u=n.data,h=n.children,g=n.tag;i(g)?(n.elm=n.ns?l.createElementNS(n.ns,g):l.createElement(g,n),v(n),m(n,h,e),i(u)&&b(n,e),d(t,n.elm,a)):s(n.isComment)?(n.elm=l.createComment(n.text),d(t,n.elm,a)):(n.elm=l.createTextNode(n.text),d(t,n.elm,a))}}function f(n,e){i(n.data.pendingInsert)&&(e.push.apply(e,n.data.pendingInsert),n.data.pendingInsert=null),n.elm=n.componentInstance.$el,h(n)?(b(n,e),v(n)):(nr(n),e.push(n))}function d(n,e,t){i(n)&&(i(t)?l.parentNode(t)===n&&l.insertBefore(n,e,t):l.appendChild(n,e))}function m(n,e,t){if(Array.isArray(e)){0;for(var r=0;r<e.length;++r)u(e[r],t,n.elm,null,!0,e,r)}else c(n.text)&&l.appendChild(n.elm,l.createTextNode(String(n.text)))}function h(n){for(;n.componentInstance;)n=n.componentInstance._vnode;return i(n.tag)}function b(n,t){for(var a=0;a<r.create.length;++a)r.create[a](er,n);i(e=n.data.hook)&&(i(e.create)&&e.create(er,n),i(e.insert)&&t.push(n))}function v(n){var e;if(i(e=n.fnScopeId))l.setStyleScope(n.elm,e);else for(var t=n;t;)i(e=t.context)&&i(e=e.$options._scopeId)&&l.setStyleScope(n.elm,e),t=t.parent;i(e=Ke)&&e!==n.context&&e!==n.fnContext&&i(e=e.$options._scopeId)&&l.setStyleScope(n.elm,e)}function y(n,e,t,r,a,o){for(;r<=a;++r)u(t[r],o,n,e,!1,t,r)}function x(n){var e,t,a=n.data;if(i(a))for(i(e=a.hook)&&i(e=e.destroy)&&e(n),e=0;e<r.destroy.length;++e)r.destroy[e](n);if(i(e=n.children))for(t=0;t<n.children.length;++t)x(n.children[t])}function w(n,e,t){for(;e<=t;++e){var r=n[e];i(r)&&(i(r.tag)?(S(r),x(r)):p(r.elm))}}function S(n,e){if(i(e)||i(n.data)){var t,a=r.remove.length+1;for(i(e)?e.listeners+=a:e=function(n,e){function t(){0==--t.listeners&&p(n)}return t.listeners=e,t}(n.elm,a),i(t=n.componentInstance)&&i(t=t._vnode)&&i(t.data)&&S(t,e),t=0;t<r.remove.length;++t)r.remove[t](n,e);i(t=n.data.hook)&&i(t=t.remove)?t(n,e):e()}else p(n.elm)}function _(n,e,t,r){for(var a=t;a<r;a++){var o=e[a];if(i(o)&&rr(n,o))return a}}function k(n,e,t,a,c,p){if(n!==e){i(e.elm)&&i(a)&&(e=a[c]=xn(e));var f=e.elm=n.elm;if(s(n.isAsyncPlaceholder))i(e.asyncFactory.resolved)?j(n.elm,e,t):e.isAsyncPlaceholder=!0;else if(s(e.isStatic)&&s(n.isStatic)&&e.key===n.key&&(s(e.isCloned)||s(e.isOnce)))e.componentInstance=n.componentInstance;else{var d,m=e.data;i(m)&&i(d=m.hook)&&i(d=d.prepatch)&&d(n,e);var b=n.children,g=e.children;if(i(m)&&h(e)){for(d=0;d<r.update.length;++d)r.update[d](n,e);i(d=m.hook)&&i(d=d.update)&&d(n,e)}o(e.text)?i(b)&&i(g)?b!==g&&function(n,e,t,r,a){var s,c,p,f=0,d=0,m=e.length-1,h=e[0],b=e[m],g=t.length-1,v=t[0],x=t[g],S=!a;for(0;f<=m&&d<=g;)o(h)?h=e[++f]:o(b)?b=e[--m]:rr(h,v)?(k(h,v,r,t,d),h=e[++f],v=t[++d]):rr(b,x)?(k(b,x,r,t,g),b=e[--m],x=t[--g]):rr(h,x)?(k(h,x,r,t,g),S&&l.insertBefore(n,h.elm,l.nextSibling(b.elm)),h=e[++f],x=t[--g]):rr(b,v)?(k(b,v,r,t,d),S&&l.insertBefore(n,b.elm,h.elm),b=e[--m],v=t[++d]):(o(s)&&(s=ar(e,f,m)),o(c=i(v.key)?s[v.key]:_(v,e,f,m))?u(v,r,n,h.elm,!1,t,d):rr(p=e[c],v)?(k(p,v,r,t,d),e[c]=void 0,S&&l.insertBefore(n,p.elm,h.elm)):u(v,r,n,h.elm,!1,t,d),v=t[++d]);f>m?y(n,o(t[g+1])?null:t[g+1].elm,t,d,g,r):d>g&&w(e,f,m)}(f,b,g,t,p):i(g)?(i(n.text)&&l.setTextContent(f,""),y(f,null,g,0,g.length-1,t)):i(b)?w(b,0,b.length-1):i(n.text)&&l.setTextContent(f,""):n.text!==e.text&&l.setTextContent(f,e.text),i(m)&&i(d=m.hook)&&i(d=d.postpatch)&&d(n,e)}}}function C(n,e,t){if(s(t)&&i(n.parent))n.parent.data.pendingInsert=e;else for(var r=0;r<e.length;++r)e[r].data.hook.insert(e[r])}var A=g("attrs,class,staticClass,staticStyle,key");function j(n,e,t,r){var a,o=e.tag,c=e.data,l=e.children;if(r=r||c&&c.pre,e.elm=n,s(e.isComment)&&i(e.asyncFactory))return e.isAsyncPlaceholder=!0,!0;if(i(c)&&(i(a=c.hook)&&i(a=a.init)&&a(e,!0),i(a=e.componentInstance)))return f(e,t),!0;if(i(o)){if(i(l))if(n.hasChildNodes())if(i(a=c)&&i(a=a.domProps)&&i(a=a.innerHTML)){if(a!==n.innerHTML)return!1}else{for(var p=!0,u=n.firstChild,d=0;d<l.length;d++){if(!u||!j(u,l[d],t,r)){p=!1;break}u=u.nextSibling}if(!p||u)return!1}else m(e,l,t);if(i(c)){var h=!1;for(var g in c)if(!A(g)){h=!0,b(e,t);break}!h&&c.class&&ie(c.class)}}else n.data!==e.text&&(n.data=e.text);return!0}return function(n,e,t,a){if(!o(e)){var c,p=!1,f=[];if(o(n))p=!0,u(e,f);else{var d=i(n.nodeType);if(!d&&rr(n,e))k(n,e,f,null,null,a);else{if(d){if(1===n.nodeType&&n.hasAttribute("data-server-rendered")&&(n.removeAttribute("data-server-rendered"),t=!0),s(t)&&j(n,e,f))return C(e,f,!0),n;c=n,n=new bn(l.tagName(c).toLowerCase(),{},[],void 0,c)}var m=n.elm,b=l.parentNode(m);if(u(e,f,m._leaveCb?null:b,l.nextSibling(m)),i(e.parent))for(var g=e.parent,v=h(e);g;){for(var y=0;y<r.destroy.length;++y)r.destroy[y](g);if(g.elm=e.elm,v){for(var S=0;S<r.create.length;++S)r.create[S](er,g);var _=g.data.hook.insert;if(_.merged)for(var A=1;A<_.fns.length;A++)_.fns[A]()}else nr(g);g=g.parent}i(b)?w([n],0,0):i(n.tag)&&x(n)}}return C(e,f,p),e.elm}i(n)&&x(n)}}({nodeOps:Kt,modules:[hr,vr,Cr,Pr,Fr,V?{create:la,activate:la,remove:function(n,e){!0!==n.data.show?ia(n,e):e()}}:{}].concat(ur)});Y&&document.addEventListener("selectionchange",(function(){var n=document.activeElement;n&&n.vmodel&&va(n,"input")}));var ua={inserted:function(n,e,t,r){"select"===t.tag?(r.elm&&!r.elm._vOptions?pe(t,"postpatch",(function(){ua.componentUpdated(n,e,t)})):fa(n,e,t.context),n._vOptions=[].map.call(n.options,ha)):("textarea"===t.tag||Yt(n.type))&&(n._vModifiers=e.modifiers,e.modifiers.lazy||(n.addEventListener("compositionstart",ba),n.addEventListener("compositionend",ga),n.addEventListener("change",ga),Y&&(n.vmodel=!0)))},componentUpdated:function(n,e,t){if("select"===t.tag){fa(n,e,t.context);var r=n._vOptions,a=n._vOptions=[].map.call(n.options,ha);if(a.some((function(n,e){return!M(n,r[e])})))(n.multiple?e.value.some((function(n){return ma(n,a)})):e.value!==e.oldValue&&ma(e.value,a))&&va(n,"change")}}};function fa(n,e,t){da(n,e,t),(G||K)&&setTimeout((function(){da(n,e,t)}),0)}function da(n,e,t){var r=e.value,a=n.multiple;if(!a||Array.isArray(r)){for(var o,i,s=0,c=n.options.length;s<c;s++)if(i=n.options[s],a)o=D(r,ha(i))>-1,i.selected!==o&&(i.selected=o);else if(M(ha(i),r))return void(n.selectedIndex!==s&&(n.selectedIndex=s));a||(n.selectedIndex=-1)}}function ma(n,e){return e.every((function(e){return!M(e,n)}))}function ha(n){return"_value"in n?n._value:n.value}function ba(n){n.target.composing=!0}function ga(n){n.target.composing&&(n.target.composing=!1,va(n.target,"input"))}function va(n,e){var t=document.createEvent("HTMLEvents");t.initEvent(e,!0,!0),n.dispatchEvent(t)}function ya(n){return!n.componentInstance||n.data&&n.data.transition?n:ya(n.componentInstance._vnode)}var xa={model:ua,show:{bind:function(n,e,t){var r=e.value,a=(t=ya(t)).data&&t.data.transition,o=n.__vOriginalDisplay="none"===n.style.display?"":n.style.display;r&&a?(t.data.show=!0,oa(t,(function(){n.style.display=o}))):n.style.display=r?o:"none"},update:function(n,e,t){var r=e.value;!r!=!e.oldValue&&((t=ya(t)).data&&t.data.transition?(t.data.show=!0,r?oa(t,(function(){n.style.display=n.__vOriginalDisplay})):ia(t,(function(){n.style.display="none"}))):n.style.display=r?n.__vOriginalDisplay:"none")},unbind:function(n,e,t,r,a){a||(n.style.display=n.__vOriginalDisplay)}}},wa={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function Sa(n){var e=n&&n.componentOptions;return e&&e.Ctor.options.abstract?Sa(He(e.children)):n}function _a(n){var e={},t=n.$options;for(var r in t.propsData)e[r]=n[r];var a=t._parentListeners;for(var o in a)e[k(o)]=a[o];return e}function ka(n,e){if(/\d-keep-alive$/.test(e.tag))return n("keep-alive",{props:e.componentOptions.propsData})}var Ca=function(n){return n.tag||ge(n)},Aa=function(n){return"show"===n.name},ja={name:"transition",props:wa,abstract:!0,render:function(n){var e=this,t=this.$slots.default;if(t&&(t=t.filter(Ca)).length){0;var r=this.mode;0;var a=t[0];if(function(n){for(;n=n.parent;)if(n.data.transition)return!0}(this.$vnode))return a;var o=Sa(a);if(!o)return a;if(this._leaving)return ka(n,a);var i="__transition-"+this._uid+"-";o.key=null==o.key?o.isComment?i+"comment":i+o.tag:c(o.key)?0===String(o.key).indexOf(i)?o.key:i+o.key:o.key;var s=(o.data||(o.data={})).transition=_a(this),l=this._vnode,p=Sa(l);if(o.data.directives&&o.data.directives.some(Aa)&&(o.data.show=!0),p&&p.data&&!function(n,e){return e.key===n.key&&e.tag===n.tag}(o,p)&&!ge(p)&&(!p.componentInstance||!p.componentInstance._vnode.isComment)){var u=p.data.transition=O({},s);if("out-in"===r)return this._leaving=!0,pe(u,"afterLeave",(function(){e._leaving=!1,e.$forceUpdate()})),ka(n,a);if("in-out"===r){if(ge(o))return l;var f,d=function(){f()};pe(s,"afterEnter",d),pe(s,"enterCancelled",d),pe(u,"delayLeave",(function(n){f=n}))}}return a}}},Pa=O({tag:String,moveClass:String},wa);function Ta(n){n.elm._moveCb&&n.elm._moveCb(),n.elm._enterCb&&n.elm._enterCb()}function Oa(n){n.data.newPos=n.elm.getBoundingClientRect()}function Ea(n){var e=n.data.pos,t=n.data.newPos,r=e.left-t.left,a=e.top-t.top;if(r||a){n.data.moved=!0;var o=n.elm.style;o.transform=o.WebkitTransform="translate("+r+"px,"+a+"px)",o.transitionDuration="0s"}}delete Pa.mode;var Ba={Transition:ja,TransitionGroup:{props:Pa,beforeMount:function(){var n=this,e=this._update;this._update=function(t,r){var a=Ze(n);n.__patch__(n._vnode,n.kept,!1,!0),n._vnode=n.kept,a(),e.call(n,t,r)}},render:function(n){for(var e=this.tag||this.$vnode.data.tag||"span",t=Object.create(null),r=this.prevChildren=this.children,a=this.$slots.default||[],o=this.children=[],i=_a(this),s=0;s<a.length;s++){var c=a[s];if(c.tag)if(null!=c.key&&0!==String(c.key).indexOf("__vlist"))o.push(c),t[c.key]=c,(c.data||(c.data={})).transition=i;else;}if(r){for(var l=[],p=[],u=0;u<r.length;u++){var f=r[u];f.data.transition=i,f.data.pos=f.elm.getBoundingClientRect(),t[f.key]?l.push(f):p.push(f)}this.kept=n(e,null,l),this.removed=p}return n(e,null,o)},updated:function(){var n=this.prevChildren,e=this.moveClass||(this.name||"v")+"-move";n.length&&this.hasMove(n[0].elm,e)&&(n.forEach(Ta),n.forEach(Oa),n.forEach(Ea),this._reflow=document.body.offsetHeight,n.forEach((function(n){if(n.data.moved){var t=n.elm,r=t.style;Kr(t,e),r.transform=r.WebkitTransform=r.transitionDuration="",t.addEventListener(Hr,t._moveCb=function n(r){r&&r.target!==t||r&&!/transform$/.test(r.propertyName)||(t.removeEventListener(Hr,n),t._moveCb=null,Zr(t,e))})}})))},methods:{hasMove:function(n,e){if(!Xr)return!1;if(this._hasMove)return this._hasMove;var t=n.cloneNode();n._transitionClasses&&n._transitionClasses.forEach((function(n){Nr(t,n)})),zr(t,e),t.style.display="none",this.$el.appendChild(t);var r=ta(t);return this.$el.removeChild(t),this._hasMove=r.hasTransform}}}};Ct.config.mustUseProp=function(n,e,t){return"value"===t&&Lt(n)&&"button"!==e||"selected"===t&&"option"===n||"checked"===t&&"input"===n||"muted"===t&&"video"===n},Ct.config.isReservedTag=Wt,Ct.config.isReservedAttr=It,Ct.config.getTagNamespace=function(n){return Qt(n)?"svg":"math"===n?"math":void 0},Ct.config.isUnknownElement=function(n){if(!V)return!0;if(Wt(n))return!1;if(n=n.toLowerCase(),null!=Gt[n])return Gt[n];var e=document.createElement(n);return n.indexOf("-")>-1?Gt[n]=e.constructor===window.HTMLUnknownElement||e.constructor===window.HTMLElement:Gt[n]=/HTMLUnknownElement/.test(e.toString())},O(Ct.options.directives,xa),O(Ct.options.components,Ba),Ct.prototype.__patch__=V?pa:B,Ct.prototype.$mount=function(n,e){return function(n,e,t){var r;return n.$el=e,n.$options.render||(n.$options.render=vn),tt(n,"beforeMount"),r=function(){n._update(n._render(),t)},new mt(n,r,B,{before:function(){n._isMounted&&!n._isDestroyed&&tt(n,"beforeUpdate")}},!0),t=!1,null==n.$vnode&&(n._isMounted=!0,tt(n,"mounted")),n}(this,n=n&&V?function(n){if("string"==typeof n){var e=document.querySelector(n);return e||document.createElement("div")}return n}(n):void 0,e)},V&&setTimeout((function(){q.devtools&&on&&on.emit("init",Ct)}),0);var Ia=Ct;
/*!
  * vue-router v3.5.3
  * (c) 2021 Evan You
  * @license MIT
  */function La(n,e){for(var t in e)n[t]=e[t];return n}var Ma=/[!'()*]/g,Da=function(n){return"%"+n.charCodeAt(0).toString(16)},Ra=/%2C/g,$a=function(n){return encodeURIComponent(n).replace(Ma,Da).replace(Ra,",")};function Fa(n){try{return decodeURIComponent(n)}catch(n){0}return n}var qa=function(n){return null==n||"object"==typeof n?n:String(n)};function za(n){var e={};return(n=n.trim().replace(/^(\?|#|&)/,""))?(n.split("&").forEach((function(n){var t=n.replace(/\+/g," ").split("="),r=Fa(t.shift()),a=t.length>0?Fa(t.join("=")):null;void 0===e[r]?e[r]=a:Array.isArray(e[r])?e[r].push(a):e[r]=[e[r],a]})),e):e}function Na(n){var e=n?Object.keys(n).map((function(e){var t=n[e];if(void 0===t)return"";if(null===t)return $a(e);if(Array.isArray(t)){var r=[];return t.forEach((function(n){void 0!==n&&(null===n?r.push($a(e)):r.push($a(e)+"="+$a(n)))})),r.join("&")}return $a(e)+"="+$a(t)})).filter((function(n){return n.length>0})).join("&"):null;return e?"?"+e:""}var Ua=/\/?$/;function Ja(n,e,t,r){var a=r&&r.options.stringifyQuery,o=e.query||{};try{o=Xa(o)}catch(n){}var i={name:e.name||n&&n.name,meta:n&&n.meta||{},path:e.path||"/",hash:e.hash||"",query:o,params:e.params||{},fullPath:Qa(e,a),matched:n?Ha(n):[]};return t&&(i.redirectedFrom=Qa(t,a)),Object.freeze(i)}function Xa(n){if(Array.isArray(n))return n.map(Xa);if(n&&"object"==typeof n){var e={};for(var t in n)e[t]=Xa(n[t]);return e}return n}var Va=Ja(null,{path:"/"});function Ha(n){for(var e=[];n;)e.unshift(n),n=n.parent;return e}function Qa(n,e){var t=n.path,r=n.query;void 0===r&&(r={});var a=n.hash;return void 0===a&&(a=""),(t||"/")+(e||Na)(r)+a}function Wa(n,e,t){return e===Va?n===e:!!e&&(n.path&&e.path?n.path.replace(Ua,"")===e.path.replace(Ua,"")&&(t||n.hash===e.hash&&Ga(n.query,e.query)):!(!n.name||!e.name)&&(n.name===e.name&&(t||n.hash===e.hash&&Ga(n.query,e.query)&&Ga(n.params,e.params))))}function Ga(n,e){if(void 0===n&&(n={}),void 0===e&&(e={}),!n||!e)return n===e;var t=Object.keys(n).sort(),r=Object.keys(e).sort();return t.length===r.length&&t.every((function(t,a){var o=n[t];if(r[a]!==t)return!1;var i=e[t];return null==o||null==i?o===i:"object"==typeof o&&"object"==typeof i?Ga(o,i):String(o)===String(i)}))}function Ya(n){for(var e=0;e<n.matched.length;e++){var t=n.matched[e];for(var r in t.instances){var a=t.instances[r],o=t.enteredCbs[r];if(a&&o){delete t.enteredCbs[r];for(var i=0;i<o.length;i++)a._isBeingDestroyed||o[i](a)}}}}var Ka={name:"RouterView",functional:!0,props:{name:{type:String,default:"default"}},render:function(n,e){var t=e.props,r=e.children,a=e.parent,o=e.data;o.routerView=!0;for(var i=a.$createElement,s=t.name,c=a.$route,l=a._routerViewCache||(a._routerViewCache={}),p=0,u=!1;a&&a._routerRoot!==a;){var f=a.$vnode?a.$vnode.data:{};f.routerView&&p++,f.keepAlive&&a._directInactive&&a._inactive&&(u=!0),a=a.$parent}if(o.routerViewDepth=p,u){var d=l[s],m=d&&d.component;return m?(d.configProps&&Za(m,o,d.route,d.configProps),i(m,o,r)):i()}var h=c.matched[p],b=h&&h.components[s];if(!h||!b)return l[s]=null,i();l[s]={component:b},o.registerRouteInstance=function(n,e){var t=h.instances[s];(e&&t!==n||!e&&t===n)&&(h.instances[s]=e)},(o.hook||(o.hook={})).prepatch=function(n,e){h.instances[s]=e.componentInstance},o.hook.init=function(n){n.data.keepAlive&&n.componentInstance&&n.componentInstance!==h.instances[s]&&(h.instances[s]=n.componentInstance),Ya(c)};var g=h.props&&h.props[s];return g&&(La(l[s],{route:c,configProps:g}),Za(b,o,c,g)),i(b,o,r)}};function Za(n,e,t,r){var a=e.props=function(n,e){switch(typeof e){case"undefined":return;case"object":return e;case"function":return e(n);case"boolean":return e?n.params:void 0;default:0}}(t,r);if(a){a=e.props=La({},a);var o=e.attrs=e.attrs||{};for(var i in a)n.props&&i in n.props||(o[i]=a[i],delete a[i])}}function no(n,e,t){var r=n.charAt(0);if("/"===r)return n;if("?"===r||"#"===r)return e+n;var a=e.split("/");t&&a[a.length-1]||a.pop();for(var o=n.replace(/^\//,"").split("/"),i=0;i<o.length;i++){var s=o[i];".."===s?a.pop():"."!==s&&a.push(s)}return""!==a[0]&&a.unshift(""),a.join("/")}function eo(n){return n.replace(/\/+/g,"/")}var to=Array.isArray||function(n){return"[object Array]"==Object.prototype.toString.call(n)},ro=vo,ao=lo,oo=function(n,e){return uo(lo(n,e),e)},io=uo,so=go,co=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function lo(n,e){for(var t,r=[],a=0,o=0,i="",s=e&&e.delimiter||"/";null!=(t=co.exec(n));){var c=t[0],l=t[1],p=t.index;if(i+=n.slice(o,p),o=p+c.length,l)i+=l[1];else{var u=n[o],f=t[2],d=t[3],m=t[4],h=t[5],b=t[6],g=t[7];i&&(r.push(i),i="");var v=null!=f&&null!=u&&u!==f,y="+"===b||"*"===b,x="?"===b||"*"===b,w=t[2]||s,S=m||h;r.push({name:d||a++,prefix:f||"",delimiter:w,optional:x,repeat:y,partial:v,asterisk:!!g,pattern:S?mo(S):g?".*":"[^"+fo(w)+"]+?"})}}return o<n.length&&(i+=n.substr(o)),i&&r.push(i),r}function po(n){return encodeURI(n).replace(/[\/?#]/g,(function(n){return"%"+n.charCodeAt(0).toString(16).toUpperCase()}))}function uo(n,e){for(var t=new Array(n.length),r=0;r<n.length;r++)"object"==typeof n[r]&&(t[r]=new RegExp("^(?:"+n[r].pattern+")$",bo(e)));return function(e,r){for(var a="",o=e||{},i=(r||{}).pretty?po:encodeURIComponent,s=0;s<n.length;s++){var c=n[s];if("string"!=typeof c){var l,p=o[c.name];if(null==p){if(c.optional){c.partial&&(a+=c.prefix);continue}throw new TypeError('Expected "'+c.name+'" to be defined')}if(to(p)){if(!c.repeat)throw new TypeError('Expected "'+c.name+'" to not repeat, but received `'+JSON.stringify(p)+"`");if(0===p.length){if(c.optional)continue;throw new TypeError('Expected "'+c.name+'" to not be empty')}for(var u=0;u<p.length;u++){if(l=i(p[u]),!t[s].test(l))throw new TypeError('Expected all "'+c.name+'" to match "'+c.pattern+'", but received `'+JSON.stringify(l)+"`");a+=(0===u?c.prefix:c.delimiter)+l}}else{if(l=c.asterisk?encodeURI(p).replace(/[?#]/g,(function(n){return"%"+n.charCodeAt(0).toString(16).toUpperCase()})):i(p),!t[s].test(l))throw new TypeError('Expected "'+c.name+'" to match "'+c.pattern+'", but received "'+l+'"');a+=c.prefix+l}}else a+=c}return a}}function fo(n){return n.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function mo(n){return n.replace(/([=!:$\/()])/g,"\\$1")}function ho(n,e){return n.keys=e,n}function bo(n){return n&&n.sensitive?"":"i"}function go(n,e,t){to(e)||(t=e||t,e=[]);for(var r=(t=t||{}).strict,a=!1!==t.end,o="",i=0;i<n.length;i++){var s=n[i];if("string"==typeof s)o+=fo(s);else{var c=fo(s.prefix),l="(?:"+s.pattern+")";e.push(s),s.repeat&&(l+="(?:"+c+l+")*"),o+=l=s.optional?s.partial?c+"("+l+")?":"(?:"+c+"("+l+"))?":c+"("+l+")"}}var p=fo(t.delimiter||"/"),u=o.slice(-p.length)===p;return r||(o=(u?o.slice(0,-p.length):o)+"(?:"+p+"(?=$))?"),o+=a?"$":r&&u?"":"(?="+p+"|$)",ho(new RegExp("^"+o,bo(t)),e)}function vo(n,e,t){return to(e)||(t=e||t,e=[]),t=t||{},n instanceof RegExp?function(n,e){var t=n.source.match(/\((?!\?)/g);if(t)for(var r=0;r<t.length;r++)e.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return ho(n,e)}(n,e):to(n)?function(n,e,t){for(var r=[],a=0;a<n.length;a++)r.push(vo(n[a],e,t).source);return ho(new RegExp("(?:"+r.join("|")+")",bo(t)),e)}(n,e,t):function(n,e,t){return go(lo(n,t),e,t)}(n,e,t)}ro.parse=ao,ro.compile=oo,ro.tokensToFunction=io,ro.tokensToRegExp=so;var yo=Object.create(null);function xo(n,e,t){e=e||{};try{var r=yo[n]||(yo[n]=ro.compile(n));return"string"==typeof e.pathMatch&&(e[0]=e.pathMatch),r(e,{pretty:!0})}catch(n){return""}finally{delete e[0]}}function wo(n,e,t,r){var a="string"==typeof n?{path:n}:n;if(a._normalized)return a;if(a.name){var o=(a=La({},n)).params;return o&&"object"==typeof o&&(a.params=La({},o)),a}if(!a.path&&a.params&&e){(a=La({},a))._normalized=!0;var i=La(La({},e.params),a.params);if(e.name)a.name=e.name,a.params=i;else if(e.matched.length){var s=e.matched[e.matched.length-1].path;a.path=xo(s,i,e.path)}else 0;return a}var c=function(n){var e="",t="",r=n.indexOf("#");r>=0&&(e=n.slice(r),n=n.slice(0,r));var a=n.indexOf("?");return a>=0&&(t=n.slice(a+1),n=n.slice(0,a)),{path:n,query:t,hash:e}}(a.path||""),l=e&&e.path||"/",p=c.path?no(c.path,l,t||a.append):l,u=function(n,e,t){void 0===e&&(e={});var r,a=t||za;try{r=a(n||"")}catch(n){r={}}for(var o in e){var i=e[o];r[o]=Array.isArray(i)?i.map(qa):qa(i)}return r}(c.query,a.query,r&&r.options.parseQuery),f=a.hash||c.hash;return f&&"#"!==f.charAt(0)&&(f="#"+f),{_normalized:!0,path:p,query:u,hash:f}}var So,_o=function(){},ko={name:"RouterLink",props:{to:{type:[String,Object],required:!0},tag:{type:String,default:"a"},custom:Boolean,exact:Boolean,exactPath:Boolean,append:Boolean,replace:Boolean,activeClass:String,exactActiveClass:String,ariaCurrentValue:{type:String,default:"page"},event:{type:[String,Array],default:"click"}},render:function(n){var e=this,t=this.$router,r=this.$route,a=t.resolve(this.to,r,this.append),o=a.location,i=a.route,s=a.href,c={},l=t.options.linkActiveClass,p=t.options.linkExactActiveClass,u=null==l?"router-link-active":l,f=null==p?"router-link-exact-active":p,d=null==this.activeClass?u:this.activeClass,m=null==this.exactActiveClass?f:this.exactActiveClass,h=i.redirectedFrom?Ja(null,wo(i.redirectedFrom),null,t):i;c[m]=Wa(r,h,this.exactPath),c[d]=this.exact||this.exactPath?c[m]:function(n,e){return 0===n.path.replace(Ua,"/").indexOf(e.path.replace(Ua,"/"))&&(!e.hash||n.hash===e.hash)&&function(n,e){for(var t in e)if(!(t in n))return!1;return!0}(n.query,e.query)}(r,h);var b=c[m]?this.ariaCurrentValue:null,g=function(n){Co(n)&&(e.replace?t.replace(o,_o):t.push(o,_o))},v={click:Co};Array.isArray(this.event)?this.event.forEach((function(n){v[n]=g})):v[this.event]=g;var y={class:c},x=!this.$scopedSlots.$hasNormal&&this.$scopedSlots.default&&this.$scopedSlots.default({href:s,route:i,navigate:g,isActive:c[d],isExactActive:c[m]});if(x){if(1===x.length)return x[0];if(x.length>1||!x.length)return 0===x.length?n():n("span",{},x)}if("a"===this.tag)y.on=v,y.attrs={href:s,"aria-current":b};else{var w=function n(e){var t;if(e)for(var r=0;r<e.length;r++){if("a"===(t=e[r]).tag)return t;if(t.children&&(t=n(t.children)))return t}}(this.$slots.default);if(w){w.isStatic=!1;var S=w.data=La({},w.data);for(var _ in S.on=S.on||{},S.on){var k=S.on[_];_ in v&&(S.on[_]=Array.isArray(k)?k:[k])}for(var C in v)C in S.on?S.on[C].push(v[C]):S.on[C]=g;var A=w.data.attrs=La({},w.data.attrs);A.href=s,A["aria-current"]=b}else y.on=v}return n(this.tag,y,this.$slots.default)}};function Co(n){if(!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey||n.defaultPrevented||void 0!==n.button&&0!==n.button)){if(n.currentTarget&&n.currentTarget.getAttribute){var e=n.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return n.preventDefault&&n.preventDefault(),!0}}var Ao="undefined"!=typeof window;function jo(n,e,t,r,a){var o=e||[],i=t||Object.create(null),s=r||Object.create(null);n.forEach((function(n){!function n(e,t,r,a,o,i){var s=a.path,c=a.name;0;var l=a.pathToRegexpOptions||{},p=function(n,e,t){t||(n=n.replace(/\/$/,""));if("/"===n[0])return n;if(null==e)return n;return eo(e.path+"/"+n)}(s,o,l.strict);"boolean"==typeof a.caseSensitive&&(l.sensitive=a.caseSensitive);var u={path:p,regex:Po(p,l),components:a.components||{default:a.component},alias:a.alias?"string"==typeof a.alias?[a.alias]:a.alias:[],instances:{},enteredCbs:{},name:c,parent:o,matchAs:i,redirect:a.redirect,beforeEnter:a.beforeEnter,meta:a.meta||{},props:null==a.props?{}:a.components?a.props:{default:a.props}};a.children&&a.children.forEach((function(a){var o=i?eo(i+"/"+a.path):void 0;n(e,t,r,a,u,o)}));t[u.path]||(e.push(u.path),t[u.path]=u);if(void 0!==a.alias)for(var f=Array.isArray(a.alias)?a.alias:[a.alias],d=0;d<f.length;++d){0;var m={path:f[d],children:a.children};n(e,t,r,m,o,u.path||"/")}c&&(r[c]||(r[c]=u))}(o,i,s,n,a)}));for(var c=0,l=o.length;c<l;c++)"*"===o[c]&&(o.push(o.splice(c,1)[0]),l--,c--);return{pathList:o,pathMap:i,nameMap:s}}function Po(n,e){return ro(n,[],e)}function To(n,e){var t=jo(n),r=t.pathList,a=t.pathMap,o=t.nameMap;function i(n,t,i){var s=wo(n,t,!1,e),l=s.name;if(l){var p=o[l];if(!p)return c(null,s);var u=p.regex.keys.filter((function(n){return!n.optional})).map((function(n){return n.name}));if("object"!=typeof s.params&&(s.params={}),t&&"object"==typeof t.params)for(var f in t.params)!(f in s.params)&&u.indexOf(f)>-1&&(s.params[f]=t.params[f]);return s.path=xo(p.path,s.params),c(p,s,i)}if(s.path){s.params={};for(var d=0;d<r.length;d++){var m=r[d],h=a[m];if(Oo(h.regex,s.path,s.params))return c(h,s,i)}}return c(null,s)}function s(n,t){var r=n.redirect,a="function"==typeof r?r(Ja(n,t,null,e)):r;if("string"==typeof a&&(a={path:a}),!a||"object"!=typeof a)return c(null,t);var s=a,l=s.name,p=s.path,u=t.query,f=t.hash,d=t.params;if(u=s.hasOwnProperty("query")?s.query:u,f=s.hasOwnProperty("hash")?s.hash:f,d=s.hasOwnProperty("params")?s.params:d,l){o[l];return i({_normalized:!0,name:l,query:u,hash:f,params:d},void 0,t)}if(p){var m=function(n,e){return no(n,e.parent?e.parent.path:"/",!0)}(p,n);return i({_normalized:!0,path:xo(m,d),query:u,hash:f},void 0,t)}return c(null,t)}function c(n,t,r){return n&&n.redirect?s(n,r||t):n&&n.matchAs?function(n,e,t){var r=i({_normalized:!0,path:xo(t,e.params)});if(r){var a=r.matched,o=a[a.length-1];return e.params=r.params,c(o,e)}return c(null,e)}(0,t,n.matchAs):Ja(n,t,r,e)}return{match:i,addRoute:function(n,e){var t="object"!=typeof n?o[n]:void 0;jo([e||n],r,a,o,t),t&&t.alias.length&&jo(t.alias.map((function(n){return{path:n,children:[e]}})),r,a,o,t)},getRoutes:function(){return r.map((function(n){return a[n]}))},addRoutes:function(n){jo(n,r,a,o)}}}function Oo(n,e,t){var r=e.match(n);if(!r)return!1;if(!t)return!0;for(var a=1,o=r.length;a<o;++a){var i=n.keys[a-1];i&&(t[i.name||"pathMatch"]="string"==typeof r[a]?Fa(r[a]):r[a])}return!0}var Eo=Ao&&window.performance&&window.performance.now?window.performance:Date;function Bo(){return Eo.now().toFixed(3)}var Io=Bo();function Lo(){return Io}function Mo(n){return Io=n}var Do=Object.create(null);function Ro(){"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual");var n=window.location.protocol+"//"+window.location.host,e=window.location.href.replace(n,""),t=La({},window.history.state);return t.key=Lo(),window.history.replaceState(t,"",e),window.addEventListener("popstate",qo),function(){window.removeEventListener("popstate",qo)}}function $o(n,e,t,r){if(n.app){var a=n.options.scrollBehavior;a&&n.app.$nextTick((function(){var o=function(){var n=Lo();if(n)return Do[n]}(),i=a.call(n,e,t,r?o:null);i&&("function"==typeof i.then?i.then((function(n){Xo(n,o)})).catch((function(n){0})):Xo(i,o))}))}}function Fo(){var n=Lo();n&&(Do[n]={x:window.pageXOffset,y:window.pageYOffset})}function qo(n){Fo(),n.state&&n.state.key&&Mo(n.state.key)}function zo(n){return Uo(n.x)||Uo(n.y)}function No(n){return{x:Uo(n.x)?n.x:window.pageXOffset,y:Uo(n.y)?n.y:window.pageYOffset}}function Uo(n){return"number"==typeof n}var Jo=/^#\d/;function Xo(n,e){var t,r="object"==typeof n;if(r&&"string"==typeof n.selector){var a=Jo.test(n.selector)?document.getElementById(n.selector.slice(1)):document.querySelector(n.selector);if(a){var o=n.offset&&"object"==typeof n.offset?n.offset:{};e=function(n,e){var t=document.documentElement.getBoundingClientRect(),r=n.getBoundingClientRect();return{x:r.left-t.left-e.x,y:r.top-t.top-e.y}}(a,o={x:Uo((t=o).x)?t.x:0,y:Uo(t.y)?t.y:0})}else zo(n)&&(e=No(n))}else r&&zo(n)&&(e=No(n));e&&("scrollBehavior"in document.documentElement.style?window.scrollTo({left:e.x,top:e.y,behavior:n.behavior}):window.scrollTo(e.x,e.y))}var Vo,Ho=Ao&&((-1===(Vo=window.navigator.userAgent).indexOf("Android 2.")&&-1===Vo.indexOf("Android 4.0")||-1===Vo.indexOf("Mobile Safari")||-1!==Vo.indexOf("Chrome")||-1!==Vo.indexOf("Windows Phone"))&&window.history&&"function"==typeof window.history.pushState);function Qo(n,e){Fo();var t=window.history;try{if(e){var r=La({},t.state);r.key=Lo(),t.replaceState(r,"",n)}else t.pushState({key:Mo(Bo())},"",n)}catch(t){window.location[e?"replace":"assign"](n)}}function Wo(n){Qo(n,!0)}function Go(n,e,t){var r=function(a){a>=n.length?t():n[a]?e(n[a],(function(){r(a+1)})):r(a+1)};r(0)}var Yo={redirected:2,aborted:4,cancelled:8,duplicated:16};function Ko(n,e){return ni(n,e,Yo.redirected,'Redirected when going from "'+n.fullPath+'" to "'+function(n){if("string"==typeof n)return n;if("path"in n)return n.path;var e={};return ei.forEach((function(t){t in n&&(e[t]=n[t])})),JSON.stringify(e,null,2)}(e)+'" via a navigation guard.')}function Zo(n,e){return ni(n,e,Yo.cancelled,'Navigation cancelled from "'+n.fullPath+'" to "'+e.fullPath+'" with a new navigation.')}function ni(n,e,t,r){var a=new Error(r);return a._isRouter=!0,a.from=n,a.to=e,a.type=t,a}var ei=["params","query","hash"];function ti(n){return Object.prototype.toString.call(n).indexOf("Error")>-1}function ri(n,e){return ti(n)&&n._isRouter&&(null==e||n.type===e)}function ai(n){return function(e,t,r){var a=!1,o=0,i=null;oi(n,(function(n,e,t,s){if("function"==typeof n&&void 0===n.cid){a=!0,o++;var c,l=ci((function(e){var a;((a=e).__esModule||si&&"Module"===a[Symbol.toStringTag])&&(e=e.default),n.resolved="function"==typeof e?e:So.extend(e),t.components[s]=e,--o<=0&&r()})),p=ci((function(n){var e="Failed to resolve async component "+s+": "+n;i||(i=ti(n)?n:new Error(e),r(i))}));try{c=n(l,p)}catch(n){p(n)}if(c)if("function"==typeof c.then)c.then(l,p);else{var u=c.component;u&&"function"==typeof u.then&&u.then(l,p)}}})),a||r()}}function oi(n,e){return ii(n.map((function(n){return Object.keys(n.components).map((function(t){return e(n.components[t],n.instances[t],n,t)}))})))}function ii(n){return Array.prototype.concat.apply([],n)}var si="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;function ci(n){var e=!1;return function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];if(!e)return e=!0,n.apply(this,t)}}var li=function(n,e){this.router=n,this.base=function(n){if(!n)if(Ao){var e=document.querySelector("base");n=(n=e&&e.getAttribute("href")||"/").replace(/^https?:\/\/[^\/]+/,"")}else n="/";"/"!==n.charAt(0)&&(n="/"+n);return n.replace(/\/$/,"")}(e),this.current=Va,this.pending=null,this.ready=!1,this.readyCbs=[],this.readyErrorCbs=[],this.errorCbs=[],this.listeners=[]};function pi(n,e,t,r){var a=oi(n,(function(n,r,a,o){var i=function(n,e){"function"!=typeof n&&(n=So.extend(n));return n.options[e]}(n,e);if(i)return Array.isArray(i)?i.map((function(n){return t(n,r,a,o)})):t(i,r,a,o)}));return ii(r?a.reverse():a)}function ui(n,e){if(e)return function(){return n.apply(e,arguments)}}li.prototype.listen=function(n){this.cb=n},li.prototype.onReady=function(n,e){this.ready?n():(this.readyCbs.push(n),e&&this.readyErrorCbs.push(e))},li.prototype.onError=function(n){this.errorCbs.push(n)},li.prototype.transitionTo=function(n,e,t){var r,a=this;try{r=this.router.match(n,this.current)}catch(n){throw this.errorCbs.forEach((function(e){e(n)})),n}var o=this.current;this.confirmTransition(r,(function(){a.updateRoute(r),e&&e(r),a.ensureURL(),a.router.afterHooks.forEach((function(n){n&&n(r,o)})),a.ready||(a.ready=!0,a.readyCbs.forEach((function(n){n(r)})))}),(function(n){t&&t(n),n&&!a.ready&&(ri(n,Yo.redirected)&&o===Va||(a.ready=!0,a.readyErrorCbs.forEach((function(e){e(n)}))))}))},li.prototype.confirmTransition=function(n,e,t){var r=this,a=this.current;this.pending=n;var o,i,s=function(n){!ri(n)&&ti(n)&&(r.errorCbs.length?r.errorCbs.forEach((function(e){e(n)})):console.error(n)),t&&t(n)},c=n.matched.length-1,l=a.matched.length-1;if(Wa(n,a)&&c===l&&n.matched[c]===a.matched[l])return this.ensureURL(),n.hash&&$o(this.router,a,n,!1),s(((i=ni(o=a,n,Yo.duplicated,'Avoided redundant navigation to current location: "'+o.fullPath+'".')).name="NavigationDuplicated",i));var p=function(n,e){var t,r=Math.max(n.length,e.length);for(t=0;t<r&&n[t]===e[t];t++);return{updated:e.slice(0,t),activated:e.slice(t),deactivated:n.slice(t)}}(this.current.matched,n.matched),u=p.updated,f=p.deactivated,d=p.activated,m=[].concat(function(n){return pi(n,"beforeRouteLeave",ui,!0)}(f),this.router.beforeHooks,function(n){return pi(n,"beforeRouteUpdate",ui)}(u),d.map((function(n){return n.beforeEnter})),ai(d)),h=function(e,t){if(r.pending!==n)return s(Zo(a,n));try{e(n,a,(function(e){!1===e?(r.ensureURL(!0),s(function(n,e){return ni(n,e,Yo.aborted,'Navigation aborted from "'+n.fullPath+'" to "'+e.fullPath+'" via a navigation guard.')}(a,n))):ti(e)?(r.ensureURL(!0),s(e)):"string"==typeof e||"object"==typeof e&&("string"==typeof e.path||"string"==typeof e.name)?(s(Ko(a,n)),"object"==typeof e&&e.replace?r.replace(e):r.push(e)):t(e)}))}catch(n){s(n)}};Go(m,h,(function(){Go(function(n){return pi(n,"beforeRouteEnter",(function(n,e,t,r){return function(n,e,t){return function(r,a,o){return n(r,a,(function(n){"function"==typeof n&&(e.enteredCbs[t]||(e.enteredCbs[t]=[]),e.enteredCbs[t].push(n)),o(n)}))}}(n,t,r)}))}(d).concat(r.router.resolveHooks),h,(function(){if(r.pending!==n)return s(Zo(a,n));r.pending=null,e(n),r.router.app&&r.router.app.$nextTick((function(){Ya(n)}))}))}))},li.prototype.updateRoute=function(n){this.current=n,this.cb&&this.cb(n)},li.prototype.setupListeners=function(){},li.prototype.teardown=function(){this.listeners.forEach((function(n){n()})),this.listeners=[],this.current=Va,this.pending=null};var fi=function(n){function e(e,t){n.call(this,e,t),this._startLocation=di(this.base)}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.setupListeners=function(){var n=this;if(!(this.listeners.length>0)){var e=this.router,t=e.options.scrollBehavior,r=Ho&&t;r&&this.listeners.push(Ro());var a=function(){var t=n.current,a=di(n.base);n.current===Va&&a===n._startLocation||n.transitionTo(a,(function(n){r&&$o(e,n,t,!0)}))};window.addEventListener("popstate",a),this.listeners.push((function(){window.removeEventListener("popstate",a)}))}},e.prototype.go=function(n){window.history.go(n)},e.prototype.push=function(n,e,t){var r=this,a=this.current;this.transitionTo(n,(function(n){Qo(eo(r.base+n.fullPath)),$o(r.router,n,a,!1),e&&e(n)}),t)},e.prototype.replace=function(n,e,t){var r=this,a=this.current;this.transitionTo(n,(function(n){Wo(eo(r.base+n.fullPath)),$o(r.router,n,a,!1),e&&e(n)}),t)},e.prototype.ensureURL=function(n){if(di(this.base)!==this.current.fullPath){var e=eo(this.base+this.current.fullPath);n?Qo(e):Wo(e)}},e.prototype.getCurrentLocation=function(){return di(this.base)},e}(li);function di(n){var e=window.location.pathname,t=e.toLowerCase(),r=n.toLowerCase();return!n||t!==r&&0!==t.indexOf(eo(r+"/"))||(e=e.slice(n.length)),(e||"/")+window.location.search+window.location.hash}var mi=function(n){function e(e,t,r){n.call(this,e,t),r&&function(n){var e=di(n);if(!/^\/#/.test(e))return window.location.replace(eo(n+"/#"+e)),!0}(this.base)||hi()}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.setupListeners=function(){var n=this;if(!(this.listeners.length>0)){var e=this.router.options.scrollBehavior,t=Ho&&e;t&&this.listeners.push(Ro());var r=function(){var e=n.current;hi()&&n.transitionTo(bi(),(function(r){t&&$o(n.router,r,e,!0),Ho||yi(r.fullPath)}))},a=Ho?"popstate":"hashchange";window.addEventListener(a,r),this.listeners.push((function(){window.removeEventListener(a,r)}))}},e.prototype.push=function(n,e,t){var r=this,a=this.current;this.transitionTo(n,(function(n){vi(n.fullPath),$o(r.router,n,a,!1),e&&e(n)}),t)},e.prototype.replace=function(n,e,t){var r=this,a=this.current;this.transitionTo(n,(function(n){yi(n.fullPath),$o(r.router,n,a,!1),e&&e(n)}),t)},e.prototype.go=function(n){window.history.go(n)},e.prototype.ensureURL=function(n){var e=this.current.fullPath;bi()!==e&&(n?vi(e):yi(e))},e.prototype.getCurrentLocation=function(){return bi()},e}(li);function hi(){var n=bi();return"/"===n.charAt(0)||(yi("/"+n),!1)}function bi(){var n=window.location.href,e=n.indexOf("#");return e<0?"":n=n.slice(e+1)}function gi(n){var e=window.location.href,t=e.indexOf("#");return(t>=0?e.slice(0,t):e)+"#"+n}function vi(n){Ho?Qo(gi(n)):window.location.hash=n}function yi(n){Ho?Wo(gi(n)):window.location.replace(gi(n))}var xi=function(n){function e(e,t){n.call(this,e,t),this.stack=[],this.index=-1}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.push=function(n,e,t){var r=this;this.transitionTo(n,(function(n){r.stack=r.stack.slice(0,r.index+1).concat(n),r.index++,e&&e(n)}),t)},e.prototype.replace=function(n,e,t){var r=this;this.transitionTo(n,(function(n){r.stack=r.stack.slice(0,r.index).concat(n),e&&e(n)}),t)},e.prototype.go=function(n){var e=this,t=this.index+n;if(!(t<0||t>=this.stack.length)){var r=this.stack[t];this.confirmTransition(r,(function(){var n=e.current;e.index=t,e.updateRoute(r),e.router.afterHooks.forEach((function(e){e&&e(r,n)}))}),(function(n){ri(n,Yo.duplicated)&&(e.index=t)}))}},e.prototype.getCurrentLocation=function(){var n=this.stack[this.stack.length-1];return n?n.fullPath:"/"},e.prototype.ensureURL=function(){},e}(li),wi=function(n){void 0===n&&(n={}),this.app=null,this.apps=[],this.options=n,this.beforeHooks=[],this.resolveHooks=[],this.afterHooks=[],this.matcher=To(n.routes||[],this);var e=n.mode||"hash";switch(this.fallback="history"===e&&!Ho&&!1!==n.fallback,this.fallback&&(e="hash"),Ao||(e="abstract"),this.mode=e,e){case"history":this.history=new fi(this,n.base);break;case"hash":this.history=new mi(this,n.base,this.fallback);break;case"abstract":this.history=new xi(this,n.base);break;default:0}},Si={currentRoute:{configurable:!0}};function _i(n,e){return n.push(e),function(){var t=n.indexOf(e);t>-1&&n.splice(t,1)}}wi.prototype.match=function(n,e,t){return this.matcher.match(n,e,t)},Si.currentRoute.get=function(){return this.history&&this.history.current},wi.prototype.init=function(n){var e=this;if(this.apps.push(n),n.$once("hook:destroyed",(function(){var t=e.apps.indexOf(n);t>-1&&e.apps.splice(t,1),e.app===n&&(e.app=e.apps[0]||null),e.app||e.history.teardown()})),!this.app){this.app=n;var t=this.history;if(t instanceof fi||t instanceof mi){var r=function(n){t.setupListeners(),function(n){var r=t.current,a=e.options.scrollBehavior;Ho&&a&&"fullPath"in n&&$o(e,n,r,!1)}(n)};t.transitionTo(t.getCurrentLocation(),r,r)}t.listen((function(n){e.apps.forEach((function(e){e._route=n}))}))}},wi.prototype.beforeEach=function(n){return _i(this.beforeHooks,n)},wi.prototype.beforeResolve=function(n){return _i(this.resolveHooks,n)},wi.prototype.afterEach=function(n){return _i(this.afterHooks,n)},wi.prototype.onReady=function(n,e){this.history.onReady(n,e)},wi.prototype.onError=function(n){this.history.onError(n)},wi.prototype.push=function(n,e,t){var r=this;if(!e&&!t&&"undefined"!=typeof Promise)return new Promise((function(e,t){r.history.push(n,e,t)}));this.history.push(n,e,t)},wi.prototype.replace=function(n,e,t){var r=this;if(!e&&!t&&"undefined"!=typeof Promise)return new Promise((function(e,t){r.history.replace(n,e,t)}));this.history.replace(n,e,t)},wi.prototype.go=function(n){this.history.go(n)},wi.prototype.back=function(){this.go(-1)},wi.prototype.forward=function(){this.go(1)},wi.prototype.getMatchedComponents=function(n){var e=n?n.matched?n:this.resolve(n).route:this.currentRoute;return e?[].concat.apply([],e.matched.map((function(n){return Object.keys(n.components).map((function(e){return n.components[e]}))}))):[]},wi.prototype.resolve=function(n,e,t){var r=wo(n,e=e||this.history.current,t,this),a=this.match(r,e),o=a.redirectedFrom||a.fullPath;return{location:r,route:a,href:function(n,e,t){var r="hash"===t?"#"+e:e;return n?eo(n+"/"+r):r}(this.history.base,o,this.mode),normalizedTo:r,resolved:a}},wi.prototype.getRoutes=function(){return this.matcher.getRoutes()},wi.prototype.addRoute=function(n,e){this.matcher.addRoute(n,e),this.history.current!==Va&&this.history.transitionTo(this.history.getCurrentLocation())},wi.prototype.addRoutes=function(n){this.matcher.addRoutes(n),this.history.current!==Va&&this.history.transitionTo(this.history.getCurrentLocation())},Object.defineProperties(wi.prototype,Si),wi.install=function n(e){if(!n.installed||So!==e){n.installed=!0,So=e;var t=function(n){return void 0!==n},r=function(n,e){var r=n.$options._parentVnode;t(r)&&t(r=r.data)&&t(r=r.registerRouteInstance)&&r(n,e)};e.mixin({beforeCreate:function(){t(this.$options.router)?(this._routerRoot=this,this._router=this.$options.router,this._router.init(this),e.util.defineReactive(this,"_route",this._router.history.current)):this._routerRoot=this.$parent&&this.$parent._routerRoot||this,r(this,this)},destroyed:function(){r(this)}}),Object.defineProperty(e.prototype,"$router",{get:function(){return this._routerRoot._router}}),Object.defineProperty(e.prototype,"$route",{get:function(){return this._routerRoot._route}}),e.component("RouterView",Ka),e.component("RouterLink",ko);var a=e.config.optionMergeStrategies;a.beforeRouteEnter=a.beforeRouteLeave=a.beforeRouteUpdate=a.created}},wi.version="3.5.3",wi.isNavigationFailure=ri,wi.NavigationFailureType=Yo,wi.START_LOCATION=Va,Ao&&window.Vue&&window.Vue.use(wi);var ki=wi;t(224),t(173),t(250),t(99),t(252),t(37),t(38),t(253);function Ci(n){n.locales&&Object.keys(n.locales).forEach((function(e){n.locales[e].path=e})),Object.freeze(n)}t(74),t(89),t(120);function Ai(n){return(Ai="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}var ji=t(68),Pi=(t(183),t(18),t(44),t(226),t(227),t(40),t(25),{NotFound:function(){return Promise.all([t.e(0),t.e(4)]).then(t.bind(null,472))},Layout:function(){return Promise.all([t.e(0),t.e(2)]).then(t.bind(null,471))}}),Ti={"v-71e76812":function(){return t.e(7).then(t.bind(null,473))},"v-52d4a0de":function(){return t.e(10).then(t.bind(null,474))},"v-763c4d7e":function(){return t.e(6).then(t.bind(null,475))},"v-0aaa33f7":function(){return t.e(8).then(t.bind(null,476))},"v-2f6761fc":function(){return t.e(9).then(t.bind(null,477))},"v-43fc48ca":function(){return t.e(11).then(t.bind(null,478))},"v-a5cec558":function(){return t.e(5).then(t.bind(null,479))}};function Oi(n){var e=Object.create(null);return function(t){return e[t]||(e[t]=n(t))}}var Ei=/-(\w)/g,Bi=Oi((function(n){return n.replace(Ei,(function(n,e){return e?e.toUpperCase():""}))})),Ii=/\B([A-Z])/g,Li=Oi((function(n){return n.replace(Ii,"-$1").toLowerCase()})),Mi=Oi((function(n){return n.charAt(0).toUpperCase()+n.slice(1)}));function Di(n,e){if(e)return n(e)?n(e):e.includes("-")?n(Mi(Bi(e))):n(Mi(e))||n(Li(e))}var Ri=Object.assign({},Pi,Ti),$i=function(n){return Ri[n]},Fi=function(n){return Ti[n]},qi=function(n){return Pi[n]},zi=function(n){return Ia.component(n)};function Ni(n){return Di(Fi,n)}function Ui(n){return Di(qi,n)}function Ji(n){return Di($i,n)}function Xi(n){return Di(zi,n)}function Vi(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return Promise.all(e.filter((function(n){return n})).map(function(){var n=Object(r.a)(regeneratorRuntime.mark((function n(e){var t;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(Xi(e)||!Ji(e)){n.next=5;break}return n.next=3,Ji(e)();case 3:t=n.sent,Ia.component(e,t.default);case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()))}function Hi(n,e){"undefined"!=typeof window&&window.__VUEPRESS__&&(window.__VUEPRESS__[n]=e)}var Qi=t(131),Wi=(t(184),t(106),t(70),t(214)),Gi=t.n(Wi),Yi=t(215),Ki=t.n(Yi),Zi={created:function(){if(this.siteMeta=this.$site.headTags.filter((function(n){return"meta"===Object(Qi.a)(n,1)[0]})).map((function(n){var e=Object(Qi.a)(n,2);e[0];return e[1]})),this.$ssrContext){var n=this.getMergedMetaTags();this.$ssrContext.title=this.$title,this.$ssrContext.lang=this.$lang,this.$ssrContext.pageMeta=(e=n)?e.map((function(n){var e="<meta";return Object.keys(n).forEach((function(t){e+=" ".concat(t,'="').concat(Ki()(n[t]),'"')})),e+">"})).join("\n    "):"",this.$ssrContext.canonicalLink=es(this.$canonicalUrl)}var e},mounted:function(){this.currentMetaTags=Object(ji.a)(document.querySelectorAll("meta")),this.updateMeta(),this.updateCanonicalLink()},methods:{updateMeta:function(){document.title=this.$title,document.documentElement.lang=this.$lang;var n=this.getMergedMetaTags();this.currentMetaTags=ts(n,this.currentMetaTags)},getMergedMetaTags:function(){var n=this.$page.frontmatter.meta||[];return Gi()([{name:"description",content:this.$description}],n,this.siteMeta,rs)},updateCanonicalLink:function(){ns(),this.$canonicalUrl&&document.head.insertAdjacentHTML("beforeend",es(this.$canonicalUrl))}},watch:{$page:function(){this.updateMeta(),this.updateCanonicalLink()}},beforeDestroy:function(){ts(null,this.currentMetaTags),ns()}};function ns(){var n=document.querySelector("link[rel='canonical']");n&&n.remove()}function es(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n?'<link href="'.concat(n,'" rel="canonical" />'):""}function ts(n,e){if(e&&Object(ji.a)(e).filter((function(n){return n.parentNode===document.head})).forEach((function(n){return document.head.removeChild(n)})),n)return n.map((function(n){var e=document.createElement("meta");return Object.keys(n).forEach((function(t){e.setAttribute(t,n[t])})),document.head.appendChild(e),e}))}function rs(n){for(var e=0,t=["name","property","itemprop"];e<t.length;e++){var r=t[e];if(n.hasOwnProperty(r))return n[r]+r}return JSON.stringify(n)}t(133);var as=t(147),os={mounted:function(){window.addEventListener("scroll",this.onScroll)},methods:{onScroll:t.n(as)()((function(){this.setActiveHash()}),300),setActiveHash:function(){for(var n=this,e=[].slice.call(document.querySelectorAll(".sidebar-link")),t=[].slice.call(document.querySelectorAll(".header-anchor")).filter((function(n){return e.some((function(e){return e.hash===n.hash}))})),r=Math.max(window.pageYOffset,document.documentElement.scrollTop,document.body.scrollTop),a=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),o=window.innerHeight+r,i=0;i<t.length;i++){var s=t[i],c=t[i+1],l=0===i&&0===r||r>=s.parentElement.offsetTop+10&&(!c||r<c.parentElement.offsetTop-10),p=decodeURIComponent(this.$route.hash);if(l&&p!==decodeURIComponent(s.hash)){var u=s;if(o===a)for(var f=i+1;f<t.length;f++)if(p===decodeURIComponent(t[f].hash))return;return this.$vuepress.$set("disableScrollBehavior",!0),void this.$router.replace(decodeURIComponent(u.hash),(function(){n.$nextTick((function(){n.$vuepress.$set("disableScrollBehavior",!1)}))}))}}}},beforeDestroy:function(){window.removeEventListener("scroll",this.onScroll)}},is=(t(102),t(97)),ss=t.n(is),cs={mounted:function(){var n=this;ss.a.configure({showSpinner:!1}),this.$router.beforeEach((function(n,e,t){n.path===e.path||Ia.component(n.name)||ss.a.start(),t()})),this.$router.afterEach((function(){ss.a.done(),n.isSidebarOpen=!1}))}};t(72),t(71),t(75),t(360);function ls(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}t(137);function ps(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function us(n,e,t){return e&&ps(n.prototype,e),t&&ps(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}t(361);var fs=function(){function n(){ls(this,n);this.containerEl=document.getElementById("message-container"),this.containerEl||(this.containerEl=document.createElement("div"),this.containerEl.id="message-container",document.body.appendChild(this.containerEl))}return us(n,[{key:"show",value:function(n){var e=this,t=n.text,r=void 0===t?"":t,a=n.duration,o=void 0===a?3e3:a,i=document.createElement("div");i.className="message move-in",i.innerHTML='\n      <i style="fill: #06a35a;font-size: 14px;display:inline-flex;align-items: center;">\n        <svg style="fill: #06a35a;font-size: 14px;" t="1572421810237" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2323" width="16" height="16"><path d="M822.811993 824.617989c-83.075838 81.99224-188.546032 124.613757-316.049383 127.86455-122.085362-3.250794-223.943563-45.87231-305.935802-127.86455s-124.613757-184.21164-127.86455-305.935802c3.250794-127.503351 45.87231-232.973545 127.86455-316.049383 81.99224-83.075838 184.21164-126.058554 305.935802-129.309347 127.503351 3.250794 232.973545 46.23351 316.049383 129.309347 83.075838 83.075838 126.058554 188.546032 129.309347 316.049383C949.231746 640.406349 905.887831 742.62575 822.811993 824.617989zM432.716755 684.111464c3.973192 3.973192 8.307584 5.779189 13.364374 6.140388 5.05679 0.361199 9.752381-1.444797 13.364374-5.417989l292.571429-287.514638c3.973192-3.973192 5.779189-8.307584 5.779189-13.364374 0-5.05679-1.805996-9.752381-5.779189-13.364374l1.805996 1.805996c-3.973192-3.973192-8.668783-5.779189-14.086772-6.140388-5.417989-0.361199-10.47478 1.444797-14.809171 5.417989l-264.397884 220.33157c-3.973192 3.250794-8.668783 4.695591-14.447972 4.695591-5.779189 0-10.835979-1.444797-15.53157-3.973192l-94.273016-72.962257c-4.334392-3.250794-9.391182-4.334392-14.447972-3.973192s-9.391182 3.250794-12.641975 7.585185l-2.889594 3.973192c-3.250794 4.334392-4.334392 9.391182-3.973192 14.809171 0.722399 5.417989 2.528395 10.11358 5.779189 14.086772L432.716755 684.111464z" p-id="2324"></path></svg>\n      </i>\n      <div class="text">'.concat(r,"</div>\n    "),this.containerEl.appendChild(i),o>0&&setTimeout((function(){e.close(i)}),o)}},{key:"close",value:function(n){n.className=n.className.replace("move-in",""),n.className+="move-out",n.addEventListener("animationend",(function(){n.remove()}))}}]),n}(),ds={mounted:function(){!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||this.updateCopy()},updated:function(){!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||this.updateCopy()},methods:{updateCopy:function(){var n=this;setTimeout((function(){(['div[class*="language-"] pre','div[class*="aside-code"] aside']instanceof Array||Array.isArray(['div[class*="language-"] pre','div[class*="aside-code"] aside']))&&['div[class*="language-"] pre','div[class*="aside-code"] aside'].forEach((function(e){document.querySelectorAll(e).forEach(n.generateCopyButton)}))}),1e3)},generateCopyButton:function(n){var e=this;if(!n.classList.contains("codecopy-enabled")){var t=document.createElement("i");t.className="code-copy",t.innerHTML='<svg  style="color:#aaa;font-size:14px" t="1572422231464" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3201" width="14" height="14"><path d="M866.461538 39.384615H354.461538c-43.323077 0-78.769231 35.446154-78.76923 78.769231v39.384616h472.615384c43.323077 0 78.769231 35.446154 78.769231 78.76923v551.384616h39.384615c43.323077 0 78.769231-35.446154 78.769231-78.769231V118.153846c0-43.323077-35.446154-78.769231-78.769231-78.769231z m-118.153846 275.692308c0-43.323077-35.446154-78.769231-78.76923-78.769231H157.538462c-43.323077 0-78.769231 35.446154-78.769231 78.769231v590.769231c0 43.323077 35.446154 78.769231 78.769231 78.769231h512c43.323077 0 78.769231-35.446154 78.76923-78.769231V315.076923z m-354.461538 137.846154c0 11.815385-7.876923 19.692308-19.692308 19.692308h-157.538461c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h157.538461c11.815385 0 19.692308 7.876923 19.692308 19.692308v39.384615z m157.538461 315.076923c0 11.815385-7.876923 19.692308-19.692307 19.692308H216.615385c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h315.076923c11.815385 0 19.692308 7.876923 19.692307 19.692308v39.384615z m78.769231-157.538462c0 11.815385-7.876923 19.692308-19.692308 19.692308H216.615385c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h393.846153c11.815385 0 19.692308 7.876923 19.692308 19.692308v39.384615z" p-id="3202"></path></svg>',t.title="Copy to clipboard",t.addEventListener("click",(function(){e.copyToClipboard(n.innerText)})),n.appendChild(t),n.classList.add("codecopy-enabled")}},copyToClipboard:function(n){var e=document.createElement("textarea");e.value=n,e.setAttribute("readonly",""),e.style.position="absolute",e.style.left="-9999px",document.body.appendChild(e);var t=document.getSelection().rangeCount>0&&document.getSelection().getRangeAt(0);e.select(),document.execCommand("copy"),(new fs).show({text:"å¤å¶æå",duration:1e3}),document.body.removeChild(e),t&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(t))}}};t(229),t(98),t(132),t(134),t(363);!function(n,e){void 0===e&&(e={});var t=e.insertAt;if(n&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===t&&r.firstChild?r.insertBefore(a,r.firstChild):r.appendChild(a),a.styleSheet?a.styleSheet.cssText=n:a.appendChild(document.createTextNode(n))}}("@media (max-width: 1000px) {\n  .vuepress-plugin-demo-block__h_code {\n    display: none;\n  }\n  .vuepress-plugin-demo-block__app {\n    margin-left: auto !important;\n    margin-right: auto !important;\n  }\n}\n.vuepress-plugin-demo-block__wrapper {\n  margin-top: 10px;\n  border: 1px solid #ebebeb;\n  border-radius: 4px;\n  transition: all 0.2s;\n}\n.vuepress-plugin-demo-block__wrapper.vuepress-plugin-demo-block__horizontal .vuepress-plugin-demo-block__display {\n  height: 400px;\n  display: flex;\n}\n.vuepress-plugin-demo-block__wrapper.vuepress-plugin-demo-block__horizontal .vuepress-plugin-demo-block__display .vuepress-plugin-demo-block__app {\n  width: 300px;\n  border: 1px solid #ebebeb;\n  box-shadow: 1px 1px 3px #ebebeb;\n  margin-right: 5px;\n  overflow: auto;\n}\n.vuepress-plugin-demo-block__wrapper.vuepress-plugin-demo-block__horizontal .vuepress-plugin-demo-block__display .vuepress-plugin-demo-block__h_code {\n  flex: 1;\n  overflow: auto;\n  height: 100%;\n}\n.vuepress-plugin-demo-block__wrapper.vuepress-plugin-demo-block__horizontal .vuepress-plugin-demo-block__display .vuepress-plugin-demo-block__h_code > pre {\n  overflow: visible;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__display {\n  max-height: 400px;\n  overflow: auto;\n}\n.vuepress-plugin-demo-block__wrapper div {\n  box-sizing: border-box;\n}\n.vuepress-plugin-demo-block__wrapper:hover {\n  box-shadow: 0 0 11px rgba(33, 33, 33, 0.2);\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__code {\n  overflow: hidden;\n  height: 0;\n  padding: 0 !important;\n  background-color: #282c34;\n  border-radius: 0 !important;\n  transition: height 0.5s;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__code pre {\n  margin: 0 !important;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__display {\n  padding: 20px;\n  border-bottom: 1px solid #ebebeb;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer {\n  position: relative;\n  text-align: center;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer.vuepress-plugin-demo-block__show-link .vuepress-plugin-demo-block__jsfiddle,\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer.vuepress-plugin-demo-block__show-link .vuepress-plugin-demo-block__codepen {\n  opacity: 1;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer.vuepress-plugin-demo-block__show-link .vuepress-plugin-demo-block__expand::before {\n  border-top: none;\n  border-right: 6px solid transparent;\n  border-bottom: 6px solid #ccc;\n  border-left: 6px solid transparent;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer:hover .vuepress-plugin-demo-block__jsfiddle,\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer:hover .vuepress-plugin-demo-block__codepen,\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer:hover .vuepress-plugin-demo-block__expand span,\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer:hover .vuepress-plugin-demo-block__expand {\n  opacity: 1;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer:hover .vuepress-plugin-demo-block__expand::before {\n  border-top-color: #3eaf7c !important;\n  border-bottom-color: #3eaf7c !important;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer:hover svg {\n  fill: #3eaf7c !important;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__expand-text {\n  transition: all 0.5s;\n  opacity: 0;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer form:nth-last-child(2) {\n  right: 50px;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer form:last-child {\n  right: 10px;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__button {\n  border-color: transparent;\n  background-color: transparent;\n  font-size: 14px;\n  color: #3eaf7c;\n  cursor: pointer;\n  outline: none;\n  margin: 0;\n  width: 46px;\n  position: relative;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__button:hover::before {\n  content: attr(data-tip);\n  white-space: nowrap;\n  position: absolute;\n  top: -30px;\n  left: 50%;\n  color: #eee;\n  line-height: 1;\n  z-index: 1000;\n  border-radius: 4px;\n  padding: 6px;\n  -webkit-transform: translateX(-50%);\n          transform: translateX(-50%);\n  background-color: rgba(0, 0, 0, 0.8);\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__button:hover::after {\n  content: '' !important;\n  display: block;\n  position: absolute;\n  left: 50%;\n  top: -5px;\n  -webkit-transform: translateX(-50%);\n          transform: translateX(-50%);\n  border: 5px solid transparent;\n  border-top-color: rgba(0, 0, 0, 0.8);\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__button svg {\n  width: 34px;\n  height: 20px;\n  fill: #ccc;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__jsfiddle,\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__codepen {\n  position: absolute;\n  top: 10px;\n  transition: all 0.5s;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__expand {\n  position: relative;\n  width: 100px;\n  height: 40px;\n  margin: 0;\n  color: #3eaf7c;\n  font-size: 14px;\n  background-color: transparent;\n  border-color: transparent;\n  outline: none;\n  transition: all 0.5s;\n  cursor: pointer;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__expand::before {\n  content: \"\";\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 0;\n  height: 0;\n  border-top: 6px solid #ccc;\n  border-right: 6px solid transparent;\n  border-left: 6px solid transparent;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n}\n");var ms={jsLib:[],cssLib:[],jsfiddle:!0,codepen:!0,codepenLayout:"left",codepenJsProcessor:"babel",codepenEditors:"101",horizontal:!1,vue:"https://cdn.jsdelivr.net/npm/vue/dist/vue.min.js",react:"https://cdn.jsdelivr.net/npm/react/umd/react.production.min.js",reactDOM:"https://cdn.jsdelivr.net/npm/react-dom/umd/react-dom.production.min.js"},hs={},bs=function(n){return'<div id="app">\n'.concat(n,"\n</div>")},gs=function(n){return window.$VUEPRESS_DEMO_BLOCK&&void 0!==window.$VUEPRESS_DEMO_BLOCK[n]?window.$VUEPRESS_DEMO_BLOCK[n]:ms[n]},vs=function n(e,t,r){var a=document.createElement(e);return t&&Object.keys(t).forEach((function(n){if(n.indexOf("data"))a[n]=t[n];else{var e=n.replace("data","");a.dataset[e]=t[n]}})),r&&r.forEach((function(e){var t=e.tag,r=e.attrs,o=e.children;a.appendChild(n(t,r,o))})),a},ys=function(n,e,t){var r,a=(r=n.querySelectorAll(".".concat(e)),Array.prototype.slice.call(r));return 1!==a.length||t?a:a[0]},xs=function(n,e){var t,r,a=n.match(/<style>([\s\S]+)<\/style>/),o=n.match(/<template>([\s\S]+)<\/template>/),i=n.match(/<script>([\s\S]+)<\/script>/),s={css:a&&a[1].replace(/^\n|\n$/g,""),html:o&&o[1].replace(/^\n|\n$/g,""),js:i&&i[1].replace(/^\n|\n$/g,""),jsLib:e.jsLib||[],cssLib:e.cssLib||[]};s.htmlTpl=bs(s.html),s.jsTpl=(t=s.js,r=t.replace(/export\s+default\s*?\{\n*/,"").replace(/\n*\}\s*$/,"").trim(),"new Vue({\n  el: '#app',\n  ".concat(r,"\n})")),s.script=function(n,e){var t=n.split(/export\s+default/),r="(function() {".concat(t[0]," ; return ").concat(t[1],"})()"),a=window.Babel?window.Babel.transform(r,{presets:["es2015"]}).code:r,o=[eval][0](a);return o.template=e,o}(s.js,s.html);var c=gs("vue");return s.jsLib.unshift(c),s},ws=function(n,e){var t,r=n.match(/<style>([\s\S]+)<\/style>/),a=n.match(/<html>([\s\S]+)<\/html>/),o=n.match(/<script>([\s\S]+)<\/script>/),i={css:r&&r[1].replace(/^\n|\n$/g,""),html:a&&a[1].replace(/^\n|\n$/g,""),js:o&&o[1].replace(/^\n|\n$/g,""),jsLib:e.jsLib||[],cssLib:e.cssLib||[]};return i.htmlTpl=i.html,i.jsTpl=i.js,i.script=(t=i.js,window.Babel?window.Babel.transform(t,{presets:["es2015"]}).code:t),i},Ss=function(n){return n=n.replace("export default ","").replace(/App\.__style__(\s*)=(\s*)`([\s\S]*)?`/,""),n+='ReactDOM.render(React.createElement(App), document.getElementById("app"))'};function _s(){var n=ys(document,"vuepress-plugin-demo-block__wrapper",!0);n.length?n.forEach((function(n){if("true"!==n.dataset.created){n.style.display="block";var e=ys(n,"vuepress-plugin-demo-block__code"),t=ys(n,"vuepress-plugin-demo-block__display"),r=ys(n,"vuepress-plugin-demo-block__footer"),a=ys(t,"vuepress-plugin-demo-block__app"),o=decodeURIComponent(n.dataset.code),i=decodeURIComponent(n.dataset.config),s=decodeURIComponent(n.dataset.type);i=i?JSON.parse(i):{};var c=e.querySelector("div").clientHeight,l="react"===s?function(n,e){var t=(0,window.Babel.transform)(n,{presets:["es2015","react"]}).code,r="(function(exports){var module={};module.exports=exports;".concat(t,";return module.exports.__esModule?module.exports.default:module.exports;})({})"),a=new Function("return ".concat(r))(),o={js:a,css:a.__style__||"",jsLib:e.jsLib||[],cssLib:e.cssLib||[],jsTpl:Ss(n),htmlTpl:bs("")},i=gs("react"),s=gs("reactDOM");return o.jsLib.unshift(i,s),o}(o,i):"vanilla"===s?ws(o,i):xs(o,i),p=vs("button",{className:"".concat("vuepress-plugin-demo-block__expand")});if(r.appendChild(p),p.addEventListener("click",ks.bind(null,p,c,e,r)),gs("jsfiddle")&&r.appendChild(function(n){var e=n.css,t=n.htmlTpl,r=n.jsTpl,a=n.jsLib,o=n.cssLib,i=a.concat(o).concat(gs("cssLib")).concat(gs("jsLib")).join(",");return vs("form",{className:"vuepress-plugin-demo-block__jsfiddle",target:"_blank",action:"https://jsfiddle.net/api/post/library/pure/",method:"post"},[{tag:"input",attrs:{type:"hidden",name:"css",value:e}},{tag:"input",attrs:{type:"hidden",name:"html",value:t}},{tag:"input",attrs:{type:"hidden",name:"js",value:r}},{tag:"input",attrs:{type:"hidden",name:"panel_js",value:3}},{tag:"input",attrs:{type:"hidden",name:"wrap",value:1}},{tag:"input",attrs:{type:"hidden",name:"resources",value:i}},{tag:"button",attrs:{type:"submit",className:"vuepress-plugin-demo-block__button",innerHTML:'<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1547088289967" class="icon" style="" viewBox="0 0 1170 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1952" xmlns:xlink="http://www.w3.org/1999/xlink" width="228.515625" height="200"><defs><style type="text/css"></style></defs><path d="M1028.571429 441.142857q63.428571 26.285714 102.571428 83.142857T1170.285714 650.857143q0 93.714286-67.428571 160.285714T940 877.714286q-2.285714 0-6.571429-0.285715t-6-0.285714H232q-97.142857-5.714286-164.571429-71.714286T0 645.142857q0-62.857143 31.428571-116t84-84q-6.857143-22.285714-6.857142-46.857143 0-65.714286 46.857142-112t113.714286-46.285714q54.285714 0 98.285714 33.142857 42.857143-88 127.142858-141.714286t186.571428-53.714285q94.857143 0 174.857143 46T982.571429 248.571429t46.571428 172q0 3.428571-0.285714 10.285714t-0.285714 10.285714zM267.428571 593.142857q0 69.714286 48 110.285714t118.857143 40.571429q78.285714 0 137.142857-56.571429-9.142857-11.428571-27.142857-32.285714T519.428571 626.285714q-38.285714 37.142857-82.285714 37.142857-31.428571 0-53.428571-19.142857T361.714286 594.285714q0-30.285714 22-49.714285t52.285714-19.428572q25.142857 0 48.285714 12t41.714286 31.428572 37.142857 42.857142 39.428572 46.857143 44 42.857143 55.428571 31.428572 69.428571 12q69.142857 0 116.857143-40.857143T936 594.857143q0-69.142857-48-109.714286t-118.285714-40.571428q-81.714286 0-137.714286 55.428571l53.142857 61.714286q37.714286-36.571429 81.142857-36.571429 29.714286 0 52.571429 18.857143t22.857143 48q0 32.571429-21.142857 52.285714t-53.714286 19.714286q-24.571429 0-47.142857-12t-41.142857-31.428571-37.428572-42.857143-39.714286-46.857143-44.285714-42.857143-55.142857-31.428571T434.285714 444.571429q-69.714286 0-118.285714 40.285714T267.428571 593.142857z" p-id="1953"></path></svg>',datatip:"JSFiddle"}}])}(l)),gs("codepen")&&r.appendChild(function(n){var e=n.css,t=n.htmlTpl,r=n.jsTpl,a=n.jsLib,o=n.cssLib,i=JSON.stringify({css:e,html:t,js:r,js_external:a.concat(gs("jsLib")).join(";"),css_external:o.concat(gs("cssLib")).join(";"),layout:gs("codepenLayout"),js_pre_processor:gs("codepenJsProcessor"),editors:gs("codepenEditors")});return vs("form",{className:"vuepress-plugin-demo-block__codepen",target:"_blank",action:"https://codepen.io/pen/define",method:"post"},[{tag:"input",attrs:{type:"hidden",name:"data",value:i}},{tag:"button",attrs:{type:"submit",innerHTML:'<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1547088271207" class="icon" style="" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1737" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css"></style></defs><path d="M123.428571 668l344.571429 229.714286v-205.142857L277.142857 565.142857z m-35.428571-82.285714l110.285714-73.714286-110.285714-73.714286v147.428572z m468 312l344.571429-229.714286-153.714286-102.857143-190.857143 127.428572v205.142857z m-44-281.714286l155.428571-104-155.428571-104-155.428571 104zM277.142857 458.857143l190.857143-127.428572V126.285714L123.428571 356z m548.571429 53.142857l110.285714 73.714286V438.285714z m-78.857143-53.142857l153.714286-102.857143-344.571429-229.714286v205.142857z m277.142857-102.857143v312q0 23.428571-19.428571 36.571429l-468 312q-12 7.428571-24.571429 7.428571t-24.571429-7.428571L19.428571 704.571429q-19.428571-13.142857-19.428571-36.571429V356q0-23.428571 19.428571-36.571429L487.428571 7.428571q12-7.428571 24.571429-7.428571t24.571429 7.428571l468 312q19.428571 13.142857 19.428571 36.571429z" p-id="1738"></path></svg>',className:"vuepress-plugin-demo-block__button",datatip:"Codepen"}}])}(l)),void 0!==i.horizontal?i.horizontal:gs("horizontal")){n.classList.add("vuepress-plugin-demo-block__horizontal");var u=e.firstChild.cloneNode(!0);u.classList.add("vuepress-plugin-demo-block__h_code"),t.appendChild(u)}if(l.css&&function(n){if(!hs[n]){var e=vs("style",{innerHTML:n});document.body.appendChild(e),hs[n]=!0}}(l.css),"react"===s)ReactDOM.render(React.createElement(l.js),a);else if("vue"===s){var f=(new(Vue.extend(l.script))).$mount();a.appendChild(f.$el)}else"vanilla"===s&&(a.innerHTML=l.html,new Function("return (function(){".concat(l.script,"})()"))());n.dataset.created="true"}})):setTimeout((function(n){_s()}),300)}function ks(n,e,t,r){var a="1"!==n.dataset.isExpand;t.style.height=a?"".concat(e,"px"):0,a?r.classList.add("vuepress-plugin-demo-block__show-link"):r.classList.remove("vuepress-plugin-demo-block__show-link"),n.dataset.isExpand=a?"1":"0"}var Cs={mounted:function(){window.$VUEPRESS_DEMO_BLOCK={jsfiddle:!1,codepen:!0,horizontal:!1},_s()},updated:function(){_s()}},As=(t(218),"auto"),js="zoom-in",Ps="zoom-out",Ts="grab",Os="move";function Es(n,e,t){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a={passive:!1};r?n.addEventListener(e,t,a):n.removeEventListener(e,t,a)}function Bs(n,e){if(n){var t=new Image;t.onload=function(){e&&e(t)},t.src=n}}function Is(n){return n.dataset.original?n.dataset.original:"A"===n.parentNode.tagName?n.parentNode.getAttribute("href"):null}function Ls(n,e,t){!function(n){var e=Ms,t=Ds;if(n.transition){var r=n.transition;delete n.transition,n[e]=r}if(n.transform){var a=n.transform;delete n.transform,n[t]=a}}(e);var r=n.style,a={};for(var o in e)t&&(a[o]=r[o]||""),r[o]=e[o];return a}var Ms="transition",Ds="transform",Rs="transform",$s="transitionend";var Fs=function(){},qs={enableGrab:!0,preloadImage:!1,closeOnWindowResize:!0,transitionDuration:.4,transitionTimingFunction:"cubic-bezier(0.4, 0, 0, 1)",bgColor:"rgb(255, 255, 255)",bgOpacity:1,scaleBase:1,scaleExtra:.5,scrollThreshold:40,zIndex:998,customSize:null,onOpen:Fs,onClose:Fs,onGrab:Fs,onMove:Fs,onRelease:Fs,onBeforeOpen:Fs,onBeforeClose:Fs,onBeforeGrab:Fs,onBeforeRelease:Fs,onImageLoading:Fs,onImageLoaded:Fs},zs={init:function(n){var e,t;e=this,t=n,Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach((function(n){e[n]=e[n].bind(t)}))},click:function(n){if(n.preventDefault(),Us(n))return window.open(this.target.srcOriginal||n.currentTarget.src,"_blank");this.shown?this.released?this.close():this.release():this.open(n.currentTarget)},scroll:function(){var n=document.documentElement||document.body.parentNode||document.body,e=window.pageXOffset||n.scrollLeft,t=window.pageYOffset||n.scrollTop;null===this.lastScrollPosition&&(this.lastScrollPosition={x:e,y:t});var r=this.lastScrollPosition.x-e,a=this.lastScrollPosition.y-t,o=this.options.scrollThreshold;(Math.abs(a)>=o||Math.abs(r)>=o)&&(this.lastScrollPosition=null,this.close())},keydown:function(n){(function(n){return"Escape"===(n.key||n.code)||27===n.keyCode})(n)&&(this.released?this.close():this.release(this.close))},mousedown:function(n){if(Ns(n)&&!Us(n)){n.preventDefault();var e=n.clientX,t=n.clientY;this.pressTimer=setTimeout(function(){this.grab(e,t)}.bind(this),200)}},mousemove:function(n){this.released||this.move(n.clientX,n.clientY)},mouseup:function(n){Ns(n)&&!Us(n)&&(clearTimeout(this.pressTimer),this.released?this.close():this.release())},touchstart:function(n){n.preventDefault();var e=n.touches[0],t=e.clientX,r=e.clientY;this.pressTimer=setTimeout(function(){this.grab(t,r)}.bind(this),200)},touchmove:function(n){if(!this.released){var e=n.touches[0],t=e.clientX,r=e.clientY;this.move(t,r)}},touchend:function(n){(function(n){n.targetTouches.length})(n)||(clearTimeout(this.pressTimer),this.released?this.close():this.release())},clickOverlay:function(){this.close()},resizeWindow:function(){this.close()}};function Ns(n){return 0===n.button}function Us(n){return n.metaKey||n.ctrlKey}var Js={init:function(n){this.el=document.createElement("div"),this.instance=n,this.parent=document.body,Ls(this.el,{position:"fixed",top:0,left:0,right:0,bottom:0,opacity:0}),this.updateStyle(n.options),Es(this.el,"click",n.handler.clickOverlay.bind(n))},updateStyle:function(n){Ls(this.el,{zIndex:n.zIndex,backgroundColor:n.bgColor,transition:"opacity\n        "+n.transitionDuration+"s\n        "+n.transitionTimingFunction})},insert:function(){this.parent.appendChild(this.el)},remove:function(){this.parent.removeChild(this.el)},fadeIn:function(){this.el.offsetWidth,this.el.style.opacity=this.instance.options.bgOpacity},fadeOut:function(){this.el.style.opacity=0}},Xs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Vs=function(){function n(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),Hs=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Qs={init:function(n,e){this.el=n,this.instance=e,this.srcThumbnail=this.el.getAttribute("src"),this.srcset=this.el.getAttribute("srcset"),this.srcOriginal=Is(this.el),this.rect=this.el.getBoundingClientRect(),this.translate=null,this.scale=null,this.styleOpen=null,this.styleClose=null},zoomIn:function(){var n=this.instance.options,e=n.zIndex,t=n.enableGrab,r=n.transitionDuration,a=n.transitionTimingFunction;this.translate=this.calculateTranslate(),this.scale=this.calculateScale(),this.styleOpen={position:"relative",zIndex:e+1,cursor:t?Ts:Ps,transition:Rs+"\n        "+r+"s\n        "+a,transform:"translate3d("+this.translate.x+"px, "+this.translate.y+"px, 0px)\n        scale("+this.scale.x+","+this.scale.y+")",height:this.rect.height+"px",width:this.rect.width+"px"},this.el.offsetWidth,this.styleClose=Ls(this.el,this.styleOpen,!0)},zoomOut:function(){this.el.offsetWidth,Ls(this.el,{transform:"none"})},grab:function(n,e,t){var r=Ws(),a=r.x-n,o=r.y-e;Ls(this.el,{cursor:Os,transform:"translate3d(\n        "+(this.translate.x+a)+"px, "+(this.translate.y+o)+"px, 0px)\n        scale("+(this.scale.x+t)+","+(this.scale.y+t)+")"})},move:function(n,e,t){var r=Ws(),a=r.x-n,o=r.y-e;Ls(this.el,{transition:Rs,transform:"translate3d(\n        "+(this.translate.x+a)+"px, "+(this.translate.y+o)+"px, 0px)\n        scale("+(this.scale.x+t)+","+(this.scale.y+t)+")"})},restoreCloseStyle:function(){Ls(this.el,this.styleClose)},restoreOpenStyle:function(){Ls(this.el,this.styleOpen)},upgradeSource:function(){if(this.srcOriginal){var n=this.el.parentNode;this.srcset&&this.el.removeAttribute("srcset");var e=this.el.cloneNode(!1);e.setAttribute("src",this.srcOriginal),e.style.position="fixed",e.style.visibility="hidden",n.appendChild(e),setTimeout(function(){this.el.setAttribute("src",this.srcOriginal),n.removeChild(e)}.bind(this),50)}},downgradeSource:function(){this.srcOriginal&&(this.srcset&&this.el.setAttribute("srcset",this.srcset),this.el.setAttribute("src",this.srcThumbnail))},calculateTranslate:function(){var n=Ws(),e=this.rect.left+this.rect.width/2,t=this.rect.top+this.rect.height/2;return{x:n.x-e,y:n.y-t}},calculateScale:function(){var n=this.el.dataset,e=n.zoomingHeight,t=n.zoomingWidth,r=this.instance.options,a=r.customSize,o=r.scaleBase;if(!a&&e&&t)return{x:t/this.rect.width,y:e/this.rect.height};if(a&&"object"===(void 0===a?"undefined":Xs(a)))return{x:a.width/this.rect.width,y:a.height/this.rect.height};var i=this.rect.width/2,s=this.rect.height/2,c=Ws(),l={x:c.x-i,y:c.y-s},p=l.x/i,u=l.y/s,f=o+Math.min(p,u);if(a&&"string"==typeof a){var d=t||this.el.naturalWidth,m=e||this.el.naturalHeight,h=parseFloat(a)*d/(100*this.rect.width),b=parseFloat(a)*m/(100*this.rect.height);if(f>h||f>b)return{x:h,y:b}}return{x:f,y:f}}};function Ws(){var n=document.documentElement;return{x:Math.min(n.clientWidth,window.innerWidth)/2,y:Math.min(n.clientHeight,window.innerHeight)/2}}function Gs(n,e,t){["mousedown","mousemove","mouseup","touchstart","touchmove","touchend"].forEach((function(r){Es(n,r,e[r],t)}))}var Ys=function(){function n(e){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.target=Object.create(Qs),this.overlay=Object.create(Js),this.handler=Object.create(zs),this.body=document.body,this.shown=!1,this.lock=!1,this.released=!0,this.lastScrollPosition=null,this.pressTimer=null,this.options=Hs({},qs,e),this.overlay.init(this),this.handler.init(this)}return Vs(n,[{key:"listen",value:function(n){if("string"==typeof n)for(var e=document.querySelectorAll(n),t=e.length;t--;)this.listen(e[t]);else"IMG"===n.tagName&&(n.style.cursor=js,Es(n,"click",this.handler.click),this.options.preloadImage&&Bs(Is(n)));return this}},{key:"config",value:function(n){return n?(Hs(this.options,n),this.overlay.updateStyle(this.options),this):this.options}},{key:"open",value:function(n){var e=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.options.onOpen;if(!this.shown&&!this.lock){var r="string"==typeof n?document.querySelector(n):n;if("IMG"===r.tagName){if(this.options.onBeforeOpen(r),this.target.init(r,this),!this.options.preloadImage){var a=this.target.srcOriginal;null!=a&&(this.options.onImageLoading(r),Bs(a,this.options.onImageLoaded))}this.shown=!0,this.lock=!0,this.target.zoomIn(),this.overlay.insert(),this.overlay.fadeIn(),Es(document,"scroll",this.handler.scroll),Es(document,"keydown",this.handler.keydown),this.options.closeOnWindowResize&&Es(window,"resize",this.handler.resizeWindow);var o=function n(){Es(r,$s,n,!1),e.lock=!1,e.target.upgradeSource(),e.options.enableGrab&&Gs(document,e.handler,!0),t(r)};return Es(r,$s,o),this}}}},{key:"close",value:function(){var n=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.onClose;if(this.shown&&!this.lock){var t=this.target.el;this.options.onBeforeClose(t),this.lock=!0,this.body.style.cursor=As,this.overlay.fadeOut(),this.target.zoomOut(),Es(document,"scroll",this.handler.scroll,!1),Es(document,"keydown",this.handler.keydown,!1),this.options.closeOnWindowResize&&Es(window,"resize",this.handler.resizeWindow,!1);var r=function r(){Es(t,$s,r,!1),n.shown=!1,n.lock=!1,n.target.downgradeSource(),n.options.enableGrab&&Gs(document,n.handler,!1),n.target.restoreCloseStyle(),n.overlay.remove(),e(t)};return Es(t,$s,r),this}}},{key:"grab",value:function(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.options.scaleExtra,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.options.onGrab;if(this.shown&&!this.lock){var a=this.target.el;this.options.onBeforeGrab(a),this.released=!1,this.target.grab(n,e,t);var o=function n(){Es(a,$s,n,!1),r(a)};return Es(a,$s,o),this}}},{key:"move",value:function(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.options.scaleExtra,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.options.onMove;if(this.shown&&!this.lock){this.released=!1,this.body.style.cursor=Os,this.target.move(n,e,t);var a=this.target.el,o=function n(){Es(a,$s,n,!1),r(a)};return Es(a,$s,o),this}}},{key:"release",value:function(){var n=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.onRelease;if(this.shown&&!this.lock){var t=this.target.el;this.options.onBeforeRelease(t),this.lock=!0,this.body.style.cursor=As,this.target.restoreOpenStyle();var r=function r(){Es(t,$s,r,!1),n.lock=!1,n.released=!0,e(t)};return Es(t,$s,r),this}}}]),n}(),Ks=".theme-vdoing-content img:not(.no-zoom)",Zs=JSON.parse('{"bgColor":"rgba(0,0,0,0.6)"}'),nc=Number("500"),ec=function(){function n(){ls(this,n),this.instance=new Ys(Zs)}return us(n,[{key:"update",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ks;"undefined"!=typeof window&&this.instance.listen(n)}},{key:"updateDelay",value:function(){var n=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ks,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:nc;setTimeout((function(){return n.update(e)}),t)}}]),n}(),tc=[Zi,os,cs,ds,Cs,{watch:{"$page.path":function(){void 0!==this.$vuepress.zooming&&this.$vuepress.zooming.updateDelay()}},mounted:function(){this.$vuepress.zooming=new ec,this.$vuepress.zooming.updateDelay()}}],rc={name:"GlobalLayout",computed:{layout:function(){var n=this.getLayout();return Hi("layout",n),Ia.component(n)}},methods:{getLayout:function(){if(this.$page.path){var n=this.$page.frontmatter.layout;return n&&(this.$vuepress.getLayoutAsyncComponent(n)||this.$vuepress.getVueComponent(n))?n:"Layout"}return"NotFound"}}},ac=t(29),oc=Object(ac.a)(rc,(function(){var n=this.$createElement;return(this._self._c||n)(this.layout,{tag:"component"})}),[],!1,null,null,null).exports;!function(n,e,t){var r;switch(e){case"components":n[e]||(n[e]={}),Object.assign(n[e],t);break;case"mixins":n[e]||(n[e]=[]),(r=n[e]).push.apply(r,Object(ji.a)(t));break;default:throw new Error("Unknown option name.")}}(oc,"mixins",tc);var ic=[{name:"v-71e76812",path:"/pages/dev/idea/",component:oc,beforeEnter:function(n,e,t){Vi("Layout","v-71e76812").then(t)}},{path:"/pages/dev/idea/index.html",redirect:"/pages/dev/idea/"},{path:"/02.å¼åæå/01.ideaä½¿ç¨æå·§.html",redirect:"/pages/dev/idea/"},{name:"v-52d4a0de",path:"/archives/",component:oc,beforeEnter:function(n,e,t){Vi("Layout","v-52d4a0de").then(t)}},{path:"/archives/index.html",redirect:"/archives/"},{path:"/@pages/archivesPage.html",redirect:"/archives/"},{name:"v-763c4d7e",path:"/pages/rabbitMQ/AMQP0-9-1/",component:oc,beforeEnter:function(n,e,t){Vi("Layout","v-763c4d7e").then(t)}},{path:"/pages/rabbitMQ/AMQP0-9-1/index.html",redirect:"/pages/rabbitMQ/AMQP0-9-1/"},{path:"/01.ææ¡£ç¿»è¯/02.RabbitMQ/01.AMQP0-9-1æ¨¡å.html",redirect:"/pages/rabbitMQ/AMQP0-9-1/"},{name:"v-0aaa33f7",path:"/pages/dev/vscode/",component:oc,beforeEnter:function(n,e,t){Vi("Layout","v-0aaa33f7").then(t)}},{path:"/pages/dev/vscode/index.html",redirect:"/pages/dev/vscode/"},{path:"/02.å¼åæå/02.vscodeä½¿ç¨æå·§.html",redirect:"/pages/dev/vscode/"},{name:"v-2f6761fc",path:"/pages/note/java8InAction/",component:oc,beforeEnter:function(n,e,t){Vi("Layout","v-2f6761fc").then(t)}},{path:"/pages/note/java8InAction/index.html",redirect:"/pages/note/java8InAction/"},{path:"/03.è¯»ä¹¦ç¬è®°/01.Java8å®æ.html",redirect:"/pages/note/java8InAction/"},{name:"v-43fc48ca",path:"/",component:oc,beforeEnter:function(n,e,t){Vi("Layout","v-43fc48ca").then(t)}},{path:"/index.html",redirect:"/"},{name:"v-a5cec558",path:"/pages/spring/core/",component:oc,beforeEnter:function(n,e,t){Vi("Layout","v-a5cec558").then(t)}},{path:"/pages/spring/core/index.html",redirect:"/pages/spring/core/"},{path:"/01.ææ¡£ç¿»è¯/01.Spring Framework/01.core.html",redirect:"/pages/spring/core/"},{path:"*",component:oc}],sc={title:"ccc-docs",description:"cheysençä¸ªäººææ¯ç¥è¯ææ¡£åº",base:"/ccc-docs/",headTags:[["link",{rel:"icon",href:"/ccc-docs/assets/favicon.ico"}],["meta",{name:"keywords",content:"vuepress,blog,doc,document,cheysen,heysen"}],["meta",{name:"theme-color",content:"#11a8cd"}]],pages:[{title:"ideaä½¿ç¨æå·§",frontmatter:{title:"ideaä½¿ç¨æå·§",permalink:"/pages/dev/idea/",date:"2022-01-20T12:33:20.000Z"},regularPath:"/02.%E5%BC%80%E5%8F%91%E6%8C%87%E5%8D%97/01.idea%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7.html",relativePath:"02.å¼åæå/01.ideaä½¿ç¨æå·§.md",key:"v-71e76812",path:"/pages/dev/idea/",headersStr:null,content:"# 1.å¿«æ·é®\n\nå¿«æ·é®                      è¯´æ\nCtrl + e                 æ¥çæè¿çæä»¶\nCtrl + b                 è½¬å°å£°æ\nF2                       åæ è·³è½¬å°ä¸ä¸ä¸ªå»ºè®®æè­¦å\nCtrl + Alt + b           è½¬å°å®ç°\nAlt + F7                 æ¥æ¾ææçä½¿ç¨\nåå»Ctrl                   è¿è¡ä»»ä½åå®¹\nCtrl + w                 å»¶ä¼¸éæ©åºå\nCtrl + shift + w         ç¼©å°éæ©åºå\nCtrl + shift + enter     å®æå½åè¯­å¥å¹¶å°åæ è°å°æ­£ç¡®çä½ç½®\nCtrl + shift + alt + t   éæ\nCtrl + shift + a         æ¥æ¾æä½\nåå»shift                  å¨å±æç´¢",normalizedContent:"# 1.å¿«æ·é®\n\nå¿«æ·é®                      è¯´æ\nctrl + e                 æ¥çæè¿çæä»¶\nctrl + b                 è½¬å°å£°æ\nf2                       åæ è·³è½¬å°ä¸ä¸ä¸ªå»ºè®®æè­¦å\nctrl + alt + b           è½¬å°å®ç°\nalt + f7                 æ¥æ¾ææçä½¿ç¨\nåå»ctrl                   è¿è¡ä»»ä½åå®¹\nctrl + w                 å»¶ä¼¸éæ©åºå\nctrl + shift + w         ç¼©å°éæ©åºå\nctrl + shift + enter     å®æå½åè¯­å¥å¹¶å°åæ è°å°æ­£ç¡®çä½ç½®\nctrl + shift + alt + t   éæ\nctrl + shift + a         æ¥æ¾æä½\nåå»shift                  å¨å±æç´¢",charsets:{cjk:!0}},{title:"å½æ¡£",frontmatter:{archivesPage:!0,title:"å½æ¡£",permalink:"/archives/",article:!1},regularPath:"/@pages/archivesPage.html",relativePath:"@pages/archivesPage.md",key:"v-52d4a0de",path:"/archives/",headersStr:null,content:"",normalizedContent:"",charsets:{}},{title:"AMQP0-9-1æ¨¡å",frontmatter:{title:"AMQP0-9-1æ¨¡å",permalink:"/pages/rabbitMQ/AMQP0-9-1/",date:"2022-01-20T11:23:25.000Z",article:!0},regularPath:"/01.%E6%96%87%E6%A1%A3%E7%BF%BB%E8%AF%91/02.RabbitMQ/01.AMQP0-9-1%E6%A8%A1%E5%9E%8B.html",relativePath:"01.ææ¡£ç¿»è¯/02.RabbitMQ/01.AMQP0-9-1æ¨¡å.md",key:"v-763c4d7e",path:"/pages/rabbitMQ/AMQP0-9-1/",headersStr:null,content:"# ä»ä¹æ¯AMQP 0-9-1\n\nAMQP 0-9-1ï¼é«çº§æ¶æ¯éååè®®ï¼æ¯ä¸ç§æ¶æ¯ä¼ éåè®®ï¼ä½¿å®¢æ·ç«¯åºç¨ç¨åºè½å¤ä¸æ¶æ¯ä¸­é´ä»¶ä»£çè¿è¡éä¿¡ã\n\n\n# ä»£çBrokers\n\næ¶æ¯ä»£çæ¥åæ¥èªåå¸èï¼åå¸æ¶æ¯çåºç¨ç¨åºï¼ä¹å«çäº§èï¼çæ¶æ¯å¹¶æå®ä»¬è·¯ç±å°æ¶è´¹èï¼å¤çæ¶æ¯çåºç¨ç¨åºï¼ã\n\nå ä¸ºå®æ¯ä¸ä¸ªç½ç»åè®®ï¼æä»¥åå¸èãæ¶è´¹èåä»£çé½è½é¨ç½²å¨ä¸åæºå¨ä¸ã\n\n\n# AMQP 0-9-1æ¨¡åç®ä»\n\nAMQP 0-9-1æ¨¡åå¦ä¸ï¼æ¶æ¯è¢«åå¸å°äº¤æ¢æºï¼å°±åé®æ¿å±æé®ç®±ï¼ä¸­ï¼ç¶åä½¿ç¨ç§°ä¸ºç»å®ï¼bindingsï¼çè§åååæ¶æ¯å¯æ¬å°éåï¼queuesï¼ãç¶åï¼ä»£çå°æ¶æ¯ä¼ éç»è®¢ééåçæ¶è´¹èï¼æèæ¶è´¹èæéä»éåä¸­è·åæ¶æ¯ã\n\n\n\nåå¸æ¶æ¯æ¶ï¼åå¸èå¯ä»¥å®ä¹åç§æ¶æ¯å±æ§ï¼æ¶æ¯åæ°æ®ï¼ãå¶ä¸­ä¸äºåæ°æ®å¯ä»¥è¢«ä»£çä½¿ç¨ï¼ä½æ¯å®çå¶ä½é¨åå¯¹ä»£çå®å¨ä¸éæï¼å¹¶ä¸ä»è¢«æ¥æ¶æ¶æ¯çåºç¨ç¨åºä½¿ç¨ã\n\nç½ç»æ¯ä¸å¯é çï¼å¹¶ä¸åºç¨ç¨åºå¯è½æ æ³å¤çæ¶æ¯ï¼å æ­¤AMQP 0-9-1æ¨¡åå·ææ¶æ¯ç¡®è®¤ï¼message acknowledgementsï¼çæ¦å¿µï¼å½æ¶æ¯è¢«ä¼ éç»æ¶è´¹èæ¶ï¼æ¶è´¹èä¼èªå¨éç¥ä»£çï¼å¦æåºç¨ç¨åºå¼åäººåéæ©è¿æ ·åï¼ãå½ä½¿ç¨æ¶æ¯ç¡®è®¤æºå¶æ¶ï¼å¨æ¶å°è¯¥æ¶æ¯ï¼ææ¶æ¯ç»ï¼çéç¥æ¶ï¼ä»£çæä¼å®å¨ä»éåä¸­å é¤è¯¥æ¶æ¯ã\n\nå¨æäºæåµä¸ï¼ä¾å¦ï¼å½æ æ³è·¯ç±æ¶æ¯æ¶ï¼å¯ä»¥å°æ¶æ¯è¿åç»åå¸èãä¸¢å¼ï¼æèï¼å¦æä»£çå®ç°äºæ©å±ï¼åå°è¿äºæ¶æ¯æ¨å°æè°çâæ­»ä¿¡éåï¼dead letter queueï¼âä¸­ãåå¸èéè¿ä½¿ç¨æäºåæ°åå¸æ¶æ¯æ¥éæ©å¦ä½å¤çè¿æ ·çæåµã\n\néåï¼Queuesï¼ï¼äº¤æ¢ï¼exchangesï¼åç»å®ï¼bindingsï¼ç§°ä¸ºAMQPå®ä½ã\n\n\n# AMQP 0-9-1æ¯å¯ç¼ç¨åè®®\n\nAMQP 0-9-1æ¯ä¸ç§å¯ç¼ç¨åè®®ï¼å³AMQP 0-9-1å®ä½åè·¯ç±è§åä¸»è¦ç±åºç¨ç¨åºæ¬èº«å®ä¹ï¼èä¸æ¯ä»£çç®¡çåã\n\nå æ­¤ï¼ä¸ºåè®®æä½å®ä¹äºä¸ç³»åè§åå¦å£°æéååäº¤æ¢æºãå®ä¹ä»ä»¬ä¹é´çç»å®ãè®¢ééåç­ã\n\nè¿ç»äºåºç¨ç¨åºå¼åäººåå¾å¤èªç±ï¼ä½ä¹éè¦ä»ä»¬æè¯å°æ½å¨çå®ä¹å²çªãå¨å®è·µä¸­ï¼å®ä¹å²çªæ¯ç½è§çï¼å¹¶ä¸éå¸¸è¡¨æå­å¨éè¯¯éç½®ã\n\nåºç¨ç¨åºå£°ææéçAMQP 0-9-1å®ä½ï¼å®ä¹å¿è¦çè·¯ç±è§åï¼å¹¶ä¸å¯ä»¥å¨ä¸åä½¿ç¨å®ä»¬æ¶å é¤AMQP 0-9-1å®ä½ã\n\n\n# äº¤æ¢æºåäº¤æ¢ç±»å\n\næ¶æ¯ä¼åéå°äº¤æ¢æºï¼äº¤æ¢æºæ¯AMQP 0-9-1å®ä½ãäº¤æ¢ä¼ éæ¶æ¯ï¼å°å¶è·¯ç±å°é¶æå¤ä¸ªéåä¸­ãä½¿ç¨çè·¯ç±ç®æ³åå³äºäº¤æ¢ç±»ååè¢«ç§°ä¸ºç»å®çè§åãAMQP 0-9-1ä»£çæä¾åç§äº¤æ¢ç±»åï¼\n\nEXCHANGE TYPE          DEFAULT PRE-DECLARED NAMES\nDirect exchangeç´è¿äº¤æ¢æº   (Empty string) and amq.direct\nFanout exchangeæå½¢äº¤æ¢æº   amq.fanout\nTopic exchangeä¸»é¢äº¤æ¢æº    amq.topic\nHeaders exchangeå¤´äº¤æ¢æº   amq.match (and amq.headers in RabbitMQ)\n\né¤äºäº¤æ¢ç±»åä¹å¤ï¼äº¤æ¢æºè¿å£°æäºè®¸å¤å±æ§ï¼æéè¦çæ¯ï¼\n\n * Nameï¼äº¤æ¢æºåç§°\n * Durability (exchanges survive broker restart)ï¼æ¯å¦æä¹åãå¦ææä¹æ§ï¼åä»£çéå¯åï¼äº¤æ¢æºè¿å­å¨\n * Auto-delete (exchange is deleted when last queue is unbound from it)ï¼å½ææä¸ä¹ç»å®çæ¶æ¯éåé½å®æäºå¯¹æ­¤äº¤æ¢æºçä½¿ç¨åï¼å æå®\n * Arguments (optional, used by plugins and broker-specific features)ï¼å¯éï¼æä»¶åä»£çç¹å®åè½ä½¿ç¨\n\näº¤æ¢æºå¯ä»¥æ¯æä¹åçæä¸´æ¶çãæä¹åçäº¤æ¢æºå¨ä»£çéæ°å¯å¨ä»»ç¶å­å¨ï¼èä¸´æ¶çä¸ä¼ï¼å½ä»£çéæ°å¨çº¿æ¶ï¼ä»ä»¬å¿é¡»è¢«éæ°å£°æï¼ãå¹¶éææåºæ¯é½éè¦æä¹åçäº¤æ¢æºã\n\n\n# é»è®¤äº¤æ¢æº\n\né»è®¤äº¤æ¢æºæ¯ä»£çé¢åå£°æçæ²¡æåç§°ï¼ç©ºå­ç¬¦ä¸²ï¼çç´è¿äº¤æ¢æºãå®æä¸ä¸ªç¹æ®çå±æ§ï¼éå¸¸éç¨äºç®åçåºç¨ç¨åºï¼åå»ºçæ¯ä¸ªéåé½æ¯ç¨ä¸éååç§°ç¸åçè·¯ç±keyèªå¨ç»å®å°è¯¥ç±»äº¤æ¢æºã\n\nä¾å¦ï¼å½å£°æä¸ä¸ªåä¸ºä¸ºâsearch-indexing-onlineâçéåæ¶ï¼AMQP 0-9-1ä»£çå°ä½¿ç¨âsearch-indexing-onlineâä½ä¸ºè·¯ç±keyå°å¶ç»å®å°é»è®¤äº¤æ¢æºï¼å¨æ­¤ä¸ä¸æææ¶ç§°ä¸ºç»å®keyï¼ãå æ­¤ï¼åå¸å°é»è®¤äº¤æ¢æºçè·¯ç±keyä¸ºâsearch-indexing-onlineâçæ¶æ¯å°è¢«è·¯ç±å°éåâsearch-indexing-onlineâãæ¢å¥è¯è¯´ï¼é»è®¤äº¤æ¢ä½¿å¶ä¼¼ä¹å¯ä»¥ç´æ¥åéåä¼ éæ¶æ¯ã\n\n\n# ç´è¿äº¤æ¢æº\n\nç´è¿äº¤æ¢æºåºäºæ¶æ¯è·¯ç±keyå°æ¶æ¯ä¼ éå°éåãç´è¿äº¤æ¢æºéå¸¸éåæ¶æ¯çåæ­è·¯ç±ï¼å°½ç®¡å®ä»¬ä¹å¯ç¨äºç»æ­è·¯ç±ï¼ãä¸é¢æ¯å®çå·¥ä½åçï¼\n\n * éåéè¿è·¯ç±key Kç»å®å°äº¤æ¢æº\n * å½å·æè·¯ç±key Rçæ°æ¶æ¯å°è¾¾ç´æ¥äº¤æ¢æºæ¶ï¼å¦æK = Rï¼åäº¤æ¢æºå°å¶è·¯ç±å°è¯¥éå\n\nç´æ¥äº¤æ¢æºéå¸¸ç¨äºä»¥å¾ªç¯æ¹å¼å¨å¤ä¸ªå·¥ä½å®ä¾ï¼ç¸ååºç¨ç¨åºçå®ä¾ï¼ä¹é´åéä»»å¡ãè¿æ ·åæ¶ï¼éè¦çæ¯è¦çè§£ï¼å¨AMQP 0-9-1ä¸­ï¼æ¶æ¯æ¯å¨æ¶è´¹èä¹é´è´è½½åè¡¡ï¼èä¸æ¯å¨éåä¹é´è´è½½åè¡¡ã\n\nç´æ¥äº¤æ¢æºå¯ä»¥ä»¥å¾å½¢æ¹å¼è¡¨ç¤ºå¦ä¸ï¼\n\n\n\n\n# æå½¢äº¤æ¢æº\n\næå½¢äº¤æ¢æºä¸ç®¡ç»å®çkeyæ¯ä»ä¹ï¼ä¼è·¯ç±æ¶æ¯å°ç»å®å°å®çææéåãå¦æNä¸ªéåç»å®å°æå½¢äº¤æ¢æºï¼åå½æ°æ¶æ¯åå¸å°è¯¥äº¤æ¢æºæ¶ï¼å®å°ä¼ éæ¶æ¯çå¯æ¬å°è¿Nä¸ªéåãæå½¢äº¤æ¢æºéåå¹¿æ­è·¯ç±ã\n\nå ä¸ºæå½¢äº¤æ¢æºå°æ¶æ¯çå¯æ¬ä¼ éç»ç»å®å°å®çæ¯ä¸ªéåï¼æä»¥å®çä½¿ç¨åºæ¯éå¸¸ç¸ä¼¼ï¼\n\n * å¤§åå¤äººå¨çº¿ï¼MMOï¼æ¸¸æå¯ä»¥å°å¶ç¨äºæè¡æ¦æ´æ°æå¶ä»å¨å±äºä»¶\n * ä½è²æ°é»ç½ç«å¯ä»¥ä½¿ç¨æå½¢äº¤æ¢æºå®æ¶å°åå¸æ´æ°çåæ°å°ç§»å¨å®¢æ·ç«¯\n * åå¸å¼ç³»ç»å¯ä»¥å¹¿æ­åç§ç¶æåéç½®æ´æ°\n * ç¾¤ç»èå¤©å¯ä»¥ä½¿ç¨æå½¢äº¤æ¢æºåååä¸èä¹é´çæ¶æ¯ï¼è½ç¶AMQPæ²¡æåç½®çç¸å³æ¦å¿µï¼æä»¥XMPPå¯è½æ¯ä¸ä¸ªæ´å¥½çéæ©ï¼\n\næå½¢äº¤æ¢æºå¯ä»¥ä»¥å¾å½¢æ¹å¼è¡¨ç¤ºå¦ä¸ï¼\n\n\n\n\n# ä¸»é¢äº¤æ¢æº\n\nä¸»é¢äº¤æ¢æºåºäºæ¶æ¯è·¯ç±keyåç¨äºå°éåç»å®å°äº¤æ¢æºçæ¨¡å¼ä¹é´çå¹éï¼å°æ¶æ¯è·¯ç±å°ä¸ä¸ªæå¤ä¸ªéåãä¸»é¢äº¤æ¢æºéå¸¸ç¨äºå®ç°åç§åå¸/è®¢éæ¨¡å¼åä½ãä¸»é¢äº¤æ¢æºéå¸¸ç¨äºæ¶æ¯çç»æ­è·¯ç±ã\n\nä¸»é¢äº¤æ¢æºå·æéå¸¸å¹¿æ³çä½¿ç¨åºæ¯ãå½ä¸ä¸ªé®é¢æ¶åå¤ä¸ªæ¶è´¹è/åºç¨ç¨åºæéæ©æ§å°æ¥æ¶åªç§ç±»åçæ¶æ¯æ¶ï¼åºèèä½¿ç¨ä¸»é¢äº¤æ¢æºã\n\nä½¿ç¨æ¡ä¾ï¼\n\n * ååä¸ç¹å®å°çä½ç½®ç¸å³çæ°æ®ï¼ä¾å¦éå®ç¹\n\n * ç±å¤ä¸ªå·¥ä½å®ä¾å¤ççåå°ä»»å¡ï¼æ¯ä¸ªå·¥ä½å®ä¾é½è½å¤å¤çç¹å®çä»»å¡é\n\n * åºå­ä»·æ ¼æ´æ°ï¼ä»¥åå¶ä»ç±»åçè´¢å¡æ°æ®æ´æ°ï¼\n\n * æ¶ååç±»ææ è®°çæ°é»æ´æ°ï¼ä¾å¦ï¼ä»éç¨äºç¹å®è¿å¨æå¢éï¼\n\n * ä¸åç±»åäºæå¡çç¼æ\n\n * åå¸å¼æ¶æ/æä½ç³»ç»çè½¯ä»¶æå»ºææåï¼å¶ä¸­æ¯ä¸ªæå»ºå¨åªè½å¤çä¸ä¸ªæ¶æææä½ç³»ç»\n\n\n# å¤´äº¤æ¢æº\n\nå¤´äº¤æ¢æºè¢«è®¾è®¡ç¨äºè·¯ç±å¤ä¸ªå±æ§ï¼è¿äºå±æ§æ´å®¹æç¨æ¶æ¯å¤´è¡¨ç¤ºèä¸æ¯è·¯ç±keyãå¤´äº¤æ¢æºä¼å¿½ç¥è·¯ç±keyå±æ§ãç¸åï¼ç¨äºè·¯ç±çå±æ§æ¯ä»å¤´å±æ§ä¸­åå¾çãå¦æå¤´å±æ§å¼ç­äºç»å®æå®çå¼ï¼åå¹éè¯¥æ¶æ¯ã\n\nå¯ä»¥ä½¿ç¨å¤ä¸ªæ¶æ¯å¤´ç»å®æ¶æ¯å°å¤´äº¤æ¢æºãå¨è¿ç§æåµä¸ï¼ä»£çéè¦åºç¨ç¨åºå¼åèæä¾æ´å¤ä¿¡æ¯ï¼å³ï¼æ¯å¹éå¶ä¸­ä¸ä¸ªæ¶æ¯å¤´è¿æ¯æææ¶æ¯å¤´ï¼è¿å°±æ¯âx-matchâç»å®åæ°åçäºãå½âx-matchâåæ°è¢«è®¾ç½®ä¸ºâanyâæ¶ï¼å¹éä»»æä¸ä¸ªæ¶æ¯å¤´å¼å°±è¡äºãæèï¼å°âx-matchâè®¾ç½®ä¸ºâallâè¦æ±ææå¼å¿é¡»å¹éã\n\nå¤´äº¤æ¢æºå¯ä»¥çåæ¯ç¹æ®çç´è¿äº¤æ¢æºãå ä¸ºå®ä»¬é½æ¯åºäºæ¶æ¯å¤´å±æ§å¼è·¯ç±ï¼è·¯ç±keyä¸å¿æ¯å­ç¬¦ä¸²æ¶ï¼å®ä»¬å¯ä»¥ç¨ä½ç´æ¥äº¤æ¢ï¼ä¾å¦ï¼å®å¯ä»¥æ¯æ´æ°æåå¸ï¼å­å¸ï¼ã\n\næ³¨æï¼ä»¥å­ç¬¦ä¸²x-å¼å¤´çæ¶æ¯å¤´å°ä¸ä¼ç¨äºå¹éã\n\n\n# éå\n\nAMQP 0-9-1æ¨¡åä¸­çéåä¸å¶ä»æ¶æ¯åä»»å¡éåç³»ç»ä¸­çéåéå¸¸ç¸ä¼¼ï¼å®ä»¬å­å¨ç±åºç¨ç¨åºæ¶è´¹çæ¶æ¯ãéåä¸äº¤æ¢æºå±äº«ä¸äºå±æ§ï¼ä½ä¹æä¸äºé¢å¤çå±æ§ï¼\n\n * Nameï¼åç§°\n * Durableï¼éåå¨ä»£çéå¯æ¶æå­å¨\n * Exclusiveï¼ä»è¢«ä¸ä¸ªè¿æ¥ä½¿ç¨å¹¶ä¸è¯¥è¿æ¥å³é­æ¶éåå°è¢«å é¤\n * Auto-deleteï¼å½æåä¸ä¸ªæ¶è´¹èåæ¶è®¢éæ¶ï¼è³å°æä¸ä¸ªæ¶è´¹èçéåå°è¢«å é¤\n * Arguments ï¼å¯éï¼ç±PluginsåBrokerç¹å®åè½ä½¿ç¨ï¼ä¾å¦æ¶æ¯TTLï¼éåé¿åº¦éå¶ç­\n\nå¨ä½¿ç¨éåä¹åï¼å¿é¡»å£°æå®ãå£°æéåå°å¯¼è´å®ä¼å¨å°æªå­å¨çæåµä¸åå»ºãå¦æå·²å­å¨éåï¼å¹¶ä¸å¶å±æ§ä¸å£°æä¸­çå±æ§ç¸åï¼åè¯¥å£°æä¸ä¼æä»ä¹å½±åãå½å·²å­å¨çéåå±æ§åå£°æçä¸åæ¶ï¼å°ä¼å¼åä¸ä¸ª406éè¯¯ç ï¼PRECONDITION_FAILEDï¼çç®¡éçº§å¼å¸¸\n\n\n# éåå\n\nåºç¨ç¨åºå¯ä»¥èªå·±éæ©éååç§°æè®©ä»£ççæãéååç§°æé¿ä¸º255ä¸ªå­èçUTF-8å­ç¬¦ãAMQP 0-9-1ä»£çå¯ä»¥çæå¯ä¸çä»£è¡¨åºç¨çéååç§°ãè¦ä½¿ç¨æ­¤åè½ï¼è¯·å°éååç§°åæ°è®¾ä¸ºç©ºå­ç¬¦ä¸²ãçæçåç§°å°ä»¥éåå£°æååºè¿åç»å®¢æ·ç«¯ã\n\nä»¥âamq.âå¼å¤´çéååç§°åªå¨ä»£çåé¨ä½¿ç¨ãå°è¯ä½¿ç¨è¿åæ­¤è§åçåç§°å£°æéåå°å¯¼è´å·æ403è¿åç ï¼ACCESS_REFUSEDï¼çç®¡éçº§å«å¼å¸¸ã\n\n\n# éåæä¹å\n\nå¨AMQP 0-9-1ä¸­ï¼éåå¯ä»¥è¢«å£°æä¸ºæä¹åçææå­çãæä¹åçéåçåæ°æ®å­å¨å¨ç£çä¸ï¼èä¸´æ¶éåçåæ°æ®å¨å¯ç¨çæåµä¸å­å¨å¨åå­ä¸­ã\n\nå¨éè¦æä¹åçåºæ¯ä¸ï¼åºç¨ç¨åºå¿é¡»ä½¿ç¨æä¹åçéåæ¥ç¡®ä¿åå¸èå°æ¨éçæ¶æ¯æ è®°ä¸ºæä¹åã\n\n\n# ç»å®\n\nç»å®æ¯äº¤æ¢æºå°æ¶æ¯ä¼ éå°éåä½¿ç¨çè§åï¼ä»¥åå¶ä»åå®¹ï¼ãä¸ºäºè®©äº¤æ¢æºEå°æ¶æ¯è·¯ç±å°éåQï¼Qå¿é¡»ç»å®å°Eãä¸äºç±»åçäº¤æ¢æºä½¿ç¨çç»å®æå¯éçè·¯ç±keyå±æ§ãè·¯ç±keyçç®çæ¯éæ©æ­£ç¡®çåå¸å°äº¤æ¢æºçæäºæ¶æ¯å°ç»å®éåãæ¢å¥è¯è¯´ï¼è·¯ç±keyå°±åæ¯ä¸ä¸ªè¿æ»¤å¨ã\n\næä¸ªæ¯æ¹ï¼\n\n * éåå°±åç®çå°é¿æ²å¸\n * äº¤æ¢æºå°±åå®å®æºåº\n * ç»å®å°±æ¯ä»å®å®æºåºå°é¿æ²çè·¯å¾ï¼æå¤æ¡è·¯å¾å¯ä»¥éæ©\n\nè¿æ ·çé´æ¥å±è®©é£ç§å¾é¾ç¨ç´æ¥æ¨éå°éåçæ¹å¼å®ç°ççè·¯ç±åºæ¯åå¾å¯è½ï¼å¹¶ä¸ä¹åå°äºå¼åèçéå¤æ§å·¥ä½ã\n\nå¦ææ¶æ¯ä¸è½è·¯ç±å°éåï¼æ¯å¦å ä¸ºäº¤æ¢æºæ²¡æç»å®ä»»ä½éåï¼ï¼æ¶æ¯å°è¢«ä¸¢å¼æè¿åç»åå¸èï¼å·ä½æ¯åªç§åå³äºåå¸èè®¾ç½®çæ¶æ¯çç¸å³å±æ§ã\n\n\n# æ¶è´¹è\n\né¤éåºç¨ç¨åºå¯ä»¥æ¶è´¹å®ä»¬ï¼å¦åå­å¨éåä¸­çæ¶æ¯æ¯æ²¡ç¨çãå¨AMQP 0-9-1æ¨¡åä¸­ï¼åºç¨ç¨åºæä¸¤ç§æ¹æ³æ¥æ§è¡æ­¤æä½ï¼\n\n * è®¢éä¼ éç»å®ä»¬çæ¶æ¯ï¼âpush APIâï¼ï¼è¿æ¯æ¨èçéé¡¹\n * è½®è¯¢ï¼âpull APIâï¼ï¼è¿ç§æ¹å¼å¾ä½æï¼å¨å¤§å¤æ°æåµä¸åºè¯¥é¿å\n\nä½¿ç¨âpush APIâï¼åºç¨ç¨åºå¿é¡»æå®æ¶è´¹åªä¸ªéåçæ¶æ¯ãå½ä»ä»¬è¿æ ·åæ¶ï¼æä»¬è¯´ä»ä»¬æ³¨åäºæ¶è´¹èæç®åå°è¯´ï¼è®¢éäºä¸ä¸ªéåãæ¯ä¸ªéåå¯ä»¥æ¥æå¤ä¸ªæ¶è´¹èææ³¨åç¬å æ¶è´¹èï¼å¨æ¶è´¹æ¶ä»éåä¸­æé¤ææå¶ä»æ¶è´¹èï¼ã\n\næ¯ä¸ªæ¶è´¹èï¼è®¢éï¼æä¸ä¸ªç§°ä¸ºæ¶è´¹èæ è®°çæ è¯ç¬¦ãå®å¯ç¨äºåæ¶è®¢éæ¶æ¯ãæ¶è´¹èæ ç­¾æ¯å­ç¬¦ä¸²ã\n\n\n# æ¶æ¯ç¡®è®¤\n\næ¶è´¹èåºç¨ç¨åº - ä¹å°±æ¯è¯´ï¼æ¥æ¶åå¤çæ¶æ¯çåºç¨ç¨åº - å¯è½å¶å°å¯è½ä¼æ æ³å¤çåä¸ªæ¶æ¯ï¼ä¹å¯è½ç¨åºå´©æºäºãè¿æå¯è½åºç°ç½ç»é®é¢ãè¿æåºäºä¸ä¸ªé®é¢ï¼ä»£çåºè¯¥ä»ä¹æ¶åä»éåä¸­å é¤æ¶æ¯ï¼AMQP 0-9-1è§èä¸ºæ¶è´¹èæä¾äºæ¶æ¯ç¡®è®¤æºå¶ãæä¸¤ç§ç¡®è®¤æ¨¡å¼ï¼\n\n * å¨ä»£çååºç¨ç¨åºåéä¸ä¸ªæ¶æ¯ä¹åï¼ä½¿ç¨basic.deliveræèbasic.get-okæ¹æ³ï¼\n * å¨åºç¨ç¨åºåéç¡®è®¤æ¶æ¯åï¼ä½¿ç¨basic.ackæ¹æ³ï¼\n\nåèç§°ä¸ºèªå¨ç¡®è®¤æ¨¡åï¼èåèç§°ä¸ºæ¾å¼ç¡®è®¤æ¨¡åãéè¿æ¾å¼æ¨¡åï¼åºç¨ç¨åºéæ©å¨ä½æ¶åéç¡®è®¤æ¶æ¯ãå®å¯ä»¥å¨æ¶å°æ¶æ¯åï¼æå¨å¤çåå­å°æ°æ®å­å¨å¨ä¹åï¼æèå¨å®å¨å¤çæ¶æ¯ä¹åï¼ä¾å¦ï¼æåå°è·åç½é¡µï¼å¤çåå°å¶å­å¨å°ä¸äºæä¹æ°æ®å­å¨ä¸­ï¼ã\n\nå¦ææ¶è´¹èæ­»äº¡èä¸åéç¡®è®¤ï¼åä»£çå°å°å¶éæ°åéå°å¦ä¸ä¸ªæ¶è´¹èï¼æèå¦ææ²¡æå¯ç¨æ¶è´¹èï¼åä»£çå°å¨è³å°ä¸ä¸ªæ¶è´¹èéæ°æ³¨åå°åä¸ä¸ªéååå°è¯éæ°åéæ¶æ¯ã\n\nç±äºç½ç»ä¸å¯é ï¼æèåºç¨ç¨åºæ æ³ååºï¼éå¸¸éè¦å·ææç§æºå¶æ¥å¤çç¡®è®¤ãææ¶åªéç¡®è®¤æ¶è´¹èå·²æ¶å°æ¶æ¯ãææ¶ï¼ç¡®è®¤æå³çç±æ¶è´¹èéªè¯å¹¶å¤çäºæ¶æ¯ï¼ä¾å¦ï¼éªè¯å·æå¼ºå¶æ§æ°æ®å¹¶æä¹å°æç»­å°æ°æ®å­å¨æç´¢å¼ä¸­ã\n\nè¿ç§æåµéå¸¸å¸¸è§ï¼å æ­¤AMQP 0-9-1å·æåä¸ºæ¶æ¯ç¡®è®¤ï¼ææ¶ç§°ä¸ºacksï¼çåç½®åè½ï¼æ¶è´¹èç¨äºç¡®è®¤æ¶æ¯ä¼ éæå¤çãå¦æåºç¨ç¨åºå´©æºï¼AMQP Brokerå¨è¿æ¥æ¶å³é­æ¶ä¼æ³¨æå°ï¼ï¼å¦æé¢ææ¶æ¯ç¡®è®¤ä½æ¯AMQPä»£çæªæ¶å°ackï¼åè¯¥æ¶æ¯å°éå¥éåï¼å¹¶ä¸å¯è½ç«å³å°å¶åéç»å¦ä¸ä¸ªå­å¨çæ¶è´¹èï¼ã\n\nå·æåç½®åè®®çç¡®è®¤æå©äºå¼åäººåæå»ºæ´å¼ºå¤§çè½¯ä»¶ã\n\n\n# æç»æ¶æ¯\n\nå½æ¶è´¹èåºç¨ç¨åºæ¥æ¶å°æ¶æ¯æ¶ï¼å¯è½æ æ³æåå¤çè¯¥æ¶æ¯ãåºç¨ç¨åºå¯ä»¥éè¿æç»æ¶æ¯æ¥åç¥ä»£çæ¶æ¯å¤çå¤±è´¥æµï¼æèæ æ³å¨å½åå®æï¼ãæç»æ¶æ¯æ¶ï¼åºç¨ç¨åºå¯ä»¥è¦æ±ä»£çä¸¢å¼æéæ°å¥éåãå½éåä¸­åªæä¸ä¸ªæ¶è´¹èæ¶ï¼è¯·ç¡®ä¿éè¿æç»æ¶æ¯å¹¶éå¥éåä¸ä¼åå»ºæ ç©·çæ¶æ¯å¾ªç¯åéã\n\n\n# å¦å®åºç­\n\nå¯ä»¥ä½¿ç¨basic.rejectæ¹æ³æç»æ¶æ¯ï¼ä½basic.rejectæä¸ä¸ªéå¶ï¼æ²¡æåæ³æç»å¤ä¸ªæ¶æ¯ãä½æ¯å¦ææ¨ä½¿ç¨çæ¯RabbitMQï¼é£ä¹å°±æä¸ä¸ªè§£å³æ¹æ¡ãRabbitMQæä¾ç§°ä¸ºå¦å®åºç­ï¼negative acknowledgementsï¼ænacksçAMQP 0-9-1æ©å±ã\n\n\n# é¢åæ¶æ¯\n\nå¯¹äºå¤ä¸ªæ¶è´¹èå±äº«éåçæåµï¼è½å¤æå®å¨åéä¸ä¸ä¸ªç¡®è®¤ä¹åå¯ä»¥ä¸æ¬¡åéå°æ¯ä¸ªæ¶è´¹èçæ¶æ¯æ°æ¯æç¨çãè¿å¯ä»¥ç¨ä½ç®åçè´è½½å¹³è¡¡ææ¯ææé«ååéï¼å¦ææ¶æ¯å¾åäºæ¹éåå¸ãä¾å¦ï¼å¦æçäº§åºç¨ç¨åºå å·¥ä½éè¦æ¯åéåéæ¶æ¯ã\n\nè¯·æ³¨æï¼RabbitMQä»æ¯æä¿¡éçº§é¢åè®¡æ°ï¼èä¸æ¯åºäºè¿æ¥æå¤§å°çé¢åã\n\n\n# æ¶æ¯å±æ§åè´è½½\n\nAMQP 0-9-1æ¨¡åä¸­çæ¶æ¯å·æå±æ§ãæäºå±æ§å¾å¸¸è§ï¼å³AMQP 0-9-1è§èå®ä¹å®ä»¬ï¼åºç¨ç¨åºå¼åäººåä¸å¿èèç¡®åçå±æ§åç§°ãä¸äºä¾å­æ¯\n\n * Content type\n * Content encoding\n * Routing key\n * Delivery mode (persistent or not)\n * Message priority\n * Message publishing timestamp\n * Expiration period\n * Publisher application id\n\nAMQPä»£çä¼ä½¿ç¨å¶ä¸­æäºå±æ§ï¼ä½å¤§å¤æ°è¿æ¯å¯¹åºç¨ç¨åºå¼æ¾çãæäºå±æ§æ¯å¯éçï¼ç§°ä¸ºheadersãå®ä»¬ç±»ä¼¼äºHTTPä¸­çX-Headersãåå¸æ¶æ¯æ¶ï¼ä¼è®¾ç½®æ¶æ¯å±æ§ã\n\næ¶æ¯è¿å·æææè½½è·ï¼å®ä»¬æºå¸¦çæ°æ®ï¼ï¼AMQPä»£çå°å¶è§ä¸ºä¸éæå­èæ°ç»ãä»£çä¸ä¼æ£æ¥æä¿®æ¹ææè´è½½ãæ¶æ¯å¯ä»¥ä»åå«å±æ§èæ²¡æææè½½è·ãéå¸¸ä½¿ç¨JSONï¼Thriftï¼Protocol BuffersåMessagePackç­åºååæ ¼å¼æ¥åºååç»æåæ°æ®ï¼ä»¥ä¾¿å°å¶åå¸ä¸ºæ¶æ¯ææè½½è·ãåè®®å¯¹ç­ä½éå¸¸ä½¿ç¨âcontent-typeâåâcontent-encodingâå­æ®µæ¥ä¼ è¾¾æ­¤ä¿¡æ¯ï¼ä½è¿ä»æ¯çº¦å®ã\n\næ¶æ¯å¯è½ä¼åå¸ä¸ºæä¹åçï¼è¿ä½¿å¾ä»£çå°å®ä»¬æä¹åå°ç£çãå¦æéæ°å¯å¨æå¡å¨ï¼ç³»ç»å¯ç¡®ä¿æ¶å°çæä¹æ¶æ¯ä¸ä¼ä¸¢å¤±ãåªå°æ¶æ¯åå¸å°æä¹åçäº¤æ¢æºææè·¯ç±çæä¹åçéåä¸ä¼ä½¿æ¶æ¯æä¹åï¼è¿ä¸åé½åå³äºæ¶æ¯æ¬èº«çæä¹åæ¨¡å¼ãåå¸æ¶æ¯å¹¶æä¹åä¼å½±åæ§è½ï¼å°±åæ°æ®å­å¨ä¸æ ·ï¼æä¹åä¼å¨æ§è½ä¸æä¸å®å¼éï¼ã\n\n\n# AMQP 0-9-1æ¹æ³\n\nAMQP 0-9-1æè®¸å¤æ¹æ³ãæ¹æ³æ¯æä½ï¼å¦httpæ¹æ³ï¼ï¼å¹¶ä¸ä¸åé¢åå¯¹è±¡ç¼ç¨è¯­è¨ä¸­çæ¹æ³ãAMQP 0-9-1ä¸­çåè®®æ¹æ³è¢«åç»ä¸ºç±»ãç±»åªæ¯AMQPæ¹æ³çé»è¾åç»ãAMQP 0-9-1 æåå«ææAMQPæ¹æ³çå®æ´ç»èã\n\nè®©æä»¬æ¥ççäº¤æ¢æºç±»ï¼è¿æ¯ä¸ç»ä¸äº¤æ¢æºçæä½ç¸å³çæ¹æ³ãå®åæ¬ä»¥ä¸æä½ï¼\n\n * exchange.declare\n * exchange.declare-ok\n * exchange.delete\n * exchange.delete-ok\n\nä¸é¢çæä½ç»æé»è¾å¯¹ï¼exchange.declareåexchange.declare-okï¼exchange.deleteåexchange.delete-okãè¿äºæä½æ¯ârequestsâï¼å®¢æ·ç«¯åéï¼åâresponsesâï¼éè¿ä»£çåéååºä¸è¿°âè¯·æ±âï¼ï¼\n\nä¸¾ä¸ªä¾å­ï¼å®¢æ·ç«¯è¦æ±ä»£çä½¿ç¨exchange.declareæ¹æ³å£°ææ°çExchangeï¼\n\n\n\nå¦ä¸å¾æç¤ºï¼exchange.declareå¸¦æå¤ä¸ªåæ°ãå®ä»¬ä½¿å®¢æ·ç«¯å¯æå®Exchangeåç§°ï¼ç±»åï¼æä¹æ§æ å¿ç­ã\n\nå¦ææä½æåï¼åä»£çä½¿ç¨exchange.declare-okæ¹æ³ååºï¼\n\n\n\nexchange.declare-okä¸æºå¸¦é¤ç®¡éå·ä¹å¤çä»»ä½åæ°ã\n\néåçqueue.declareåqueue.declare-okä¹æ¯ç±»ä¼¼ï¼\n\n\n\n\n\nå¹¶éææAMQP 0-9-1æ¹æ³é½æå¯¹åºæ¹æ³ãæäºï¼å¦æå¹¿æ³ä½¿ç¨çbasic.publishï¼æ²¡æç¸åºçâresponseâæ¹æ³ï¼æäºï¼å¦basic.getï¼å·æå¤ä¸ªå¯è½çâresponseâã\n\n\n# è¿æ¥\n\nAMQP 0-9-1è¿æ¥éå¸¸æ¯é¿æçãAMQP 0-9-1æ¯ä¸ç§åºç¨çº§å«åè®®ï¼å®ä½¿ç¨TCPè¿è¡å¯é çæ¶æ¯ä¼ éãè¿æ¥ä½¿ç¨èº«ä»½éªè¯ï¼å¯ä»¥ä½¿ç¨TLSä¿æ¤ãå½åºç¨ç¨åºä¸åéè¦è¿æ¥å°æå¡å¨æ¶ï¼å®åºè¯¥ä¼éå°å³é­å¶AMQP 0-9-1è¿æ¥ï¼èä¸æ¯çªç¶å³é­åºå±TCPè¿æ¥ã\n\n\n# ç®¡é\n\næäºåºç¨ç¨åºéè¦å¤ä¸ªè¿æ¥å°ä»£çãä½æ¯åæ¶ææå¤ä¸ªTCPè¿æ¥ä¸æ¯ä¸ä¸ªå¥½çéæ©ï¼å ä¸ºè¿æ ·åä¼æ¶èç³»ç»èµæºå¹¶ä½¿éç½®é²ç«å¢æ´å å°é¾ãAMQP 0-9-1è¿æ¥ä½¿ç¨ç®¡éå®ç°å¤ç¨ï¼å¯ä»¥è¢«è®¤ä¸ºæ¯âå±äº«åä¸ªTCPè¿æ¥çè½»éçº§è¿æ¥âã\n\nå®¢æ·ç«¯æ§è¡çæ¯ä¸ªåè®®æä½åçå¨ç®¡éä¸ãç¹å®é¢éä¸çéä¿¡ä¸å¦ä¸ä¸ªééä¸çéä¿¡æ¯å®å¨åå¼çï¼å æ­¤æ¯ä¸ªåè®®æ¹æ³è¿æºå¸¦channel IDï¼channal numberï¼ï¼è¿æ¯ä»£çåå®¢æ·ç«¯ç¨æ¥å¼æ¸è¯¥æ¹æ³ä½ç¨ç®¡éçæ´æ°ã\n\nç®¡éä»å­å¨è¿æ¥çä¸ä¸æä¸­ï¼èä¸æ¯èªå·±çãå½è¿æ¥å³é­æ¶ï¼ææç®¡éä¹ä¼å³é­ã\n\nå¯¹äºä½¿ç¨å¤ä¸ªçº¿ç¨/è¿ç¨è¿è¡å¤ççåºç¨ç¨åºï¼æ¯ä¸ªçº¿ç¨/è¿ç¨ä¼æå¼æ°çç®¡éï¼èä¸ä¼å±äº«ç®¡éã\n\n\n# èæä¸»æº\n\nä¸ºäºä½¿åä¸ªä»£çè½å¤æç®¡å¤ä¸ªå­¤ç«çâenvironmentsâï¼ç¨æ·ç»ï¼äº¤æ¢æºï¼éåç­ï¼ï¼AMQP 0-9-1åå«äºèæä¸»æºçæ¦å¿µï¼vhostsï¼ãå®ä»¬ç±»ä¼¼äºè®¸å¤æµè¡çWebæå¡å¨ä½¿ç¨çèæä¸»æºï¼å¹¶æä¾å®å¨éç¦»çç¯å¢ï¼å¶ä¸­å°±æAMQPå®ä½ãåè®®å®¢æ·ç«¯æå®å¨è¿æ¥ååæé´ä»ä»¬æ³è¦ä½¿ç¨çvhostsã\n\n\n# å¯æ©å±çAMQP\n\nAMQP 0-9-1æå ä¸ªæ©å±ç¹ï¼\n\n * èªå®ä¹äº¤æ¢æºç±»åè®©å¼åäººåå®ç°è·¯ç±æ¹æ¡ã\n * äº¤æ¢æºåéåçå£°æå¯ä»¥åæ¬ä»£çå¯ä»¥ä½¿ç¨çéå å±æ§ãä¾å¦ï¼RabbitMQä¸­ç per-queue message TTLä»¥è¿ç§æ¹å¼å®ç°ã\n * ä»£çç¹å®äºåè®®çæ©å±ãä¾å¦extensions that RabbitMQ implements\n * New AMQP 0-9-1 method classes\n * ä»£çå¯ä»¥ç¨éå æä»¶æ©å±ï¼ä¾å¦ï¼RabbitMQç®¡çç«¯åHTTP APIè¢«å®ç°ä¸ºæä»¶ã\n\nè¿äºåè½ä½¿AMQP 0-9-1æ¨¡åæ´å çµæ´»ã\n\n\n# AMQP 0-9-1å®¢æ·ç«¯çæç¯å¢\n\nè®¸å¤æµè¡çç¼ç¨è¯­è¨åå¹³å°æè®¸å¤AMQP 0-9-1å®¢æ·ç«¯ãå¶ä¸­ä¸äºåªæä¾AMQPæ¹æ³çå®ç°ãæäºæä¾å¶ä»åè½ãä¾¿å©çæ¹æ³åæ½è±¡ãä¸äºå®¢æ·ç«¯æ¯å¼æ­¥çï¼éé»å¡ï¼ï¼æäºæ¯åæ­¥ï¼é»å¡ï¼ï¼æäºæ¯æä¸¤ç§æ¨¡å¼ãæäºå®¢æ·ç«¯æ¯æç¹å®äºä¾åºåçæ©å±ï¼ä¾å¦ï¼RabbitMQç¹å®çæ©å±ï¼ã",normalizedContent:"# ä»ä¹æ¯amqp 0-9-1\n\namqp 0-9-1ï¼é«çº§æ¶æ¯éååè®®ï¼æ¯ä¸ç§æ¶æ¯ä¼ éåè®®ï¼ä½¿å®¢æ·ç«¯åºç¨ç¨åºè½å¤ä¸æ¶æ¯ä¸­é´ä»¶ä»£çè¿è¡éä¿¡ã\n\n\n# ä»£çbrokers\n\næ¶æ¯ä»£çæ¥åæ¥èªåå¸èï¼åå¸æ¶æ¯çåºç¨ç¨åºï¼ä¹å«çäº§èï¼çæ¶æ¯å¹¶æå®ä»¬è·¯ç±å°æ¶è´¹èï¼å¤çæ¶æ¯çåºç¨ç¨åºï¼ã\n\nå ä¸ºå®æ¯ä¸ä¸ªç½ç»åè®®ï¼æä»¥åå¸èãæ¶è´¹èåä»£çé½è½é¨ç½²å¨ä¸åæºå¨ä¸ã\n\n\n# amqp 0-9-1æ¨¡åç®ä»\n\namqp 0-9-1æ¨¡åå¦ä¸ï¼æ¶æ¯è¢«åå¸å°äº¤æ¢æºï¼å°±åé®æ¿å±æé®ç®±ï¼ä¸­ï¼ç¶åä½¿ç¨ç§°ä¸ºç»å®ï¼bindingsï¼çè§åååæ¶æ¯å¯æ¬å°éåï¼queuesï¼ãç¶åï¼ä»£çå°æ¶æ¯ä¼ éç»è®¢ééåçæ¶è´¹èï¼æèæ¶è´¹èæéä»éåä¸­è·åæ¶æ¯ã\n\n\n\nåå¸æ¶æ¯æ¶ï¼åå¸èå¯ä»¥å®ä¹åç§æ¶æ¯å±æ§ï¼æ¶æ¯åæ°æ®ï¼ãå¶ä¸­ä¸äºåæ°æ®å¯ä»¥è¢«ä»£çä½¿ç¨ï¼ä½æ¯å®çå¶ä½é¨åå¯¹ä»£çå®å¨ä¸éæï¼å¹¶ä¸ä»è¢«æ¥æ¶æ¶æ¯çåºç¨ç¨åºä½¿ç¨ã\n\nç½ç»æ¯ä¸å¯é çï¼å¹¶ä¸åºç¨ç¨åºå¯è½æ æ³å¤çæ¶æ¯ï¼å æ­¤amqp 0-9-1æ¨¡åå·ææ¶æ¯ç¡®è®¤ï¼message acknowledgementsï¼çæ¦å¿µï¼å½æ¶æ¯è¢«ä¼ éç»æ¶è´¹èæ¶ï¼æ¶è´¹èä¼èªå¨éç¥ä»£çï¼å¦æåºç¨ç¨åºå¼åäººåéæ©è¿æ ·åï¼ãå½ä½¿ç¨æ¶æ¯ç¡®è®¤æºå¶æ¶ï¼å¨æ¶å°è¯¥æ¶æ¯ï¼ææ¶æ¯ç»ï¼çéç¥æ¶ï¼ä»£çæä¼å®å¨ä»éåä¸­å é¤è¯¥æ¶æ¯ã\n\nå¨æäºæåµä¸ï¼ä¾å¦ï¼å½æ æ³è·¯ç±æ¶æ¯æ¶ï¼å¯ä»¥å°æ¶æ¯è¿åç»åå¸èãä¸¢å¼ï¼æèï¼å¦æä»£çå®ç°äºæ©å±ï¼åå°è¿äºæ¶æ¯æ¨å°æè°çâæ­»ä¿¡éåï¼dead letter queueï¼âä¸­ãåå¸èéè¿ä½¿ç¨æäºåæ°åå¸æ¶æ¯æ¥éæ©å¦ä½å¤çè¿æ ·çæåµã\n\néåï¼queuesï¼ï¼äº¤æ¢ï¼exchangesï¼åç»å®ï¼bindingsï¼ç§°ä¸ºamqpå®ä½ã\n\n\n# amqp 0-9-1æ¯å¯ç¼ç¨åè®®\n\namqp 0-9-1æ¯ä¸ç§å¯ç¼ç¨åè®®ï¼å³amqp 0-9-1å®ä½åè·¯ç±è§åä¸»è¦ç±åºç¨ç¨åºæ¬èº«å®ä¹ï¼èä¸æ¯ä»£çç®¡çåã\n\nå æ­¤ï¼ä¸ºåè®®æä½å®ä¹äºä¸ç³»åè§åå¦å£°æéååäº¤æ¢æºãå®ä¹ä»ä»¬ä¹é´çç»å®ãè®¢ééåç­ã\n\nè¿ç»äºåºç¨ç¨åºå¼åäººåå¾å¤èªç±ï¼ä½ä¹éè¦ä»ä»¬æè¯å°æ½å¨çå®ä¹å²çªãå¨å®è·µä¸­ï¼å®ä¹å²çªæ¯ç½è§çï¼å¹¶ä¸éå¸¸è¡¨æå­å¨éè¯¯éç½®ã\n\nåºç¨ç¨åºå£°ææéçamqp 0-9-1å®ä½ï¼å®ä¹å¿è¦çè·¯ç±è§åï¼å¹¶ä¸å¯ä»¥å¨ä¸åä½¿ç¨å®ä»¬æ¶å é¤amqp 0-9-1å®ä½ã\n\n\n# äº¤æ¢æºåäº¤æ¢ç±»å\n\næ¶æ¯ä¼åéå°äº¤æ¢æºï¼äº¤æ¢æºæ¯amqp 0-9-1å®ä½ãäº¤æ¢ä¼ éæ¶æ¯ï¼å°å¶è·¯ç±å°é¶æå¤ä¸ªéåä¸­ãä½¿ç¨çè·¯ç±ç®æ³åå³äºäº¤æ¢ç±»ååè¢«ç§°ä¸ºç»å®çè§åãamqp 0-9-1ä»£çæä¾åç§äº¤æ¢ç±»åï¼\n\nexchange type          default pre-declared names\ndirect exchangeç´è¿äº¤æ¢æº   (empty string) and amq.direct\nfanout exchangeæå½¢äº¤æ¢æº   amq.fanout\ntopic exchangeä¸»é¢äº¤æ¢æº    amq.topic\nheaders exchangeå¤´äº¤æ¢æº   amq.match (and amq.headers in rabbitmq)\n\né¤äºäº¤æ¢ç±»åä¹å¤ï¼äº¤æ¢æºè¿å£°æäºè®¸å¤å±æ§ï¼æéè¦çæ¯ï¼\n\n * nameï¼äº¤æ¢æºåç§°\n * durability (exchanges survive broker restart)ï¼æ¯å¦æä¹åãå¦ææä¹æ§ï¼åä»£çéå¯åï¼äº¤æ¢æºè¿å­å¨\n * auto-delete (exchange is deleted when last queue is unbound from it)ï¼å½ææä¸ä¹ç»å®çæ¶æ¯éåé½å®æäºå¯¹æ­¤äº¤æ¢æºçä½¿ç¨åï¼å æå®\n * arguments (optional, used by plugins and broker-specific features)ï¼å¯éï¼æä»¶åä»£çç¹å®åè½ä½¿ç¨\n\näº¤æ¢æºå¯ä»¥æ¯æä¹åçæä¸´æ¶çãæä¹åçäº¤æ¢æºå¨ä»£çéæ°å¯å¨ä»»ç¶å­å¨ï¼èä¸´æ¶çä¸ä¼ï¼å½ä»£çéæ°å¨çº¿æ¶ï¼ä»ä»¬å¿é¡»è¢«éæ°å£°æï¼ãå¹¶éææåºæ¯é½éè¦æä¹åçäº¤æ¢æºã\n\n\n# é»è®¤äº¤æ¢æº\n\né»è®¤äº¤æ¢æºæ¯ä»£çé¢åå£°æçæ²¡æåç§°ï¼ç©ºå­ç¬¦ä¸²ï¼çç´è¿äº¤æ¢æºãå®æä¸ä¸ªç¹æ®çå±æ§ï¼éå¸¸éç¨äºç®åçåºç¨ç¨åºï¼åå»ºçæ¯ä¸ªéåé½æ¯ç¨ä¸éååç§°ç¸åçè·¯ç±keyèªå¨ç»å®å°è¯¥ç±»äº¤æ¢æºã\n\nä¾å¦ï¼å½å£°æä¸ä¸ªåä¸ºä¸ºâsearch-indexing-onlineâçéåæ¶ï¼amqp 0-9-1ä»£çå°ä½¿ç¨âsearch-indexing-onlineâä½ä¸ºè·¯ç±keyå°å¶ç»å®å°é»è®¤äº¤æ¢æºï¼å¨æ­¤ä¸ä¸æææ¶ç§°ä¸ºç»å®keyï¼ãå æ­¤ï¼åå¸å°é»è®¤äº¤æ¢æºçè·¯ç±keyä¸ºâsearch-indexing-onlineâçæ¶æ¯å°è¢«è·¯ç±å°éåâsearch-indexing-onlineâãæ¢å¥è¯è¯´ï¼é»è®¤äº¤æ¢ä½¿å¶ä¼¼ä¹å¯ä»¥ç´æ¥åéåä¼ éæ¶æ¯ã\n\n\n# ç´è¿äº¤æ¢æº\n\nç´è¿äº¤æ¢æºåºäºæ¶æ¯è·¯ç±keyå°æ¶æ¯ä¼ éå°éåãç´è¿äº¤æ¢æºéå¸¸éåæ¶æ¯çåæ­è·¯ç±ï¼å°½ç®¡å®ä»¬ä¹å¯ç¨äºç»æ­è·¯ç±ï¼ãä¸é¢æ¯å®çå·¥ä½åçï¼\n\n * éåéè¿è·¯ç±key kç»å®å°äº¤æ¢æº\n * å½å·æè·¯ç±key rçæ°æ¶æ¯å°è¾¾ç´æ¥äº¤æ¢æºæ¶ï¼å¦æk = rï¼åäº¤æ¢æºå°å¶è·¯ç±å°è¯¥éå\n\nç´æ¥äº¤æ¢æºéå¸¸ç¨äºä»¥å¾ªç¯æ¹å¼å¨å¤ä¸ªå·¥ä½å®ä¾ï¼ç¸ååºç¨ç¨åºçå®ä¾ï¼ä¹é´åéä»»å¡ãè¿æ ·åæ¶ï¼éè¦çæ¯è¦çè§£ï¼å¨amqp 0-9-1ä¸­ï¼æ¶æ¯æ¯å¨æ¶è´¹èä¹é´è´è½½åè¡¡ï¼èä¸æ¯å¨éåä¹é´è´è½½åè¡¡ã\n\nç´æ¥äº¤æ¢æºå¯ä»¥ä»¥å¾å½¢æ¹å¼è¡¨ç¤ºå¦ä¸ï¼\n\n\n\n\n# æå½¢äº¤æ¢æº\n\næå½¢äº¤æ¢æºä¸ç®¡ç»å®çkeyæ¯ä»ä¹ï¼ä¼è·¯ç±æ¶æ¯å°ç»å®å°å®çææéåãå¦ænä¸ªéåç»å®å°æå½¢äº¤æ¢æºï¼åå½æ°æ¶æ¯åå¸å°è¯¥äº¤æ¢æºæ¶ï¼å®å°ä¼ éæ¶æ¯çå¯æ¬å°è¿nä¸ªéåãæå½¢äº¤æ¢æºéåå¹¿æ­è·¯ç±ã\n\nå ä¸ºæå½¢äº¤æ¢æºå°æ¶æ¯çå¯æ¬ä¼ éç»ç»å®å°å®çæ¯ä¸ªéåï¼æä»¥å®çä½¿ç¨åºæ¯éå¸¸ç¸ä¼¼ï¼\n\n * å¤§åå¤äººå¨çº¿ï¼mmoï¼æ¸¸æå¯ä»¥å°å¶ç¨äºæè¡æ¦æ´æ°æå¶ä»å¨å±äºä»¶\n * ä½è²æ°é»ç½ç«å¯ä»¥ä½¿ç¨æå½¢äº¤æ¢æºå®æ¶å°åå¸æ´æ°çåæ°å°ç§»å¨å®¢æ·ç«¯\n * åå¸å¼ç³»ç»å¯ä»¥å¹¿æ­åç§ç¶æåéç½®æ´æ°\n * ç¾¤ç»èå¤©å¯ä»¥ä½¿ç¨æå½¢äº¤æ¢æºåååä¸èä¹é´çæ¶æ¯ï¼è½ç¶amqpæ²¡æåç½®çç¸å³æ¦å¿µï¼æä»¥xmppå¯è½æ¯ä¸ä¸ªæ´å¥½çéæ©ï¼\n\næå½¢äº¤æ¢æºå¯ä»¥ä»¥å¾å½¢æ¹å¼è¡¨ç¤ºå¦ä¸ï¼\n\n\n\n\n# ä¸»é¢äº¤æ¢æº\n\nä¸»é¢äº¤æ¢æºåºäºæ¶æ¯è·¯ç±keyåç¨äºå°éåç»å®å°äº¤æ¢æºçæ¨¡å¼ä¹é´çå¹éï¼å°æ¶æ¯è·¯ç±å°ä¸ä¸ªæå¤ä¸ªéåãä¸»é¢äº¤æ¢æºéå¸¸ç¨äºå®ç°åç§åå¸/è®¢éæ¨¡å¼åä½ãä¸»é¢äº¤æ¢æºéå¸¸ç¨äºæ¶æ¯çç»æ­è·¯ç±ã\n\nä¸»é¢äº¤æ¢æºå·æéå¸¸å¹¿æ³çä½¿ç¨åºæ¯ãå½ä¸ä¸ªé®é¢æ¶åå¤ä¸ªæ¶è´¹è/åºç¨ç¨åºæéæ©æ§å°æ¥æ¶åªç§ç±»åçæ¶æ¯æ¶ï¼åºèèä½¿ç¨ä¸»é¢äº¤æ¢æºã\n\nä½¿ç¨æ¡ä¾ï¼\n\n * ååä¸ç¹å®å°çä½ç½®ç¸å³çæ°æ®ï¼ä¾å¦éå®ç¹\n\n * ç±å¤ä¸ªå·¥ä½å®ä¾å¤ççåå°ä»»å¡ï¼æ¯ä¸ªå·¥ä½å®ä¾é½è½å¤å¤çç¹å®çä»»å¡é\n\n * åºå­ä»·æ ¼æ´æ°ï¼ä»¥åå¶ä»ç±»åçè´¢å¡æ°æ®æ´æ°ï¼\n\n * æ¶ååç±»ææ è®°çæ°é»æ´æ°ï¼ä¾å¦ï¼ä»éç¨äºç¹å®è¿å¨æå¢éï¼\n\n * ä¸åç±»åäºæå¡çç¼æ\n\n * åå¸å¼æ¶æ/æä½ç³»ç»çè½¯ä»¶æå»ºææåï¼å¶ä¸­æ¯ä¸ªæå»ºå¨åªè½å¤çä¸ä¸ªæ¶æææä½ç³»ç»\n\n\n# å¤´äº¤æ¢æº\n\nå¤´äº¤æ¢æºè¢«è®¾è®¡ç¨äºè·¯ç±å¤ä¸ªå±æ§ï¼è¿äºå±æ§æ´å®¹æç¨æ¶æ¯å¤´è¡¨ç¤ºèä¸æ¯è·¯ç±keyãå¤´äº¤æ¢æºä¼å¿½ç¥è·¯ç±keyå±æ§ãç¸åï¼ç¨äºè·¯ç±çå±æ§æ¯ä»å¤´å±æ§ä¸­åå¾çãå¦æå¤´å±æ§å¼ç­äºç»å®æå®çå¼ï¼åå¹éè¯¥æ¶æ¯ã\n\nå¯ä»¥ä½¿ç¨å¤ä¸ªæ¶æ¯å¤´ç»å®æ¶æ¯å°å¤´äº¤æ¢æºãå¨è¿ç§æåµä¸ï¼ä»£çéè¦åºç¨ç¨åºå¼åèæä¾æ´å¤ä¿¡æ¯ï¼å³ï¼æ¯å¹éå¶ä¸­ä¸ä¸ªæ¶æ¯å¤´è¿æ¯æææ¶æ¯å¤´ï¼è¿å°±æ¯âx-matchâç»å®åæ°åçäºãå½âx-matchâåæ°è¢«è®¾ç½®ä¸ºâanyâæ¶ï¼å¹éä»»æä¸ä¸ªæ¶æ¯å¤´å¼å°±è¡äºãæèï¼å°âx-matchâè®¾ç½®ä¸ºâallâè¦æ±ææå¼å¿é¡»å¹éã\n\nå¤´äº¤æ¢æºå¯ä»¥çåæ¯ç¹æ®çç´è¿äº¤æ¢æºãå ä¸ºå®ä»¬é½æ¯åºäºæ¶æ¯å¤´å±æ§å¼è·¯ç±ï¼è·¯ç±keyä¸å¿æ¯å­ç¬¦ä¸²æ¶ï¼å®ä»¬å¯ä»¥ç¨ä½ç´æ¥äº¤æ¢ï¼ä¾å¦ï¼å®å¯ä»¥æ¯æ´æ°æåå¸ï¼å­å¸ï¼ã\n\næ³¨æï¼ä»¥å­ç¬¦ä¸²x-å¼å¤´çæ¶æ¯å¤´å°ä¸ä¼ç¨äºå¹éã\n\n\n# éå\n\namqp 0-9-1æ¨¡åä¸­çéåä¸å¶ä»æ¶æ¯åä»»å¡éåç³»ç»ä¸­çéåéå¸¸ç¸ä¼¼ï¼å®ä»¬å­å¨ç±åºç¨ç¨åºæ¶è´¹çæ¶æ¯ãéåä¸äº¤æ¢æºå±äº«ä¸äºå±æ§ï¼ä½ä¹æä¸äºé¢å¤çå±æ§ï¼\n\n * nameï¼åç§°\n * durableï¼éåå¨ä»£çéå¯æ¶æå­å¨\n * exclusiveï¼ä»è¢«ä¸ä¸ªè¿æ¥ä½¿ç¨å¹¶ä¸è¯¥è¿æ¥å³é­æ¶éåå°è¢«å é¤\n * auto-deleteï¼å½æåä¸ä¸ªæ¶è´¹èåæ¶è®¢éæ¶ï¼è³å°æä¸ä¸ªæ¶è´¹èçéåå°è¢«å é¤\n * arguments ï¼å¯éï¼ç±pluginsåbrokerç¹å®åè½ä½¿ç¨ï¼ä¾å¦æ¶æ¯ttlï¼éåé¿åº¦éå¶ç­\n\nå¨ä½¿ç¨éåä¹åï¼å¿é¡»å£°æå®ãå£°æéåå°å¯¼è´å®ä¼å¨å°æªå­å¨çæåµä¸åå»ºãå¦æå·²å­å¨éåï¼å¹¶ä¸å¶å±æ§ä¸å£°æä¸­çå±æ§ç¸åï¼åè¯¥å£°æä¸ä¼æä»ä¹å½±åãå½å·²å­å¨çéåå±æ§åå£°æçä¸åæ¶ï¼å°ä¼å¼åä¸ä¸ª406éè¯¯ç ï¼precondition_failedï¼çç®¡éçº§å¼å¸¸\n\n\n# éåå\n\nåºç¨ç¨åºå¯ä»¥èªå·±éæ©éååç§°æè®©ä»£ççæãéååç§°æé¿ä¸º255ä¸ªå­èçutf-8å­ç¬¦ãamqp 0-9-1ä»£çå¯ä»¥çæå¯ä¸çä»£è¡¨åºç¨çéååç§°ãè¦ä½¿ç¨æ­¤åè½ï¼è¯·å°éååç§°åæ°è®¾ä¸ºç©ºå­ç¬¦ä¸²ãçæçåç§°å°ä»¥éåå£°æååºè¿åç»å®¢æ·ç«¯ã\n\nä»¥âamq.âå¼å¤´çéååç§°åªå¨ä»£çåé¨ä½¿ç¨ãå°è¯ä½¿ç¨è¿åæ­¤è§åçåç§°å£°æéåå°å¯¼è´å·æ403è¿åç ï¼access_refusedï¼çç®¡éçº§å«å¼å¸¸ã\n\n\n# éåæä¹å\n\nå¨amqp 0-9-1ä¸­ï¼éåå¯ä»¥è¢«å£°æä¸ºæä¹åçææå­çãæä¹åçéåçåæ°æ®å­å¨å¨ç£çä¸ï¼èä¸´æ¶éåçåæ°æ®å¨å¯ç¨çæåµä¸å­å¨å¨åå­ä¸­ã\n\nå¨éè¦æä¹åçåºæ¯ä¸ï¼åºç¨ç¨åºå¿é¡»ä½¿ç¨æä¹åçéåæ¥ç¡®ä¿åå¸èå°æ¨éçæ¶æ¯æ è®°ä¸ºæä¹åã\n\n\n# ç»å®\n\nç»å®æ¯äº¤æ¢æºå°æ¶æ¯ä¼ éå°éåä½¿ç¨çè§åï¼ä»¥åå¶ä»åå®¹ï¼ãä¸ºäºè®©äº¤æ¢æºeå°æ¶æ¯è·¯ç±å°éåqï¼qå¿é¡»ç»å®å°eãä¸äºç±»åçäº¤æ¢æºä½¿ç¨çç»å®æå¯éçè·¯ç±keyå±æ§ãè·¯ç±keyçç®çæ¯éæ©æ­£ç¡®çåå¸å°äº¤æ¢æºçæäºæ¶æ¯å°ç»å®éåãæ¢å¥è¯è¯´ï¼è·¯ç±keyå°±åæ¯ä¸ä¸ªè¿æ»¤å¨ã\n\næä¸ªæ¯æ¹ï¼\n\n * éåå°±åç®çå°é¿æ²å¸\n * äº¤æ¢æºå°±åå®å®æºåº\n * ç»å®å°±æ¯ä»å®å®æºåºå°é¿æ²çè·¯å¾ï¼æå¤æ¡è·¯å¾å¯ä»¥éæ©\n\nè¿æ ·çé´æ¥å±è®©é£ç§å¾é¾ç¨ç´æ¥æ¨éå°éåçæ¹å¼å®ç°ççè·¯ç±åºæ¯åå¾å¯è½ï¼å¹¶ä¸ä¹åå°äºå¼åèçéå¤æ§å·¥ä½ã\n\nå¦ææ¶æ¯ä¸è½è·¯ç±å°éåï¼æ¯å¦å ä¸ºäº¤æ¢æºæ²¡æç»å®ä»»ä½éåï¼ï¼æ¶æ¯å°è¢«ä¸¢å¼æè¿åç»åå¸èï¼å·ä½æ¯åªç§åå³äºåå¸èè®¾ç½®çæ¶æ¯çç¸å³å±æ§ã\n\n\n# æ¶è´¹è\n\né¤éåºç¨ç¨åºå¯ä»¥æ¶è´¹å®ä»¬ï¼å¦åå­å¨éåä¸­çæ¶æ¯æ¯æ²¡ç¨çãå¨amqp 0-9-1æ¨¡åä¸­ï¼åºç¨ç¨åºæä¸¤ç§æ¹æ³æ¥æ§è¡æ­¤æä½ï¼\n\n * è®¢éä¼ éç»å®ä»¬çæ¶æ¯ï¼âpush apiâï¼ï¼è¿æ¯æ¨èçéé¡¹\n * è½®è¯¢ï¼âpull apiâï¼ï¼è¿ç§æ¹å¼å¾ä½æï¼å¨å¤§å¤æ°æåµä¸åºè¯¥é¿å\n\nä½¿ç¨âpush apiâï¼åºç¨ç¨åºå¿é¡»æå®æ¶è´¹åªä¸ªéåçæ¶æ¯ãå½ä»ä»¬è¿æ ·åæ¶ï¼æä»¬è¯´ä»ä»¬æ³¨åäºæ¶è´¹èæç®åå°è¯´ï¼è®¢éäºä¸ä¸ªéåãæ¯ä¸ªéåå¯ä»¥æ¥æå¤ä¸ªæ¶è´¹èææ³¨åç¬å æ¶è´¹èï¼å¨æ¶è´¹æ¶ä»éåä¸­æé¤ææå¶ä»æ¶è´¹èï¼ã\n\næ¯ä¸ªæ¶è´¹èï¼è®¢éï¼æä¸ä¸ªç§°ä¸ºæ¶è´¹èæ è®°çæ è¯ç¬¦ãå®å¯ç¨äºåæ¶è®¢éæ¶æ¯ãæ¶è´¹èæ ç­¾æ¯å­ç¬¦ä¸²ã\n\n\n# æ¶æ¯ç¡®è®¤\n\næ¶è´¹èåºç¨ç¨åº - ä¹å°±æ¯è¯´ï¼æ¥æ¶åå¤çæ¶æ¯çåºç¨ç¨åº - å¯è½å¶å°å¯è½ä¼æ æ³å¤çåä¸ªæ¶æ¯ï¼ä¹å¯è½ç¨åºå´©æºäºãè¿æå¯è½åºç°ç½ç»é®é¢ãè¿æåºäºä¸ä¸ªé®é¢ï¼ä»£çåºè¯¥ä»ä¹æ¶åä»éåä¸­å é¤æ¶æ¯ï¼amqp 0-9-1è§èä¸ºæ¶è´¹èæä¾äºæ¶æ¯ç¡®è®¤æºå¶ãæä¸¤ç§ç¡®è®¤æ¨¡å¼ï¼\n\n * å¨ä»£çååºç¨ç¨åºåéä¸ä¸ªæ¶æ¯ä¹åï¼ä½¿ç¨basic.deliveræèbasic.get-okæ¹æ³ï¼\n * å¨åºç¨ç¨åºåéç¡®è®¤æ¶æ¯åï¼ä½¿ç¨basic.ackæ¹æ³ï¼\n\nåèç§°ä¸ºèªå¨ç¡®è®¤æ¨¡åï¼èåèç§°ä¸ºæ¾å¼ç¡®è®¤æ¨¡åãéè¿æ¾å¼æ¨¡åï¼åºç¨ç¨åºéæ©å¨ä½æ¶åéç¡®è®¤æ¶æ¯ãå®å¯ä»¥å¨æ¶å°æ¶æ¯åï¼æå¨å¤çåå­å°æ°æ®å­å¨å¨ä¹åï¼æèå¨å®å¨å¤çæ¶æ¯ä¹åï¼ä¾å¦ï¼æåå°è·åç½é¡µï¼å¤çåå°å¶å­å¨å°ä¸äºæä¹æ°æ®å­å¨ä¸­ï¼ã\n\nå¦ææ¶è´¹èæ­»äº¡èä¸åéç¡®è®¤ï¼åä»£çå°å°å¶éæ°åéå°å¦ä¸ä¸ªæ¶è´¹èï¼æèå¦ææ²¡æå¯ç¨æ¶è´¹èï¼åä»£çå°å¨è³å°ä¸ä¸ªæ¶è´¹èéæ°æ³¨åå°åä¸ä¸ªéååå°è¯éæ°åéæ¶æ¯ã\n\nç±äºç½ç»ä¸å¯é ï¼æèåºç¨ç¨åºæ æ³ååºï¼éå¸¸éè¦å·ææç§æºå¶æ¥å¤çç¡®è®¤ãææ¶åªéç¡®è®¤æ¶è´¹èå·²æ¶å°æ¶æ¯ãææ¶ï¼ç¡®è®¤æå³çç±æ¶è´¹èéªè¯å¹¶å¤çäºæ¶æ¯ï¼ä¾å¦ï¼éªè¯å·æå¼ºå¶æ§æ°æ®å¹¶æä¹å°æç»­å°æ°æ®å­å¨æç´¢å¼ä¸­ã\n\nè¿ç§æåµéå¸¸å¸¸è§ï¼å æ­¤amqp 0-9-1å·æåä¸ºæ¶æ¯ç¡®è®¤ï¼ææ¶ç§°ä¸ºacksï¼çåç½®åè½ï¼æ¶è´¹èç¨äºç¡®è®¤æ¶æ¯ä¼ éæå¤çãå¦æåºç¨ç¨åºå´©æºï¼amqp brokerå¨è¿æ¥æ¶å³é­æ¶ä¼æ³¨æå°ï¼ï¼å¦æé¢ææ¶æ¯ç¡®è®¤ä½æ¯amqpä»£çæªæ¶å°ackï¼åè¯¥æ¶æ¯å°éå¥éåï¼å¹¶ä¸å¯è½ç«å³å°å¶åéç»å¦ä¸ä¸ªå­å¨çæ¶è´¹èï¼ã\n\nå·æåç½®åè®®çç¡®è®¤æå©äºå¼åäººåæå»ºæ´å¼ºå¤§çè½¯ä»¶ã\n\n\n# æç»æ¶æ¯\n\nå½æ¶è´¹èåºç¨ç¨åºæ¥æ¶å°æ¶æ¯æ¶ï¼å¯è½æ æ³æåå¤çè¯¥æ¶æ¯ãåºç¨ç¨åºå¯ä»¥éè¿æç»æ¶æ¯æ¥åç¥ä»£çæ¶æ¯å¤çå¤±è´¥æµï¼æèæ æ³å¨å½åå®æï¼ãæç»æ¶æ¯æ¶ï¼åºç¨ç¨åºå¯ä»¥è¦æ±ä»£çä¸¢å¼æéæ°å¥éåãå½éåä¸­åªæä¸ä¸ªæ¶è´¹èæ¶ï¼è¯·ç¡®ä¿éè¿æç»æ¶æ¯å¹¶éå¥éåä¸ä¼åå»ºæ ç©·çæ¶æ¯å¾ªç¯åéã\n\n\n# å¦å®åºç­\n\nå¯ä»¥ä½¿ç¨basic.rejectæ¹æ³æç»æ¶æ¯ï¼ä½basic.rejectæä¸ä¸ªéå¶ï¼æ²¡æåæ³æç»å¤ä¸ªæ¶æ¯ãä½æ¯å¦ææ¨ä½¿ç¨çæ¯rabbitmqï¼é£ä¹å°±æä¸ä¸ªè§£å³æ¹æ¡ãrabbitmqæä¾ç§°ä¸ºå¦å®åºç­ï¼negative acknowledgementsï¼ænacksçamqp 0-9-1æ©å±ã\n\n\n# é¢åæ¶æ¯\n\nå¯¹äºå¤ä¸ªæ¶è´¹èå±äº«éåçæåµï¼è½å¤æå®å¨åéä¸ä¸ä¸ªç¡®è®¤ä¹åå¯ä»¥ä¸æ¬¡åéå°æ¯ä¸ªæ¶è´¹èçæ¶æ¯æ°æ¯æç¨çãè¿å¯ä»¥ç¨ä½ç®åçè´è½½å¹³è¡¡ææ¯ææé«ååéï¼å¦ææ¶æ¯å¾åäºæ¹éåå¸ãä¾å¦ï¼å¦æçäº§åºç¨ç¨åºå å·¥ä½éè¦æ¯åéåéæ¶æ¯ã\n\nè¯·æ³¨æï¼rabbitmqä»æ¯æä¿¡éçº§é¢åè®¡æ°ï¼èä¸æ¯åºäºè¿æ¥æå¤§å°çé¢åã\n\n\n# æ¶æ¯å±æ§åè´è½½\n\namqp 0-9-1æ¨¡åä¸­çæ¶æ¯å·æå±æ§ãæäºå±æ§å¾å¸¸è§ï¼å³amqp 0-9-1è§èå®ä¹å®ä»¬ï¼åºç¨ç¨åºå¼åäººåä¸å¿èèç¡®åçå±æ§åç§°ãä¸äºä¾å­æ¯\n\n * content type\n * content encoding\n * routing key\n * delivery mode (persistent or not)\n * message priority\n * message publishing timestamp\n * expiration period\n * publisher application id\n\namqpä»£çä¼ä½¿ç¨å¶ä¸­æäºå±æ§ï¼ä½å¤§å¤æ°è¿æ¯å¯¹åºç¨ç¨åºå¼æ¾çãæäºå±æ§æ¯å¯éçï¼ç§°ä¸ºheadersãå®ä»¬ç±»ä¼¼äºhttpä¸­çx-headersãåå¸æ¶æ¯æ¶ï¼ä¼è®¾ç½®æ¶æ¯å±æ§ã\n\næ¶æ¯è¿å·æææè½½è·ï¼å®ä»¬æºå¸¦çæ°æ®ï¼ï¼amqpä»£çå°å¶è§ä¸ºä¸éæå­èæ°ç»ãä»£çä¸ä¼æ£æ¥æä¿®æ¹ææè´è½½ãæ¶æ¯å¯ä»¥ä»åå«å±æ§èæ²¡æææè½½è·ãéå¸¸ä½¿ç¨jsonï¼thriftï¼protocol buffersåmessagepackç­åºååæ ¼å¼æ¥åºååç»æåæ°æ®ï¼ä»¥ä¾¿å°å¶åå¸ä¸ºæ¶æ¯ææè½½è·ãåè®®å¯¹ç­ä½éå¸¸ä½¿ç¨âcontent-typeâåâcontent-encodingâå­æ®µæ¥ä¼ è¾¾æ­¤ä¿¡æ¯ï¼ä½è¿ä»æ¯çº¦å®ã\n\næ¶æ¯å¯è½ä¼åå¸ä¸ºæä¹åçï¼è¿ä½¿å¾ä»£çå°å®ä»¬æä¹åå°ç£çãå¦æéæ°å¯å¨æå¡å¨ï¼ç³»ç»å¯ç¡®ä¿æ¶å°çæä¹æ¶æ¯ä¸ä¼ä¸¢å¤±ãåªå°æ¶æ¯åå¸å°æä¹åçäº¤æ¢æºææè·¯ç±çæä¹åçéåä¸ä¼ä½¿æ¶æ¯æä¹åï¼è¿ä¸åé½åå³äºæ¶æ¯æ¬èº«çæä¹åæ¨¡å¼ãåå¸æ¶æ¯å¹¶æä¹åä¼å½±åæ§è½ï¼å°±åæ°æ®å­å¨ä¸æ ·ï¼æä¹åä¼å¨æ§è½ä¸æä¸å®å¼éï¼ã\n\n\n# amqp 0-9-1æ¹æ³\n\namqp 0-9-1æè®¸å¤æ¹æ³ãæ¹æ³æ¯æä½ï¼å¦httpæ¹æ³ï¼ï¼å¹¶ä¸ä¸åé¢åå¯¹è±¡ç¼ç¨è¯­è¨ä¸­çæ¹æ³ãamqp 0-9-1ä¸­çåè®®æ¹æ³è¢«åç»ä¸ºç±»ãç±»åªæ¯amqpæ¹æ³çé»è¾åç»ãamqp 0-9-1 æåå«ææamqpæ¹æ³çå®æ´ç»èã\n\nè®©æä»¬æ¥ççäº¤æ¢æºç±»ï¼è¿æ¯ä¸ç»ä¸äº¤æ¢æºçæä½ç¸å³çæ¹æ³ãå®åæ¬ä»¥ä¸æä½ï¼\n\n * exchange.declare\n * exchange.declare-ok\n * exchange.delete\n * exchange.delete-ok\n\nä¸é¢çæä½ç»æé»è¾å¯¹ï¼exchange.declareåexchange.declare-okï¼exchange.deleteåexchange.delete-okãè¿äºæä½æ¯ârequestsâï¼å®¢æ·ç«¯åéï¼åâresponsesâï¼éè¿ä»£çåéååºä¸è¿°âè¯·æ±âï¼ï¼\n\nä¸¾ä¸ªä¾å­ï¼å®¢æ·ç«¯è¦æ±ä»£çä½¿ç¨exchange.declareæ¹æ³å£°ææ°çexchangeï¼\n\n\n\nå¦ä¸å¾æç¤ºï¼exchange.declareå¸¦æå¤ä¸ªåæ°ãå®ä»¬ä½¿å®¢æ·ç«¯å¯æå®exchangeåç§°ï¼ç±»åï¼æä¹æ§æ å¿ç­ã\n\nå¦ææä½æåï¼åä»£çä½¿ç¨exchange.declare-okæ¹æ³ååºï¼\n\n\n\nexchange.declare-okä¸æºå¸¦é¤ç®¡éå·ä¹å¤çä»»ä½åæ°ã\n\néåçqueue.declareåqueue.declare-okä¹æ¯ç±»ä¼¼ï¼\n\n\n\n\n\nå¹¶éææamqp 0-9-1æ¹æ³é½æå¯¹åºæ¹æ³ãæäºï¼å¦æå¹¿æ³ä½¿ç¨çbasic.publishï¼æ²¡æç¸åºçâresponseâæ¹æ³ï¼æäºï¼å¦basic.getï¼å·æå¤ä¸ªå¯è½çâresponseâã\n\n\n# è¿æ¥\n\namqp 0-9-1è¿æ¥éå¸¸æ¯é¿æçãamqp 0-9-1æ¯ä¸ç§åºç¨çº§å«åè®®ï¼å®ä½¿ç¨tcpè¿è¡å¯é çæ¶æ¯ä¼ éãè¿æ¥ä½¿ç¨èº«ä»½éªè¯ï¼å¯ä»¥ä½¿ç¨tlsä¿æ¤ãå½åºç¨ç¨åºä¸åéè¦è¿æ¥å°æå¡å¨æ¶ï¼å®åºè¯¥ä¼éå°å³é­å¶amqp 0-9-1è¿æ¥ï¼èä¸æ¯çªç¶å³é­åºå±tcpè¿æ¥ã\n\n\n# ç®¡é\n\næäºåºç¨ç¨åºéè¦å¤ä¸ªè¿æ¥å°ä»£çãä½æ¯åæ¶ææå¤ä¸ªtcpè¿æ¥ä¸æ¯ä¸ä¸ªå¥½çéæ©ï¼å ä¸ºè¿æ ·åä¼æ¶èç³»ç»èµæºå¹¶ä½¿éç½®é²ç«å¢æ´å å°é¾ãamqp 0-9-1è¿æ¥ä½¿ç¨ç®¡éå®ç°å¤ç¨ï¼å¯ä»¥è¢«è®¤ä¸ºæ¯âå±äº«åä¸ªtcpè¿æ¥çè½»éçº§è¿æ¥âã\n\nå®¢æ·ç«¯æ§è¡çæ¯ä¸ªåè®®æä½åçå¨ç®¡éä¸ãç¹å®é¢éä¸çéä¿¡ä¸å¦ä¸ä¸ªééä¸çéä¿¡æ¯å®å¨åå¼çï¼å æ­¤æ¯ä¸ªåè®®æ¹æ³è¿æºå¸¦channel idï¼channal numberï¼ï¼è¿æ¯ä»£çåå®¢æ·ç«¯ç¨æ¥å¼æ¸è¯¥æ¹æ³ä½ç¨ç®¡éçæ´æ°ã\n\nç®¡éä»å­å¨è¿æ¥çä¸ä¸æä¸­ï¼èä¸æ¯èªå·±çãå½è¿æ¥å³é­æ¶ï¼ææç®¡éä¹ä¼å³é­ã\n\nå¯¹äºä½¿ç¨å¤ä¸ªçº¿ç¨/è¿ç¨è¿è¡å¤ççåºç¨ç¨åºï¼æ¯ä¸ªçº¿ç¨/è¿ç¨ä¼æå¼æ°çç®¡éï¼èä¸ä¼å±äº«ç®¡éã\n\n\n# èæä¸»æº\n\nä¸ºäºä½¿åä¸ªä»£çè½å¤æç®¡å¤ä¸ªå­¤ç«çâenvironmentsâï¼ç¨æ·ç»ï¼äº¤æ¢æºï¼éåç­ï¼ï¼amqp 0-9-1åå«äºèæä¸»æºçæ¦å¿µï¼vhostsï¼ãå®ä»¬ç±»ä¼¼äºè®¸å¤æµè¡çwebæå¡å¨ä½¿ç¨çèæä¸»æºï¼å¹¶æä¾å®å¨éç¦»çç¯å¢ï¼å¶ä¸­å°±æamqpå®ä½ãåè®®å®¢æ·ç«¯æå®å¨è¿æ¥ååæé´ä»ä»¬æ³è¦ä½¿ç¨çvhostsã\n\n\n# å¯æ©å±çamqp\n\namqp 0-9-1æå ä¸ªæ©å±ç¹ï¼\n\n * èªå®ä¹äº¤æ¢æºç±»åè®©å¼åäººåå®ç°è·¯ç±æ¹æ¡ã\n * äº¤æ¢æºåéåçå£°æå¯ä»¥åæ¬ä»£çå¯ä»¥ä½¿ç¨çéå å±æ§ãä¾å¦ï¼rabbitmqä¸­ç per-queue message ttlä»¥è¿ç§æ¹å¼å®ç°ã\n * ä»£çç¹å®äºåè®®çæ©å±ãä¾å¦extensions that rabbitmq implements\n * new amqp 0-9-1 method classes\n * ä»£çå¯ä»¥ç¨éå æä»¶æ©å±ï¼ä¾å¦ï¼rabbitmqç®¡çç«¯åhttp apiè¢«å®ç°ä¸ºæä»¶ã\n\nè¿äºåè½ä½¿amqp 0-9-1æ¨¡åæ´å çµæ´»ã\n\n\n# amqp 0-9-1å®¢æ·ç«¯çæç¯å¢\n\nè®¸å¤æµè¡çç¼ç¨è¯­è¨åå¹³å°æè®¸å¤amqp 0-9-1å®¢æ·ç«¯ãå¶ä¸­ä¸äºåªæä¾amqpæ¹æ³çå®ç°ãæäºæä¾å¶ä»åè½ãä¾¿å©çæ¹æ³åæ½è±¡ãä¸äºå®¢æ·ç«¯æ¯å¼æ­¥çï¼éé»å¡ï¼ï¼æäºæ¯åæ­¥ï¼é»å¡ï¼ï¼æäºæ¯æä¸¤ç§æ¨¡å¼ãæäºå®¢æ·ç«¯æ¯æç¹å®äºä¾åºåçæ©å±ï¼ä¾å¦ï¼rabbitmqç¹å®çæ©å±ï¼ã",charsets:{cjk:!0}},{title:"vscodeä½¿ç¨æå·§",frontmatter:{title:"vscodeä½¿ç¨æå·§",permalink:"/pages/dev/vscode/",date:"2022-01-20T12:33:26.000Z"},regularPath:"/02.%E5%BC%80%E5%8F%91%E6%8C%87%E5%8D%97/02.vscode%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7.html",relativePath:"02.å¼åæå/02.vscodeä½¿ç¨æå·§.md",key:"v-0aaa33f7",path:"/pages/dev/vscode/",headersStr:null,content:"# 1.å¿«æ·é®\n\nå¿«æ·é®                      è¯´æ\nF1æèCtrl + shift + p     æå¼å½ä»¤é¢æ¿\nAlt + â                  åå°ä¸ä¸ä¸ªä½ç½®\nAlt + shift + f          æ ¼å¼åä»£ç \nCtrl + shift + f         æç´¢éä¸­åå®¹\nCtrl + \\                 åå²ç¼è¾çªå£\nAlt + shift + upæèdown   å¤å¶ä¸è¡\nAlt + upæèdown           ä¸ä¸ç§»å¨ä¸è¡\nAlt + shift + âæèâ       æ©å¤§æèç¼©å°éæ©",normalizedContent:"# 1.å¿«æ·é®\n\nå¿«æ·é®                      è¯´æ\nf1æèctrl + shift + p     æå¼å½ä»¤é¢æ¿\nalt + â                  åå°ä¸ä¸ä¸ªä½ç½®\nalt + shift + f          æ ¼å¼åä»£ç \nctrl + shift + f         æç´¢éä¸­åå®¹\nctrl + \\                 åå²ç¼è¾çªå£\nalt + shift + upæèdown   å¤å¶ä¸è¡\nalt + upæèdown           ä¸ä¸ç§»å¨ä¸è¡\nalt + shift + âæèâ       æ©å¤§æèç¼©å°éæ©",charsets:{cjk:!0}},{title:"Java8å®æ",frontmatter:{title:"Java8å®æ",permalink:"/pages/note/java8InAction/",article:!0,date:"2022-01-20T11:23:25.000Z"},regularPath:"/03.%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/01.Java8%E5%AE%9E%E6%88%98.html",relativePath:"03.è¯»ä¹¦ç¬è®°/01.Java8å®æ.md",key:"v-2f6761fc",path:"/pages/note/java8InAction/",headers:[{level:2,title:"1.1 æµå¤ç",slug:"_1-1-æµå¤ç",normalizedTitle:"1.1 æµå¤ç",charIndex:13},{level:2,title:"1.2è¡ä¸ºåæ°å",slug:"_1-2è¡ä¸ºåæ°å",normalizedTitle:"1.2è¡ä¸ºåæ°å",charIndex:218},{level:2,title:"1.3 å¹¶è¡ä¸å±äº«çå¯åæ°æ®",slug:"_1-3-å¹¶è¡ä¸å±äº«çå¯åæ°æ®",normalizedTitle:"1.3 å¹¶è¡ä¸å±äº«çå¯åæ°æ®",charIndex:448},{level:2,title:"1.4 å½æ°",slug:"_1-4-å½æ°",normalizedTitle:"1.4 å½æ°",charIndex:554},{level:2,title:"1.5 Stream APIä¸Collection API",slug:"_1-5-stream-apiä¸collection-api",normalizedTitle:"1.5 stream apiä¸collection api",charIndex:781},{level:2,title:"1.6 é»è®¤æ¹æ³",slug:"_1-6-é»è®¤æ¹æ³",normalizedTitle:"1.6 é»è®¤æ¹æ³",charIndex:946},{level:2,title:"2.1 å½æ°å¼æ¥å£",slug:"_2-1-å½æ°å¼æ¥å£",normalizedTitle:"2.1 å½æ°å¼æ¥å£",charIndex:1707},{level:2,title:"2.2 ç±»åæ£æ¥ãæ¨æ­åéå¶",slug:"_2-2-ç±»åæ£æ¥ãæ¨æ­åéå¶",normalizedTitle:"2.2 ç±»åæ£æ¥ãæ¨æ­åéå¶",charIndex:1797},{level:3,title:"2.2.1 ä½¿ç¨å±é¨åé",slug:"_2-2-1-ä½¿ç¨å±é¨åé",normalizedTitle:"2.2.1 ä½¿ç¨å±é¨åé",charIndex:1949},{level:3,title:"2.2.2 æ¹æ³å¼ç¨",slug:"_2-2-2-æ¹æ³å¼ç¨",normalizedTitle:"2.2.2 æ¹æ³å¼ç¨",charIndex:2225},{level:3,title:"2.2.3 å¤å",slug:"_2-2-3-å¤å",normalizedTitle:"2.2.3 å¤å",charIndex:2548},{level:2,title:"3.1 æµæä½",slug:"_3-1-æµæä½",normalizedTitle:"3.1 æµæä½",charIndex:3412},{level:3,title:"3.1.1 ä¸­é´æä½",slug:"_3-1-1-ä¸­é´æä½",normalizedTitle:"3.1.1 ä¸­é´æä½",charIndex:3471},{level:3,title:"3.1.2 ç»ç«¯æä½",slug:"_3-1-2-ç»ç«¯æä½",normalizedTitle:"3.1.2 ç»ç«¯æä½",charIndex:3560},{level:2,title:"4.1 ç­éååç",slug:"_4-1-ç­éååç",normalizedTitle:"4.1 ç­éååç",charIndex:3638},{level:2,title:"4.2 æ å°",slug:"_4-2-æ å°",normalizedTitle:"4.2 æ å°",charIndex:3660},{level:2,title:"4.3 æ¥æ¾åå¹é",slug:"_4-3-æ¥æ¾åå¹é",normalizedTitle:"4.3 æ¥æ¾åå¹é",charIndex:3684},{level:2,title:"4.4 å½çº¦",slug:"_4-4-å½çº¦",normalizedTitle:"4.4 å½çº¦",charIndex:3745},{level:2,title:"4.5 åå§ç±»åæµç¹å",slug:"_4-5-åå§ç±»åæµç¹å",normalizedTitle:"4.5 åå§ç±»åæµç¹å",charIndex:4025},{level:2,title:"4.6 åå»ºæµ",slug:"_4-6-åå»ºæµ",normalizedTitle:"4.6 åå»ºæµ",charIndex:4133},{level:2,title:"5.1 Collectorsé¢å®ä¹æ¶éå¨",slug:"_5-1-collectorsé¢å®ä¹æ¶éå¨",normalizedTitle:"5.1 collectorsé¢å®ä¹æ¶éå¨",charIndex:4881},{level:2,title:"5.2 å¹¿ä¹çå½çº¦æ±æ»",slug:"_5-2-å¹¿ä¹çå½çº¦æ±æ»",normalizedTitle:"5.2 å¹¿ä¹çå½çº¦æ±æ»",charIndex:5125},{level:2,title:"5.3 åç»",slug:"_5-3-åç»",normalizedTitle:"5.3 åç»",charIndex:5293},{level:2,title:"5.4 ååº",slug:"_5-4-ååº",normalizedTitle:"5.4 ååº",charIndex:5512},{level:2,title:"5.5 æ¶éå¨æ¥å£",slug:"_5-5-æ¶éå¨æ¥å£",normalizedTitle:"5.5 æ¶éå¨æ¥å£",charIndex:5570},{level:3,title:"5.5.1 supplierå»ºç«æ°çç»æå®¹å¨",slug:"_5-5-1-supplierå»ºç«æ°çç»æå®¹å¨",normalizedTitle:"5.5.1 supplierå»ºç«æ°çç»æå®¹å¨",charIndex:21032},{level:3,title:"5.5.2 accumulatorå°åç´ æ·»å å°ç»æå®¹å¨",slug:"_5-5-2-accumulatorå°åç´ æ·»å å°ç»æå®¹å¨",normalizedTitle:"5.5.2 accumulatorå°åç´ æ·»å å°ç»æå®¹å¨",charIndex:21154},{level:3,title:"5.5.3 finisherå¯¹ç»æå®¹å¨åºç¨æç»è½¬æ¢",slug:"_5-5-3-finisherå¯¹ç»æå®¹å¨åºç¨æç»è½¬æ¢",normalizedTitle:"5.5.3 finisherå¯¹ç»æå®¹å¨åºç¨æç»è½¬æ¢",charIndex:21250},{level:3,title:"5.5.4 combineråå¹¶ä¸¤ä¸ªç»æå®¹å¨",slug:"_5-5-4-combineråå¹¶ä¸¤ä¸ªç»æå®¹å¨",normalizedTitle:"5.5.4 combineråå¹¶ä¸¤ä¸ªç»æå®¹å¨",charIndex:21355},{level:3,title:"5.5.5 characteristicsæ¹æ³",slug:"_5-5-5-characteristicsæ¹æ³",normalizedTitle:"5.5.5 characteristicsæ¹æ³",charIndex:21764},{level:3,title:"5.5.6 èªå®ä¹æ¶é",slug:"_5-5-6-èªå®ä¹æ¶é",normalizedTitle:"5.5.6 èªå®ä¹æ¶é",charIndex:21996},{level:2,title:"6.1 å°é¡ºåºæµè½¬æ¢ä¸ºå¹¶è¡æµ",slug:"_6-1-å°é¡ºåºæµè½¬æ¢ä¸ºå¹¶è¡æµ",normalizedTitle:"6.1 å°é¡ºåºæµè½¬æ¢ä¸ºå¹¶è¡æµ",charIndex:22170},{level:2,title:"6.2 æ­£ç¡®ä½¿ç¨å¹¶è¡",slug:"_6-2-æ­£ç¡®ä½¿ç¨å¹¶è¡",normalizedTitle:"6.2 æ­£ç¡®ä½¿ç¨å¹¶è¡",charIndex:22569},{level:2,title:"6.3 Fork/Joinæ¡æ¶",slug:"_6-3-fork-joinæ¡æ¶",normalizedTitle:"6.3 fork/joinæ¡æ¶",charIndex:25340},{level:3,title:"6.3.1 RecursiveTask",slug:"_6-3-1-recursivetask",normalizedTitle:"6.3.1 recursivetask",charIndex:25360},{level:3,title:"6.3.2 ä½¿ç¨Fork/Joinçæä½³åæ³",slug:"_6-3-2-ä½¿ç¨fork-joinçæä½³åæ³",normalizedTitle:"6.3.2 ä½¿ç¨fork/joinçæä½³åæ³",charIndex:25918},{level:3,title:"6.3.3 å·¥ä½çªå",slug:"_6-3-3-å·¥ä½çªå",normalizedTitle:"6.3.3 å·¥ä½çªå",charIndex:26635},{level:2,title:"6.4 Spliteratorå¯åè¿­ä»£å¨",slug:"_6-4-spliteratorå¯åè¿­ä»£å¨",normalizedTitle:"6.4 spliteratorå¯åè¿­ä»£å¨",charIndex:26762},{level:3,title:"6.4.1 æåè¿ç¨",slug:"_6-4-1-æåè¿ç¨",normalizedTitle:"6.4.1 æåè¿ç¨",charIndex:27180},{level:3,title:"6.4.2 èªå®ä¹Spliterator",slug:"_6-4-2-èªå®ä¹spliterator",normalizedTitle:"6.4.2 èªå®ä¹spliterator",charIndex:27537},{level:2,title:"7.1 éæ",slug:"_7-1-éæ",normalizedTitle:"7.1 éæ",charIndex:27578},{level:3,title:"7.1.1 ä½¿ç¨Lambdaæ¿æ¢å¿åç±»",slug:"_7-1-1-ä½¿ç¨lambdaæ¿æ¢å¿åç±»",normalizedTitle:"7.1.1 ä½¿ç¨lambdaæ¿æ¢å¿åç±»",charIndex:27589},{level:3,title:"7.1.2 æ¹æ³å¼ç¨ä»£æ¿Lambda",slug:"_7-1-2-æ¹æ³å¼ç¨ä»£æ¿lambda",normalizedTitle:"7.1.2 æ¹æ³å¼ç¨ä»£æ¿lambda",charIndex:27721},{level:3,title:"7.1.3 ä»å½ä»¤å¼çæ°æ®å¤çåæ¢å°Stream",slug:"_7-1-3-ä»å½ä»¤å¼çæ°æ®å¤çåæ¢å°stream",normalizedTitle:"7.1.3 ä»å½ä»¤å¼çæ°æ®å¤çåæ¢å°stream",charIndex:27744},{level:3,title:"7.1.4éææ¨¡å¼",slug:"_7-1-4éææ¨¡å¼",normalizedTitle:"7.1.4éææ¨¡å¼",charIndex:27773},{level:2,title:"7.2 ä½¿ç¨Lambdaéæé¢åå¯¹è±¡çè®¾è®¡æ¨¡å¼",slug:"_7-2-ä½¿ç¨lambdaéæé¢åå¯¹è±¡çè®¾è®¡æ¨¡å¼",normalizedTitle:"7.2 ä½¿ç¨lambdaéæé¢åå¯¹è±¡çè®¾è®¡æ¨¡å¼",charIndex:28120},{level:3,title:"7.2.1 ç­ç¥æ¨¡å¼",slug:"_7-2-1-ç­ç¥æ¨¡å¼",normalizedTitle:"7.2.1 ç­ç¥æ¨¡å¼",charIndex:28148},{level:3,title:"7.2.2 æ¨¡æ¿æ¹æ³",slug:"_7-2-2-æ¨¡æ¿æ¹æ³",normalizedTitle:"7.2.2 æ¨¡æ¿æ¹æ³",charIndex:28176},{level:3,title:"7.2.3 è§å¯èæ¨¡å¼",slug:"_7-2-3-è§å¯èæ¨¡å¼",normalizedTitle:"7.2.3 è§å¯èæ¨¡å¼",charIndex:28206},{level:3,title:"7.2.4 è´£ä»»é¾æ¨¡å¼",slug:"_7-2-4-è´£ä»»é¾æ¨¡å¼",normalizedTitle:"7.2.4 è´£ä»»é¾æ¨¡å¼",charIndex:28289},{level:3,title:"7.2.5 å·¥åæ¨¡å¼",slug:"_7-2-5-å·¥åæ¨¡å¼",normalizedTitle:"7.2.5 å·¥åæ¨¡å¼",charIndex:28332},{level:2,title:"7.2 æµè¯Lambda",slug:"_7-2-æµè¯lambda",normalizedTitle:"7.2 æµè¯lambda",charIndex:28374},{level:2,title:"7.3 è°è¯",slug:"_7-3-è°è¯",normalizedTitle:"7.3 è°è¯",charIndex:28391},{level:2,title:"11.1 LocalDateåLocalTime",slug:"_11-1-localdateålocaltime",normalizedTitle:"11.1 localdateålocaltime",charIndex:29514},{level:2,title:"11.2 Instant",slug:"_11-2-instant",normalizedTitle:"11.2 instant",charIndex:29543},{level:2,title:"11.3 DurationæPeriod",slug:"_11-3-durationæperiod",normalizedTitle:"11.3 durationæperiod",charIndex:29573},{level:2,title:"11.4 æçºµãè§£æåæ ¼å¼åæ¥æ",slug:"_11-4-æçºµãè§£æåæ ¼å¼åæ¥æ",normalizedTitle:"11.4 æçºµãè§£æåæ ¼å¼åæ¥æ",charIndex:30332},{level:3,title:"11.4.1 ä½¿ç¨TemporalAdjuster",slug:"_11-4-1-ä½¿ç¨temporaladjuster",normalizedTitle:"11.4.1 ä½¿ç¨temporaladjuster",charIndex:31312},{level:3,title:"11.4.2 DateTimeFormatter",slug:"_11-4-2-datetimeformatter",normalizedTitle:"11.4.2 datetimeformatter",charIndex:31459},{level:2,title:"11.5 å¤çä¸åçæ¶åºååæ³",slug:"_11-5-å¤çä¸åçæ¶åºååæ³",normalizedTitle:"11.5 å¤çä¸åçæ¶åºååæ³",charIndex:32854}],headersStr:"1.1 æµå¤ç 1.2è¡ä¸ºåæ°å 1.3 å¹¶è¡ä¸å±äº«çå¯åæ°æ® 1.4 å½æ° 1.5 Stream APIä¸Collection API 1.6 é»è®¤æ¹æ³ 2.1 å½æ°å¼æ¥å£ 2.2 ç±»åæ£æ¥ãæ¨æ­åéå¶ 2.2.1 ä½¿ç¨å±é¨åé 2.2.2 æ¹æ³å¼ç¨ 2.2.3 å¤å 3.1 æµæä½ 3.1.1 ä¸­é´æä½ 3.1.2 ç»ç«¯æä½ 4.1 ç­éååç 4.2 æ å° 4.3 æ¥æ¾åå¹é 4.4 å½çº¦ 4.5 åå§ç±»åæµç¹å 4.6 åå»ºæµ 5.1 Collectorsé¢å®ä¹æ¶éå¨ 5.2 å¹¿ä¹çå½çº¦æ±æ» 5.3 åç» 5.4 ååº 5.5 æ¶éå¨æ¥å£ 5.5.1 supplierå»ºç«æ°çç»æå®¹å¨ 5.5.2 accumulatorå°åç´ æ·»å å°ç»æå®¹å¨ 5.5.3 finisherå¯¹ç»æå®¹å¨åºç¨æç»è½¬æ¢ 5.5.4 combineråå¹¶ä¸¤ä¸ªç»æå®¹å¨ 5.5.5 characteristicsæ¹æ³ 5.5.6 èªå®ä¹æ¶é 6.1 å°é¡ºåºæµè½¬æ¢ä¸ºå¹¶è¡æµ 6.2 æ­£ç¡®ä½¿ç¨å¹¶è¡ 6.3 Fork/Joinæ¡æ¶ 6.3.1 RecursiveTask 6.3.2 ä½¿ç¨Fork/Joinçæä½³åæ³ 6.3.3 å·¥ä½çªå 6.4 Spliteratorå¯åè¿­ä»£å¨ 6.4.1 æåè¿ç¨ 6.4.2 èªå®ä¹Spliterator 7.1 éæ 7.1.1 ä½¿ç¨Lambdaæ¿æ¢å¿åç±» 7.1.2 æ¹æ³å¼ç¨ä»£æ¿Lambda 7.1.3 ä»å½ä»¤å¼çæ°æ®å¤çåæ¢å°Stream 7.1.4éææ¨¡å¼ 7.2 ä½¿ç¨Lambdaéæé¢åå¯¹è±¡çè®¾è®¡æ¨¡å¼ 7.2.1 ç­ç¥æ¨¡å¼ 7.2.2 æ¨¡æ¿æ¹æ³ 7.2.3 è§å¯èæ¨¡å¼ 7.2.4 è´£ä»»é¾æ¨¡å¼ 7.2.5 å·¥åæ¨¡å¼ 7.2 æµè¯Lambda 7.3 è°è¯ 11.1 LocalDateåLocalTime 11.2 Instant 11.3 DurationæPeriod 11.4 æçºµãè§£æåæ ¼å¼åæ¥æ 11.4.1 ä½¿ç¨TemporalAdjuster 11.4.2 DateTimeFormatter 11.5 å¤çä¸åçæ¶åºååæ³",content:'# 1.åºç¡ç¥è¯\n\n\n# 1.1 æµå¤ç\n\næµæ¯ä¸ç³»åæ°æ®é¡¹ï¼ä¸æ¬¡åªçæä¸é¡¹ãå¯ä»¥æ³è±¡ææ±½è½¦ç»è£æµæ°´çº¿ï¼å°½ç®¡æµæ°´çº¿å®éä¸æ¯ä¸ä¸ªåºåï¼ä½ä¸åå å·¥ç«çè¿è¡ä¸è¬æ¯å¹¶è¡çã\n\n# è¯¥ä¾å­è¡¨ç¤ºæä¸¤ä¸ªæä»¶è¿æ¥èµ·æ¥åå»ºä¸ä¸ªæµï¼ç¶åè½¬æ¢æµä¸­çå­ç¬¦ï¼å¯¹æµä¸­çè¡è¿è¡æåºï¼æåç»åºæµçæåä¸è¡ã\n# è¿å ä¸ªå½ä»¤å¨Unixä¸­æ¯åæ¶æ§è¡çã\ncat file1 file2 | tr "[a-z]" "[A-Z]" | sort | tail -3\n\n\n\n# 1.2è¡ä¸ºåæ°å\n\nStream APIæ¯æå»ºå¨éè¿ä¼ éä»£ç ä½¿å¾æä½è¡ä¸ºå®ç°åæ°åçææ³ä¸ã\n\næ¯æ¹è¯´ï¼ä½ æä¸å åç¥¨ä»£ç ï¼æ ¼å¼ç±»ä¼¼äº2013UK0001ã2014US0002â¦â¦ååä½æ°ä»£è¡¨å¹´ä»½ï¼ æ¥ä¸æ¥ä¸¤ä¸ªå­æ¯ä»£è¡¨å½å®¶ï¼æååä½æ¯å®¢æ·çä»£ç ãä½ å¯è½æ³æç§å¹´ä»½ãå®¢æ·ä»£ç ï¼çè³å½å®¶æ¥ å¯¹åç¥¨è¿è¡æåºãä½ çæ­£æ³è¦çæ¯ï¼è½å¤ç»sortå½ä»¤ä¸ä¸ªåæ°è®©ç¨æ·å®ä¹é¡ºåºï¼ç»sortå½ä»¤ä¼  éä¸æ®µç¬ç«ä»£ç ãJava8å¢å äºæä»£ç ä½ä¸ºåæ°ä¼ éç»å¦ä¸ä¸ªæ¹æ³çè½åã\n\n\n\n\n# 1.3 å¹¶è¡ä¸å±äº«çå¯åæ°æ®\n\n> æ²¡æå±äº«çå¯åæ°æ®åå°æ¹æ³åå½æ°å³ä»£ç ä¼ éç»å¶ä»æ¹æ³çè½åæ¯å½æ°å¼ç¼ç¨èå¼çåºç³ãå½æ°å¼ç¼ç¨ä¸­çå½æ°çä¸»è¦æææ¯âæå½æ°ä½ä¸ºä¸ç­å¼âï¼ä¹å³âæ§è¡æ¶å¨åç´ ä¹é´æ äºå¨âã\n\n\n# 1.4 å½æ°\n\n * Java8åè®¸ææ¹æ³åå½æ°ä½ä¸ºä¸ç­å¬æ°ï¼å¯ä¼ éçå¼ï¼ãè®©æ¹æ³ä½ä¸ºå¼ææäºå¶ä»è¥å¹²Java8åè½çåºç¡ã\n * Java8å¯ä»¥ä¼ éæ¹æ³å¼ç¨ï¼ä»¥ååªè½ä¼ éå¯¹è±¡å¼ç¨\n * è°è¯ï¼predicateï¼ï¼å¨æ°å­¦ä¸å¸¸å¸¸ç¨æ¥ä»£è¡¨ä¸ä¸ªç±»ä¼¼å½æ°çä¸è¥¿ï¼ä»æ¥åä¸ä¸ªåæ°å¼ï¼å¹¶è¿åtrueæfalseã\n * å¦æLambdaçé¿åº¦å¤äºå è¡ï¼å®çè¡ä¸ºä¹ä¸æ¯ä¸ç®äºç¶çè¯ï¼åºè¯¥ç¨æ¹æ³å¼ç¨æ¥æåä¸ä¸ªææè¿°æ§åç§°çæ¹æ³ï¼èä¸æ¯ä½¿ç¨å¿åçLambdaã\n\n\n# 1.5 Stream APIä¸Collection API\n\n * ç¨éåå¾ªç¯ä¸ä¸ªä¸ªå»è¿­ä»£åå¤çåç´ ç§°ä¸ºå¤é¨è¿­ä»£ï¼æµå¤çæ¯å¨åºåé¨è¿è¡çï¼ç§°ä¸ºåé¨è¿­ä»£ã\n * æµçå¹¶è¡æ¯ä½¿ç¨çº¿ç¨åæ­¥æ´ä¸æåºéï¼æµå¤©çå·æå©ç¨å¤æ ¸çä¼å¿ã\n * Collectionä¸»è¦æ¯ä¸ºäºå­å¨åè®¿é®æ°æ®ï¼èStreamåä¸»è¦ç¨äºæè¿°å¯¹æ°æ®çè®¡ç®ã\n\n\n\n\n# 1.6 é»è®¤æ¹æ³\n\nè®¾è®¡é»è®¤æ¹æ³çç®çå¨äºæ¹åå·²åå¸çæ¥å£èä¸ç ´åå·²æçå®ç°ãä¾å¦Java8ä¸­Listæ°å¢çé»è®¤æ¹æ³ï¼\n\ndefault void sort(Comparator<? super E> c) {\n    Object[] a = this.toArray();\n        Arrays.sort(a, (Comparator) c);\n        ListIterator<E> i = this.listIterator();\n        for (Object e : a) {\n            i.next();\n            i.set((E) e);\n        }\n}\n\n\nä½ä¸ä¸ªç±»å¯ä»¥å®ç°å¤ä¸ªæ¥å£ï¼å¦æå¨å¥½å ä¸ªæ¥å£éæå¤ä¸ªé»è®¤å®ç°ï¼æç§ç¨åº¦ä¸æå³çJavaæäºå¤éç»§æ¿ãJavaç¨ä¸äºéå¶æ¥é¿ååºç°ç±»ä¼¼C++ä¸­çè±å½¢ç»§æ¿é®é¢ã\n\n\n# 2.Lambdaè¡¨è¾¾å¼\n\nå¯ä»¥æLambdaè¡¨è¾¾å¼çåå¿åå½æ°ï¼ä¹å°±æ¯æ²¡æå£°æåç§°çæ¹æ³ï¼åå¿åç±»ä¸æ ·å¯ä»¥ä½ä¸ºåæ°ä¼ éç»ä¸ä¸ªæ¹æ³ï¼å®æåæ°åè¡¨ãå½æ°ä¸»ä½ãè¿åç±»åãè¿æå¯è½æå¯ä»¥æåºçå¼å¸¸åè¡¨ã\n\n// è¡¨è¾¾å¼å°±æ¯Lambdaçè¿åå¼\n(parameters) -> expression\n(parameters) -> { statements;}\n(1).() -> {}\n(2).() -> "hello world"\n(3).() -> { return "hello world";}\n(4).(Integer i) -> return "hello" + i; //æ æï¼ä¸åºæreturn\n(5).(String s) -> { "IronMan"; } //æ æï¼æ¾ç¤ºè¿åè¦å ä¸return\n\n\n\n\n# 2.1 å½æ°å¼æ¥å£\n\nå½æ°å¼æ¥å£ä¸­çæ½è±¡æ¹æ³çç­¾åå¯ä»¥æè¿°Lambdaè¡¨è¾¾å¼çç­¾åãå½æ°å¼æ¥å£çæ½è±¡æ¹æ³çç­¾åæä¸ºå½æ°æè¿°ç¬¦ã\n\n> ä»»ä½å½æ°å¼æ¥å£é½ä¸åè®¸æåºåæ£å¼å¸¸ã\n\n\n# 2.2 ç±»åæ£æ¥ãæ¨æ­åéå¶\n\nLambdaçç±»åæ¯ä»ä½¿ç¨Lambdaçä¸ä¸ææ¨æ­åºæ¥çãå¦æLambdaè¡¨è¾¾å¼æåºä¸ä¸ªå¼å¸¸ï¼é£ä¹æ½è±¡æ¹æ³æå£°æçthrowsè¯­å¥ä¹å¿é¡»ä¸ä¹å¹é\n\n> ç¹æ®çvoidå¼å®¹è§å:å¦æä¸ä¸ªLambdaçä¸»ä½æ¯ä¸ä¸ªè¯­å¥è¡¨è¾¾å¼ï¼ å®å°±åä¸ä¸ªè¿åvoidçå½æ°æè¿°ç¬¦å¼å®¹ã\n\n\n# 2.2.1 ä½¿ç¨å±é¨åé\n\nLambdaè¡¨è¾¾å¼åè®¸ä½¿ç¨èªç±åéï¼å¨å¤å±ä½ç¨åä¸­å®ä¹çåéï¼ï¼å°±åå¿åç±»ä¸æ ·ï¼å®ä»¬è¢«ç§°ä½Lambdaæè·ãLambdaå¯ä»¥æ²¡æéå¶å°æè·å®ä¾åéåéæåéï¼ä½å±é¨åéå¿é¡»æ¾å¼å£°æä¸ºfinalæé»è¾ä¸æ¯finalçï¼ä¹å°±æ¯åªè½æè·å±é¨åéä¸æ¬¡\n\n> é­å\n> \n> é­åæ¯ä¸ä¸ªå½æ°çå®ä¾ï¼ä¸å®å¯ä»¥æ éå¶å°è®¿é®é£ä¸ªå½æ°çéæ¬å°åéãä½Lambdaè®¿é®éæ¬å°åéæå¿é¡»æ¯éå¼æç»çéå¶ï¼å ä¸ºå±é¨åéä¿å­å¨æ ä¸ï¼æ¯çº¿ç¨ç§æçï¼çº¿ç¨è®¿é®éæ¬å°å±é¨åéæ¶å®éä¸æ¯è®¿é®å®çå¯æ¬ãå¯ä»¥è®¤ä¸ºLambdaå¯¹å¼å°é­ï¼èä¸æ¯å¯¹åéå°é­ã\n\n\n# 2.2.2 æ¹æ³å¼ç¨\n\nå¦æä¸ä¸ªLambdaä»£è¡¨çåªæ¯âç´æ¥è°ç¨è¿ä¸ªæ¹æ³âï¼é£æå¥½è¿æ¯ç¨åç§°æ¥è°ç¨å®ï¼èä¸æ¯å»æè¿°å¦ä½è°ç¨å®ã å¯ä»¥ææ¹æ³å¼ç¨çä½éå¯¹ä»ä»æ¶ååä¸æ¹æ³çLambdaçè¯­æ³ç³\n\n * æåéææ¹æ³çæ¹æ³å¼ç¨ãInteger::parseInt\n * æåä»»æç±»åå®ä¾æ¹æ³çæ¹æ³å¼ç¨ãString::length\n * æåç°æå¯¹è±¡çå®ä¾æ¹æ³çæ¹æ³å¼ç¨ãå¨ Lambda ä¸­ è° ç¨ ä¸ ä¸ª å·² ç» å­ å¨ ç å¤ é¨ å¯¹ è±¡ ä¸­ ç æ¹ æ³ ã ä¾ å¦ ï¼ Lambda è¡¨ è¾¾ å¼ ()->expensiveTransaction.getValue()å¯ä»¥åä½expensiveTransaction::getValue\n\n\n# 2.2.3 å¤å\n\n// 1.æ¯è¾å¨é¾ãå¦åæéééåæåºï¼ä¸¤ä¸ªè¹æä¸æ ·éæ¶ï¼åæå½å®¶æåº\ninventory.sort(comparing(Apple::getWeoght))\n    .reversed()\n    .thenComparing(Apple::getCountry)\n// 2.è°è¯å¤åãandåoræ¯æç§å¨è¡¨è¾¾å¼é¾ä¸­çä½ç½®ä»å·¦åå³ç¡®å®ä¼åçº§çãa.or(b).and(c)å¯ä»¥çå(a || b) && c\nPredicate<Apple> redAndHeavyAppleOrGreen = redApple.and(a -> a.getWeight() > 150)\n\t\t\t\t\t\t\t\t\t\t\t.or(a -> "green".equals(a.getColor()));\n// 3.å½æ°å¤åã\nFunction<Integer, Integer> f = x -> x + 1;\nFunction<Integer, Integer> g = x -> x * 2;\nFunction<Integer, Integer> h = f.andThen(g); //æ°å­¦ä¸åä½g(f(x))\nFunction<Integer, Integer> h = f.compose(g); //æ°å­¦ä¸åä½f(g(x))\nint result = h.apply(1);\n\n\n\n# 3.å¼å¥æµ\n\næµï¼ä»æ¯ææ°æ®å¤çæä½çæºçæçåç´ åºåãæµåªè½æ¶è´¹ä¸æ¬¡ä¸æ¯æéè®¡ç®çã\n\n * åç´ åºåï¼è®¿é®ç¹å®åç´ ç±»åçä¸ç»æåºå¼ ï¼éåè®²çæ¯æ°æ®ï¼æµè®²çæ¯è®¡ç® ã\n * æºï¼ä»æåºéåçææµæ¶ä¼ä¿çåæçé¡ºåºãç±åè¡¨çæçæµï¼å¶åç´ é¡ºåºä¸åè¡¨ä¸è´ã\n * æ°æ®å¤çæä½ï¼æµæä½å¯ä»¥é¡ºåºæ§è¡ï¼ä¹å¯å¹¶è¡æ§è¡ ã\n * æµæ°´çº¿ï¼å¾å¤æµæä½æ¬èº«ä¼è¿åä¸ä¸ªæµ ï¼æµæ°´çº¿çæä½å¯ä»¥çä½å¯¹æ°æ®æºè¿è¡æ°æ®åºå¼æ¥è¯¢ã\n * åé¨è¿­ä»£ï¼æµçè¿­ä»£æä½æ¯å¨èåè¿è¡çã Streamsåºçåé¨è¿­ä»£å¯ä»¥èªå¨éæ©ä¸ç§éåä½ ç¡¬ä»¶çæ°æ®è¡¨ç¤ºåå¹¶è¡å®ç°ã\n\n\n# 3.1 æµæä½\n\nå¯ä»¥è¿æ¥èµ·æ¥çæµæä½ç§°ä¸ºä¸­é´æä½ï¼å³é­æµçæä½ç§°ä¸ºæä½ã æµçæµæ°´çº¿çå¿µç±»ä¼¼äºå»ºé èæ¨¡å¼ã\n\n\n# 3.1.1 ä¸­é´æä½\n\nä¸­é´æä½ä¼è¿åå¦ä¸ä¸ªæµãé¤éæµæ°´çº¿ä¸è§¦åä¸ä¸ªç»ç«¯æä½ï¼å¦åä¸­é´æä½ä¸ä¼æ§è¡ä»»ä½å¤çï¼å ä¸ºä¸­é´æä½ä¸è¬é½å¯ä»¥åå¹¶èµ·æ¥ï¼å¨ç»ç«¯æä½æ¶ä¸æ¬¡æ§å¨é¨å¤çã\n\n\n# 3.1.2 ç»ç«¯æä½\n\nç»ç«¯æä½ä¼ä»æµçæµæ°´çº¿çæç»æãå¶ç»ææ¯ä»»ä½ä¸æ¯æµçå¼ï¼æ¯å¦Listã Integerï¼çè³voidã\n\n\n# 4.ä½¿ç¨æµ\n\n\n# 4.1 ç­éååç\n\nfilter\n\n\n# 4.2 æ å°\n\nmapãflatMap\n\n\n# 4.3 æ¥æ¾åå¹é\n\nallMatchãanyMatchãnoneMatchãfindFirstãfindAny\n\n\n# 4.4 å½çº¦\n\nreduce\n\n> å½çº¦æ¹æ³çä¼å¿ä¸å¹¶è¡å\n> \n> ç¸æ¯äºéæ­¥è¿­ä»£ï¼ä½¿ç¨reduceçå¥½å¤å¨äºï¼è¿éçè¿­ä»£è¢«åé¨è¿­ä»£æ½è±¡åäºï¼è¿è®©åé¨å®ç°å¾ä»¥éæ©å¹¶è¡æ§è¡reduceæä½ãèè¿­ä»£å¼æ±åä¾å­è¦æ´æ°å±äº«åésumï¼è¿ä¸æ¯é£ä¹å®¹æå¹¶è¡åçãå¦æä½ å å¥äºåæ­¥ï¼å¾å¯è½ä¼åç°çº¿ç¨ç«äºæ¶äºå¹¶è¡æ¬åºå¸¦æ¥ç æ§è½æåãè¿ç§è®¡ç®çå¹¶è¡åéè¦å¦ä¸ç§åæ³æ³ï¼å°è¾å¥ååï¼ååæ±åï¼æååå¹¶èµ·æ¥ãä½è¿æ ·çä»£ç çèµ·æ¥å°±å®å¨ä¸ä¸æ ·äºãä½è¦å¹¶è¡æ§è¡éè¦ä»£ä»·ï¼ä¼ éç»reduceçLambdaä¸è½æ´æ¹ç¶æï¼å¦å®ä¾åéï¼ï¼èä¸æä½å¿é¡»æ»¡è¶³ç»åå¾æå¯ä»¥æä»»æé¡ºåºæ§è¡ã\n\n\n# 4.5 åå§ç±»åæµç¹å\n\nä¸ºäºé¿åæè£ç®±æä½å¸¦æ¥çæ§è½æèï¼Java8å¼å¥äºä¸ä¸ªåå§ç±»åç¹åæµæ¥å£ï¼Optionalä¹æï¼æ¥è§£å³è¿ä¸ªé®é¢ï¼IntStreamãDoubleStreamåLongStreamã\n\n\n# 4.6 åå»ºæµ\n\n//ç±å¼åå»ºæµ\nStream<String> stream = Stream.of("Java 8 ", "Lambdas ", "In ", "Action");\nStream<String> emptyStream = Stream.empty();\n//ç±æ°ç»åå»ºæµ\nint[] numbers = {2, 3, 5, 7, 11, 13};\nint sum = Arrays.stream(numbers).sum();\n//ç±å½æ°çææµ\nStream.iterate(new int[]{0, 1},t -> new int[]{t[1],t[0] + t[1]})\n.limit(10)\n.map(t -> t[0])\n.forEach(System.out::println);\n// ===ç¸æ¯äºiterateï¼generateæ¯æç¶æç\nIntSupplier fib = new IntSupplier(){\nprivate int previous = 0;\nprivate int current = 1;\npublic int getAsInt(){\nint oldPrevious = this.previous;\nint nextValue = this.previous + this.current;\nthis.previous = this.current;\nthis.current = nextValue;\nreturn oldPrevious;\n}\n};\nIntStream.generate(fib).limit(10).forEach(System.out::println);\n//=====\n\n\n\n# 5.ç¨æµæ¶éæ°æ®\n\n\n# 5.1 Collectorsé¢å®ä¹æ¶éå¨\n\n * Collectors.countingè®¡æ°\n * Collectors.max(min)By æ¥æ¾æå¤§å¼åæå°å¼\n * Collectors.summingIntï¼Collectors.averagingInt(Long|Double)æ±æ»\n * Collectors.summarizingInt(Long|Double)ä¸æ¬¡æ§åæ»åãå¹³åå¼ãæå¤§å¼åæå°å¼\n * Collectors.joining(å¯éåéç¬¦)è¿æ¥å­ç¬¦ä¸²\n\n\n# 5.2 å¹¿ä¹çå½çº¦æ±æ»\n\nCollectors.reducingï¼ææµä¸­çç¬¬ä¸ä¸ªé¡¹ç®ä½ä¸ºèµ·ç¹ï¼ææç­å½æ°ï¼å³ä¸ä¸ªå½æ°ä»ä»æ¯è¿åå¶è¾å¥åæ°ï¼ä½ä¸ºä¸ä¸ªè½¬æ¢å½æ°ãæ³¨æå¯è½ä¼è¿ånullã\n\n> æ¶éä¸å½çº¦\n> \n> reduceæ¹æ³æ¨å¨æä¸¤ä¸ªå¼ç»åèµ·æ¥çæä¸ä¸ªæ°å¼ï¼æ¯ä¸ä¸ªä¸å¯åçå½çº¦ãcollectæ¯æ¹åå®¹å¨ä»èç´¯ç§¯è¦è¾åºçç»æã\n\n\n# 5.3 åç»\n\n * ä¸çº§åç»ãgroupingBy(f)ï¼fæ¯åç±»å½æ°å®éä¸æ¯groupingBy(f, toList())çç®ä¾¿åæ³\n * nçº§åç»ï¼å¯ä»¥å°collectorç±»åä¼ éç»åä¸ä¸ªgroupingByçç¬¬äºä¸ªåæ°ï¼ä»¥æ­¤ç±»æ¨ã\n * æå­ç»æ¶éæ°æ®ï¼groupingByçç¬¬äºä¸ªæ¶éå¨å¯ä»¥æ¯ä»»ä½ç±»å\n * ææ¶éå¨çç»æè½¬æ¢ä¸ºå¦ä¸ç§ç±»åãCollectors.collectingAndThen\n * mapping\n\n\n# 5.4 ååº\n\npartitioningByååºæ¯åç»çç¹æ®æåµï¼ç±ä¸ä¸ªè°è¯ä½ä¸ºåç±»å½æ°ï¼ä»ç§°ä¸ºååºå½æ°ã\n\n\n# 5.5 æ¶éå¨æ¥å£\n\npackage java.util.stream;\n\nimport java.util.Collections;\nimport java.util.EnumSet;\nimport java.util.Objects;\nimport java.util.Set;\nimport java.util.function.BiConsumer;\nimport java.util.function.BinaryOperator;\nimport java.util.function.Function;\nimport java.util.function.Supplier;\n\n// A compilation test for the code snippets in this class-level javadoc can be found at:\n// test/jdk/java/util/stream/test/org/openjdk/tests/java/util/stream/CollectorExample.java\n// The test needs to be updated if the examples in this javadoc change or new examples are added.\n\n/**\n * A <a href="package-summary.html#Reduction">mutable reduction operation</a> that\n * accumulates input elements into a mutable result container, optionally transforming\n * the accumulated result into a final representation after all input elements\n * have been processed.  Reduction operations can be performed either sequentially\n * or in parallel.\n *\n * <p>Examples of mutable reduction operations include:\n * accumulating elements into a {@code Collection}; concatenating\n * strings using a {@code StringBuilder}; computing summary information about\n * elements such as sum, min, max, or average; computing "pivot table" summaries\n * such as "maximum valued transaction by seller", etc.  The class {@link Collectors}\n * provides implementations of many common mutable reductions.\n *\n * <p>A {@code Collector} is specified by four functions that work together to\n * accumulate entries into a mutable result container, and optionally perform\n * a final transform on the result.  They are: <ul>\n *     <li>creation of a new result container ({@link #supplier()})</li>\n *     <li>incorporating a new data element into a result container ({@link #accumulator()})</li>\n *     <li>combining two result containers into one ({@link #combiner()})</li>\n *     <li>performing an optional final transform on the container ({@link #finisher()})</li>\n * </ul>\n *\n * <p>Collectors also have a set of characteristics, such as\n * {@link Characteristics#CONCURRENT}, that provide hints that can be used by a\n * reduction implementation to provide better performance.\n *\n * <p>A sequential implementation of a reduction using a collector would\n * create a single result container using the supplier function, and invoke the\n * accumulator function once for each input element.  A parallel implementation\n * would partition the input, create a result container for each partition,\n * accumulate the contents of each partition into a subresult for that partition,\n * and then use the combiner function to merge the subresults into a combined\n * result.\n *\n * <p>To ensure that sequential and parallel executions produce equivalent\n * results, the collector functions must satisfy an <em>identity</em> and an\n * <a href="package-summary.html#Associativity">associativity</a> constraints.\n *\n * <p>The identity constraint says that for any partially accumulated result,\n * combining it with an empty result container must produce an equivalent\n * result.  That is, for a partially accumulated result {@code a} that is the\n * result of any series of accumulator and combiner invocations, {@code a} must\n * be equivalent to {@code combiner.apply(a, supplier.get())}.\n *\n * <p>The associativity constraint says that splitting the computation must\n * produce an equivalent result.  That is, for any input elements {@code t1}\n * and {@code t2}, the results {@code r1} and {@code r2} in the computation\n * below must be equivalent:\n * <pre>{@code\n *     A a1 = supplier.get();\n *     accumulator.accept(a1, t1);\n *     accumulator.accept(a1, t2);\n *     R r1 = finisher.apply(a1);  // result without splitting\n *\n *     A a2 = supplier.get();\n *     accumulator.accept(a2, t1);\n *     A a3 = supplier.get();\n *     accumulator.accept(a3, t2);\n *     R r2 = finisher.apply(combiner.apply(a2, a3));  // result with splitting\n * } </pre>\n *\n * <p>For collectors that do not have the {@code UNORDERED} characteristic,\n * two accumulated results {@code a1} and {@code a2} are equivalent if\n * {@code finisher.apply(a1).equals(finisher.apply(a2))}.  For unordered\n * collectors, equivalence is relaxed to allow for non-equality related to\n * differences in order.  (For example, an unordered collector that accumulated\n * elements to a {@code List} would consider two lists equivalent if they\n * contained the same elements, ignoring order.)\n *\n * <p>Libraries that implement reduction based on {@code Collector}, such as\n * {@link Stream#collect(Collector)}, must adhere to the following constraints:\n * <ul>\n *     <li>The first argument passed to the accumulator function, both\n *     arguments passed to the combiner function, and the argument passed to the\n *     finisher function must be the result of a previous invocation of the\n *     result supplier, accumulator, or combiner functions.</li>\n *     <li>The implementation should not do anything with the result of any of\n *     the result supplier, accumulator, or combiner functions other than to\n *     pass them again to the accumulator, combiner, or finisher functions,\n *     or return them to the caller of the reduction operation.</li>\n *     <li>If a result is passed to the combiner or finisher\n *     function, and the same object is not returned from that function, it is\n *     never used again.</li>\n *     <li>Once a result is passed to the combiner or finisher function, it\n *     is never passed to the accumulator function again.</li>\n *     <li>For non-concurrent collectors, any result returned from the result\n *     supplier, accumulator, or combiner functions must be serially\n *     thread-confined.  This enables collection to occur in parallel without\n *     the {@code Collector} needing to implement any additional synchronization.\n *     The reduction implementation must manage that the input is properly\n *     partitioned, that partitions are processed in isolation, and combining\n *     happens only after accumulation is complete.</li>\n *     <li>For concurrent collectors, an implementation is free to (but not\n *     required to) implement reduction concurrently.  A concurrent reduction\n *     is one where the accumulator function is called concurrently from\n *     multiple threads, using the same concurrently-modifiable result container,\n *     rather than keeping the result isolated during accumulation.\n *     A concurrent reduction should only be applied if the collector has the\n *     {@link Characteristics#UNORDERED} characteristics or if the\n *     originating data is unordered.</li>\n * </ul>\n *\n * <p>In addition to the predefined implementations in {@link Collectors}, the\n * static factory methods {@link #of(Supplier, BiConsumer, BinaryOperator, Characteristics...)}\n * can be used to construct collectors.  For example, you could create a collector\n * that accumulates widgets into a {@code TreeSet} with:\n *\n * <pre>{@code\n *     Collector<Widget, ?, TreeSet<Widget>> intoSet =\n *         Collector.of(TreeSet::new, TreeSet::add,\n *                      (left, right) -> { left.addAll(right); return left; });\n * }</pre>\n *\n * (This behavior is also implemented by the predefined collector\n * {@link Collectors#toCollection(Supplier)}).\n *\n * @apiNote\n * Performing a reduction operation with a {@code Collector} should produce a\n * result equivalent to:\n * <pre>{@code\n *     A container = collector.supplier().get();\n *     for (T t : data)\n *         collector.accumulator().accept(container, t);\n *     return collector.finisher().apply(container);\n * }</pre>\n *\n * <p>However, the library is free to partition the input, perform the reduction\n * on the partitions, and then use the combiner function to combine the partial\n * results to achieve a parallel reduction.  (Depending on the specific reduction\n * operation, this may perform better or worse, depending on the relative cost\n * of the accumulator and combiner functions.)\n *\n * <p>Collectors are designed to be <em>composed</em>; many of the methods\n * in {@link Collectors} are functions that take a collector and produce\n * a new collector.  For example, given the following collector that computes\n * the sum of the salaries of a stream of employees:\n *\n * <pre>{@code\n *     Collector<Employee, ?, Integer> summingSalaries\n *         = Collectors.summingInt(Employee::getSalary))\n * }</pre>\n *\n * If we wanted to create a collector to tabulate the sum of salaries by\n * department, we could reuse the "sum of salaries" logic using\n * {@link Collectors#groupingBy(Function, Collector)}:\n *\n * <pre>{@code\n *     Collector<Employee, ?, Map<Department, Integer>> summingSalariesByDept\n *         = Collectors.groupingBy(Employee::getDepartment, summingSalaries);\n * }</pre>\n *\n * @see Stream#collect(Collector)\n * @see Collectors\n *\n * @param <T> the type of input elements to the reduction operation\n * @param <A> the mutable accumulation type of the reduction operation (often\n *            hidden as an implementation detail)\n * @param <R> the result type of the reduction operation\n * @since 1.8\n */\npublic interface Collector<T, A, R> {\n    /**\n     * åå»ºå¹¶è¿åæ°çå¯åç»æå®¹å¨çå½æ°ã\n     * è¿åå¼ï¼è¿åæ°çå¯åç»æå®¹å¨çå½æ°\n     */\n    Supplier<A> supplier();\n\n    /**\n     * A function that folds a value into a mutable result container.\n     *\n     * @return a function which folds a value into a mutable result container\n     */\n    BiConsumer<A, T> accumulator();\n\n    /**\n     * A function that accepts two partial results and merges them.  The\n     * combiner function may fold state from one argument into the other and\n     * return that, or may return a new result container.\n     *\n     * @return a function which combines two partial results into a combined\n     * result\n     */\n    BinaryOperator<A> combiner();\n\n    /**\n     * Perform the final transformation from the intermediate accumulation type\n     * {@code A} to the final result type {@code R}.\n     *\n     * <p>If the characteristic {@code IDENTITY_FINISH} is\n     * set, this function may be presumed to be an identity transform with an\n     * unchecked cast from {@code A} to {@code R}.\n     *\n     * @return a function which transforms the intermediate result to the final\n     * result\n     */\n    Function<A, R> finisher();\n\n    /**\n     * Returns a {@code Set} of {@code Collector.Characteristics} indicating\n     * the characteristics of this Collector.  This set should be immutable.\n     *\n     * @return an immutable set of collector characteristics\n     */\n    Set<Characteristics> characteristics();\n\n    /**\n     * Returns a new {@code Collector} described by the given {@code supplier},\n     * {@code accumulator}, and {@code combiner} functions.  The resulting\n     * {@code Collector} has the {@code Collector.Characteristics.IDENTITY_FINISH}\n     * characteristic.\n     *\n     * @param supplier The supplier function for the new collector\n     * @param accumulator The accumulator function for the new collector\n     * @param combiner The combiner function for the new collector\n     * @param characteristics The collector characteristics for the new\n     *                        collector\n     * @param <T> The type of input elements for the new collector\n     * @param <R> The type of intermediate accumulation result, and final result,\n     *           for the new collector\n     * @throws NullPointerException if any argument is null\n     * @return the new {@code Collector}\n     */\n    public static<T, R> Collector<T, R, R> of(Supplier<R> supplier,\n                                              BiConsumer<R, T> accumulator,\n                                              BinaryOperator<R> combiner,\n                                              Characteristics... characteristics) {\n        Objects.requireNonNull(supplier);\n        Objects.requireNonNull(accumulator);\n        Objects.requireNonNull(combiner);\n        Objects.requireNonNull(characteristics);\n        Set<Characteristics> cs = (characteristics.length == 0)\n                                  ? Collectors.CH_ID\n                                  : Collections.unmodifiableSet(EnumSet.of(Collector.Characteristics.IDENTITY_FINISH,\n                                                                           characteristics));\n        return new Collectors.CollectorImpl<>(supplier, accumulator, combiner, cs);\n    }\n\n    /**\n     * Returns a new {@code Collector} described by the given {@code supplier},\n     * {@code accumulator}, {@code combiner}, and {@code finisher} functions.\n     *\n     * @param supplier The supplier function for the new collector\n     * @param accumulator The accumulator function for the new collector\n     * @param combiner The combiner function for the new collector\n     * @param finisher The finisher function for the new collector\n     * @param characteristics The collector characteristics for the new\n     *                        collector\n     * @param <T> The type of input elements for the new collector\n     * @param <A> The intermediate accumulation type of the new collector\n     * @param <R> The final result type of the new collector\n     * @throws NullPointerException if any argument is null\n     * @return the new {@code Collector}\n     */\n    public static<T, A, R> Collector<T, A, R> of(Supplier<A> supplier,\n                                                 BiConsumer<A, T> accumulator,\n                                                 BinaryOperator<A> combiner,\n                                                 Function<A, R> finisher,\n                                                 Characteristics... characteristics) {\n        Objects.requireNonNull(supplier);\n        Objects.requireNonNull(accumulator);\n        Objects.requireNonNull(combiner);\n        Objects.requireNonNull(finisher);\n        Objects.requireNonNull(characteristics);\n        Set<Characteristics> cs = Collectors.CH_NOID;\n        if (characteristics.length > 0) {\n            cs = EnumSet.noneOf(Characteristics.class);\n            Collections.addAll(cs, characteristics);\n            cs = Collections.unmodifiableSet(cs);\n        }\n        return new Collectors.CollectorImpl<>(supplier, accumulator, combiner, finisher, cs);\n    }\n\n    /**\n     * Characteristics indicating properties of a {@code Collector}, which can\n     * be used to optimize reduction implementations.\n     */\n    enum Characteristics {\n        /**\n         * Indicates that this collector is <em>concurrent</em>, meaning that\n         * the result container can support the accumulator function being\n         * called concurrently with the same result container from multiple\n         * threads.\n         *\n         * <p>If a {@code CONCURRENT} collector is not also {@code UNORDERED},\n         * then it should only be evaluated concurrently if applied to an\n         * unordered data source.\n         */\n        CONCURRENT,\n\n        /**\n         * Indicates that the collection operation does not commit to preserving\n         * the encounter order of input elements.  (This might be true if the\n         * result container has no intrinsic order, such as a {@link Set}.)\n         */\n        UNORDERED,\n\n        /**\n         * Indicates that the finisher function is the identity function and\n         * can be elided.  If set, it must be the case that an unchecked cast\n         * from A to R will succeed.\n         */\n        IDENTITY_FINISH\n    }\n}\n\n\n\n * Tæ¯æµä¸­è¦æ¶éçé¡¹ç®çæ³å\n * Aæ¯ç´¯å å¨çç±»åï¼ç´¯å å¨æ¯å¨æ¶éè¿ç¨ä¸­ç¨äºç´¯ç§¯é¨åç»æçå¯¹è±¡\n * Ræ¯æ¶éæä½å¾å°çå¯¹è±¡çç±»å\n * characteristicsæ¹æ³æä¾äºä¸ç³»åç¹å¾ï¼åè¯collectæ¹æ³å¨æ§è¡å½çº¦æä½çæ¶åå¯ä»¥åºç¨åªäºä¼åï¼å¦å¹¶è¡åã\n\n\n# 5.5.1 supplierå»ºç«æ°çç»æå®¹å¨\n\nè¯¥æ¹æ³è¿åä¸ä¸ªç»æä¸ºç©ºçsupplierï¼ä¹å°±æ¯ä¸ä¸ªæ åå½æ°ï¼å¨è°ç¨æ¯å®ä¼åå»ºä¸ä¸ªç©ºçç´¯å å¨å®ä¾ï¼ä¾æ°æ®æ¶éè¿ç¨ä½¿ç¨ï¼æä»¥ï¼å¨å¯¹ç©ºæµæ§è¡æä½çæ¶åï¼è¿ä¸ªç©ºçç´¯å å¨ä¹ä»£è¡¨äºæ¶éè¿ç¨çç»æã\n\n\n# 5.5.2 accumulatorå°åç´ æ·»å å°ç»æå®¹å¨\n\nè¯¥æ¹æ³è¿åæ§è¡å½çº¦æä½çå½æ°ãè¯¥å½æ°è¿åvoidï¼å ä¸ºç´¯å å¨æ¯åä½æ´æ°ï¼å³å½æ°çæ§è¡æ¹åäºå®çåé¨ç¶æä»¥ä½ç°ä¾¿å©åç´ çææã\n\n\n# 5.5.3 finisherå¯¹ç»æå®¹å¨åºç¨æç»è½¬æ¢\n\nè¯¥æ¹æ³å¿é¡»è¿åå¨ç´¯ç§¯è¿ç¨çæåè¦è°ç¨çä¸ä¸ªå½æ°ï¼ä»¥ä¾¿å°ç´¯å å¨å¯¹è±¡è½¬æ¢ä¸ºæ´ä¸ªéåæä½çæç»ç»æãå¦æç»ææ éè½¬æ¢ï¼ååªéè¿åidentityå½æ°\n\n\n\n\n# 5.5.4 combineråå¹¶ä¸¤ä¸ªç»æå®¹å¨\n\nè¯¥æ¹æ³è¿åä¸ä¸ªä¾å½çº¦æä½ä½¿ç¨çå½æ°ï¼å®å®ä¹äºå¯¹æµçåä¸ªå­é¨åè¿è¡å¹¶è¡å¤çæ¶ï¼åä¸ªå­é¨åå½çº¦æå¾çç´¯å å¨è¦å¦ä½åå¹¶ãå¯¹äºtoListèè¨ï¼åªæ¯ç®åçæä»æµçç¬¬äºä¸ªé¨åæ¶éå°çé¡¹ç®åè¡¨æ·»å å°éåç¬¬ä¸é¨åæ¶å¾å°çåè¡¨åé¢\n\npublic static <T> Collector<T, ?, List<T>> toList() {\n     return new CollectorImpl<>((Supplier<List<T>>) ArrayList::new, List::add,\n                                   (left, right) -> { left.addAll(right); return left; },CH_ID);\n}\n\n\nè¯¥æ¹æ³ä¼ç¨å°Java7ä¸­å¼å¥çåæ¯/åå¹¶æ¡æ¶åSpliteratoræ½è±¡ã\n\n\n# 5.5.5 characteristicsæ¹æ³\n\nè¯¥æ¹æ³å¯ä»¥æç¤ºæµæ¯å¦å¯ä»¥è¿è¡å½çº¦ä»¥åå¯ä½¿ç¨çä¼åã\n\n * UNORDERED--å½çº¦ç»æä¸åæµä¸­é¡¹ç®çéååç´¯ç§¯é¡ºåºçå½±å\n\n * CONCUNRRENT--accumulatorå½æ°å¯ä»¥ä»å¤ä¸ªçº¿ç¨åæ¶è°ç¨ï¼ä¸æ¶éå¨å¯ä»¥å¹¶è¡å½çº¦æµï¼å¦ææ¶éå¨æ²¡ææ ä¸ºUNORDEREDï¼å®ä»å¨ç¨äºæ åºæ°æ®æºæ¶æå¯ä»¥è¿è¡å½çº¦\n\n * IDENTITY_FINISH--è¿è¡¨æå®æå¨æ¹æ³è¿åçå½æ°æ¯ä¸ä¸ªæç­å½æ°ï¼å¯ä»¥è·³è¿ã\n\n\n# 5.5.6 èªå®ä¹æ¶é\n\nå¯¹äºIDENTITY_FINISHçæ¶éæä½ï¼Streamæä¸ä¸ªéè½½çcollectæ¹æ³æ¥åä¸ä¸ªå½æ°ï¼supplier,accumulator,combinerï¼ãæä»¬ä¹å¯ä»¥éè¿å®ç°collectoræ¥å£å®ä¹èªå·±çæ¶éå¨ã\n\n\n# 6.å¹¶è¡æ°æ®å¤çä¸æ§è½\n\nStreamçå¹¶è¡æµåé¨ä½¿ç¨æµFork/Joinæ¡æ¶ã\n\n\n# 6.1 å°é¡ºåºæµè½¬æ¢ä¸ºå¹¶è¡æµ\n\nparallelä¼å°é¡ºåºæµè½¬åä¸ºå¹¶è¡æµãä½è¿ä¸ä»£è¡¨æµæ¬èº«åçäºååï¼åªæ¯å¨åé¨è®¾ç½®æµä¸ä¸ªbooleanæ å¿ï¼è¡¨ç¤ºå¨è°ç¨è¯¥æ¹æ³åçæææä½é½å¹¶è¡æ§è¡ãåæ ·çï¼å¯ä»¥ç¨sequentialæ¹æ³ææµåä¸ºé¡ºåºæµï¼ä½æ¯å¦æå°è¿ä¸ªä¸¤ä¸ªæ¹æ³ç»åæ¶ï¼ä¼ä»¥æåä¸æ¬¡è°ç¨çä¸ºåã\n\n> éç½®å¹¶è¡æµä½¿ç¨ççº¿ç¨æ± \n> \n> å¹¶è¡æµåé¨ä½¿ç¨æµé»è®¤çForkJoinPoolï¼å®é»è®¤ççº¿ç¨æ°éå°±æ¯å¤çå¨æ°éï¼ç±Runtime.getRuntime().availableProcessors()è·å(å®éè¿åçæ¯å¯ç¨åæ ¸çæ°éï¼åæ¬è¶çº¿ç¨çæçèæåæ ¸)ã\n> \n> ä½æ¯ä¹å¯ä»¥èªå®ä¹System.setProperty("java.util.concurrent.ForkJoinPool.common.parallelism","æ°é")ï¼æ³¨æè¿æ¯ä¸ä¸ªå¨å±è®¾ç½®ï¼å®å°å½±åææå¹¶è¡æµã\n\n\n# 6.2 æ­£ç¡®ä½¿ç¨å¹¶è¡\n\nimport java.util.stream.*;\n\npublic class ParallelStreams {\n\n    public static long iterativeSum(long n) {\n        long result = 0;\n        for (long i = 0; i <= n; i++) {\n            result += i;\n        }\n        return result;\n    }\n\n    public static long sequentialSum(long n) {\n        return Stream.iterate(1L, i -> i + 1).limit(n).reduce(Long::sum).get();\n    }\n\n    public static long parallelSum(long n) {\n        return Stream.iterate(1L, i -> i + 1).limit(n).parallel().reduce(Long::sum).get();\n    }\n\n    public static long rangedSum(long n) {\n        return LongStream.rangeClosed(1, n).reduce(Long::sum).getAsLong();\n    }\n\n    public static long parallelRangedSum(long n) {\n        return LongStream.rangeClosed(1, n).parallel().reduce(Long::sum).getAsLong();\n    }\n\n    public static long sideEffectSum(long n) {\n        Accumulator accumulator = new Accumulator();\n        LongStream.rangeClosed(1, n).forEach(accumulator::add);\n        return accumulator.total;\n    }\n\n    public static long sideEffectParallelSum(long n) {\n        Accumulator accumulator = new Accumulator();\n        LongStream.rangeClosed(1, n).parallel().forEach(accumulator::add);\n        return accumulator.total;\n    }\n\n    public static class Accumulator {\n        private long total = 0;\n\n        public void add(long value) {\n            total += value;\n        }\n    }\n}\n\npackage chl;\n\n//===============================================================================================\n\nimport java.util.function.Function;\n\npublic class MyParallelStreams {\n    public static long measureSumPerf(Function<Long, Long> adder, long n) {\n        long fastest = Long.MAX_VALUE;\n        for (int i = 0; i < 10; i++) {\n            long start = System.nanoTime();\n            long sum = adder.apply(n);\n            long duration = (System.nanoTime() - start) / 1000000;\n            System.out.println("Result:" + sum);\n            if (duration < fastest) fastest = duration;\n        }\n        return fastest;\n    }\n\n    public static void main(String[] args) {\n        System.out.println("èæ¶:" + measureSumPerf(ParallelStreams::sideEffectParallelSum, 10000000));\n    }\n}\n\n\n\nè¦ç¡®ä¿å¹¶è¡æ­£ç¡®æ§è¡å¿é¡»ä¿è¯ä¸å­å¨å±äº«çå¯åç¶æã\n\n * æµéãææ¶åå¹¶è¡æµå¹¶ä¸ä¸å®æ¯é¡ºåºæµå¿«ã\n * æ³¨æè£ç®±ãèªå¨è£ç®±åæç®±æä½ä¼å¤§å¤§éä½æ§è½ï¼è¿æ¶åå¯ä»¥ä½¿ç¨åå§ç±»åæµã\n * æäºæä½å¨å¹¶è¡æµä¸çæ§è½æ¯é¡ºåºæµå·®ãç¹å«æ¯limitåfindFirstç­ä¾èµäºåç´ é¡ºåºçæä½ãå¦æä¸ä¾èµé¡ºåºï¼å¯ä»¥è°ç¨unorderedæ¹æ³ææåºæµåææ åºæµã\n * å¦æä¸ä¸ªåç´ éè¿æµæ°´çº¿çå¤çææ¬é«ï¼é£ä¹ä½¿ç¨å¹¶è¡æµæ¶æ§è½å¥½çå¯è½æ§æ¯è¾å¤§ã\n * å¯¹äºè¾å°çæ°æ®éï¼éæ©å¹¶è¡æµå¹¶ä¸çä¼åçº§å¹¶ä¸é«ï¼å ä¸ºå¹¶è¡åï¼åéçº¿ç¨ç­èµæºï¼çå¼éæ´é«ã\n * èèæµèåçæ°æ®ç»ææ¯å¦æäºåè§£ãå¯ä»¥èªå®ä¹Spliteratoræ¥æ§å¶åè§£è¿ç¨ã\n * æµèªèº«çç¹ç¹ä»¥åæµæ°´çº¿ä¸­çä¸­é´æä½ä¿®æ¹æµçæ¹æ³ï¼é½å¯è½ä¼æ¹ååè§£è¿ç¨çæ§è½ãä¸ä¸ªå·²ç¥å¤§å°çæµæ¯æªç¥çæ´å¥½æåã\n * è¿è¦èèç»ç«¯æä½ä¸­åå¹¶æ­¥éª¤çä»£ä»·æ¯å¤§æ¯å°ï¼å¦æè¿ä¸æ­¥ä»£ä»·å¾å¤§ï¼é£ä¹ç»åæ¯ä¸ªå­æµçé¨åç»ææäº§çççä»£ä»·å°±å¯è½ä¼è¶åºéè¿å¹¶è¡æµå¾å°çæ§è½æåã\n\næµçæ°æ®æºå¯åè§£æ§\n\næº                 å¯åè§£æ§\nArrayList         æä½³\nLinkedList        å·®\nIntStream.range   æä½³\nStream.iterate    å·®\nHashSet           å¥½\nTreeSet           å¥½\n\n\n# 6.3 Fork/Joinæ¡æ¶\n\n\n# 6.3.1 RecursiveTask\n\npublic abstract class RecursiveTask<V> extends ForkJoinTask<V> {\n    private static final long serialVersionUID = 5232453952276485270L;\n\n    @SuppressWarnings("serial") \n    V result;\n\n    protected abstract V compute();\n\n    public final V getRawResult() {\n        return result;\n    }\n\n    protected final void setRawResult(V value) {\n        result = value;\n    }\n\n    protected final boolean exec() {\n        result = compute();\n        return true;\n    }\n\n}\n\n\n\n\n\n> ä½¿ç¨å¤ä¸ªForkJoinPoolæ¯æ²¡ææä¹çï¼ä¸è¬æå®å®ä¾åä¸æ¬¡ï¼ç¶åæå®ä¾ä¿å­å¨éæå­æ®µä¸­ï¼ä½¿ä¹ç§°ä¸ºåä¾ï¼è¿æ ·å°±å¯ä»¥éç¨ã\n\n\n# 6.3.2 ä½¿ç¨Fork/Joinçæä½³åæ³\n\n * å¯¹ä¸ä¸ªä»»å¡è°ç¨joinæ¹æ³ä¼é»å¡è°ç¨æ¹ï¼ç´å°è¯¥ä»»å¡ååºç»æãå æ­¤ï¼æå¿è¦å¨ä¸¤ä¸ªå­ä»»å¡çè®¡ç®é½å¼å§ä¹ååè°ç¨å®ã\n\n * ä¸åºè¯¥å¨RecursiveTaskåé¨ä½¿ç¨ForkJoinPoolçinvokeæ¹æ³ãç¸åï¼åºå§ç»ç´æ¥è°ç¨computeæforkæ¹æ³ï¼åªæé¡ºåºä»£ç æåºè¯¥ç¨invokeæ¥å¯å¨å¹¶è¡è®¡ç®ã\n\n * å¯¹å­ä»»å¡è°ç¨forkæ¹æ³å¯ä»¥æå®æè¿ForkJoinPoolãåæ¶å¯¹å·¦è¾¹åå³è¾¹çå­ä»»å¡è°ç¨å®ä¼¼ä¹å¾èªç¶ï¼ä½è¿æ ·åçæçè¦æ¯ç´æ¥å¯¹å¶ä¸­ä¸ä¸ªè°ç¨computeä½ãè¿æ ·åå¯ä»¥ä¸ºå¶ä¸­ä¸ä¸ªå­ä»»å¡éç¨åä¸çº¿ç¨ï¼ä»èé¿åå¨çº¿ç¨æ± ä¸­å¤åéä¸ä¸ªä»»å¡é æçå¼éã\n\n * è°è¯ä½¿ç¨åæ¯/åå¹¶æ¡æ¶çå¹¶è¡è®¡ç®å¯è½æç¹æ£æãç¹å«æ¯ä½ å¹³å¸¸é½å¨ä½ åæ¬¢çIDEéé¢çæ è·è¸ªï¼ stack traceï¼æ¥æ¾é®é¢ï¼ä½æ¾å¨åæ¯åå¹¶è®¡ç®ä¸å°±ä¸è¡äºï¼å ä¸ºè°ç¨computeççº¿ç¨å¹¶ä¸æ¯æ¦å¿µä¸çè°ç¨æ¹ï¼åèæ¯è°ç¨forkçé£ä¸ªã\n\n * åå¹¶è¡æµä¸æ ·ï¼ä¸åºçæå½ç¶å°è®¤ä¸ºå¨å¤æ ¸å¤çå¨ä¸ä½¿ç¨åæ¯/åå¹¶æ¡æ¶å°±æ¯é¡ºåºè®¡ç®å¿«ãä¸ä¸ªä»»å¡å¯ä»¥åè§£æå¤ä¸ªç¬ç«çå­ä»»å¡ï¼æè½è®©æ§è½å¨å¹¶è¡åæ¶æææåãææè¿äºå­ä»»å¡çè¿è¡æ¶é´é½åºè¯¥æ¯ååºæ°ä»»å¡æè±çæ¶é´é¿ï¼ä¸ä¸ªæ¯ç¨æ¹æ³æ¯æè¾å¥/è¾åºæ¾å¨ä¸ä¸ªå­ä»»å¡éï¼è®¡ç®æ¾å¨å¦ä¸ä¸ªéï¼è¿æ ·è®¡ç®å°±å¯ä»¥åè¾å¥/è¾åºåæ¶è¿è¡ãæ­¤å¤ï¼å¨æ¯è¾åä¸ç®æ³çé¡ºåºåå¹¶è¡çæ¬çæ§è½æ¶è¿æå«çå ç´ è¦èèãå°±åä»»ä½å¶ä»Javaä»£ç ä¸æ ·ï¼åæ¯/åå¹¶æ¡æ¶éè¦âé¢ç­âæèè¯´è¦æ§è¡å éæä¼è¢«JITç¼è¯å¨ä¼åãåæ¶è¿è¦ç¥éï¼ç¼è¯å¨åç½®çä¼åå¯è½ä¼ä¸ºé¡ºåºçæ¬å¸¦æ¥ä¸äºä¼å¿ï¼ä¾å¦æ§è¡ä»£ç åæââå å»ä»æªè¢«ä½¿ç¨çè®¡ç®ï¼\n\n\n# 6.3.3 å·¥ä½çªå\n\nåºè¯¥è®©ååçå­ä»»å¡é½ç¨ç¸åçæ¶é´å®æï¼ä½æ¯ç±äºå¤é¨å ç´ ï¼å¦ååç­ç¥æçä½ãç£çè®¿é®æ¢ææ¯éè¦åå¤é¨æå¡åè°æ§è¡ï¼æ¯ä¸ªå­ä»»å¡æè±çæ¶é´ä¸å°½ç¸åãæ¡æ¶ä½¿ç¨ä¸ç§ç§°ä¸ºå·¥ä½çªåï¼work stealingï¼çææ¯è§£å³è¿ä¸ªé®é¢ã\n\n\n\n\n# 6.4 Spliteratorå¯åè¿­ä»£å¨\n\npublic interace Spliterator<T> {\n    /**\n     * æåºéåï¼å¦ææ²¡æåç´ åè¿åfalseï¼å¦åå¯¹åç´ æ§è¡ç»å®çæä½å¹¶è¿åtrue\n     */\n    boolean tryAdvance(Consumer<? super T> action);\n    \n    /**\n     * æåç´ ååºå»åç»ç¬¬äºä¸ªSpliterator,è®©ä»ä»¬å¹¶è¡å¤çï¼ç´å°è¿ånull\n     */\n    Spliterator<T> trySplit();\n    \n     /**\n     * è¿åforEachRemainingéåå°éå°çä¼°è®¡å¼ï¼å¦ææ éææ æ³è®¡ç®ï¼åè¿åLong.MAX_VALUE\n     */\n    long estimateSize();\n    \n    int characteristics();\n}\n\n\n\n# 6.4.1 æåè¿ç¨\n\n\n\nSpliteratorçç¹æ§\n\nç¹æ§           å«ä¹\nORDERED      åç´ ææ¢å®é¡ºåºï¼Spliteratorå¨éååååæ¶éµå¾ªè¿ä¸é¡ºåº\nDISTINCT     å¯¹äºä»»æä¸å¯¹éåè¿çåç´ xåyï¼x.equals(y)è¿åfalse\nSORTED       éåçåç´ æç§ä¸ä¸ªé¢å®ä¹çé¡ºåºæåº\nSIZED        è¯¥Spliteratorç±ä¸ä¸ªå·²ç¥å¤§å°çæºå»ºç«ï¼å æ­¤estimatedSize()è¿åçæ¯åç¡®å¼\nNONNULL      ä¿è¯éåçåç´ ä¸ä¼ä¸ºnull\nIMMUTABLE    æ°æ®æºä¸è½ä¿®æ¹\nCONCURRENT   æ°æ®æºå¯è¢«å¶ä»çº¿ç¨åæ¶ä¿®æ¹èæ éåæ­¥\nSUBSIZED     æææååºæ¥çSpliteratoré½æ¯SIZED\n\n\n# 6.4.2 èªå®ä¹Spliterator\n\n\n# 7. éæãæµè¯åè°è¯\n\n\n# 7.1 éæ\n\n\n# 7.1.1 ä½¿ç¨Lambdaæ¿æ¢å¿åç±»\n\néè¦æ³¨æçæ¯ï¼Lambdaä¸­çthisåsuperä»£è¡¨çæ¯åå«ç±»ï¼èå¿åç±»çä»£è¡¨å¿åç±»èªèº«ï¼å¿åç±»å¯ä»¥å±è½åå«ç±»çåéï¼èLambdaä¸è½ãå¦å¤ï¼å¨æ¶åéè½½çä¸ä¸æä¸­ï¼åºè¯¥ä½¿ç¨æ¾ç¤ºçç±»åè½¬æ¢æ¥åä½ç±»åæ¨æ­çé¾åº¦ã\n\n\n# 7.1.2 æ¹æ³å¼ç¨ä»£æ¿Lambda\n\n\n# 7.1.3 ä»å½ä»¤å¼çæ°æ®å¤çåæ¢å°Stream\n\n\n# 7.1.4éææ¨¡å¼\n\nææ¡ä»¶çå»¶è¿æ§è¡\n\nif (logger.isLoggable(Log.FINER)){\n\tlogger.finer("Problem: " + generateDiagnostic());\n}\n//ä½¿ç¨logæ¹æ³ä»£æ¿ä¸é¢çå¤æ­\npublic void log(Level level, Supplier<String> msgSupplier)\n\n\nå¦æéè¦é¢ç¹å°ä»å®¢æ·ç«¯å»æ¥è¯¢ä¸ä¸ªå¯¹è±¡çç¶æï¼æ¯å¦æ¥å¿å¨çç¶æï¼ï¼åªæ¯ä¸ºäºä¼ éåæ°ãè°ç¨è¯¥å¯¹è±¡çä¸ä¸ªæ¹æ³ï¼æ¯å¦è¾åºä¸æ¡æ¥å¿ï¼ï¼é£ä¹å¯ä»¥èèå®ç°ä¸ä¸ªæ°çæ¹æ³ï¼ä»¥Lambdaæèæ¹æ³è¡¨è¾¾å¼ä½ä¸ºåæ°ï¼ä»£ç ä¼æ´æè¯»ï¼å°è£æ§ä¼æ´å¥½ï¼å¯¹è±¡çç¶æä¹ä¸ä¼æ´é²ç»å®¢æ·ç«¯ä»£ç äºï¼ã\n\nç¯ç»æ§è¡\n\nLambdaä½ä¸ºåæ°ä¼ éï¼ç±»ä¼¼åé¢ã\n\n\n# 7.2 ä½¿ç¨Lambdaéæé¢åå¯¹è±¡çè®¾è®¡æ¨¡å¼\n\n\n# 7.2.1 ç­ç¥æ¨¡å¼\n\nå³é®ç¹ï¼å®ç°å½æ°å¼æ¥å£\n\n\n# 7.2.2 æ¨¡æ¿æ¹æ³\n\nå³é®ç¹ï¼æ¹æ³å¢å å½æ°å¼å¥å\n\n\n# 7.2.3 è§å¯èæ¨¡å¼\n\nå³é®ç¹ï¼Lambdaä»£æ¿éç¥æ¹æ³ï¼æ³¨æå¦æè§å¯èçé»è¾ååå¤æï¼æ¯å¦å®ä»¬å¯è½ææç¶æäº¦ææ¯å®ä¹äºå¤ä¸ªæ¹æ³ç­ï¼ååºç»§ç»­ä½¿ç¨ç±»çæ¹å¼ã\n\n\n# 7.2.4 è´£ä»»é¾æ¨¡å¼\n\nå³é®ç¹ï¼UnaryOperatorãandThen\n\n\n# 7.2.5 å·¥åæ¨¡å¼\n\nå³é®ç¹ï¼æé å½æ°å¥åä½äº2ä¸ªæ¶ï¼ä½¿ç¨æ¹æ³å¼ç¨...\n\n\n# 7.2 æµè¯Lambda\n\n\n# 7.3 è°è¯\n\npeekæ¹æ³ï¼\n\n\n# 8.é»è®¤æ¹æ³\n\nä¸åç±»åå¼å®¹æ§ï¼äºè¿å¶ãæºä»£ç ãåå½æ°è¡ä¸º\n\n * äºè¿å¶å¼å®¹ï¼ç°æçäºè¿å¶æ§è¡æä»¶è½æ ç¼é¾ï¼åæ¬éªè¯ãåå¤åè§£æï¼åè¿è¡ãæ¯å¦ï¼ä¸ºæ¥å£æ·»å ä¸ä¸ªæ¹æ³å°±æ¯äºè¿å¶å¼å®¹çï¼è¿ç§æ¹å¼ä¸ï¼å¦ææ°å çæ¹æ³ä¸è¢«è°ç¨ï¼æ¥å£å·²ç»å®ç°çæ¹æ³å¯ä»¥ç»§ç»­è¿è¡ï¼ä¸ä¼åºç°éè¯¯ã\n * æºä»£ç å¼å®¹ï¼å¼å¥åååï¼ç°æçç¨åºä¾ç¶è½æåç¼è¯éè¿ã\n * å½æ°è¡ä¸ºå¼å®¹ï¼åæ´åï¼ç¨åºæ¥ååæ ·çè¾å¥è½å¾å°åæ ·çç»æã\n\nè§£å³è±å½¢ç»§æ¿çä¸æ¡è§å\n\n * ç±»ä¸­çæ¹æ³ä¼åçº§æé«ãç±»æç¶ç±»ä¸­å£°æçæ¹æ³çä¼åçº§é«äºä»»ä½å£°æä¸ºé»è®¤æ¹æ³çä¼åçº§\n * å¦æç¬¬ä¸æ¡æ æ³å¤æ­ï¼é£ä¹å­æ¥å£çä¼åçº§æ´é«ãå½æ°ç­¾åç¸åæ¶ï¼ä¼åéæ©æ¥ææå·ä½å®ç°çé»è®¤æ¹æ³çæ¥å£ï¼å³å¦æBç»§æ¿äºAï¼é£ä¹Bå°±æ¯Aæ´å å·ä½\n * å¦æè¿æ¯æ æ³å¤æ­ï¼ç»§æ¿äºå¤ä¸ªæ¥å£çç±»å¿é¡»éè¿æ¾ç¤ºè¦çåè°ç¨ææçæ¹æ³\n\nJava8å¼å¥äºä¸ç§æ°è¯­æ³X.super.m(...)ï¼å¶ä¸­Xæ¯å¸æè°ç¨çmæ¹æ³æå¨çç¶æ¥å£ã\n\n\n# 9.Optional\n\nä½¿ç¨Optionalçè¯­ä¹å¨äºï¼å¯ä»¥å¾æ¸æ¥å°ç¥éå®å¯ä»¥æ¥åç©ºå¼ï¼æèå®å¯è½è¿åä¸ä¸ªç©ºå¼ã\n\nOptional.empty();\nOptional.of(...);\nOptional.ofNullable(...);\n//å¦æè¦å¤ççåç´ ä¸ºç©ºï¼åä¸åä»»ä½æä½,å¹¶è¿åä¸ä¸ªç©ºçOptionalå¯¹è±¡\nOptional.map(...);\nOptional.flatMap(...);\n\n\n\n> Optionalä¸è½è¢«åºååãJavaè¯­è¨çæ¶æå¸æç¡®å°è¯´è¿å®çè®¾è®¡åè¡·ä»ä»æ¯è¦æ¯æè½è¿åOptionalå¯¹è±¡çè¯­æ³ã\n\nOptional.get();\nOptional.orElse(T other);\nOptional.orElseGet(Supplier<? extends T> other);\nOptional.orElseThrow(Supplier<? extends X> exceptionSupplier);\nOptional.ifPresent(Consumer<? super T>);\nOptional.isPresent();\n\n\n\n# 10.CompletableFutureç»åå¼å¼æ­¥ç¼ç¨\n\nç¸æ¯äºå¹¶è¡æµï¼CompletableFutureçä¼å¿å¨äºå¯ä»¥éç½®çº¿ç¨æ± ä¸­ççº¿ç¨å¤§å°ã\n\n * å¦æè¿è¡çæ¯è®¡ç®å¯éåçæä½ï¼å¹¶ä¸æ²¡æI/Oï¼æ¨èä½¿ç¨Streamæ¥å£ã\n * å¦æå¹¶è¡çå·¥ä½ååè¿æ¶åç­å¾I/Oçæä½ï¼åæ¬ç½ç»è¿æ¥ç­å¾ï¼ï¼é£ä¹ä½¿ç¨CompletableFutureçµæ´»æ§æ´å¥½ã\n\n\n# 11.æ°çæ¥æAPI\n\n\n# 11.1 LocalDateåLocalTime\n\n\n# 11.2 Instant\n\nä¸ºäºä¾¿äºæºå¨ä½¿ç¨èè®¾è®¡\n\n\n# 11.3 DurationæPeriod\n\nDurationä¸»è¦ç¨äºä»¥ç§åçº³ç§è¡¡éæ¶é´çé¿ç­ï¼Periodå¯ä»¥ä»¥å¹´ãæææ¥çæ¹å¼å¯¹å¤ä¸ªæ¶é´åä½å»ºæ¨¡ã\n\næ¹æ³å            æ¯å¦éææ¹æ³   æè¿°\nbetween        æ¯        åå»ºä¸¤ä¸ªæ¶é´ç¹ä¹é´ç interval (é´é)\nfrom           æ¯        ç±ä¸ä¸ªä¸´æ¶æ¶é´ç¹åå»º interval\nof             æ¯        ç±å®çç»æé¨ååå»º interval çå®ä¾\nparse          æ¯        ç±å­ç¬¦ä¸²åå»º interval çå®ä¾\naddTo          å¦        åå»ºè¯¥ interval çå¯æ¬ï¼å¹¶å°å¶Ô®å å°æä¸ªæå®ç temporal å¯¹è±¡\nget            å¦        è¯»åè¯¥ interval çç¶æ\nisNegative     å¦        æ£æ¥è¯¥ interval æ¯å¦ä¸ºè´å¼ï¼ä¸åå«é¶\nisZero         å¦        æ£æ¥è¯¥ interval çæ¶é¿æ¯å¦ä¸ºé¶\nminus          å¦        éè¿åå»ä¸å®çæ¶é´åå»ºè¯¥ interval çå¯æ¬\nmultipliedBy   å¦        å° interval çå¼ä¹ä»¥æä¸ªæ éåå»ºè¯¥ interval çå¯æ¬\nnegated        å¦        ä»¥å¿½ç¥æä¸ªæ¶é¿çæ¹å¼åå»ºè¯¥ interval çå¯æ¬\nplus           å¦        ä»¥å¢å æä¸ªæå®çæ¶é¿çæ¹å¼åå»ºè¯¥ interval çå¯æ¬\nsubtractFrom   å¦        ä»æå®ç temporal å¯¹è±¡ä¸­åå»è¯¥ interval\n\n\n# 11.4 æçºµãè§£æåæ ¼å¼åæ¥æ\n\nLocalDate date1 = LocalDate.of(2014, 3, 18);\nLocalDate date2 = date1.withYear(2011);\nLocalDate date3 = date2.withDayOfMonth(25);\nLocalDate date4 = date3.with(ChronoField.MONTH_OF_YEAR, 9);\n\nLocalDate date1 = LocalDate.of(2014, 3, 18);\nLocalDate date2 = date1.plusWeeks(1);\nLocalDate date3 = date2.minusYears(3);\nLocalDate date4 = date3.plus(6, ChronoUnit.MONTHS);\n\n\næ¹æ³å        æ¯å¦éææ¹æ³   æè¿°\nfrom       æ¯        ä¾æ®ä¼ å¥ç Temporal å¯¹è±¡åå»ºå¯¹è±¡å®ä¾\nnow        æ¯        ä¾æ®ç³»ç»æ¶éåå»º Temporal å¯¹è±¡\nof         æ¯        ç± Temporal å¯¹è±¡çæä¸ªé¨ååå»ºè¯¥å¯¹è±¡çå®ä¾\nparse      æ¯        ç±å­ç¬¦ä¸²åå»º Temporal å¯¹è±¡çå®ä¾\natOffset   å¦        å° Temporal å¯¹è±¡åæä¸ªæ¶åºåç§»ç¸ç»å\natZone     å¦        å° Temporal å¯¹è±¡åæä¸ªæ¶åºç¸ç»å\nformat     å¦        ä½¿ç¨æä¸ªæå®çæ ¼å¼å¨å°Temporalå¯¹è±¡è½¬æ¢ä¸ºå­ç¬¦ä¸²ï¼ Instantç±»ä¸æä¾è¯¥æ¹æ³ï¼\nget        å¦        è¯»å Temporal å¯¹è±¡çæä¸é¨åçå¼\nminus      å¦        åå»º Temporal å¯¹è±¡çä¸ä¸ªå¯æ¬ï¼éè¿å°å½å Temporal å¯¹è±¡çå¼Ñå»ä¸å®çæ¶é¿ï¼åå»ºè¯¥å¯æ¬\nplus       å¦        åå»º Temporal å¯¹è±¡çä¸ä¸ªå¯æ¬ï¼éè¿å°å½å Temporal å¯¹è±¡çå¼å ä¸ä¸å®çæ¶é¿ï¼åå»ºè¯¥å¯æ¬\nwith       å¦        ä»¥è¯¥ Temporal å¯¹è±¡ä¸ºæ¨¡æ¿ï¼å¯¹æäºç¶æè¿è¡ä¿®æ¹åå»ºè¯¥å¯¹è±¡çå¯æ¬\n\n\n# 11.4.1 ä½¿ç¨TemporalAdjuster\n\nå¯ä»¥ä½¿ç¨éè½½çæ¬çwithæ¹æ³ï¼åå¶ä¼ éä¸ä¸ªæä¾äºæ´å¤å®å¶åéæ©çTemporalAdjusterå¯¹è±¡ï¼æ´ å  çµ æ´» å° å¤ ç æ¥ æ ã\n\n\n\n----------------------------------------\n\n\n# 11.4.2 DateTimeFormatter\n\nçº¿ç¨å®å¨çï¼åç½®äºå ç§è§£æå¸¸éã\n\nLocalDate date = LocalDate.of(2014, 3, 18);\nString s1 = date.format(DateTimeFormatter.BASIC_ISO_DATE); // 20140318\nString s2 = date.format(DateTimeFormatter.ISO_LOCAL_DATE); // 2014-03-18\n\nLocalDate date1 = LocalDate.parse("20140318",DateTimeFormatter.BASIC_ISO_DATE);\nLocalDate date2 = LocalDate.parse("2014-03-18",DateTimeFormatter.ISO_LOCAL_DATE);\n\nDateTimeFormatter formatter = DateTimeFormatter.ofPattern("dd/MM/yyyy");\nLocalDate date1 = LocalDate.of(2014, 3, 18);\nString formattedDate = date1.format(formatter);\nLocalDate date2 = LocalDate.parse(formattedDate, formatter);\n\n\nåå»ºä¸ä¸ªæ¬å°åçDateTimeFormatter\n\nDateTimeFormatter italianFormatter =DateTimeFormatter.ofPattern("d. MMMM yyyy", Locale.ITALIAN);\nLocalDate date1 = LocalDate.of(2014, 3, 18);\nString formattedDate = date.format(italianFormatter); // 18. marzo 2014\nLocalDate date2 = LocalDate.parse(formattedDate, italianFormatter);\n\n\nå¦æéè¦æ´å ç»ç²åº¦çæ§å¶ï¼ DateTimeFormatterBuilderç±»è¿æä¾äºæ´å¤æçæ ¼å¼å¨ï¼å¯ä»¥éæ©æ°å½çæ¹æ³ï¼ä¸æ­¥ä¸æ­¥å°æé èªå·±çæ ¼å¼å¨ãå¦å¤ï¼å®è¿æä¾äºéå¸¸å¼ºå¤§çè§£æåè½ï¼æ¯å¦åºåå¤§å°åçè§£æãææ§è§£æï¼åè®¸è§£æå¨ä½¿ç¨å¯åå¼çæºå¶å»è§£æè¾å¥ï¼ä¸ç²¾ ç¡® å° å¹ é æ å® ç æ¨¡ å¼ ï¼ã å¡«å ï¼ ä»¥ å å¨ æ ¼ å¼ å¨ ä¸­ æ å® å¯ é è ã\n\nDateTimeFormatter italianFormatter = new DateTimeFormatterBuilder()\n.appendText(ChronoField.DAY_OF_MONTH)\n.appendLiteral(". ")\n.appendText(ChronoField.MONTH_OF_YEAR)\n.appendLiteral(" ")\n.appendText(ChronoField.YEAR)\n.parseCaseInsensitive()\n.toFormatter(Locale.ITALIAN);\n\n\n\n# 11.5 å¤çä¸åçæ¶åºååæ³\n\n',normalizedContent:'# 1.åºç¡ç¥è¯\n\n\n# 1.1 æµå¤ç\n\næµæ¯ä¸ç³»åæ°æ®é¡¹ï¼ä¸æ¬¡åªçæä¸é¡¹ãå¯ä»¥æ³è±¡ææ±½è½¦ç»è£æµæ°´çº¿ï¼å°½ç®¡æµæ°´çº¿å®éä¸æ¯ä¸ä¸ªåºåï¼ä½ä¸åå å·¥ç«çè¿è¡ä¸è¬æ¯å¹¶è¡çã\n\n# è¯¥ä¾å­è¡¨ç¤ºæä¸¤ä¸ªæä»¶è¿æ¥èµ·æ¥åå»ºä¸ä¸ªæµï¼ç¶åè½¬æ¢æµä¸­çå­ç¬¦ï¼å¯¹æµä¸­çè¡è¿è¡æåºï¼æåç»åºæµçæåä¸è¡ã\n# è¿å ä¸ªå½ä»¤å¨unixä¸­æ¯åæ¶æ§è¡çã\ncat file1 file2 | tr "[a-z]" "[a-z]" | sort | tail -3\n\n\n\n# 1.2è¡ä¸ºåæ°å\n\nstream apiæ¯æå»ºå¨éè¿ä¼ éä»£ç ä½¿å¾æä½è¡ä¸ºå®ç°åæ°åçææ³ä¸ã\n\næ¯æ¹è¯´ï¼ä½ æä¸å åç¥¨ä»£ç ï¼æ ¼å¼ç±»ä¼¼äº2013uk0001ã2014us0002â¦â¦ååä½æ°ä»£è¡¨å¹´ä»½ï¼ æ¥ä¸æ¥ä¸¤ä¸ªå­æ¯ä»£è¡¨å½å®¶ï¼æååä½æ¯å®¢æ·çä»£ç ãä½ å¯è½æ³æç§å¹´ä»½ãå®¢æ·ä»£ç ï¼çè³å½å®¶æ¥ å¯¹åç¥¨è¿è¡æåºãä½ çæ­£æ³è¦çæ¯ï¼è½å¤ç»sortå½ä»¤ä¸ä¸ªåæ°è®©ç¨æ·å®ä¹é¡ºåºï¼ç»sortå½ä»¤ä¼  éä¸æ®µç¬ç«ä»£ç ãjava8å¢å äºæä»£ç ä½ä¸ºåæ°ä¼ éç»å¦ä¸ä¸ªæ¹æ³çè½åã\n\n\n\n\n# 1.3 å¹¶è¡ä¸å±äº«çå¯åæ°æ®\n\n> æ²¡æå±äº«çå¯åæ°æ®åå°æ¹æ³åå½æ°å³ä»£ç ä¼ éç»å¶ä»æ¹æ³çè½åæ¯å½æ°å¼ç¼ç¨èå¼çåºç³ãå½æ°å¼ç¼ç¨ä¸­çå½æ°çä¸»è¦æææ¯âæå½æ°ä½ä¸ºä¸ç­å¼âï¼ä¹å³âæ§è¡æ¶å¨åç´ ä¹é´æ äºå¨âã\n\n\n# 1.4 å½æ°\n\n * java8åè®¸ææ¹æ³åå½æ°ä½ä¸ºä¸ç­å¬æ°ï¼å¯ä¼ éçå¼ï¼ãè®©æ¹æ³ä½ä¸ºå¼ææäºå¶ä»è¥å¹²java8åè½çåºç¡ã\n * java8å¯ä»¥ä¼ éæ¹æ³å¼ç¨ï¼ä»¥ååªè½ä¼ éå¯¹è±¡å¼ç¨\n * è°è¯ï¼predicateï¼ï¼å¨æ°å­¦ä¸å¸¸å¸¸ç¨æ¥ä»£è¡¨ä¸ä¸ªç±»ä¼¼å½æ°çä¸è¥¿ï¼ä»æ¥åä¸ä¸ªåæ°å¼ï¼å¹¶è¿åtrueæfalseã\n * å¦ælambdaçé¿åº¦å¤äºå è¡ï¼å®çè¡ä¸ºä¹ä¸æ¯ä¸ç®äºç¶çè¯ï¼åºè¯¥ç¨æ¹æ³å¼ç¨æ¥æåä¸ä¸ªææè¿°æ§åç§°çæ¹æ³ï¼èä¸æ¯ä½¿ç¨å¿åçlambdaã\n\n\n# 1.5 stream apiä¸collection api\n\n * ç¨éåå¾ªç¯ä¸ä¸ªä¸ªå»è¿­ä»£åå¤çåç´ ç§°ä¸ºå¤é¨è¿­ä»£ï¼æµå¤çæ¯å¨åºåé¨è¿è¡çï¼ç§°ä¸ºåé¨è¿­ä»£ã\n * æµçå¹¶è¡æ¯ä½¿ç¨çº¿ç¨åæ­¥æ´ä¸æåºéï¼æµå¤©çå·æå©ç¨å¤æ ¸çä¼å¿ã\n * collectionä¸»è¦æ¯ä¸ºäºå­å¨åè®¿é®æ°æ®ï¼èstreamåä¸»è¦ç¨äºæè¿°å¯¹æ°æ®çè®¡ç®ã\n\n\n\n\n# 1.6 é»è®¤æ¹æ³\n\nè®¾è®¡é»è®¤æ¹æ³çç®çå¨äºæ¹åå·²åå¸çæ¥å£èä¸ç ´åå·²æçå®ç°ãä¾å¦java8ä¸­listæ°å¢çé»è®¤æ¹æ³ï¼\n\ndefault void sort(comparator<? super e> c) {\n    object[] a = this.toarray();\n        arrays.sort(a, (comparator) c);\n        listiterator<e> i = this.listiterator();\n        for (object e : a) {\n            i.next();\n            i.set((e) e);\n        }\n}\n\n\nä½ä¸ä¸ªç±»å¯ä»¥å®ç°å¤ä¸ªæ¥å£ï¼å¦æå¨å¥½å ä¸ªæ¥å£éæå¤ä¸ªé»è®¤å®ç°ï¼æç§ç¨åº¦ä¸æå³çjavaæäºå¤éç»§æ¿ãjavaç¨ä¸äºéå¶æ¥é¿ååºç°ç±»ä¼¼c++ä¸­çè±å½¢ç»§æ¿é®é¢ã\n\n\n# 2.lambdaè¡¨è¾¾å¼\n\nå¯ä»¥ælambdaè¡¨è¾¾å¼çåå¿åå½æ°ï¼ä¹å°±æ¯æ²¡æå£°æåç§°çæ¹æ³ï¼åå¿åç±»ä¸æ ·å¯ä»¥ä½ä¸ºåæ°ä¼ éç»ä¸ä¸ªæ¹æ³ï¼å®æåæ°åè¡¨ãå½æ°ä¸»ä½ãè¿åç±»åãè¿æå¯è½æå¯ä»¥æåºçå¼å¸¸åè¡¨ã\n\n// è¡¨è¾¾å¼å°±æ¯lambdaçè¿åå¼\n(parameters) -> expression\n(parameters) -> { statements;}\n(1).() -> {}\n(2).() -> "hello world"\n(3).() -> { return "hello world";}\n(4).(integer i) -> return "hello" + i; //æ æï¼ä¸åºæreturn\n(5).(string s) -> { "ironman"; } //æ æï¼æ¾ç¤ºè¿åè¦å ä¸return\n\n\n\n\n# 2.1 å½æ°å¼æ¥å£\n\nå½æ°å¼æ¥å£ä¸­çæ½è±¡æ¹æ³çç­¾åå¯ä»¥æè¿°lambdaè¡¨è¾¾å¼çç­¾åãå½æ°å¼æ¥å£çæ½è±¡æ¹æ³çç­¾åæä¸ºå½æ°æè¿°ç¬¦ã\n\n> ä»»ä½å½æ°å¼æ¥å£é½ä¸åè®¸æåºåæ£å¼å¸¸ã\n\n\n# 2.2 ç±»åæ£æ¥ãæ¨æ­åéå¶\n\nlambdaçç±»åæ¯ä»ä½¿ç¨lambdaçä¸ä¸ææ¨æ­åºæ¥çãå¦ælambdaè¡¨è¾¾å¼æåºä¸ä¸ªå¼å¸¸ï¼é£ä¹æ½è±¡æ¹æ³æå£°æçthrowsè¯­å¥ä¹å¿é¡»ä¸ä¹å¹é\n\n> ç¹æ®çvoidå¼å®¹è§å:å¦æä¸ä¸ªlambdaçä¸»ä½æ¯ä¸ä¸ªè¯­å¥è¡¨è¾¾å¼ï¼ å®å°±åä¸ä¸ªè¿åvoidçå½æ°æè¿°ç¬¦å¼å®¹ã\n\n\n# 2.2.1 ä½¿ç¨å±é¨åé\n\nlambdaè¡¨è¾¾å¼åè®¸ä½¿ç¨èªç±åéï¼å¨å¤å±ä½ç¨åä¸­å®ä¹çåéï¼ï¼å°±åå¿åç±»ä¸æ ·ï¼å®ä»¬è¢«ç§°ä½lambdaæè·ãlambdaå¯ä»¥æ²¡æéå¶å°æè·å®ä¾åéåéæåéï¼ä½å±é¨åéå¿é¡»æ¾å¼å£°æä¸ºfinalæé»è¾ä¸æ¯finalçï¼ä¹å°±æ¯åªè½æè·å±é¨åéä¸æ¬¡\n\n> é­å\n> \n> é­åæ¯ä¸ä¸ªå½æ°çå®ä¾ï¼ä¸å®å¯ä»¥æ éå¶å°è®¿é®é£ä¸ªå½æ°çéæ¬å°åéãä½lambdaè®¿é®éæ¬å°åéæå¿é¡»æ¯éå¼æç»çéå¶ï¼å ä¸ºå±é¨åéä¿å­å¨æ ä¸ï¼æ¯çº¿ç¨ç§æçï¼çº¿ç¨è®¿é®éæ¬å°å±é¨åéæ¶å®éä¸æ¯è®¿é®å®çå¯æ¬ãå¯ä»¥è®¤ä¸ºlambdaå¯¹å¼å°é­ï¼èä¸æ¯å¯¹åéå°é­ã\n\n\n# 2.2.2 æ¹æ³å¼ç¨\n\nå¦æä¸ä¸ªlambdaä»£è¡¨çåªæ¯âç´æ¥è°ç¨è¿ä¸ªæ¹æ³âï¼é£æå¥½è¿æ¯ç¨åç§°æ¥è°ç¨å®ï¼èä¸æ¯å»æè¿°å¦ä½è°ç¨å®ã å¯ä»¥ææ¹æ³å¼ç¨çä½éå¯¹ä»ä»æ¶ååä¸æ¹æ³çlambdaçè¯­æ³ç³\n\n * æåéææ¹æ³çæ¹æ³å¼ç¨ãinteger::parseint\n * æåä»»æç±»åå®ä¾æ¹æ³çæ¹æ³å¼ç¨ãstring::length\n * æåç°æå¯¹è±¡çå®ä¾æ¹æ³çæ¹æ³å¼ç¨ãå¨ lambda ä¸­ è° ç¨ ä¸ ä¸ª å·² ç» å­ å¨ ç å¤ é¨ å¯¹ è±¡ ä¸­ ç æ¹ æ³ ã ä¾ å¦ ï¼ lambda è¡¨ è¾¾ å¼ ()->expensivetransaction.getvalue()å¯ä»¥åä½expensivetransaction::getvalue\n\n\n# 2.2.3 å¤å\n\n// 1.æ¯è¾å¨é¾ãå¦åæéééåæåºï¼ä¸¤ä¸ªè¹æä¸æ ·éæ¶ï¼åæå½å®¶æåº\ninventory.sort(comparing(apple::getweoght))\n    .reversed()\n    .thencomparing(apple::getcountry)\n// 2.è°è¯å¤åãandåoræ¯æç§å¨è¡¨è¾¾å¼é¾ä¸­çä½ç½®ä»å·¦åå³ç¡®å®ä¼åçº§çãa.or(b).and(c)å¯ä»¥çå(a || b) && c\npredicate<apple> redandheavyappleorgreen = redapple.and(a -> a.getweight() > 150)\n\t\t\t\t\t\t\t\t\t\t\t.or(a -> "green".equals(a.getcolor()));\n// 3.å½æ°å¤åã\nfunction<integer, integer> f = x -> x + 1;\nfunction<integer, integer> g = x -> x * 2;\nfunction<integer, integer> h = f.andthen(g); //æ°å­¦ä¸åä½g(f(x))\nfunction<integer, integer> h = f.compose(g); //æ°å­¦ä¸åä½f(g(x))\nint result = h.apply(1);\n\n\n\n# 3.å¼å¥æµ\n\næµï¼ä»æ¯ææ°æ®å¤çæä½çæºçæçåç´ åºåãæµåªè½æ¶è´¹ä¸æ¬¡ä¸æ¯æéè®¡ç®çã\n\n * åç´ åºåï¼è®¿é®ç¹å®åç´ ç±»åçä¸ç»æåºå¼ ï¼éåè®²çæ¯æ°æ®ï¼æµè®²çæ¯è®¡ç® ã\n * æºï¼ä»æåºéåçææµæ¶ä¼ä¿çåæçé¡ºåºãç±åè¡¨çæçæµï¼å¶åç´ é¡ºåºä¸åè¡¨ä¸è´ã\n * æ°æ®å¤çæä½ï¼æµæä½å¯ä»¥é¡ºåºæ§è¡ï¼ä¹å¯å¹¶è¡æ§è¡ ã\n * æµæ°´çº¿ï¼å¾å¤æµæä½æ¬èº«ä¼è¿åä¸ä¸ªæµ ï¼æµæ°´çº¿çæä½å¯ä»¥çä½å¯¹æ°æ®æºè¿è¡æ°æ®åºå¼æ¥è¯¢ã\n * åé¨è¿­ä»£ï¼æµçè¿­ä»£æä½æ¯å¨èåè¿è¡çã streamsåºçåé¨è¿­ä»£å¯ä»¥èªå¨éæ©ä¸ç§éåä½ ç¡¬ä»¶çæ°æ®è¡¨ç¤ºåå¹¶è¡å®ç°ã\n\n\n# 3.1 æµæä½\n\nå¯ä»¥è¿æ¥èµ·æ¥çæµæä½ç§°ä¸ºä¸­é´æä½ï¼å³é­æµçæä½ç§°ä¸ºæä½ã æµçæµæ°´çº¿çå¿µç±»ä¼¼äºå»ºé èæ¨¡å¼ã\n\n\n# 3.1.1 ä¸­é´æä½\n\nä¸­é´æä½ä¼è¿åå¦ä¸ä¸ªæµãé¤éæµæ°´çº¿ä¸è§¦åä¸ä¸ªç»ç«¯æä½ï¼å¦åä¸­é´æä½ä¸ä¼æ§è¡ä»»ä½å¤çï¼å ä¸ºä¸­é´æä½ä¸è¬é½å¯ä»¥åå¹¶èµ·æ¥ï¼å¨ç»ç«¯æä½æ¶ä¸æ¬¡æ§å¨é¨å¤çã\n\n\n# 3.1.2 ç»ç«¯æä½\n\nç»ç«¯æä½ä¼ä»æµçæµæ°´çº¿çæç»æãå¶ç»ææ¯ä»»ä½ä¸æ¯æµçå¼ï¼æ¯å¦listã integerï¼çè³voidã\n\n\n# 4.ä½¿ç¨æµ\n\n\n# 4.1 ç­éååç\n\nfilter\n\n\n# 4.2 æ å°\n\nmapãflatmap\n\n\n# 4.3 æ¥æ¾åå¹é\n\nallmatchãanymatchãnonematchãfindfirstãfindany\n\n\n# 4.4 å½çº¦\n\nreduce\n\n> å½çº¦æ¹æ³çä¼å¿ä¸å¹¶è¡å\n> \n> ç¸æ¯äºéæ­¥è¿­ä»£ï¼ä½¿ç¨reduceçå¥½å¤å¨äºï¼è¿éçè¿­ä»£è¢«åé¨è¿­ä»£æ½è±¡åäºï¼è¿è®©åé¨å®ç°å¾ä»¥éæ©å¹¶è¡æ§è¡reduceæä½ãèè¿­ä»£å¼æ±åä¾å­è¦æ´æ°å±äº«åésumï¼è¿ä¸æ¯é£ä¹å®¹æå¹¶è¡åçãå¦æä½ å å¥äºåæ­¥ï¼å¾å¯è½ä¼åç°çº¿ç¨ç«äºæ¶äºå¹¶è¡æ¬åºå¸¦æ¥ç æ§è½æåãè¿ç§è®¡ç®çå¹¶è¡åéè¦å¦ä¸ç§åæ³æ³ï¼å°è¾å¥ååï¼ååæ±åï¼æååå¹¶èµ·æ¥ãä½è¿æ ·çä»£ç çèµ·æ¥å°±å®å¨ä¸ä¸æ ·äºãä½è¦å¹¶è¡æ§è¡éè¦ä»£ä»·ï¼ä¼ éç»reduceçlambdaä¸è½æ´æ¹ç¶æï¼å¦å®ä¾åéï¼ï¼èä¸æä½å¿é¡»æ»¡è¶³ç»åå¾æå¯ä»¥æä»»æé¡ºåºæ§è¡ã\n\n\n# 4.5 åå§ç±»åæµç¹å\n\nä¸ºäºé¿åæè£ç®±æä½å¸¦æ¥çæ§è½æèï¼java8å¼å¥äºä¸ä¸ªåå§ç±»åç¹åæµæ¥å£ï¼optionalä¹æï¼æ¥è§£å³è¿ä¸ªé®é¢ï¼intstreamãdoublestreamålongstreamã\n\n\n# 4.6 åå»ºæµ\n\n//ç±å¼åå»ºæµ\nstream<string> stream = stream.of("java 8 ", "lambdas ", "in ", "action");\nstream<string> emptystream = stream.empty();\n//ç±æ°ç»åå»ºæµ\nint[] numbers = {2, 3, 5, 7, 11, 13};\nint sum = arrays.stream(numbers).sum();\n//ç±å½æ°çææµ\nstream.iterate(new int[]{0, 1},t -> new int[]{t[1],t[0] + t[1]})\n.limit(10)\n.map(t -> t[0])\n.foreach(system.out::println);\n// ===ç¸æ¯äºiterateï¼generateæ¯æç¶æç\nintsupplier fib = new intsupplier(){\nprivate int previous = 0;\nprivate int current = 1;\npublic int getasint(){\nint oldprevious = this.previous;\nint nextvalue = this.previous + this.current;\nthis.previous = this.current;\nthis.current = nextvalue;\nreturn oldprevious;\n}\n};\nintstream.generate(fib).limit(10).foreach(system.out::println);\n//=====\n\n\n\n# 5.ç¨æµæ¶éæ°æ®\n\n\n# 5.1 collectorsé¢å®ä¹æ¶éå¨\n\n * collectors.countingè®¡æ°\n * collectors.max(min)by æ¥æ¾æå¤§å¼åæå°å¼\n * collectors.summingintï¼collectors.averagingint(long|double)æ±æ»\n * collectors.summarizingint(long|double)ä¸æ¬¡æ§åæ»åãå¹³åå¼ãæå¤§å¼åæå°å¼\n * collectors.joining(å¯éåéç¬¦)è¿æ¥å­ç¬¦ä¸²\n\n\n# 5.2 å¹¿ä¹çå½çº¦æ±æ»\n\ncollectors.reducingï¼ææµä¸­çç¬¬ä¸ä¸ªé¡¹ç®ä½ä¸ºèµ·ç¹ï¼ææç­å½æ°ï¼å³ä¸ä¸ªå½æ°ä»ä»æ¯è¿åå¶è¾å¥åæ°ï¼ä½ä¸ºä¸ä¸ªè½¬æ¢å½æ°ãæ³¨æå¯è½ä¼è¿ånullã\n\n> æ¶éä¸å½çº¦\n> \n> reduceæ¹æ³æ¨å¨æä¸¤ä¸ªå¼ç»åèµ·æ¥çæä¸ä¸ªæ°å¼ï¼æ¯ä¸ä¸ªä¸å¯åçå½çº¦ãcollectæ¯æ¹åå®¹å¨ä»èç´¯ç§¯è¦è¾åºçç»æã\n\n\n# 5.3 åç»\n\n * ä¸çº§åç»ãgroupingby(f)ï¼fæ¯åç±»å½æ°å®éä¸æ¯groupingby(f, tolist())çç®ä¾¿åæ³\n * nçº§åç»ï¼å¯ä»¥å°collectorç±»åä¼ éç»åä¸ä¸ªgroupingbyçç¬¬äºä¸ªåæ°ï¼ä»¥æ­¤ç±»æ¨ã\n * æå­ç»æ¶éæ°æ®ï¼groupingbyçç¬¬äºä¸ªæ¶éå¨å¯ä»¥æ¯ä»»ä½ç±»å\n * ææ¶éå¨çç»æè½¬æ¢ä¸ºå¦ä¸ç§ç±»åãcollectors.collectingandthen\n * mapping\n\n\n# 5.4 ååº\n\npartitioningbyååºæ¯åç»çç¹æ®æåµï¼ç±ä¸ä¸ªè°è¯ä½ä¸ºåç±»å½æ°ï¼ä»ç§°ä¸ºååºå½æ°ã\n\n\n# 5.5 æ¶éå¨æ¥å£\n\npackage java.util.stream;\n\nimport java.util.collections;\nimport java.util.enumset;\nimport java.util.objects;\nimport java.util.set;\nimport java.util.function.biconsumer;\nimport java.util.function.binaryoperator;\nimport java.util.function.function;\nimport java.util.function.supplier;\n\n// a compilation test for the code snippets in this class-level javadoc can be found at:\n// test/jdk/java/util/stream/test/org/openjdk/tests/java/util/stream/collectorexample.java\n// the test needs to be updated if the examples in this javadoc change or new examples are added.\n\n/**\n * a <a href="package-summary.html#reduction">mutable reduction operation</a> that\n * accumulates input elements into a mutable result container, optionally transforming\n * the accumulated result into a final representation after all input elements\n * have been processed.  reduction operations can be performed either sequentially\n * or in parallel.\n *\n * <p>examples of mutable reduction operations include:\n * accumulating elements into a {@code collection}; concatenating\n * strings using a {@code stringbuilder}; computing summary information about\n * elements such as sum, min, max, or average; computing "pivot table" summaries\n * such as "maximum valued transaction by seller", etc.  the class {@link collectors}\n * provides implementations of many common mutable reductions.\n *\n * <p>a {@code collector} is specified by four functions that work together to\n * accumulate entries into a mutable result container, and optionally perform\n * a final transform on the result.  they are: <ul>\n *     <li>creation of a new result container ({@link #supplier()})</li>\n *     <li>incorporating a new data element into a result container ({@link #accumulator()})</li>\n *     <li>combining two result containers into one ({@link #combiner()})</li>\n *     <li>performing an optional final transform on the container ({@link #finisher()})</li>\n * </ul>\n *\n * <p>collectors also have a set of characteristics, such as\n * {@link characteristics#concurrent}, that provide hints that can be used by a\n * reduction implementation to provide better performance.\n *\n * <p>a sequential implementation of a reduction using a collector would\n * create a single result container using the supplier function, and invoke the\n * accumulator function once for each input element.  a parallel implementation\n * would partition the input, create a result container for each partition,\n * accumulate the contents of each partition into a subresult for that partition,\n * and then use the combiner function to merge the subresults into a combined\n * result.\n *\n * <p>to ensure that sequential and parallel executions produce equivalent\n * results, the collector functions must satisfy an <em>identity</em> and an\n * <a href="package-summary.html#associativity">associativity</a> constraints.\n *\n * <p>the identity constraint says that for any partially accumulated result,\n * combining it with an empty result container must produce an equivalent\n * result.  that is, for a partially accumulated result {@code a} that is the\n * result of any series of accumulator and combiner invocations, {@code a} must\n * be equivalent to {@code combiner.apply(a, supplier.get())}.\n *\n * <p>the associativity constraint says that splitting the computation must\n * produce an equivalent result.  that is, for any input elements {@code t1}\n * and {@code t2}, the results {@code r1} and {@code r2} in the computation\n * below must be equivalent:\n * <pre>{@code\n *     a a1 = supplier.get();\n *     accumulator.accept(a1, t1);\n *     accumulator.accept(a1, t2);\n *     r r1 = finisher.apply(a1);  // result without splitting\n *\n *     a a2 = supplier.get();\n *     accumulator.accept(a2, t1);\n *     a a3 = supplier.get();\n *     accumulator.accept(a3, t2);\n *     r r2 = finisher.apply(combiner.apply(a2, a3));  // result with splitting\n * } </pre>\n *\n * <p>for collectors that do not have the {@code unordered} characteristic,\n * two accumulated results {@code a1} and {@code a2} are equivalent if\n * {@code finisher.apply(a1).equals(finisher.apply(a2))}.  for unordered\n * collectors, equivalence is relaxed to allow for non-equality related to\n * differences in order.  (for example, an unordered collector that accumulated\n * elements to a {@code list} would consider two lists equivalent if they\n * contained the same elements, ignoring order.)\n *\n * <p>libraries that implement reduction based on {@code collector}, such as\n * {@link stream#collect(collector)}, must adhere to the following constraints:\n * <ul>\n *     <li>the first argument passed to the accumulator function, both\n *     arguments passed to the combiner function, and the argument passed to the\n *     finisher function must be the result of a previous invocation of the\n *     result supplier, accumulator, or combiner functions.</li>\n *     <li>the implementation should not do anything with the result of any of\n *     the result supplier, accumulator, or combiner functions other than to\n *     pass them again to the accumulator, combiner, or finisher functions,\n *     or return them to the caller of the reduction operation.</li>\n *     <li>if a result is passed to the combiner or finisher\n *     function, and the same object is not returned from that function, it is\n *     never used again.</li>\n *     <li>once a result is passed to the combiner or finisher function, it\n *     is never passed to the accumulator function again.</li>\n *     <li>for non-concurrent collectors, any result returned from the result\n *     supplier, accumulator, or combiner functions must be serially\n *     thread-confined.  this enables collection to occur in parallel without\n *     the {@code collector} needing to implement any additional synchronization.\n *     the reduction implementation must manage that the input is properly\n *     partitioned, that partitions are processed in isolation, and combining\n *     happens only after accumulation is complete.</li>\n *     <li>for concurrent collectors, an implementation is free to (but not\n *     required to) implement reduction concurrently.  a concurrent reduction\n *     is one where the accumulator function is called concurrently from\n *     multiple threads, using the same concurrently-modifiable result container,\n *     rather than keeping the result isolated during accumulation.\n *     a concurrent reduction should only be applied if the collector has the\n *     {@link characteristics#unordered} characteristics or if the\n *     originating data is unordered.</li>\n * </ul>\n *\n * <p>in addition to the predefined implementations in {@link collectors}, the\n * static factory methods {@link #of(supplier, biconsumer, binaryoperator, characteristics...)}\n * can be used to construct collectors.  for example, you could create a collector\n * that accumulates widgets into a {@code treeset} with:\n *\n * <pre>{@code\n *     collector<widget, ?, treeset<widget>> intoset =\n *         collector.of(treeset::new, treeset::add,\n *                      (left, right) -> { left.addall(right); return left; });\n * }</pre>\n *\n * (this behavior is also implemented by the predefined collector\n * {@link collectors#tocollection(supplier)}).\n *\n * @apinote\n * performing a reduction operation with a {@code collector} should produce a\n * result equivalent to:\n * <pre>{@code\n *     a container = collector.supplier().get();\n *     for (t t : data)\n *         collector.accumulator().accept(container, t);\n *     return collector.finisher().apply(container);\n * }</pre>\n *\n * <p>however, the library is free to partition the input, perform the reduction\n * on the partitions, and then use the combiner function to combine the partial\n * results to achieve a parallel reduction.  (depending on the specific reduction\n * operation, this may perform better or worse, depending on the relative cost\n * of the accumulator and combiner functions.)\n *\n * <p>collectors are designed to be <em>composed</em>; many of the methods\n * in {@link collectors} are functions that take a collector and produce\n * a new collector.  for example, given the following collector that computes\n * the sum of the salaries of a stream of employees:\n *\n * <pre>{@code\n *     collector<employee, ?, integer> summingsalaries\n *         = collectors.summingint(employee::getsalary))\n * }</pre>\n *\n * if we wanted to create a collector to tabulate the sum of salaries by\n * department, we could reuse the "sum of salaries" logic using\n * {@link collectors#groupingby(function, collector)}:\n *\n * <pre>{@code\n *     collector<employee, ?, map<department, integer>> summingsalariesbydept\n *         = collectors.groupingby(employee::getdepartment, summingsalaries);\n * }</pre>\n *\n * @see stream#collect(collector)\n * @see collectors\n *\n * @param <t> the type of input elements to the reduction operation\n * @param <a> the mutable accumulation type of the reduction operation (often\n *            hidden as an implementation detail)\n * @param <r> the result type of the reduction operation\n * @since 1.8\n */\npublic interface collector<t, a, r> {\n    /**\n     * åå»ºå¹¶è¿åæ°çå¯åç»æå®¹å¨çå½æ°ã\n     * è¿åå¼ï¼è¿åæ°çå¯åç»æå®¹å¨çå½æ°\n     */\n    supplier<a> supplier();\n\n    /**\n     * a function that folds a value into a mutable result container.\n     *\n     * @return a function which folds a value into a mutable result container\n     */\n    biconsumer<a, t> accumulator();\n\n    /**\n     * a function that accepts two partial results and merges them.  the\n     * combiner function may fold state from one argument into the other and\n     * return that, or may return a new result container.\n     *\n     * @return a function which combines two partial results into a combined\n     * result\n     */\n    binaryoperator<a> combiner();\n\n    /**\n     * perform the final transformation from the intermediate accumulation type\n     * {@code a} to the final result type {@code r}.\n     *\n     * <p>if the characteristic {@code identity_finish} is\n     * set, this function may be presumed to be an identity transform with an\n     * unchecked cast from {@code a} to {@code r}.\n     *\n     * @return a function which transforms the intermediate result to the final\n     * result\n     */\n    function<a, r> finisher();\n\n    /**\n     * returns a {@code set} of {@code collector.characteristics} indicating\n     * the characteristics of this collector.  this set should be immutable.\n     *\n     * @return an immutable set of collector characteristics\n     */\n    set<characteristics> characteristics();\n\n    /**\n     * returns a new {@code collector} described by the given {@code supplier},\n     * {@code accumulator}, and {@code combiner} functions.  the resulting\n     * {@code collector} has the {@code collector.characteristics.identity_finish}\n     * characteristic.\n     *\n     * @param supplier the supplier function for the new collector\n     * @param accumulator the accumulator function for the new collector\n     * @param combiner the combiner function for the new collector\n     * @param characteristics the collector characteristics for the new\n     *                        collector\n     * @param <t> the type of input elements for the new collector\n     * @param <r> the type of intermediate accumulation result, and final result,\n     *           for the new collector\n     * @throws nullpointerexception if any argument is null\n     * @return the new {@code collector}\n     */\n    public static<t, r> collector<t, r, r> of(supplier<r> supplier,\n                                              biconsumer<r, t> accumulator,\n                                              binaryoperator<r> combiner,\n                                              characteristics... characteristics) {\n        objects.requirenonnull(supplier);\n        objects.requirenonnull(accumulator);\n        objects.requirenonnull(combiner);\n        objects.requirenonnull(characteristics);\n        set<characteristics> cs = (characteristics.length == 0)\n                                  ? collectors.ch_id\n                                  : collections.unmodifiableset(enumset.of(collector.characteristics.identity_finish,\n                                                                           characteristics));\n        return new collectors.collectorimpl<>(supplier, accumulator, combiner, cs);\n    }\n\n    /**\n     * returns a new {@code collector} described by the given {@code supplier},\n     * {@code accumulator}, {@code combiner}, and {@code finisher} functions.\n     *\n     * @param supplier the supplier function for the new collector\n     * @param accumulator the accumulator function for the new collector\n     * @param combiner the combiner function for the new collector\n     * @param finisher the finisher function for the new collector\n     * @param characteristics the collector characteristics for the new\n     *                        collector\n     * @param <t> the type of input elements for the new collector\n     * @param <a> the intermediate accumulation type of the new collector\n     * @param <r> the final result type of the new collector\n     * @throws nullpointerexception if any argument is null\n     * @return the new {@code collector}\n     */\n    public static<t, a, r> collector<t, a, r> of(supplier<a> supplier,\n                                                 biconsumer<a, t> accumulator,\n                                                 binaryoperator<a> combiner,\n                                                 function<a, r> finisher,\n                                                 characteristics... characteristics) {\n        objects.requirenonnull(supplier);\n        objects.requirenonnull(accumulator);\n        objects.requirenonnull(combiner);\n        objects.requirenonnull(finisher);\n        objects.requirenonnull(characteristics);\n        set<characteristics> cs = collectors.ch_noid;\n        if (characteristics.length > 0) {\n            cs = enumset.noneof(characteristics.class);\n            collections.addall(cs, characteristics);\n            cs = collections.unmodifiableset(cs);\n        }\n        return new collectors.collectorimpl<>(supplier, accumulator, combiner, finisher, cs);\n    }\n\n    /**\n     * characteristics indicating properties of a {@code collector}, which can\n     * be used to optimize reduction implementations.\n     */\n    enum characteristics {\n        /**\n         * indicates that this collector is <em>concurrent</em>, meaning that\n         * the result container can support the accumulator function being\n         * called concurrently with the same result container from multiple\n         * threads.\n         *\n         * <p>if a {@code concurrent} collector is not also {@code unordered},\n         * then it should only be evaluated concurrently if applied to an\n         * unordered data source.\n         */\n        concurrent,\n\n        /**\n         * indicates that the collection operation does not commit to preserving\n         * the encounter order of input elements.  (this might be true if the\n         * result container has no intrinsic order, such as a {@link set}.)\n         */\n        unordered,\n\n        /**\n         * indicates that the finisher function is the identity function and\n         * can be elided.  if set, it must be the case that an unchecked cast\n         * from a to r will succeed.\n         */\n        identity_finish\n    }\n}\n\n\n\n * tæ¯æµä¸­è¦æ¶éçé¡¹ç®çæ³å\n * aæ¯ç´¯å å¨çç±»åï¼ç´¯å å¨æ¯å¨æ¶éè¿ç¨ä¸­ç¨äºç´¯ç§¯é¨åç»æçå¯¹è±¡\n * ræ¯æ¶éæä½å¾å°çå¯¹è±¡çç±»å\n * characteristicsæ¹æ³æä¾äºä¸ç³»åç¹å¾ï¼åè¯collectæ¹æ³å¨æ§è¡å½çº¦æä½çæ¶åå¯ä»¥åºç¨åªäºä¼åï¼å¦å¹¶è¡åã\n\n\n# 5.5.1 supplierå»ºç«æ°çç»æå®¹å¨\n\nè¯¥æ¹æ³è¿åä¸ä¸ªç»æä¸ºç©ºçsupplierï¼ä¹å°±æ¯ä¸ä¸ªæ åå½æ°ï¼å¨è°ç¨æ¯å®ä¼åå»ºä¸ä¸ªç©ºçç´¯å å¨å®ä¾ï¼ä¾æ°æ®æ¶éè¿ç¨ä½¿ç¨ï¼æä»¥ï¼å¨å¯¹ç©ºæµæ§è¡æä½çæ¶åï¼è¿ä¸ªç©ºçç´¯å å¨ä¹ä»£è¡¨äºæ¶éè¿ç¨çç»æã\n\n\n# 5.5.2 accumulatorå°åç´ æ·»å å°ç»æå®¹å¨\n\nè¯¥æ¹æ³è¿åæ§è¡å½çº¦æä½çå½æ°ãè¯¥å½æ°è¿åvoidï¼å ä¸ºç´¯å å¨æ¯åä½æ´æ°ï¼å³å½æ°çæ§è¡æ¹åäºå®çåé¨ç¶æä»¥ä½ç°ä¾¿å©åç´ çææã\n\n\n# 5.5.3 finisherå¯¹ç»æå®¹å¨åºç¨æç»è½¬æ¢\n\nè¯¥æ¹æ³å¿é¡»è¿åå¨ç´¯ç§¯è¿ç¨çæåè¦è°ç¨çä¸ä¸ªå½æ°ï¼ä»¥ä¾¿å°ç´¯å å¨å¯¹è±¡è½¬æ¢ä¸ºæ´ä¸ªéåæä½çæç»ç»æãå¦æç»ææ éè½¬æ¢ï¼ååªéè¿åidentityå½æ°\n\n\n\n\n# 5.5.4 combineråå¹¶ä¸¤ä¸ªç»æå®¹å¨\n\nè¯¥æ¹æ³è¿åä¸ä¸ªä¾å½çº¦æä½ä½¿ç¨çå½æ°ï¼å®å®ä¹äºå¯¹æµçåä¸ªå­é¨åè¿è¡å¹¶è¡å¤çæ¶ï¼åä¸ªå­é¨åå½çº¦æå¾çç´¯å å¨è¦å¦ä½åå¹¶ãå¯¹äºtolistèè¨ï¼åªæ¯ç®åçæä»æµçç¬¬äºä¸ªé¨åæ¶éå°çé¡¹ç®åè¡¨æ·»å å°éåç¬¬ä¸é¨åæ¶å¾å°çåè¡¨åé¢\n\npublic static <t> collector<t, ?, list<t>> tolist() {\n     return new collectorimpl<>((supplier<list<t>>) arraylist::new, list::add,\n                                   (left, right) -> { left.addall(right); return left; },ch_id);\n}\n\n\nè¯¥æ¹æ³ä¼ç¨å°java7ä¸­å¼å¥çåæ¯/åå¹¶æ¡æ¶åspliteratoræ½è±¡ã\n\n\n# 5.5.5 characteristicsæ¹æ³\n\nè¯¥æ¹æ³å¯ä»¥æç¤ºæµæ¯å¦å¯ä»¥è¿è¡å½çº¦ä»¥åå¯ä½¿ç¨çä¼åã\n\n * unordered--å½çº¦ç»æä¸åæµä¸­é¡¹ç®çéååç´¯ç§¯é¡ºåºçå½±å\n\n * concunrrent--accumulatorå½æ°å¯ä»¥ä»å¤ä¸ªçº¿ç¨åæ¶è°ç¨ï¼ä¸æ¶éå¨å¯ä»¥å¹¶è¡å½çº¦æµï¼å¦ææ¶éå¨æ²¡ææ ä¸ºunorderedï¼å®ä»å¨ç¨äºæ åºæ°æ®æºæ¶æå¯ä»¥è¿è¡å½çº¦\n\n * identity_finish--è¿è¡¨æå®æå¨æ¹æ³è¿åçå½æ°æ¯ä¸ä¸ªæç­å½æ°ï¼å¯ä»¥è·³è¿ã\n\n\n# 5.5.6 èªå®ä¹æ¶é\n\nå¯¹äºidentity_finishçæ¶éæä½ï¼streamæä¸ä¸ªéè½½çcollectæ¹æ³æ¥åä¸ä¸ªå½æ°ï¼supplier,accumulator,combinerï¼ãæä»¬ä¹å¯ä»¥éè¿å®ç°collectoræ¥å£å®ä¹èªå·±çæ¶éå¨ã\n\n\n# 6.å¹¶è¡æ°æ®å¤çä¸æ§è½\n\nstreamçå¹¶è¡æµåé¨ä½¿ç¨æµfork/joinæ¡æ¶ã\n\n\n# 6.1 å°é¡ºåºæµè½¬æ¢ä¸ºå¹¶è¡æµ\n\nparallelä¼å°é¡ºåºæµè½¬åä¸ºå¹¶è¡æµãä½è¿ä¸ä»£è¡¨æµæ¬èº«åçäºååï¼åªæ¯å¨åé¨è®¾ç½®æµä¸ä¸ªbooleanæ å¿ï¼è¡¨ç¤ºå¨è°ç¨è¯¥æ¹æ³åçæææä½é½å¹¶è¡æ§è¡ãåæ ·çï¼å¯ä»¥ç¨sequentialæ¹æ³ææµåä¸ºé¡ºåºæµï¼ä½æ¯å¦æå°è¿ä¸ªä¸¤ä¸ªæ¹æ³ç»åæ¶ï¼ä¼ä»¥æåä¸æ¬¡è°ç¨çä¸ºåã\n\n> éç½®å¹¶è¡æµä½¿ç¨ççº¿ç¨æ± \n> \n> å¹¶è¡æµåé¨ä½¿ç¨æµé»è®¤çforkjoinpoolï¼å®é»è®¤ççº¿ç¨æ°éå°±æ¯å¤çå¨æ°éï¼ç±runtime.getruntime().availableprocessors()è·å(å®éè¿åçæ¯å¯ç¨åæ ¸çæ°éï¼åæ¬è¶çº¿ç¨çæçèæåæ ¸)ã\n> \n> ä½æ¯ä¹å¯ä»¥èªå®ä¹system.setproperty("java.util.concurrent.forkjoinpool.common.parallelism","æ°é")ï¼æ³¨æè¿æ¯ä¸ä¸ªå¨å±è®¾ç½®ï¼å®å°å½±åææå¹¶è¡æµã\n\n\n# 6.2 æ­£ç¡®ä½¿ç¨å¹¶è¡\n\nimport java.util.stream.*;\n\npublic class parallelstreams {\n\n    public static long iterativesum(long n) {\n        long result = 0;\n        for (long i = 0; i <= n; i++) {\n            result += i;\n        }\n        return result;\n    }\n\n    public static long sequentialsum(long n) {\n        return stream.iterate(1l, i -> i + 1).limit(n).reduce(long::sum).get();\n    }\n\n    public static long parallelsum(long n) {\n        return stream.iterate(1l, i -> i + 1).limit(n).parallel().reduce(long::sum).get();\n    }\n\n    public static long rangedsum(long n) {\n        return longstream.rangeclosed(1, n).reduce(long::sum).getaslong();\n    }\n\n    public static long parallelrangedsum(long n) {\n        return longstream.rangeclosed(1, n).parallel().reduce(long::sum).getaslong();\n    }\n\n    public static long sideeffectsum(long n) {\n        accumulator accumulator = new accumulator();\n        longstream.rangeclosed(1, n).foreach(accumulator::add);\n        return accumulator.total;\n    }\n\n    public static long sideeffectparallelsum(long n) {\n        accumulator accumulator = new accumulator();\n        longstream.rangeclosed(1, n).parallel().foreach(accumulator::add);\n        return accumulator.total;\n    }\n\n    public static class accumulator {\n        private long total = 0;\n\n        public void add(long value) {\n            total += value;\n        }\n    }\n}\n\npackage chl;\n\n//===============================================================================================\n\nimport java.util.function.function;\n\npublic class myparallelstreams {\n    public static long measuresumperf(function<long, long> adder, long n) {\n        long fastest = long.max_value;\n        for (int i = 0; i < 10; i++) {\n            long start = system.nanotime();\n            long sum = adder.apply(n);\n            long duration = (system.nanotime() - start) / 1000000;\n            system.out.println("result:" + sum);\n            if (duration < fastest) fastest = duration;\n        }\n        return fastest;\n    }\n\n    public static void main(string[] args) {\n        system.out.println("èæ¶:" + measuresumperf(parallelstreams::sideeffectparallelsum, 10000000));\n    }\n}\n\n\n\nè¦ç¡®ä¿å¹¶è¡æ­£ç¡®æ§è¡å¿é¡»ä¿è¯ä¸å­å¨å±äº«çå¯åç¶æã\n\n * æµéãææ¶åå¹¶è¡æµå¹¶ä¸ä¸å®æ¯é¡ºåºæµå¿«ã\n * æ³¨æè£ç®±ãèªå¨è£ç®±åæç®±æä½ä¼å¤§å¤§éä½æ§è½ï¼è¿æ¶åå¯ä»¥ä½¿ç¨åå§ç±»åæµã\n * æäºæä½å¨å¹¶è¡æµä¸çæ§è½æ¯é¡ºåºæµå·®ãç¹å«æ¯limitåfindfirstç­ä¾èµäºåç´ é¡ºåºçæä½ãå¦æä¸ä¾èµé¡ºåºï¼å¯ä»¥è°ç¨unorderedæ¹æ³ææåºæµåææ åºæµã\n * å¦æä¸ä¸ªåç´ éè¿æµæ°´çº¿çå¤çææ¬é«ï¼é£ä¹ä½¿ç¨å¹¶è¡æµæ¶æ§è½å¥½çå¯è½æ§æ¯è¾å¤§ã\n * å¯¹äºè¾å°çæ°æ®éï¼éæ©å¹¶è¡æµå¹¶ä¸çä¼åçº§å¹¶ä¸é«ï¼å ä¸ºå¹¶è¡åï¼åéçº¿ç¨ç­èµæºï¼çå¼éæ´é«ã\n * èèæµèåçæ°æ®ç»ææ¯å¦æäºåè§£ãå¯ä»¥èªå®ä¹spliteratoræ¥æ§å¶åè§£è¿ç¨ã\n * æµèªèº«çç¹ç¹ä»¥åæµæ°´çº¿ä¸­çä¸­é´æä½ä¿®æ¹æµçæ¹æ³ï¼é½å¯è½ä¼æ¹ååè§£è¿ç¨çæ§è½ãä¸ä¸ªå·²ç¥å¤§å°çæµæ¯æªç¥çæ´å¥½æåã\n * è¿è¦èèç»ç«¯æä½ä¸­åå¹¶æ­¥éª¤çä»£ä»·æ¯å¤§æ¯å°ï¼å¦æè¿ä¸æ­¥ä»£ä»·å¾å¤§ï¼é£ä¹ç»åæ¯ä¸ªå­æµçé¨åç»ææäº§çççä»£ä»·å°±å¯è½ä¼è¶åºéè¿å¹¶è¡æµå¾å°çæ§è½æåã\n\næµçæ°æ®æºå¯åè§£æ§\n\næº                 å¯åè§£æ§\narraylist         æä½³\nlinkedlist        å·®\nintstream.range   æä½³\nstream.iterate    å·®\nhashset           å¥½\ntreeset           å¥½\n\n\n# 6.3 fork/joinæ¡æ¶\n\n\n# 6.3.1 recursivetask\n\npublic abstract class recursivetask<v> extends forkjointask<v> {\n    private static final long serialversionuid = 5232453952276485270l;\n\n    @suppresswarnings("serial") \n    v result;\n\n    protected abstract v compute();\n\n    public final v getrawresult() {\n        return result;\n    }\n\n    protected final void setrawresult(v value) {\n        result = value;\n    }\n\n    protected final boolean exec() {\n        result = compute();\n        return true;\n    }\n\n}\n\n\n\n\n\n> ä½¿ç¨å¤ä¸ªforkjoinpoolæ¯æ²¡ææä¹çï¼ä¸è¬æå®å®ä¾åä¸æ¬¡ï¼ç¶åæå®ä¾ä¿å­å¨éæå­æ®µä¸­ï¼ä½¿ä¹ç§°ä¸ºåä¾ï¼è¿æ ·å°±å¯ä»¥éç¨ã\n\n\n# 6.3.2 ä½¿ç¨fork/joinçæä½³åæ³\n\n * å¯¹ä¸ä¸ªä»»å¡è°ç¨joinæ¹æ³ä¼é»å¡è°ç¨æ¹ï¼ç´å°è¯¥ä»»å¡ååºç»æãå æ­¤ï¼æå¿è¦å¨ä¸¤ä¸ªå­ä»»å¡çè®¡ç®é½å¼å§ä¹ååè°ç¨å®ã\n\n * ä¸åºè¯¥å¨recursivetaskåé¨ä½¿ç¨forkjoinpoolçinvokeæ¹æ³ãç¸åï¼åºå§ç»ç´æ¥è°ç¨computeæforkæ¹æ³ï¼åªæé¡ºåºä»£ç æåºè¯¥ç¨invokeæ¥å¯å¨å¹¶è¡è®¡ç®ã\n\n * å¯¹å­ä»»å¡è°ç¨forkæ¹æ³å¯ä»¥æå®æè¿forkjoinpoolãåæ¶å¯¹å·¦è¾¹åå³è¾¹çå­ä»»å¡è°ç¨å®ä¼¼ä¹å¾èªç¶ï¼ä½è¿æ ·åçæçè¦æ¯ç´æ¥å¯¹å¶ä¸­ä¸ä¸ªè°ç¨computeä½ãè¿æ ·åå¯ä»¥ä¸ºå¶ä¸­ä¸ä¸ªå­ä»»å¡éç¨åä¸çº¿ç¨ï¼ä»èé¿åå¨çº¿ç¨æ± ä¸­å¤åéä¸ä¸ªä»»å¡é æçå¼éã\n\n * è°è¯ä½¿ç¨åæ¯/åå¹¶æ¡æ¶çå¹¶è¡è®¡ç®å¯è½æç¹æ£æãç¹å«æ¯ä½ å¹³å¸¸é½å¨ä½ åæ¬¢çideéé¢çæ è·è¸ªï¼ stack traceï¼æ¥æ¾é®é¢ï¼ä½æ¾å¨åæ¯åå¹¶è®¡ç®ä¸å°±ä¸è¡äºï¼å ä¸ºè°ç¨computeççº¿ç¨å¹¶ä¸æ¯æ¦å¿µä¸çè°ç¨æ¹ï¼åèæ¯è°ç¨forkçé£ä¸ªã\n\n * åå¹¶è¡æµä¸æ ·ï¼ä¸åºçæå½ç¶å°è®¤ä¸ºå¨å¤æ ¸å¤çå¨ä¸ä½¿ç¨åæ¯/åå¹¶æ¡æ¶å°±æ¯é¡ºåºè®¡ç®å¿«ãä¸ä¸ªä»»å¡å¯ä»¥åè§£æå¤ä¸ªç¬ç«çå­ä»»å¡ï¼æè½è®©æ§è½å¨å¹¶è¡åæ¶æææåãææè¿äºå­ä»»å¡çè¿è¡æ¶é´é½åºè¯¥æ¯ååºæ°ä»»å¡æè±çæ¶é´é¿ï¼ä¸ä¸ªæ¯ç¨æ¹æ³æ¯æè¾å¥/è¾åºæ¾å¨ä¸ä¸ªå­ä»»å¡éï¼è®¡ç®æ¾å¨å¦ä¸ä¸ªéï¼è¿æ ·è®¡ç®å°±å¯ä»¥åè¾å¥/è¾åºåæ¶è¿è¡ãæ­¤å¤ï¼å¨æ¯è¾åä¸ç®æ³çé¡ºåºåå¹¶è¡çæ¬çæ§è½æ¶è¿æå«çå ç´ è¦èèãå°±åä»»ä½å¶ä»javaä»£ç ä¸æ ·ï¼åæ¯/åå¹¶æ¡æ¶éè¦âé¢ç­âæèè¯´è¦æ§è¡å éæä¼è¢«jitç¼è¯å¨ä¼åãåæ¶è¿è¦ç¥éï¼ç¼è¯å¨åç½®çä¼åå¯è½ä¼ä¸ºé¡ºåºçæ¬å¸¦æ¥ä¸äºä¼å¿ï¼ä¾å¦æ§è¡ä»£ç åæââå å»ä»æªè¢«ä½¿ç¨çè®¡ç®ï¼\n\n\n# 6.3.3 å·¥ä½çªå\n\nåºè¯¥è®©ååçå­ä»»å¡é½ç¨ç¸åçæ¶é´å®æï¼ä½æ¯ç±äºå¤é¨å ç´ ï¼å¦ååç­ç¥æçä½ãç£çè®¿é®æ¢ææ¯éè¦åå¤é¨æå¡åè°æ§è¡ï¼æ¯ä¸ªå­ä»»å¡æè±çæ¶é´ä¸å°½ç¸åãæ¡æ¶ä½¿ç¨ä¸ç§ç§°ä¸ºå·¥ä½çªåï¼work stealingï¼çææ¯è§£å³è¿ä¸ªé®é¢ã\n\n\n\n\n# 6.4 spliteratorå¯åè¿­ä»£å¨\n\npublic interace spliterator<t> {\n    /**\n     * æåºéåï¼å¦ææ²¡æåç´ åè¿åfalseï¼å¦åå¯¹åç´ æ§è¡ç»å®çæä½å¹¶è¿åtrue\n     */\n    boolean tryadvance(consumer<? super t> action);\n    \n    /**\n     * æåç´ ååºå»åç»ç¬¬äºä¸ªspliterator,è®©ä»ä»¬å¹¶è¡å¤çï¼ç´å°è¿ånull\n     */\n    spliterator<t> trysplit();\n    \n     /**\n     * è¿åforeachremainingéåå°éå°çä¼°è®¡å¼ï¼å¦ææ éææ æ³è®¡ç®ï¼åè¿ålong.max_value\n     */\n    long estimatesize();\n    \n    int characteristics();\n}\n\n\n\n# 6.4.1 æåè¿ç¨\n\n\n\nspliteratorçç¹æ§\n\nç¹æ§           å«ä¹\nordered      åç´ ææ¢å®é¡ºåºï¼spliteratorå¨éååååæ¶éµå¾ªè¿ä¸é¡ºåº\ndistinct     å¯¹äºä»»æä¸å¯¹éåè¿çåç´ xåyï¼x.equals(y)è¿åfalse\nsorted       éåçåç´ æç§ä¸ä¸ªé¢å®ä¹çé¡ºåºæåº\nsized        è¯¥spliteratorç±ä¸ä¸ªå·²ç¥å¤§å°çæºå»ºç«ï¼å æ­¤estimatedsize()è¿åçæ¯åç¡®å¼\nnonnull      ä¿è¯éåçåç´ ä¸ä¼ä¸ºnull\nimmutable    æ°æ®æºä¸è½ä¿®æ¹\nconcurrent   æ°æ®æºå¯è¢«å¶ä»çº¿ç¨åæ¶ä¿®æ¹èæ éåæ­¥\nsubsized     æææååºæ¥çspliteratoré½æ¯sized\n\n\n# 6.4.2 èªå®ä¹spliterator\n\n\n# 7. éæãæµè¯åè°è¯\n\n\n# 7.1 éæ\n\n\n# 7.1.1 ä½¿ç¨lambdaæ¿æ¢å¿åç±»\n\néè¦æ³¨æçæ¯ï¼lambdaä¸­çthisåsuperä»£è¡¨çæ¯åå«ç±»ï¼èå¿åç±»çä»£è¡¨å¿åç±»èªèº«ï¼å¿åç±»å¯ä»¥å±è½åå«ç±»çåéï¼èlambdaä¸è½ãå¦å¤ï¼å¨æ¶åéè½½çä¸ä¸æä¸­ï¼åºè¯¥ä½¿ç¨æ¾ç¤ºçç±»åè½¬æ¢æ¥åä½ç±»åæ¨æ­çé¾åº¦ã\n\n\n# 7.1.2 æ¹æ³å¼ç¨ä»£æ¿lambda\n\n\n# 7.1.3 ä»å½ä»¤å¼çæ°æ®å¤çåæ¢å°stream\n\n\n# 7.1.4éææ¨¡å¼\n\nææ¡ä»¶çå»¶è¿æ§è¡\n\nif (logger.isloggable(log.finer)){\n\tlogger.finer("problem: " + generatediagnostic());\n}\n//ä½¿ç¨logæ¹æ³ä»£æ¿ä¸é¢çå¤æ­\npublic void log(level level, supplier<string> msgsupplier)\n\n\nå¦æéè¦é¢ç¹å°ä»å®¢æ·ç«¯å»æ¥è¯¢ä¸ä¸ªå¯¹è±¡çç¶æï¼æ¯å¦æ¥å¿å¨çç¶æï¼ï¼åªæ¯ä¸ºäºä¼ éåæ°ãè°ç¨è¯¥å¯¹è±¡çä¸ä¸ªæ¹æ³ï¼æ¯å¦è¾åºä¸æ¡æ¥å¿ï¼ï¼é£ä¹å¯ä»¥èèå®ç°ä¸ä¸ªæ°çæ¹æ³ï¼ä»¥lambdaæèæ¹æ³è¡¨è¾¾å¼ä½ä¸ºåæ°ï¼ä»£ç ä¼æ´æè¯»ï¼å°è£æ§ä¼æ´å¥½ï¼å¯¹è±¡çç¶æä¹ä¸ä¼æ´é²ç»å®¢æ·ç«¯ä»£ç äºï¼ã\n\nç¯ç»æ§è¡\n\nlambdaä½ä¸ºåæ°ä¼ éï¼ç±»ä¼¼åé¢ã\n\n\n# 7.2 ä½¿ç¨lambdaéæé¢åå¯¹è±¡çè®¾è®¡æ¨¡å¼\n\n\n# 7.2.1 ç­ç¥æ¨¡å¼\n\nå³é®ç¹ï¼å®ç°å½æ°å¼æ¥å£\n\n\n# 7.2.2 æ¨¡æ¿æ¹æ³\n\nå³é®ç¹ï¼æ¹æ³å¢å å½æ°å¼å¥å\n\n\n# 7.2.3 è§å¯èæ¨¡å¼\n\nå³é®ç¹ï¼lambdaä»£æ¿éç¥æ¹æ³ï¼æ³¨æå¦æè§å¯èçé»è¾ååå¤æï¼æ¯å¦å®ä»¬å¯è½ææç¶æäº¦ææ¯å®ä¹äºå¤ä¸ªæ¹æ³ç­ï¼ååºç»§ç»­ä½¿ç¨ç±»çæ¹å¼ã\n\n\n# 7.2.4 è´£ä»»é¾æ¨¡å¼\n\nå³é®ç¹ï¼unaryoperatorãandthen\n\n\n# 7.2.5 å·¥åæ¨¡å¼\n\nå³é®ç¹ï¼æé å½æ°å¥åä½äº2ä¸ªæ¶ï¼ä½¿ç¨æ¹æ³å¼ç¨...\n\n\n# 7.2 æµè¯lambda\n\n\n# 7.3 è°è¯\n\npeekæ¹æ³ï¼\n\n\n# 8.é»è®¤æ¹æ³\n\nä¸åç±»åå¼å®¹æ§ï¼äºè¿å¶ãæºä»£ç ãåå½æ°è¡ä¸º\n\n * äºè¿å¶å¼å®¹ï¼ç°æçäºè¿å¶æ§è¡æä»¶è½æ ç¼é¾ï¼åæ¬éªè¯ãåå¤åè§£æï¼åè¿è¡ãæ¯å¦ï¼ä¸ºæ¥å£æ·»å ä¸ä¸ªæ¹æ³å°±æ¯äºè¿å¶å¼å®¹çï¼è¿ç§æ¹å¼ä¸ï¼å¦ææ°å çæ¹æ³ä¸è¢«è°ç¨ï¼æ¥å£å·²ç»å®ç°çæ¹æ³å¯ä»¥ç»§ç»­è¿è¡ï¼ä¸ä¼åºç°éè¯¯ã\n * æºä»£ç å¼å®¹ï¼å¼å¥åååï¼ç°æçç¨åºä¾ç¶è½æåç¼è¯éè¿ã\n * å½æ°è¡ä¸ºå¼å®¹ï¼åæ´åï¼ç¨åºæ¥ååæ ·çè¾å¥è½å¾å°åæ ·çç»æã\n\nè§£å³è±å½¢ç»§æ¿çä¸æ¡è§å\n\n * ç±»ä¸­çæ¹æ³ä¼åçº§æé«ãç±»æç¶ç±»ä¸­å£°æçæ¹æ³çä¼åçº§é«äºä»»ä½å£°æä¸ºé»è®¤æ¹æ³çä¼åçº§\n * å¦æç¬¬ä¸æ¡æ æ³å¤æ­ï¼é£ä¹å­æ¥å£çä¼åçº§æ´é«ãå½æ°ç­¾åç¸åæ¶ï¼ä¼åéæ©æ¥ææå·ä½å®ç°çé»è®¤æ¹æ³çæ¥å£ï¼å³å¦æbç»§æ¿äºaï¼é£ä¹bå°±æ¯aæ´å å·ä½\n * å¦æè¿æ¯æ æ³å¤æ­ï¼ç»§æ¿äºå¤ä¸ªæ¥å£çç±»å¿é¡»éè¿æ¾ç¤ºè¦çåè°ç¨ææçæ¹æ³\n\njava8å¼å¥äºä¸ç§æ°è¯­æ³x.super.m(...)ï¼å¶ä¸­xæ¯å¸æè°ç¨çmæ¹æ³æå¨çç¶æ¥å£ã\n\n\n# 9.optional\n\nä½¿ç¨optionalçè¯­ä¹å¨äºï¼å¯ä»¥å¾æ¸æ¥å°ç¥éå®å¯ä»¥æ¥åç©ºå¼ï¼æèå®å¯è½è¿åä¸ä¸ªç©ºå¼ã\n\noptional.empty();\noptional.of(...);\noptional.ofnullable(...);\n//å¦æè¦å¤ççåç´ ä¸ºç©ºï¼åä¸åä»»ä½æä½,å¹¶è¿åä¸ä¸ªç©ºçoptionalå¯¹è±¡\noptional.map(...);\noptional.flatmap(...);\n\n\n\n> optionalä¸è½è¢«åºååãjavaè¯­è¨çæ¶æå¸æç¡®å°è¯´è¿å®çè®¾è®¡åè¡·ä»ä»æ¯è¦æ¯æè½è¿åoptionalå¯¹è±¡çè¯­æ³ã\n\noptional.get();\noptional.orelse(t other);\noptional.orelseget(supplier<? extends t> other);\noptional.orelsethrow(supplier<? extends x> exceptionsupplier);\noptional.ifpresent(consumer<? super t>);\noptional.ispresent();\n\n\n\n# 10.completablefutureç»åå¼å¼æ­¥ç¼ç¨\n\nç¸æ¯äºå¹¶è¡æµï¼completablefutureçä¼å¿å¨äºå¯ä»¥éç½®çº¿ç¨æ± ä¸­ççº¿ç¨å¤§å°ã\n\n * å¦æè¿è¡çæ¯è®¡ç®å¯éåçæä½ï¼å¹¶ä¸æ²¡æi/oï¼æ¨èä½¿ç¨streamæ¥å£ã\n * å¦æå¹¶è¡çå·¥ä½ååè¿æ¶åç­å¾i/oçæä½ï¼åæ¬ç½ç»è¿æ¥ç­å¾ï¼ï¼é£ä¹ä½¿ç¨completablefutureçµæ´»æ§æ´å¥½ã\n\n\n# 11.æ°çæ¥æapi\n\n\n# 11.1 localdateålocaltime\n\n\n# 11.2 instant\n\nä¸ºäºä¾¿äºæºå¨ä½¿ç¨èè®¾è®¡\n\n\n# 11.3 durationæperiod\n\ndurationä¸»è¦ç¨äºä»¥ç§åçº³ç§è¡¡éæ¶é´çé¿ç­ï¼periodå¯ä»¥ä»¥å¹´ãæææ¥çæ¹å¼å¯¹å¤ä¸ªæ¶é´åä½å»ºæ¨¡ã\n\næ¹æ³å            æ¯å¦éææ¹æ³   æè¿°\nbetween        æ¯        åå»ºä¸¤ä¸ªæ¶é´ç¹ä¹é´ç interval (é´é)\nfrom           æ¯        ç±ä¸ä¸ªä¸´æ¶æ¶é´ç¹åå»º interval\nof             æ¯        ç±å®çç»æé¨ååå»º interval çå®ä¾\nparse          æ¯        ç±å­ç¬¦ä¸²åå»º interval çå®ä¾\naddto          å¦        åå»ºè¯¥ interval çå¯æ¬ï¼å¹¶å°å¶Ô¯å å°æä¸ªæå®ç temporal å¯¹è±¡\nget            å¦        è¯»åè¯¥ interval çç¶æ\nisnegative     å¦        æ£æ¥è¯¥ interval æ¯å¦ä¸ºè´å¼ï¼ä¸åå«é¶\niszero         å¦        æ£æ¥è¯¥ interval çæ¶é¿æ¯å¦ä¸ºé¶\nminus          å¦        éè¿åå»ä¸å®çæ¶é´åå»ºè¯¥ interval çå¯æ¬\nmultipliedby   å¦        å° interval çå¼ä¹ä»¥æä¸ªæ éåå»ºè¯¥ interval çå¯æ¬\nnegated        å¦        ä»¥å¿½ç¥æä¸ªæ¶é¿çæ¹å¼åå»ºè¯¥ interval çå¯æ¬\nplus           å¦        ä»¥å¢å æä¸ªæå®çæ¶é¿çæ¹å¼åå»ºè¯¥ interval çå¯æ¬\nsubtractfrom   å¦        ä»æå®ç temporal å¯¹è±¡ä¸­åå»è¯¥ interval\n\n\n# 11.4 æçºµãè§£æåæ ¼å¼åæ¥æ\n\nlocaldate date1 = localdate.of(2014, 3, 18);\nlocaldate date2 = date1.withyear(2011);\nlocaldate date3 = date2.withdayofmonth(25);\nlocaldate date4 = date3.with(chronofield.month_of_year, 9);\n\nlocaldate date1 = localdate.of(2014, 3, 18);\nlocaldate date2 = date1.plusweeks(1);\nlocaldate date3 = date2.minusyears(3);\nlocaldate date4 = date3.plus(6, chronounit.months);\n\n\næ¹æ³å        æ¯å¦éææ¹æ³   æè¿°\nfrom       æ¯        ä¾æ®ä¼ å¥ç temporal å¯¹è±¡åå»ºå¯¹è±¡å®ä¾\nnow        æ¯        ä¾æ®ç³»ç»æ¶éåå»º temporal å¯¹è±¡\nof         æ¯        ç± temporal å¯¹è±¡çæä¸ªé¨ååå»ºè¯¥å¯¹è±¡çå®ä¾\nparse      æ¯        ç±å­ç¬¦ä¸²åå»º temporal å¯¹è±¡çå®ä¾\natoffset   å¦        å° temporal å¯¹è±¡åæä¸ªæ¶åºåç§»ç¸ç»å\natzone     å¦        å° temporal å¯¹è±¡åæä¸ªæ¶åºç¸ç»å\nformat     å¦        ä½¿ç¨æä¸ªæå®çæ ¼å¼å¨å°temporalå¯¹è±¡è½¬æ¢ä¸ºå­ç¬¦ä¸²ï¼ instantç±»ä¸æä¾è¯¥æ¹æ³ï¼\nget        å¦        è¯»å temporal å¯¹è±¡çæä¸é¨åçå¼\nminus      å¦        åå»º temporal å¯¹è±¡çä¸ä¸ªå¯æ¬ï¼éè¿å°å½å temporal å¯¹è±¡çå¼Ñå»ä¸å®çæ¶é¿ï¼åå»ºè¯¥å¯æ¬\nplus       å¦        åå»º temporal å¯¹è±¡çä¸ä¸ªå¯æ¬ï¼éè¿å°å½å temporal å¯¹è±¡çå¼å ä¸ä¸å®çæ¶é¿ï¼åå»ºè¯¥å¯æ¬\nwith       å¦        ä»¥è¯¥ temporal å¯¹è±¡ä¸ºæ¨¡æ¿ï¼å¯¹æäºç¶æè¿è¡ä¿®æ¹åå»ºè¯¥å¯¹è±¡çå¯æ¬\n\n\n# 11.4.1 ä½¿ç¨temporaladjuster\n\nå¯ä»¥ä½¿ç¨éè½½çæ¬çwithæ¹æ³ï¼åå¶ä¼ éä¸ä¸ªæä¾äºæ´å¤å®å¶åéæ©çtemporaladjusterå¯¹è±¡ï¼æ´ å  çµ æ´» å° å¤ ç æ¥ æ ã\n\n\n\n----------------------------------------\n\n\n# 11.4.2 datetimeformatter\n\nçº¿ç¨å®å¨çï¼åç½®äºå ç§è§£æå¸¸éã\n\nlocaldate date = localdate.of(2014, 3, 18);\nstring s1 = date.format(datetimeformatter.basic_iso_date); // 20140318\nstring s2 = date.format(datetimeformatter.iso_local_date); // 2014-03-18\n\nlocaldate date1 = localdate.parse("20140318",datetimeformatter.basic_iso_date);\nlocaldate date2 = localdate.parse("2014-03-18",datetimeformatter.iso_local_date);\n\ndatetimeformatter formatter = datetimeformatter.ofpattern("dd/mm/yyyy");\nlocaldate date1 = localdate.of(2014, 3, 18);\nstring formatteddate = date1.format(formatter);\nlocaldate date2 = localdate.parse(formatteddate, formatter);\n\n\nåå»ºä¸ä¸ªæ¬å°åçdatetimeformatter\n\ndatetimeformatter italianformatter =datetimeformatter.ofpattern("d. mmmm yyyy", locale.italian);\nlocaldate date1 = localdate.of(2014, 3, 18);\nstring formatteddate = date.format(italianformatter); // 18. marzo 2014\nlocaldate date2 = localdate.parse(formatteddate, italianformatter);\n\n\nå¦æéè¦æ´å ç»ç²åº¦çæ§å¶ï¼ datetimeformatterbuilderç±»è¿æä¾äºæ´å¤æçæ ¼å¼å¨ï¼å¯ä»¥éæ©æ°å½çæ¹æ³ï¼ä¸æ­¥ä¸æ­¥å°æé èªå·±çæ ¼å¼å¨ãå¦å¤ï¼å®è¿æä¾äºéå¸¸å¼ºå¤§çè§£æåè½ï¼æ¯å¦åºåå¤§å°åçè§£æãææ§è§£æï¼åè®¸è§£æå¨ä½¿ç¨å¯åå¼çæºå¶å»è§£æè¾å¥ï¼ä¸ç²¾ ç¡® å° å¹ é æ å® ç æ¨¡ å¼ ï¼ã å¡«å ï¼ ä»¥ å å¨ æ ¼ å¼ å¨ ä¸­ æ å® å¯ é è ã\n\ndatetimeformatter italianformatter = new datetimeformatterbuilder()\n.appendtext(chronofield.day_of_month)\n.appendliteral(". ")\n.appendtext(chronofield.month_of_year)\n.appendliteral(" ")\n.appendtext(chronofield.year)\n.parsecaseinsensitive()\n.toformatter(locale.italian);\n\n\n\n# 11.5 å¤çä¸åçæ¶åºååæ³\n\n',charsets:{cyrillic:!0,cjk:!0}},{title:"Home",frontmatter:{home:!0,heroImage:"/assets/logo.png",heroText:"ccc-docs",tagline:"ðcheysen'sç¥è¯ææ¡£åº",actionText:"å¼å§éè¯» â",actionLink:"/pages/spring/core/",bannerBg:"none",features:[{title:"ææ¡£ç¿»è¯",details:"å¯¹åç§æ¡æ¶ãç¸å³ææ¯çè±æææ¡£çç¿»è¯"},{title:"å¼åæå",details:"è®°å½å¼åä¸­éå°çé®é¢ï¼å¹¶å½¢ææ»ç»åå©è®°æå"},{title:"è¯»ä¹¦ç¬è®°",details:"è®°å½éè¯»ä¹¦ç±åçæè¦ææ»ç»"}],postList:"none"},regularPath:"/",relativePath:"index.md",key:"v-43fc48ca",path:"/",headersStr:null,content:"",normalizedContent:"",charsets:{}},{title:"Spring Core",frontmatter:{title:"Spring Core",permalink:"/pages/spring/core/",article:!0,date:"2022-01-20T11:23:25.000Z"},regularPath:"/01.%E6%96%87%E6%A1%A3%E7%BF%BB%E8%AF%91/01.Spring%20Framework/01.core.html",relativePath:"01.ææ¡£ç¿»è¯/01.Spring Framework/01.core.md",key:"v-a5cec558",path:"/pages/spring/core/",headers:[{level:2,title:"1.1. Spring Iocå®¹å¨åBeansä»ç»",slug:"_1-1-spring-iocå®¹å¨åbeansä»ç»",normalizedTitle:"1.1. spring iocå®¹å¨åbeansä»ç»",charIndex:32},{level:2,title:"1.2. Containerä»ç»",slug:"_1-2-containerä»ç»",normalizedTitle:"1.2. containerä»ç»",charIndex:782},{level:3,title:"1.2.1. åæ°æ®éç½®",slug:"_1-2-1-åæ°æ®éç½®",normalizedTitle:"1.2.1. åæ°æ®éç½®",charIndex:1453},{level:3,title:"1.2.2. å®¹å¨åå§å",slug:"_1-2-2-å®¹å¨åå§å",normalizedTitle:"1.2.2. å®¹å¨åå§å",charIndex:2968},{level:3,title:"1.2.3. ä½¿ç¨å®¹å¨",slug:"_1-2-3-ä½¿ç¨å®¹å¨",normalizedTitle:"1.2.3. ä½¿ç¨å®¹å¨",charIndex:6579},{level:2,title:"1.3. Beanä»ç»",slug:"_1-3-beanä»ç»",normalizedTitle:"1.3. beanä»ç»",charIndex:7998},{level:3,title:"1.3.1. Beanså½å",slug:"_1-3-1-beanså½å",normalizedTitle:"1.3.1. beanså½å",charIndex:9190},{level:3,title:"1.3.2. å®ä¾åBeans",slug:"_1-3-2-å®ä¾åbeans",normalizedTitle:"1.3.2. å®ä¾åbeans",charIndex:10872},{level:2,title:"1.4. ä¾èµDependencies",slug:"_1-4-ä¾èµdependencies",normalizedTitle:"1.4. ä¾èµdependencies",charIndex:14474},{level:3,title:"1.4.1. ä¾èµæ³¨å¥",slug:"_1-4-1-ä¾èµæ³¨å¥",normalizedTitle:"1.4.1. ä¾èµæ³¨å¥",charIndex:14630},{level:3,title:"1.4.2.  ä¾èµéç½®è¯¦è§£",slug:"_1-4-2-ä¾èµéç½®è¯¦è§£",normalizedTitle:"1.4.2.  ä¾èµéç½®è¯¦è§£",charIndex:null},{level:3,title:"1.4.3. depends-on",slug:"_1-4-3-depends-on",normalizedTitle:"1.4.3. depends-on",charIndex:37135},{level:3,title:"1.4.4. æå è½½Beans",slug:"_1-4-4-æå è½½beans",normalizedTitle:"1.4.4. æå è½½beans",charIndex:37890},{level:3,title:"1.4.5. èªå¨è£éåä½è",slug:"_1-4-5-èªå¨è£éåä½è",normalizedTitle:"1.4.5. èªå¨è£éåä½è",charIndex:38653},{level:3,title:"1.4.6. æ¹æ³æ³¨å¥",slug:"_1-4-6-æ¹æ³æ³¨å¥",normalizedTitle:"1.4.6. æ¹æ³æ³¨å¥",charIndex:40945},{level:2,title:"1.5. Beanä½ç¨å",slug:"_1-5-beanä½ç¨å",normalizedTitle:"1.5. beanä½ç¨å",charIndex:46502},{level:3,title:"1.5.1. åä¾ä½ç¨å",slug:"_1-5-1-åä¾ä½ç¨å",normalizedTitle:"1.5.1. åä¾ä½ç¨å",charIndex:47532},{level:3,title:"1.5.2. ååä½ç¨å",slug:"_1-5-2-ååä½ç¨å",normalizedTitle:"1.5.2. ååä½ç¨å",charIndex:48268},{level:3,title:"1.5.3. åå«ååbeanå¼ç¨çåä¾beans",slug:"_1-5-3-åå«ååbeanå¼ç¨çåä¾beans",normalizedTitle:"1.5.3. åå«ååbeanå¼ç¨çåä¾beans",charIndex:48981},{level:3,title:"1.5.4. Request, Session, Application, and WebSocket ä½ç¨å",slug:"_1-5-4-request-session-application-and-websocket-ä½ç¨å",normalizedTitle:"1.5.4. request, session, application, and websocket ä½ç¨å",charIndex:49304},{level:3,title:"1.5.5. èªå®ä¹ä½ç¨å",slug:"_1-5-5-èªå®ä¹ä½ç¨å",normalizedTitle:"1.5.5. èªå®ä¹ä½ç¨å",charIndex:56491},{level:2,title:"1.6. èªå®ä¹beanæ§è´¨",slug:"_1-6-èªå®ä¹beanæ§è´¨",normalizedTitle:"1.6. èªå®ä¹beanæ§è´¨",charIndex:59254},{level:3,title:"1.6.1. Lifecycle åè°",slug:"_1-6-1-lifecycle-åè°",normalizedTitle:"1.6.1. lifecycle åè°",charIndex:59403},{level:3,title:"1.6.2. ApplicationContextAwareåBeanNameAware",slug:"_1-6-2-applicationcontextawareåbeannameaware",normalizedTitle:"1.6.2. applicationcontextawareåbeannameaware",charIndex:66917},{level:3,title:"1.6.3. å¶ä»Awareæ¥å£",slug:"_1-6-3-å¶ä»awareæ¥å£",normalizedTitle:"1.6.3. å¶ä»awareæ¥å£",charIndex:68100},{level:2,title:"1.7. Beanå®ä¹ç»§æ¿",slug:"_1-7-beanå®ä¹ç»§æ¿",normalizedTitle:"1.7. beanå®ä¹ç»§æ¿",charIndex:70065},{level:2,title:"1.8. å®¹å¨æ©å±ç¹",slug:"_1-8-å®¹å¨æ©å±ç¹",normalizedTitle:"1.8. å®¹å¨æ©å±ç¹",charIndex:71908},{level:3,title:"1.8.1. ç¨BeanPostProcessorèªå®ä¹Beans",slug:"_1-8-1-ç¨beanpostprocessorèªå®ä¹beans",normalizedTitle:"1.8.1. ç¨beanpostprocessorèªå®ä¹beans",charIndex:72010},{level:3,title:"1.8.2. ä½¿ç¨BeanFactoryPostProcessorèªå®ä¹éç½®åæ°æ®",slug:"_1-8-2-ä½¿ç¨beanfactorypostprocessorèªå®ä¹éç½®åæ°æ®",normalizedTitle:"1.8.2. ä½¿ç¨beanfactorypostprocessorèªå®ä¹éç½®åæ°æ®",charIndex:77010},{level:3,title:"1.8.3. ä½¿ç¨FactoryBeanèªå®ä¹å®ä¾åé»è¾",slug:"_1-8-3-ä½¿ç¨factorybeanèªå®ä¹å®ä¾åé»è¾",normalizedTitle:"1.8.3. ä½¿ç¨factorybeanèªå®ä¹å®ä¾åé»è¾",charIndex:81389},{level:2,title:"1.9. åºäºæ³¨è§£çå®¹å¨éç½®",slug:"_1-9-åºäºæ³¨è§£çå®¹å¨éç½®",normalizedTitle:"1.9. åºäºæ³¨è§£çå®¹å¨éç½®",charIndex:82095},{level:3,title:"1.9.1. @Required",slug:"_1-9-1-required",normalizedTitle:"1.9.1. @required",charIndex:84064},{level:3,title:"1.9.2. ä½¿ç¨@Autowired",slug:"_1-9-2-ä½¿ç¨-autowired",normalizedTitle:"1.9.2. ä½¿ç¨@autowired",charIndex:84623},{level:3,title:"1.9.3.  ä½¿ç¨@Primaryè°æ´åºäºæ³¨è§£çèªå¨æ³¨å¥",slug:"_1-9-3-ä½¿ç¨-primaryè°æ´åºäºæ³¨è§£çèªå¨æ³¨å¥",normalizedTitle:"1.9.3.  ä½¿ç¨@primaryè°æ´åºäºæ³¨è§£çèªå¨æ³¨å¥",charIndex:null},{level:3,title:"1.9.4.  ä½¿ç¨@Qualifiersè°æ´åºäºæ³¨è§£çèªå¨æ³¨å¥",slug:"_1-9-4-ä½¿ç¨-qualifiersè°æ´åºäºæ³¨è§£çèªå¨æ³¨å¥",normalizedTitle:"1.9.4.  ä½¿ç¨@qualifiersè°æ´åºäºæ³¨è§£çèªå¨æ³¨å¥",charIndex:null},{level:2,title:"æå¡å®ä½å¨æ¨¡å¼",slug:"æå¡å®ä½å¨æ¨¡å¼",normalizedTitle:"æå¡å®ä½å¨æ¨¡å¼",charIndex:229}],headersStr:"1.1. Spring Iocå®¹å¨åBeansä»ç» 1.2. Containerä»ç» 1.2.1. åæ°æ®éç½® 1.2.2. å®¹å¨åå§å 1.2.3. ä½¿ç¨å®¹å¨ 1.3. Beanä»ç» 1.3.1. Beanså½å 1.3.2. å®ä¾åBeans 1.4. ä¾èµDependencies 1.4.1. ä¾èµæ³¨å¥ 1.4.2.  ä¾èµéç½®è¯¦è§£ 1.4.3. depends-on 1.4.4. æå è½½Beans 1.4.5. èªå¨è£éåä½è 1.4.6. æ¹æ³æ³¨å¥ 1.5. Beanä½ç¨å 1.5.1. åä¾ä½ç¨å 1.5.2. ååä½ç¨å 1.5.3. åå«ååbeanå¼ç¨çåä¾beans 1.5.4. Request, Session, Application, and WebSocket ä½ç¨å 1.5.5. èªå®ä¹ä½ç¨å 1.6. èªå®ä¹beanæ§è´¨ 1.6.1. Lifecycle åè° 1.6.2. ApplicationContextAwareåBeanNameAware 1.6.3. å¶ä»Awareæ¥å£ 1.7. Beanå®ä¹ç»§æ¿ 1.8. å®¹å¨æ©å±ç¹ 1.8.1. ç¨BeanPostProcessorèªå®ä¹Beans 1.8.2. ä½¿ç¨BeanFactoryPostProcessorèªå®ä¹éç½®åæ°æ® 1.8.3. ä½¿ç¨FactoryBeanèªå®ä¹å®ä¾åé»è¾ 1.9. åºäºæ³¨è§£çå®¹å¨éç½® 1.9.1. @Required 1.9.2. ä½¿ç¨@Autowired 1.9.3.  ä½¿ç¨@Primaryè°æ´åºäºæ³¨è§£çèªå¨æ³¨å¥ 1.9.4.  ä½¿ç¨@Qualifiersè°æ´åºäºæ³¨è§£çèªå¨æ³¨å¥ æå¡å®ä½å¨æ¨¡å¼",content:'# æ ¸å¿ææ¯\n\n> 5.3.2\n\n\n# 1.Iocå®¹å¨\n\n\n# 1.1. Spring Iocå®¹å¨åBeansä»ç»\n\næ¬ç« ä»ç»äºæ§å¶åè½¬ï¼IoCï¼åççSpringæ¡æ¶å®ç°ã IoCä¹ç§°ä¸ºä¾èµæ³¨å¥ï¼DIï¼ã å¨æ­¤è¿ç¨ä¸­ï¼å¯¹è±¡ä»éè¿æé å½æ°åæ°ï¼å·¥åæ¹æ³çåæ°æå¨æé åæä»å·¥åæ¹æ³è¿ååå¨å¯¹è±¡å®ä¾ä¸è®¾ç½®çå±æ§æ¥å®ä¹å¶ä¾èµé¡¹ï¼å³ä¸å®ä»¬ä¸èµ·ä½¿ç¨çå¶ä»å¯¹è±¡ï¼ ã ç¶åï¼å®¹å¨å¨åå»ºbeanæ¶æ³¨å¥é£äºä¾èµé¡¹ã æ­¤è¿ç¨ä»æ ¹æ¬ä¸è®²æ¯beanæ¬èº«éè¿ä½¿ç¨ç±»çç´æ¥æé æè¯¸å¦æå¡å®ä½å¨æ¨¡å¼ä¹ç±»çæºå¶æ¥æ§å¶å¶ä¾èµé¡¹çå®ä¾æä½ç½®çéè¿ç¨ï¼å æ­¤ç§°ä¸ºæ§å¶çåè½¬ï¼ã\n\norg.springframework.beansåorg.springframework.contextåæ¯Spring FrameworkçIoCå®¹å¨çåºç¡ãBeanFactoryæ¥å£æä¾äºä¸ç§è½å¤ç®¡çä»»ä½ç±»åå¯¹è±¡çé«çº§éç½®æºå¶ãApplicationContextæ¯BeanFactoryçå­æ¥å£ã å®å¢å äºï¼\n\n * ä¸Spring AOPåè½è½»æ¾éæ\n * æ¶æ¯èµæºå¤çï¼ç¨äºå½éåï¼\n * äºä»¶åå¸\n * åºç¨å±ç¹å®çä¸ä¸æï¼ä¾å¦Webåºç¨ç¨åºä¸­ä½¿ç¨çWebApplicationContext\n\nç®èè¨ä¹ï¼BeanFactoryæä¾äºéç½®æ¡æ¶ååºæ¬çåè½ï¼èApplicationContextæ·»å äºæ´å¤ä¼ä¸ç¹å®çåè½ã ApplicationContextæ¯BeanFactoryçå®æ´è¶éï¼å¨æ¬ç« ä¸­ä»å¨SpringçIoCå®¹å¨æè¿°ä¸­ä½¿ç¨ã\n\nå¨Springä¸­ï¼ææåºç¨ç¨åºä¸»å¹²å¹¶ç±Spring IoCå®¹å¨ç®¡ççå¯¹è±¡ç§°ä¸ºbeanãbeanæ¯ç±Spring IoCå®¹å¨å®ä¾åãç»è£åç®¡ççå¯¹è±¡ãå¦åï¼beanåªæ¯åºç¨ç¨åºä¸­ä¼å¤å¯¹è±¡ä¸­çä¸ä¸ªãbeanåå¶ä¹é´çä¾èµå³ç³»åæ å¨å®¹å¨ä½¿ç¨çéç½®åæ°æ®ä¸­ã\n\n\n# 1.2. Containerä»ç»\n\norg.springframework.context.ApplicationContextæ¥å£ä»£è¡¨Spring IoCå®¹å¨ï¼å¹¶è´è´£å®ä¾åï¼éç½®åç»è£Beanã å®¹å¨éè¿è¯»åéç½®åæ°æ®è·åæå³è¦å®ä¾åï¼éç½®åç»è£åªäºå¯¹è±¡çè¯´æã éç½®åæ°æ®ä»¥XMLï¼Javaæ³¨è§£æJavaä»£ç è¡¨ç¤ºã å®ä½¿æ¨è½å¤è¡¨è¾¾ç»æåºç¨ç¨åºçå¯¹è±¡ä»¥åè¿äºå¯¹è±¡ä¹é´çä¸°å¯ç¸äºä¾èµå³ç³»ã\n\nSpringæä¾äºApplicationContextæ¥å£çå ç§å®ç°ã å¨ç¬ç«åºç¨ç¨åºä¸­ï¼éå¸¸åå»ºClassPathXmlApplicationContextæFileSystemXmlApplicationContextçå®ä¾ã å°½ç®¡XMLæ¯å®ä¹éç½®åæ°æ®çä¼ ç»æ ¼å¼ï¼ä½æ¯å¯ä»¥éè¿æä¾å°éXMLéç½®æ¥å£°ææ§å°å¯ç¨å¯¹å¶ä»åæ°æ®æ ¼å¼çæ¯æï¼ä»èæç¤ºå®¹å¨å°Javaæ³¨è§£æä»£ç ç¨ä½åæ°æ®æ ¼å¼ã\n\nå¨å¤§å¤æ°åºç¨åºæ¯ä¸­ï¼ä¸éè¦æ¾å¼ç¨æ·ä»£ç å³å¯å®ä¾åä¸ä¸ªSpring IoCå®¹å¨çä¸ä¸ªæå¤ä¸ªå®ä¾ã ä¾å¦ï¼å¨Webåºç¨ç¨åºåºæ¯ä¸­ï¼åºç¨ç¨åºçweb.xmlæä»¶ä¸­çç®åå«è¡ï¼çº¦ï¼æ ·æ¿Webæè¿°ç¬¦XMLéå¸¸å°±è¶³å¤äºã å¦ææ¨ä½¿ç¨Spring Tools for Eclipseï¼ç±Eclipseé©±å¨çå¼åç¯å¢ï¼ï¼ååªéåå»å ä¸é¼ æ æå»é®å³å¯è½»æ¾åå»ºæ­¤æ ·æ¿éç½®ã\n\nä¸å¾æ¾ç¤ºäºSpringçå·¥ä½åççé«çº§è§å¾ã æ¨çåºç¨ç¨åºç±»ä¸éç½®åæ°æ®ç»åå¨ä¸èµ·ï¼ä»¥ä¾¿å¨åå»ºååå§åApplicationContextä¹åï¼æ¨å°æ¥æä¸ä¸ªå®å¨éç½®ä¸å¯æ§è¡çç³»ç»æåºç¨ç¨åºã\n\n\n\n\n# 1.2.1. åæ°æ®éç½®\n\nå¦ä¸å¾æç¤ºï¼Spring IoCå®¹å¨ä½¿ç¨ä¸ç§å½¢å¼çéç½®åæ°æ®ã æ­¤éç½®åæ°æ®è¡¨ç¤ºæ¨ä½ä¸ºåºç¨ç¨åºå¼åäººåå¦ä½åè¯Springå®¹å¨å®ä¾åï¼éç½®åç»è£åºç¨ç¨åºä¸­çå¯¹è±¡ãä¼ ç»ä¸ï¼éç½®åæ°æ®ä»¥ç®åç´è§çXMLæ ¼å¼æä¾ï¼è¿æ¯æ¬ç« å¤§é¨åç¨æ¥ä¼ è¾¾Spring IoCå®¹å¨çå³é®æ¦å¿µååè½çæ ¼å¼ã\n\n> åºäºXMLçåæ°æ®ä¸æ¯éç½®åæ°æ®çå¯ä¸åè®¸å½¢å¼ã Spring IoCå®¹å¨æ¬èº«ä¸å®éåå¥æ­¤éç½®åæ°æ®çæ ¼å¼å®å¨è±é©ã å¦ä»ï¼è®¸å¤å¼åäººåä¸ºä»ä»¬çSpringåºç¨ç¨åºéæ©åºäºJavaä»£ç çéç½®ã\n\n * åºäºæ³¨è§£çéç½®ï¼Spring 2.5å¼å¥äºå¯¹åºäºæ³¨è§£çéç½®åæ°æ®çæ¯æã\n * åºäºJavaçéç½®ï¼ä»Spring 3.0å¼å§ï¼Spring JavaConfigé¡¹ç®æä¾çè®¸å¤åè½æä¸ºæ ¸å¿Spring Frameworkçä¸é¨åã å æ­¤ï¼æ¨å¯ä»¥ä½¿ç¨Javaèä¸æ¯XMLæä»¶æ¥å®ä¹åºç¨ç¨åºç±»å¤é¨çbeanã è¦ä½¿ç¨è¿äºæ°åè½ï¼è¯·åè§@ Configurationï¼@Beanï¼@Importå@DependsOnæ³¨è§£ã\n\nSpringéç½®ç±å®¹å¨å¿é¡»ç®¡ççè³å°ä¸ä¸ªï¼éå¸¸æ¯ä¸ä¸ªä»¥ä¸ï¼beanå®ä¹ç»æã åºäºXMLçéç½®åæ°æ®å°è¿äºbeanéç½®ä¸ºé¡¶çº§<beans />åç´ åç<bean />åç´ ã Javaéç½®éå¸¸å¨@Configurationç±»ä¸­ä½¿ç¨@Beanæ³¨éçæ¹æ³ã\n\nè¿äºbeanå®ä¹å¯¹åºäºç»æåºç¨ç¨åºçå®éå¯¹è±¡ã éå¸¸ï¼æ¨å®ä¹æå¡å±å¯¹è±¡ï¼æ°æ®è®¿é®å¯¹è±¡ï¼DAOï¼ï¼è¡¨ç¤ºå¯¹è±¡ï¼ä¾å¦Struts Actionå®ä¾ï¼ï¼åºç¡ç»æå¯¹è±¡ï¼ä¾å¦Hibernate SessionFactoriesï¼JMSéåï¼ç­ç­ã éå¸¸ï¼ä¸ä¼å¨å®¹å¨ä¸­éç½®ç»ç²åº¦çåå¯¹è±¡ï¼å ä¸ºDAOåä¸å¡é»è¾éå¸¸è´è´£åå»ºåå è½½åå¯¹è±¡ã ä½æ¯ï¼æ¨å¯ä»¥ä½¿ç¨Springä¸AspectJçéææ¥éç½®å¨IoCå®¹å¨æ§å¶ä¹å¤åå»ºçå¯¹è±¡ã è¯·åéä½¿ç¨AspectJéè¿Springä¾èµæ³¨å¥åå¯¹è±¡ã\n\nä»¥ä¸ç¤ºä¾æ¾ç¤ºäºåºäºXMLçéç½®åæ°æ®çåºæ¬ç»æï¼\n\n<?xml version="1.0" encoding="UTF-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n    xsi:schemaLocation="http://www.springframework.org/schema/beans\n        https://www.springframework.org/schema/beans/spring-beans.xsd">\n\n    <bean id="..." class="...">  \n        \x3c!-- collaborators and configuration for this bean go here --\x3e\n    </bean>\n\n    <bean id="..." class="...">\n        \x3c!-- collaborators and configuration for this bean go here --\x3e\n    </bean>\n\n    \x3c!-- more bean definitions go here --\x3e\n\n</beans>\n\n\n * idå±æ§æ¯ä¸ä¸ªæ è¯åä¸ªbeanå®ä¹çå­ç¬¦ä¸²ãå®çå¼æä»£è¯¥å¯¹è±¡çå¼ç¨ã\n\n * classå±æ§å®ä¹beançç±»åå¹¶ä½¿ç¨å®å¨éå®åã\n\n\n# 1.2.2. å®¹å¨åå§å\n\næä¾ç»ApplicationContextæé å½æ°çä¸ä¸ªæå¤ä¸ªä½ç½®è·¯å¾æ¯èµæºå­ç¬¦ä¸²ï¼è¿äºèµæºå­ç¬¦ä¸²ä½¿å®¹å¨å¯ä»¥ä»åç§å¤é¨èµæºï¼ä¾å¦æ¬å°æä»¶ç³»ç»ï¼Java CLASSPATHç­ï¼å è½½éç½®åæ°æ®ã\n\nApplicationContext context = new ClassPathXmlApplicationContext("services.xml", "daos.xml");\n\n\n<?xml version="1.0" encoding="UTF-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n    xsi:schemaLocation="http://www.springframework.org/schema/beans\n        https://www.springframework.org/schema/beans/spring-beans.xsd">\n\n    \x3c!-- services --\x3e\n\n    <bean id="petStore" class="org.springframework.samples.jpetstore.services.PetStoreServiceImpl">\n        <property name="accountDao" ref="accountDao"/>\n        <property name="itemDao" ref="itemDao"/>\n        \x3c!-- additional collaborators and configuration for this bean go here --\x3e\n    </bean>\n\n    \x3c!-- more bean definitions for services go here --\x3e\n\n</beans>\n\n\n<?xml version="1.0" encoding="UTF-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n    xsi:schemaLocation="http://www.springframework.org/schema/beans\n        https://www.springframework.org/schema/beans/spring-beans.xsd">\n\n    <bean id="accountDao"\n        class="org.springframework.samples.jpetstore.dao.jpa.JpaAccountDao">\n        \x3c!-- additional collaborators and configuration for this bean go here --\x3e\n    </bean>\n\n    <bean id="itemDao" class="org.springframework.samples.jpetstore.dao.jpa.JpaItemDao">\n        \x3c!-- additional collaborators and configuration for this bean go here --\x3e\n    </bean>\n\n    \x3c!-- more bean definitions for data access objects go here --\x3e\n\n</beans>\n\n\nå¨åé¢çç¤ºä¾ä¸­ï¼æå¡å±ç±PetStoreServiceImplç±»åä¸¤ä¸ªJpaAccountDaoåJpaItemDaoç±»åçæ°æ®è®¿é®å¯¹è±¡ç»æï¼åºäºJPAå¯¹è±¡å³ç³»æ å°æ åï¼ã å±æ§åç§°åç´ å¼ç¨JavaBeanå±æ§çåç§°ï¼èrefåç´ å¼ç¨å¦ä¸ä¸ªbeanå®ä¹çåç§°ã idårefåç´ ä¹é´çè¿ç§èç³»è¡¨è¾¾äºåä½å¯¹è±¡ä¹é´çä¾èµæ§ã\n\n# æé åºäºXMLçåæ°æ®\n\nä½¿beanå®ä¹è·¨è¶å¤ä¸ªXMLæä»¶å¯è½å¾æç¨ã éå¸¸ï¼æ¯ä¸ªåç¬çXMLéç½®æä»¶é½ä»£è¡¨ä½ç³»ç»æä¸­çé»è¾å±ææ¨¡åãæ¨å¯ä»¥ä½¿ç¨åºç¨ç¨åºä¸ä¸ææé å½æ°ä»ææè¿äºXMLçæ®µä¸­å è½½beanå®ä¹ã å¦ä¸ä¸èä¸­æç¤ºï¼æ­¤æé å½æ°å·æå¤ä¸ªResourceä½ç½®ã æèï¼ä½¿ç¨<import />åç´ çä¸ä¸ªæå¤ä¸ªå®ä¾ä»å¦ä¸ä¸ªæä»¶å è½½beanå®ä¹ã ä»¥ä¸ç¤ºä¾æ¾ç¤ºäºå¦ä½æ§è¡æ­¤æä½ï¼\n\nCode\n\n<beans>\n    <import resource="services.xml"/>\n    <import resource="resources/messageSource.xml"/>\n    <import resource="/resources/themeSource.xml"/>\n\n    <bean id="bean1" class="..."/>\n    <bean id="bean2" class="..."/>\n</beans>\n\n\nå¨åé¢çç¤ºä¾ä¸­ï¼å¤é¨beanå®ä¹æ¯ä»ä¸ä¸ªæä»¶å è½½çï¼services.xmlï¼messageSource.xmlåthemeSource.xmlã ææä½ç½®è·¯å¾é½ç¸å¯¹äºæ§è¡å¯¼å¥çå®ä¹æä»¶ï¼å æ­¤ï¼services.xmlå¿é¡»ä¸æ§è¡å¯¼å¥çæä»¶ä½äºåä¸ç®å½æç±»è·¯å¾ä½ç½®ï¼èmessageSource.xmlåthemeSource.xmlå¿é¡»ä½äºè¯¥ä½ç½®ä¸æ¹çèµæºä½ç½® ã å¦æ¨æè§ï¼ææ è¢«å¿½ç¥ã ä½æ¯ï¼é´äºè¿äºè·¯å¾æ¯ç¸å¯¹çï¼æå¥½ä¸è¦ä½¿ç¨ä»»ä½æçº¿ã æ ¹æ®Spring Schemaï¼å¯¼å¥çæä»¶çåå®¹ï¼åæ¬é¡¶çº§<beans />åç´ ï¼å¿é¡»æ¯ææçXML beanå®ä¹ã\n\n> å¯ä»¥ä½ä¸å»ºè®®ä½¿ç¨ç¸å¯¹è·¯å¾â ../âå¼ç¨ç¶ç®å½ä¸­çæä»¶ã è¿æ ·åä¼åå»ºå¯¹å½ååºç¨ç¨åºå¤é¨æä»¶çä¾èµã ç¹å«æ¯ï¼ä¸å»ºè®®å¯¹classpathï¼URLï¼ä¾å¦ï¼classpathï¼../ services.xmlï¼ä½¿ç¨æ­¤å¼ç¨ï¼å¨URLä¸­ï¼è¿è¡æ¶è§£æè¿ç¨ä¼éæ©âæè¿âçclasspathæ ¹ç®å½ï¼ç¶åæ¥çå¶ç¶ç®å½ã ç±»è·¯å¾éç½®çæ´æ¹å¯è½å¯¼è´éæ©å¶ä»éè¯¯çç®å½ãæ¨å§ç»å¯ä»¥ä½¿ç¨ç»å¯¹èµæºè·¯å¾èä¸æ¯ç¸å¯¹è·¯å¾ï¼ä¾å¦ï¼fileï¼Cï¼/config/services.xmlæclasspathï¼/config/services.xmlã ä½æ¯è¯·æ³¨æï¼æ¨æ­£å¨å°åºç¨ç¨åºçéç½®è¦åå°ç¹å®çç»å¯¹è·¯å¾ã éå¸¸ï¼æå¥½ä¸ºè¿æ ·çç»å¯¹è·¯å¾ä¿çä¸ä¸ªé´æ¥å¯»åï¼ä¾å¦ï¼éè¿å¨è¿è¡æ¶éå¯¹JVMç³»ç»å±æ§è§£æçâ $ {â¦}âå ä½ç¬¦ã\n\nå½åç©ºé´æ¬èº«æä¾äºimportæä»¤ç¹æ§ãé¤äºæ®ébeanå®ä¹ä¹å¤ï¼Springæä¾çXMLåç§°ç©ºé´çéæ©ä¸­è¿æå¶ä»éç½®ç¹æ§ï¼ä¾å¦contextåutilå½åç©ºé´ã\n\n# The Groovy Bean Definition DSL(é¢åç¹å®è¯­è¨)\n\nä½ä¸ºå¤é¨åéç½®åæ°æ®çå¦ä¸ä¸ªç¤ºä¾ï¼Beanå®ä¹ä¹å¯ä»¥å¨SpringçGroovy Beanå®ä¹DSLä¸­è¡¨è¾¾ï¼å¦Grailsæ¡æ¶æç¤ºã éå¸¸ï¼è¿ç§éç½®ä½äºâ .groovyâæä»¶ä¸­ï¼å¶ç»æå¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\nbeans {\n    dataSource(BasicDataSource) {\n        driverClassName = "org.hsqldb.jdbcDriver"\n        url = "jdbc:hsqldb:mem:grailsDB"\n        username = "sa"\n        password = ""\n        settings = [mynew:"setting"]\n    }\n    sessionFactory(SessionFactory) {\n        dataSource = dataSource\n    }\n    myService(MyService) {\n        nestedBean = { AnotherBean bean ->\n            dataSource = dataSource\n        }\n    }\n}\n\n\nè¿ç§éç½®æ ·å¼å¨å¾å¤§ç¨åº¦ä¸ç­åäºXML beanå®ä¹ï¼çè³æ¯æSpringçXMLéç½®åç§°ç©ºé´ã å®è¿åè®¸éè¿importBeansæä»¤å¯¼å¥XML beanå®ä¹æä»¶ã\n\n\n# 1.2.3. ä½¿ç¨å®¹å¨\n\nApplicationContextæ¯é«çº§çå·¥åæ¥å£ï¼è¯¥å·¥åè½å¤ç»´æ¤ä¸åbeanåå¶ä¾èµå³ç³»çæ³¨åè¡¨ã éè¿ä½¿ç¨æ¹æ³T getBean(String nameï¼Class <T> requiredType)ï¼å¯ä»¥æ£ç´¢beançå®ä¾ã\n\n// create and configure beans\nApplicationContext context = new ClassPathXmlApplicationContext("services.xml", "daos.xml");\n\n// retrieve configured instance\nPetStoreService service = context.getBean("petStore", PetStoreService.class);\n\n// use configured instance\nList<String> userList = service.getUsernameList();\n\n\nå¨Groovyéç½®ä¸­ï¼ä½¿ç¨çèµ·æ¥éå¸¸ç¸ä¼¼ãå®æä¸ä¸ªä¸åçä¸ä¸æå®ç°ç±»ï¼è¯¥ç±»æ¯ægroovy(ä½ä¹çè§£XML beanå®ä¹)ãä¸é¢çç¤ºä¾æ¾ç¤ºäºGroovyéç½®\n\nApplicationContext context = new GenericGroovyApplicationContext("services.groovy", "daos.groovy");\n\n\næçµæ´»çåä½æ¯ç»åreaderå§æä½¿ç¨çGenericApplicationContextï¼ä¾å¦ï¼ä½¿ç¨XMLæä»¶çXmlBeanDefinitionReaderï¼å¦ä¸é¢çç¤ºä¾æç¤º\n\nGenericApplicationContext context = new GenericApplicationContext();\nnew XmlBeanDefinitionReader(context).loadBeanDefinitions("services.xml", "daos.xml");\ncontext.refresh();\n\n\nè¿å¯ä»¥ä¸ºGroovyæä»¶ä½¿ç¨GroovyBeanDefinitionReaderï¼å¦ä¸é¢çç¤ºä¾æç¤º\n\nGenericApplicationContext context = new GenericApplicationContext();\nnew GroovyBeanDefinitionReader(context).loadBeanDefinitions("services.groovy", "daos.groovy");\ncontext.refresh();\n\n\næ¨å¯ä»¥å¨ç¸åçApplicationContextä¸æ··ååå¹éè¿æ ·çè¯»åå¨å§æ´¾ï¼ä»ä¸åçéç½®æºè¯»åbeanå®ä¹.\n\nç¶åå¯ä»¥ä½¿ç¨getBeanæ£ç´¢beançå®ä¾ã ApplicationContextæ¥å£è¿æå¶ä»å ç§æ£ç´¢beançæ¹æ³ï¼ä½æ¯çæ³æåµä¸ï¼æ¨çåºç¨ç¨åºä»£ç æ°¸è¿ä¸è¦ä½¿ç¨å®ä»¬ã å®éä¸ï¼æ¨çåºç¨ç¨åºä»£ç åºè¯¥æ ¹æ¬ä¸è°ç¨getBeanï¼ï¼æ¹æ³ï¼å æ­¤å®å¨ä¸ä¾èµäºSpring APIã ä¾å¦ï¼Springä¸Webæ¡æ¶çéæä¸ºåç§Webæ¡æ¶ç»ä»¶ï¼ä¾å¦æ§å¶å¨åJSFç®¡ççBeanï¼æä¾äºä¾èµé¡¹æ³¨å¥ï¼ä½¿æ¨å¯ä»¥éè¿åæ°æ®ï¼ä¾å¦èªå¨è£éæ³¨éï¼å£°æå¯¹ç¹å®Beançä¾èµé¡¹ã\n\n\n# 1.3. Beanä»ç»\n\nå¨å®¹å¨æ¬èº«åï¼beanå®ä¹è¡¨ç¤ºä¸ºBeanDefinitionå¯¹è±¡ï¼å¶ä¸­åå«ï¼é¤å¶ä»ä¿¡æ¯å¤ï¼ä»¥ä¸åæ°æ®ï¼\n\n * åéå®çç±»åï¼éå¸¸ï¼å®ä¹äºBeançå®éå®ç°ç±»ã\n\n * Beanè¡ä¸ºéç½®åç´ ï¼ç¨äºå£°æBeanå¨å®¹å¨ä¸­çè¡ä¸ºï¼ä½ç¨åï¼çå½å¨æåè°ç­ï¼ã\n\n * å¼ç¨è¯¥beanå®æå¶å·¥ä½æéçå¶ä»beanã è¿äºå¼ç¨ä¹ç§°ä¸ºåä½èæä¾èµé¡¹ã\n\n * è¦å¨æ°åå»ºçå¯¹è±¡ä¸­è®¾ç½®çå¶ä»éç½®è®¾ç½®ï¼ä¾å¦ï¼æ± çå¤§å°éå¶æå¨ç®¡çè¿æ¥æ± çbeanä¸­è¦ä½¿ç¨çè¿æ¥æ°ã\n\nè¯¥åæ°æ®è½¬æ¢ä¸ºä¸ç»ç»ææ¯ä¸ªbeanå®ä¹çå±æ§ãä¸è¡¨æè¿°äºè¿äºå±æ§\n\nPROPERTY                   EXPLAINED INâ¦\nClass                      Instantiating Beans\nName                       Naming Beans\nScope                      Bean Scopes\nConstructor arguments      Dependency Injection\nProperties                 Dependency Injection\nAutowiring mode            Autowiring Collaborators\nLazy initialization mode   Lazy-initialized Beans\nInitialization method      Initialization Callbacks\nDestruction method         Destruction Callbacks\n\né¤äºåå«æå³å¦ä½åå»ºç¹å®beançä¿¡æ¯çbeanå®ä¹ä¹å¤ï¼ApplicationContextå®ç°è¿åè®¸æ³¨åå¨å®¹å¨å¤é¨ï¼ç±ç¨æ·ï¼åå»ºçç°æå¯¹è±¡ã è¿æ¯éè¿éè¿getBeanFactoryï¼ï¼æ¹æ³è®¿é®ApplicationContextçBeanFactoryæ¥å®æçï¼è¯¥æ¹æ³è¿åBeanFactory DefaultListableBeanFactoryå®ç°ã DefaultListableBeanFactoryéè¿registerSingletonï¼..ï¼åregisterBeanDefinitionï¼..ï¼æ¹æ³æ¯ææ­¤æ³¨åã ä½æ¯ï¼å¸åçåºç¨ç¨åºåªè½ä¸éè¿å¸¸è§beanå®ä¹åæ°æ®å®ä¹çbeanä¸èµ·ä½¿ç¨ã\n\n> Beanåæ°æ®åæå¨æä¾çåä¾å®ä¾éè¦å°½æ©æ³¨åï¼ä»¥ä¾¿å®¹å¨å¨èªå¨è£éåå¶ä»èªçæ­¥éª¤æé´æ­£ç¡®å°å¤æ­å®ä»¬ãè½ç¶å¨æç§ç¨åº¦ä¸æ¯æè¦çç°æåæ°æ®åç°æçåä¾å®ä¾ï¼ä½å¨è¿è¡æ¶æ³¨åæ°bean(ä¸å¯¹å·¥åçå®æ¶è®¿é®å¹¶å)ä¸åå®æ¹æ¯æï¼å¯è½ä¼å¯¼è´å¹¶åè®¿é®å¼å¸¸ãbeanå®¹å¨ä¸­çä¸ä¸è´ç¶æï¼æèä¸¤èé½æã\n\n\n# 1.3.1. Beanså½å\n\næ¯ä¸ªbeanå·æä¸ä¸ªæå¤ä¸ªæ è¯ç¬¦ã è¿äºæ è¯ç¬¦å¨æ¿è½½Beançå®¹å¨åå¿é¡»å¯ä¸ã ä¸ä¸ªbeanéå¸¸åªæä¸ä¸ªæ è¯ç¬¦ã ä½æ¯ï¼å¦æéè¦å¤ä¸ªï¼åå¯ä»¥å°å¤ä½çå«åè§ä¸ºå«åã\n\nå¨åºäºXMLçéç½®åæ°æ®ä¸­ï¼å¯ä»¥ä½¿ç¨idå±æ§å/ænameå±æ§æ¥æå®Beanæ è¯ç¬¦ã idå±æ§å¯è®©æ¨ç²¾ç¡®æå®ä¸ä¸ªidã æç§æ¯ä¾ï¼è¿äºåç§°æ¯å­æ¯æ°å­ï¼â myBeanâï¼â someServiceâç­ï¼ï¼ä½å®ä»¬ä¹å¯ä»¥åå«ç¹æ®å­ç¬¦ã å¦æè¦ä¸ºbeanå¼å¥å¶ä»å«åï¼è¿å¯ä»¥å¨nameå±æ§ä¸­æå®å®ä»¬ï¼å¹¶ç¨éå·ï¼ï¼ï¼ï¼åå·ï¼;ï¼æç©ºæ ¼åéã ä½ä¸ºåå²è®°å½ï¼å¨Spring 3.1ä¹åççæ¬ä¸­ï¼idå±æ§å®ä¹ä¸ºxsdï¼IDç±»åï¼è¯¥ç±»åéå¶äºå¯è½çå­ç¬¦ã ä»3.1å¼å§ï¼å®è¢«å®ä¹ä¸ºxsdï¼stringç±»åã è¯·æ³¨æï¼bean IDå¯ä¸æ§ä»ç±å®¹å¨å¼ºå¶æ§è¡ï¼å°½ç®¡ä¸åç±XMLè§£æå¨æ§è¡ã\n\næ¨ä¸éè¦æä¾beançåç§°æIDã å¦ææªæç¡®æä¾åç§°æIDï¼åå®¹å¨å°ä¸ºè¯¥beançæä¸ä¸ªå¯ä¸çåç§°ã ä½æ¯ï¼å¦æè¦æåç§°å¼ç¨è¯¥beanï¼åéè¿ä½¿ç¨refåç´ ææå¡å®ä½å¨æ ·å¼æ¥æ¾ï¼å¿é¡»æä¾ä¸ä¸ªåç§°ã ä¸æä¾åç§°çå¨æºä¸ä½¿ç¨åé¨beanåèªå¨è£éåä½ç±»æå³ã\n\n> çº¦å®æ¯å¨å½åbeanæ¶ä½¿ç¨æ åJavaçº¦å®æ¥å½åå®ä¾å­æ®µåãä¹å°±æ¯è¯´ï¼beanåç§°ä»¥å°åå­æ¯å¼å¤´ï¼å¹¶ä»é£ééç¨é©¼å³°æ ¼å¼ãè¿äºåç§°çä¾å­åæ¬accountManagerãaccountServiceãuserDaoãloginControllerç­ç­ãä¸è´å°å½åbeanå¯ä»¥ä½¿éç½®æ´æäºéè¯»åçè§£ãå¦å¤ï¼å¦ææ¨ä½¿ç¨Spring AOPï¼å¨å°éç¥(advice)åºç¨å°ä¸ç»ä¸åç§°ç¸å³çbeanæ¶ï¼å®ä¼å¾æç¨ã\n> \n> éè¿å¨ç±»è·¯å¾ä¸­è¿è¡ç»ä»¶æ«æï¼Springä¼æç§åé¢æè¿°çè§åä¸ºæªå½åçç»ä»¶çæBeanåç§°ï¼æ¬è´¨ä¸ï¼éç¨ç®åçç±»åç§°å¹¶å°å¶åå§å­ç¬¦è½¬æ¢ä¸ºå°åã ä½æ¯ï¼å¨ç¹æ®æåµä¸ï¼å¦ææå¤ä¸ªå­ç¬¦å¹¶ä¸ç¬¬ä¸ä¸ªåç¬¬äºä¸ªå­ç¬¦åä¸ºå¤§åå­æ¯ï¼åä¼ä¿çåå§å¤§å°åã è¿äºè§åä¸java.beans.Introspector.decapitalizeï¼Springä½¿ç¨çï¼å®ä¹çè§åç¸åã\n\n# Beanå«å\n\nå¨beanå®ä¹æ¬èº«ä¸­ï¼å¯ä»¥ä½¿ç¨ç±idå±æ§æå®çæå¤ä¸ä¸ªåç§°ånameå±æ§ä¸­ä»»ææ°éçå¶ä»åç§°çç»åï¼ä¸ºbeanæä¾å¤ä¸ªåç§°ã è¿äºåç§°å¯ä»¥æ¯åä¸ä¸ªbeançç­æå«åï¼å¹¶ä¸å¨æäºæåµä¸å¾æç¨ï¼ä¾å¦ï¼éè¿ä½¿ç¨ç¹å®äºè¯¥ç»ä»¶æ¬èº«çbeanåç§°ï¼è®©åºç¨ç¨åºä¸­çæ¯ä¸ªç»ä»¶é½å¼ç¨ä¸ä¸ªå¬å±ä¾èµé¡¹ã\n\nä½æ¯ï¼å¨å®éå®ä¹beançå°æ¹æå®ææå«åå¹¶ä¸å¤ã ææ¶éè¦ä¸ºå¨å«å¤å®ä¹çbeanå¼å¥å«åã è¿å¨å¤§åç³»ç»ä¸­éå¸¸æ¯è¿ç§æåµï¼å¨å¤§åç³»ç»ä¸­ï¼éç½®å¨æ¯ä¸ªå­ç³»ç»ä¹é´åéï¼æ¯ä¸ªå­ç³»ç»é½æèªå·±çå¯¹è±¡å®ä¹éã å¨åºäºXMLçéç½®åæ°æ®ä¸­ï¼å¯ä»¥ä½¿ç¨<alias />åç´ æ¥å®ææ­¤æä½ã ä»¥ä¸ç¤ºä¾æ¾ç¤ºäºå¦ä½æ§è¡æ­¤æä½ï¼\n\n<alias name="fromName" alias="toName"/>\n\n\nä¾å¦ï¼å­ç³»ç»Açéç½®åæ°æ®å¯ä»¥éè¿subsystemA-dataSourceçåç§°å¼ç¨æ°æ®æºã å­ç³»ç»Bçéç½®åæ°æ®å¯ä»¥éè¿subsystemB-dataSourceçåç§°å¼ç¨æ°æ®æºã ç»æä½¿ç¨è¿ä¸¤ä¸ªå­ç³»ç»çä¸»åºç¨ç¨åºæ¶ï¼ä¸»åºç¨ç¨åºéè¿myApp-dataSourceçåç§°å¼ç¨æ°æ®æºã è¦ä½¿ææä¸ä¸ªåç§°é½å¼ç¨ç¸åçå¯¹è±¡ï¼å¯ä»¥å°ä»¥ä¸å«åå®ä¹æ·»å å°éç½®åæ°æ®ä¸­ï¼\n\n<alias name="myApp-dataSource" alias="subsystemA-dataSource"/>\n<alias name="myApp-dataSource" alias="subsystemB-dataSource"/>\n\n\nç°å¨ï¼æ¯ä¸ªç»ä»¶åä¸»åºç¨ç¨åºé½å¯ä»¥éè¿å¯ä¸çåç§°å¼ç¨æ°æ®æºï¼å¹¶ä¸ä¿è¯ä¸ä¼ä¸ä»»ä½å¶ä»å®ä¹(ææå°åå»ºä¸ä¸ªåç§°ç©ºé´)å²çªï¼ä½å®ä»¬å¼ç¨çæ¯åä¸ä¸ªbeanã\n\n> å¦æä½¿ç¨Javaconfigurationï¼å@Beanæ³¨è§£å¯ç¨äºæä¾å«åã\n\n\n# 1.3.2. å®ä¾åBeans\n\nbeanå®ä¹æ¬è´¨ä¸æ¯åå»ºä¸ä¸ªæå¤ä¸ªå¯¹è±¡çæ¹æ³ãå½è¢«è¯·æ±æ¶ï¼å®¹å¨æ¥çæå®beançæ¹æ³ï¼å¹¶ä½¿ç¨è¯¥beanå®ä¹å°è£çéç½®åæ°æ®åå»º(æè·å)å®éå¯¹è±¡ã\n\nå¦æä½¿ç¨åºäºXMLçéç½®åæ°æ®ï¼åå¨<bean />åç´ çclasså±æ§ä¸­æå®è¦å®ä¾åçå¯¹è±¡çç±»åï¼æç±»ï¼ã è¿ä¸ªç±»å±æ§ï¼å¨åé¨æ¯BeanDefinitionå®ä¾çClasså±æ§ï¼éå¸¸æ¯å¿éçã ï¼å¯ä»¥éè¿ä»¥ä¸ä¸¤ç§æ¹å¼ä¹ä¸ä½¿ç¨Classå±æ§ï¼\n\n * éå¸¸ï¼å¨å®¹å¨æ¬èº«éè¿åå°æ§å°è°ç¨å¶æé å½æ°ç´æ¥åå»ºBeançæåµä¸ï¼æå®è¦æé çBeanç±»ï¼è¿å¨æç§ç¨åº¦ä¸ç­åäºä½¿ç¨newè¿ç®ç¬¦çJavaä»£ç ã\n\n * è¦æå®åå«ç¨äºåå»ºå¯¹è±¡çéæå·¥åæ¹æ³çå®éç±»ï¼å¨ä¸å¤ªå¸¸è§çæåµä¸ï¼å®¹å¨å°å¨ç±»ä¸è°ç¨éæå·¥åæ¹æ³ä»¥åå»ºBeanã ä»éæå·¥åæ¹æ³çè°ç¨è¿åçå¯¹è±¡ç±»åå¯ä»¥æ¯åä¸ç±»ï¼ä¹å¯ä»¥æ¯å®å¨ä¸åçå¦ä¸ç±»ã\n\n> å¦æè¦ä¸ºéæåé¨ç±»éç½®Beanå®ä¹ï¼åå¿é¡»ä½¿ç¨åé¨ç±»çäºè¿å¶åç§°ãä¾å¦ï¼å¦ææ¨å¨com.exampleåä¸­æä¸ä¸ªåä¸ºSomeThingçç±»ï¼å¹¶ä¸æ­¤SomeThingç±»å·æä¸ä¸ªåä¸ºOtherThingçéæåé¨ç±»ï¼åbeanå®ä¹ä¸çclasså±æ§çå¼ä¸ºcom.example.SomeThing $ OtherThingãè¯·æ³¨æï¼åç§°ä¸­ä½¿ç¨$å­ç¬¦å°åé¨ç±»çç±»åä¸å¤é¨ç±»ååå¼ã\n\n# æé å¨å®ä¾å\n\nå½éè¿æé æ¹æ³åå»ºä¸ä¸ªbeanæ¶ï¼æææ®éç±»é½å¯ä»¥è¢«Springä½¿ç¨å¹¶å¼å®¹ã ä¹å°±æ¯è¯´ï¼æ­£å¨å¼åçç±»ä¸éè¦å®ç°ä»»ä½ç¹å®çæ¥å£æä»¥ç¹å®çæ¹å¼è¿è¡ç¼ç ã åªéæå®beanç±»å°±è¶³å¤äºã ä½æ¯ï¼æ ¹æ®æ¨ç¨äºè¯¥ç¹å®beançIoCçç±»åï¼æ¨å¯è½éè¦ä¸ä¸ªé»è®¤ï¼ç©ºï¼æé å½æ°ã\n\nSpring IoCå®¹å¨å ä¹å¯ä»¥ç®¡çæ¨è¦ç®¡ççä»»ä½ç±»ã å®ä¸ä»éäºç®¡ççæ­£çJavaBeanã å¤§å¤æ°Springç¨æ·æ´åæ¬¢å®éçJavaBeanï¼å®ä»å·æé»è®¤ï¼æ åæ°ï¼æé å½æ°ï¼å¹¶å·ææ ¹æ®å®¹å¨ä¸­çå±æ§æé çéå½setterågetterã æ¨è¿å¯ä»¥å¨å®¹å¨ä¸­å·ææ´å¤ébeanè§èçç±»ã ä¾å¦ï¼å¦ææ¨éè¦ä½¿ç¨ç»å¯¹ä¸ç¬¦åJavaBeanè§èçæ§å¼è¿æ¥æ± ï¼åSpringä¹å¯ä»¥å¯¹å¶è¿è¡ç®¡çã\n\n# éæå·¥åå®ä¾å\n\nå®ä¹ä½¿ç¨éæå·¥åæ¹æ³åå»ºçbeanæ¶ï¼è¯·ä½¿ç¨classå±æ§æå®åå«éæå·¥åæ¹æ³çç±»ï¼å¹¶ä½¿ç¨åä¸ºfactory-methodçå±æ§æå®å·¥åæ¹æ³æ¬èº«çåç§°ã æ¨åºè¯¥è½å¤è°ç¨æ­¤æ¹æ³ï¼ä½¿ç¨å¯éåæ°ï¼å¦ç¨åæè¿°ï¼å¹¶è¿åä¸ä¸ªæ´»å¨å¯¹è±¡ï¼è¯¥å¯¹è±¡éåå°è¢«è§ä¸ºå·²éè¿æé å½æ°åå»ºã è¿ç§beanå®ä¹çä¸ç§ç¨æ³æ¯å¨æ§çä»£ç ä¸­è°ç¨éæå·¥åã\n\nä»¥ä¸beanå®ä¹æå®éè¿è°ç¨å·¥åæ¹æ³æ¥åå»ºbeanã è¯¥å®ä¹ä¸æå®è¿åå¯¹è±¡çç±»åï¼ç±»ï¼ï¼èä»æå®åå«å·¥åæ¹æ³çç±»ã å¨æ­¤ç¤ºä¾ä¸­ï¼createInstanceï¼ï¼æ¹æ³å¿é¡»æ¯éææ¹æ³ã ä»¥ä¸ç¤ºä¾æ¾ç¤ºå¦ä½æå®å·¥åæ¹æ³ï¼\n\n<bean id="clientService"\n    class="examples.ClientService"\n    factory-method="createInstance"/>\n\n\nä»¥ä¸ç¤ºä¾æ¾ç¤ºäºå¯ä¸åé¢çbeanå®ä¹ä¸èµ·ä½¿ç¨çç±»ï¼\n\npublic class ClientService {\n    private static ClientService clientService = new ClientService();\n    private ClientService() {}\n\n    public static ClientService createInstance() {\n        return clientService;\n    }\n}\n\n\n# å®ä¾å·¥åå®ä¾å\n\nç±»ä¼¼äºéè¿éæå·¥åæ¹æ³è¿è¡å®ä¾åï¼ä½¿ç¨å®ä¾å·¥åæ¹æ³è¿è¡å®ä¾åä¼ä»å®¹å¨ä¸­è°ç¨ç°æbeançééææ¹æ³æ¥åå»ºæ°beanã è¦ä½¿ç¨æ­¤æºå¶ï¼è¯·å°classå±æ§ä¿çä¸ºç©ºï¼å¹¶å¨factory-beanå±æ§ä¸­ï¼å¨å½åï¼æç¥åï¼å®¹å¨ä¸­æå®åå«è¦åå»ºè¯¥å¯¹è±¡çå®ä¾æ¹æ³çbeançåç§°ã ä½¿ç¨factory-methodå±æ§è®¾ç½®å·¥åæ¹æ³æ¬èº«çåç§°ã ä»¥ä¸ç¤ºä¾æ¾ç¤ºäºå¦ä½éç½®æ­¤ç±»Beanï¼\n\n\x3c!-- the factory bean, which contains a method called createInstance() --\x3e\n<bean id="serviceLocator" class="examples.DefaultServiceLocator">\n    \x3c!-- inject any dependencies required by this locator bean --\x3e\n</bean>\n\n\x3c!-- the bean to be created via the factory bean --\x3e\n<bean id="clientService"\n    factory-bean="serviceLocator"\n    factory-method="createClientServiceInstance"/>\n\n\npublic class DefaultServiceLocator {\n\n    private static ClientService clientService = new ClientServiceImpl();\n\n    public ClientService createClientServiceInstance() {\n        return clientService;\n    }\n}\n\n\nä¸ä¸ªå·¥åç±»ä¹å¯ä»¥åå«ä¸ä¸ªä»¥ä¸çå·¥åæ¹æ³ï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\n<bean id="serviceLocator" class="examples.DefaultServiceLocator">\n    \x3c!-- inject any dependencies required by this locator bean --\x3e\n</bean>\n\n<bean id="clientService"\n    factory-bean="serviceLocator"\n    factory-method="createClientServiceInstance"/>\n\n<bean id="accountService"\n    factory-bean="serviceLocator"\n    factory-method="createAccountServiceInstance"/>\n\n\npublic class DefaultServiceLocator {\n\n    private static ClientService clientService = new ClientServiceImpl();\n\n    private static AccountService accountService = new AccountServiceImpl();\n\n    public ClientService createClientServiceInstance() {\n        return clientService;\n    }\n\n    public AccountService createAccountServiceInstance() {\n        return accountService;\n    }\n}\n\n\nè¿ç§æ¹æ³è¡¨æï¼å·¥åBeanæ¬èº«å¯ä»¥éè¿ä¾èµé¡¹æ³¨å¥ï¼DIï¼è¿è¡ç®¡çåéç½®ã\n\n> å¨Springææ¡£ä¸­ï¼â factory beanâæ¯æå¨Springå®¹å¨ä¸­éç½®å¹¶éè¿å®ä¾æéæå·¥åæ¹æ³åå»ºå¯¹è±¡çbeanã ç¸æ¯ä¹ä¸ï¼FactoryBeanï¼æ³¨æå¤§å°åï¼æ¯æç¹å®äºSpringçFactoryBeanå®ç°ç±»ã\n\n# ç¡®å®Beançè¿è¡æ¶ç±»å\n\nç¡®å®ç¹å®beançè¿è¡æ¶ç±»åå¹¶éæäºã Beanåæ°æ®å®ä¹ä¸­çæå®ç±»åªæ¯åå§ç±»å¼ç¨ï¼å¯è½ä¸å£°æçå·¥åæ¹æ³ç»åä½¿ç¨ï¼æèæ¯FactoryBeanç±»ï¼è¿å¯è½å¯¼è´Beançè¿è¡æ¶ç±»åä¸åï¼æèå¨å®ä¾çº§å·¥åæ¹æ³ï¼éè¿æå®çfactory-beanåç§°è§£æï¼çæåµä¸å®å¨ä¸è¿è¡è®¾ç½® ã æ­¤å¤ï¼AOPä»£çå¯ä»¥ä½¿ç¨åºäºæ¥å£çä»£çåè£beanå®ä¾ï¼èç®æ Beançå®éç±»åï¼ä»æ¯å¶å®ç°çæ¥å£ï¼çæ´é²ç¨åº¦æéã\n\næ¾åºç¹å®beançå®éè¿è¡æ¶ç±»åçæ¨èæ¹æ³æ¯å¯¹æå®beanåç§°çBeanFactory.getTypeè°ç¨ã è¿èèäºä¸è¿°æææåµï¼å¹¶è¿åäºéå¯¹ç¸åbeanåç§°çBeanFactory.getBeanè°ç¨å°è¿åçå¯¹è±¡çç±»åã\n\n\n# 1.4. ä¾èµDependencies\n\nå¸åçä¼ä¸åºç¨ç¨åºä¸åå«åä¸ªå¯¹è±¡(æSpringæ¯è¯­ä¸­çbean)ãå³ä½¿æ¯æç®åçåºç¨ç¨åºä¹æå ä¸ªå¯¹è±¡ä¸èµ·å·¥ä½ï¼ä»¥è¡¨ç¤ºæç»ç¨æ·è®¤ä¸ºä¸è´çåºç¨ç¨åºãä¸ä¸èå°è§£éå¦ä½ä»å®ä¹å¤§éç¬ç«çbeanå®ä¹è¿æ¸¡å°ä¸ä¸ªå®å¨å®ç°çåºç¨ç¨åºï¼å¨è¯¥åºç¨ç¨åºä¸­ï¼å¯¹è±¡ç¸äºåä½ä»¥å®ç°ç®æ ã\n\n\n# 1.4.1. ä¾èµæ³¨å¥\n\nä¾èµæ³¨å¥ï¼DIï¼æ¯ä¸ä¸ªè¿ç¨ï¼å¨è¿ä¸ªè¿ç¨ä¸­ï¼å¯¹è±¡ä»éè¿æé å½æ°åæ°ãå·¥åæ¹æ³çåæ°ï¼æèå¨å¯¹è±¡å®ä¾è¢«æé æä»å·¥åæ¹æ³è¿ååè®¾ç½®çå±æ§æ¥å®ä¹å®ä»¬çä¾èµé¡¹(å³ä¸å®ä»¬ä¸èµ·å·¥ä½çå¶ä»å¯¹è±¡)ã ç¶åï¼å®¹å¨å¨åå»ºbeanæ¶æ³¨å¥é£äºä¾èµé¡¹ã ä»æ ¹æ¬ä¸è®²ï¼æ­¤è¿ç¨æ¯éè¿ä½¿ç¨ç±»çç´æ¥æé ææå¡å®ä½å¨æ¨¡å¼æ¥æ§å¶beanèªèº«ä¾èµçå®ä¾æä½ç½®çbeanåå»ºçéè¿ç¨ï¼å æ­¤ç§°ä¸ºControl Inversion-æ§å¶åè½¬ï¼\n\nä½¿ç¨DIåååï¼ä»£ç æ´å æ¸æ°ï¼å½æä¾å¯¹è±¡çä¾èµå³ç³»æ¶ï¼è§£è¦ä¼æ´å ææãå¯¹è±¡ä¸æ¥æ¾å®çä¾èµé¡¹ï¼ä¹ä¸ç¥éä¾èµé¡¹çä½ç½®æç±»ãå æ­¤ï¼æ¨çç±»åå¾æ´å®¹ææµè¯ï¼ç¹å«æ¯å½ä¾èµå³ç³»å¨æ¥å£ææ½è±¡åºç±»ä¸æ¶ï¼è¿äºä¾èµå³ç³»åè®¸å¨ååæµè¯ä¸­ä½¿ç¨stubæmock å®ç°ã\n\nä¾èµæ³¨å¥æä¸¤ç§ä¸»è¦çåä½:åºäºæé å½æ°çä¾èµæ³¨å¥ååºäºsetterçä¾èµæ³¨å¥ã\n\n# æé å¨æ³¨å¥\n\nåºäºæé å½æ°çDIæ¯éè¿å®¹å¨è°ç¨å·æå¤ä¸ªåæ°çæé å½æ°æ¥å®æçï¼æ¯ä¸ªåæ°è¡¨ç¤ºä¸ä¸ªä¾èµé¡¹ã è°ç¨å¸¦æç¹å®åæ°çéæå·¥åæ¹æ³æ¥æé Beanå ä¹æ¯ç­æçï¼å¹¶ä¸æ¬æ¬¡è®¨è®ºå°æé å½æ°åéæå·¥åæ¹æ³çåæ°è§ä¸ºç±»ä¼¼ã ä»¥ä¸ç¤ºä¾æ¾ç¤ºäºåªè½éè¿æé å½æ°æ³¨å¥è¿è¡ä¾èµé¡¹æ³¨å¥çç±»ï¼\n\npublic class SimpleMovieLister {\n\n    // the SimpleMovieLister has a dependency on a MovieFinder\n    private MovieFinder movieFinder;\n\n    // a constructor so that the Spring container can inject a MovieFinder\n    public SimpleMovieLister(MovieFinder movieFinder) {\n        this.movieFinder = movieFinder;\n    }\n\t/*è¿éçMovieFinderéç±Iocå®¹å¨ç®¡çï¼è¥æå¤ä¸ªæé å¨çè¯ï¼éè¦æ³¨ææ¯å¦æ­£ç¡®ä½¿ç¨ï¼å¯åè\n      https://blog.csdn.net/qq_41737716/article/details/85596817*/\n    // business logic that actually uses the injected MovieFinder is omitted...\n}\n\n\næ³¨æï¼è¯¥ç±»æ²¡æä»ä¹ç¹å«çã å®æ¯ä¸ä¸ªPOJOï¼ä¸ä¾èµäºç¹å®äºå®¹å¨çæ¥å£ï¼åºç±»ææ³¨è§£ã\n\næé å¨åæ°è§£æ\n\næé å½æ°åæ°è§£æå¹ééè¿ä½¿ç¨åæ°çç±»åè¿è¡ã å¦æBeanå®ä¹çæé å½æ°åæ°ä¸­æ²¡ææ½å¨çæ­§ä¹ï¼åå¨å®ä¾åBeanæ¶ï¼å¨Beanå®ä¹ä¸­å®ä¹æé å½æ°åæ°çé¡ºåºå°±æ¯å°è¿äºåæ°æä¾ç»éå½çæé å½æ°çé¡ºåºã èèä»¥ä¸ç±»ï¼\n\npackage x.y;\n\npublic class ThingOne {\n\n    public ThingOne(ThingTwo thingTwo, ThingThree thingThree) {\n        // ...\n    }\n}\n\n\nåè®¾ThingTwoåThingThreeç±»æ²¡æéè¿ç»§æ¿å³èï¼åä¸å­å¨æ½å¨çæ­§ä¹ã å æ­¤ï¼ä»¥ä¸éç½®å¯ä»¥æ­£å¸¸è¿è¡ï¼å¹¶ä¸æ¨æ éå¨<constructor-arg />åç´ ä¸­æ¾å¼æå®æé å½æ°åæ°ç´¢å¼æç±»åã\n\n<beans>\n    <bean id="beanOne" class="x.y.ThingOne">\n        <constructor-arg ref="beanTwo"/>\n        <constructor-arg ref="beanThree"/>\n    </bean>\n\n    <bean id="beanTwo" class="x.y.ThingTwo"/>\n\n    <bean id="beanThree" class="x.y.ThingThree"/>\n</beans>\n\n\nå½å¼ç¨å¦ä¸ä¸ªbeanæ¶ï¼ç±»åæ¯å·²ç¥çï¼å¹¶ä¸å¯ä»¥åçå¹éï¼ä¸åé¢çç¤ºä¾ä¸æ ·ï¼ã å½ä½¿ç¨ç®åç±»åï¼ä¾å¦<value> true </value>ï¼æ¶ï¼Springæ æ³ç¡®å®å¼çç±»åï¼å æ­¤å¨æ²¡ææç¤ºçæåµä¸æ æ³æç±»åè¿è¡å¹éã èèä»¥ä¸ç±»å«ï¼\n\npackage examples;\n\npublic class ExampleBean {\n\n    // Number of years to calculate the Ultimate Answer\n    private int years;\n\n    // The Answer to Life, the Universe, and Everything\n    private String ultimateAnswer;\n\n    public ExampleBean(int years, String ultimateAnswer) {\n        this.years = years;\n        this.ultimateAnswer = ultimateAnswer;\n    }\n}\n\n\næé å¨åæ°ç±»åå¹é\n\nå¨ä¸è¿°æåµä¸ï¼å¦æéè¿ä½¿ç¨typeå±æ§æ¾å¼æå®æé å½æ°åæ°çç±»åï¼åå®¹å¨å¯ä»¥ä½¿ç¨ç®åç±»åçç±»åå¹éã å¦ä¸ä¾æç¤ºï¼\n\n<bean id="exampleBean" class="examples.ExampleBean">\n    <constructor-arg type="int" value="7500000"/>\n    <constructor-arg type="java.lang.String" value="42"/>\n</bean>\n\n\næé å¨åæ°ç´¢å¼\n\næ¨å¯ä»¥ä½¿ç¨indexå±æ§æ¥æ¾å¼æå®æé å½æ°åæ°çç´¢å¼ï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\n<bean id="exampleBean" class="examples.ExampleBean">\n    <constructor-arg index="0" value="7500000"/>\n    <constructor-arg index="1" value="42"/>\n</bean>\n\n\né¤äºè§£å³å¤ä¸ªç®åå¼çæ­§ä¹ä¹å¤ï¼æå®ç´¢å¼è¿å¯ä»¥è§£å³æé å½æ°æä¸¤ä¸ªç¸åç±»åçåæ°çæ­§ä¹ã\n\n> ç´¢å¼ä»0å¼å§ã\n\næé å¨åæ°å\n\nè¿å¯ä»¥ä½¿ç¨æé å½æ°åæ°åæ¥æ¶é¤å¼çæ­§ä¹ï¼å¦ä¸é¢çç¤ºä¾æç¤º\n\n<bean id="exampleBean" class="examples.ExampleBean">\n    <constructor-arg name="years" value="7500000"/>\n    <constructor-arg name="ultimateAnswer" value="42"/>\n</bean>\n\n\nè¯·è®°ä½ï¼è¦ä½¿å¶è½å¤å¼ç®±å³ç¨ï¼æ¨çä»£ç å¿é¡»å¨ç¼è¯æ¶å¯ç¨debugæ å¿ï¼ä»¥ä¾¿Springå¯ä»¥ä»æé å½æ°æ¥æ¾åæ°åãå¦ææ¨ä¸è½æä¸å¸æç¨debugæ å¿ç¼è¯æ¨çä»£ç ï¼æ¨å¯ä»¥ä½¿ç¨@ConstructorProperties JDKæ³¨è§£æ¥æ¾å¼å°å½åæ¨çæé å½æ°åæ°ãç¤ºä¾ç±»å¦ä¸æç¤º\n\npackage examples;\n\npublic class ExampleBean {\n\n    // Fields omitted\n\n    @ConstructorProperties({"years", "ultimateAnswer"})\n    public ExampleBean(int years, String ultimateAnswer) {\n        this.years = years;\n        this.ultimateAnswer = ultimateAnswer;\n    }\n}\n\n\n# setteræ³¨å¥\n\nåºäºsetterçDIæ¯ç±å®¹å¨å¨è°ç¨æ åæ°æé å½æ°ææ åæ°éæå·¥åæ¹æ³æ¥å®ä¾åbeanä¹ååè°ç¨beanä¸çsetteræ¹æ³æ¥å®ç°çã\n\nä¸é¢çç¤ºä¾æ¾ç¤ºäºä¸ä¸ªåªè½éè¿ä½¿ç¨çº¯setteræ³¨å¥æ¥æ³¨å¥ä¾èµé¡¹çç±»ãè¿ä¸ªç±»æ¯ä¼ ç»çJavaãå®æ¯ä¸ä¸ªä¸ä¾èµäºå®¹å¨ç¹å®æ¥å£ãåºç±»ææ³¨è§£çPOJOã\n\npublic class SimpleMovieLister {\n\n    // the SimpleMovieLister has a dependency on the MovieFinder\n    private MovieFinder movieFinder;\n\n    // a setter method so that the Spring container can inject a MovieFinder\n    public void setMovieFinder(MovieFinder movieFinder) {\n        this.movieFinder = movieFinder;\n    }\n\n    // business logic that actually uses the injected MovieFinder is omitted...\n}\n\n\nApplicationContextæ¯æå®ç®¡ççbeançåºäºæé å½æ°ååºäºsetterçDIã å¨å·²ç»éè¿æé å½æ°æ¹æ³æ³¨å¥äºæäºä¾èµé¡¹ä¹åï¼å®è¿æ¯æåºäºsetterçDIã æ¨å¯ä»¥ä»¥BeanDefinitionçå½¢å¼éç½®ä¾èµé¡¹ï¼å¹¶ä¸PropertyEditorå®ä¾ç»åä½¿ç¨ï¼ä»¥å°å±æ§ä»ä¸ç§æ ¼å¼è½¬æ¢ä¸ºå¦ä¸ç§æ ¼å¼ã ä½æ¯ï¼å¤§å¤æ°Springç¨æ·å¹¶ä¸ç´æ¥ï¼å³ä»¥ç¼ç¨æ¹å¼ï¼ä½¿ç¨è¿äºç±»ï¼èæ¯ä½¿ç¨XML beanå®ä¹ï¼å¸¦æ³¨è§£çç»ä»¶ï¼å³ä»¥@ Componentï¼@ Controllerç­è¿è¡æ³¨è§£çç±»ï¼æ@Beanæ¹æ³æ¥å¤çè¿äºç±»ã åºäºJavaç@Configurationç±»ã ç¶åå°å®ä»¬å¨åé¨è½¬æ¢ä¸ºBeanDefinitionå®ä¾ï¼å¹¶ç¨äºå è½½æ´ä¸ªSpring IoCå®¹å¨å®ä¾ã\n\n> ç±äºå¯ä»¥æ··åä½¿ç¨åºäºæé å½æ°çDIååºäºsetterçDIï¼å æ­¤å°æé å½æ°ç¨äºå¼ºå¶æ§ä¾èµé¡¹å¹¶å°setteræ¹æ³æéç½®æ¹æ³ç¨äºå¯éçä¾èµé¡¹æ¯ä¸ä¸ªå¾å¥½çç»éªã æ³¨æï¼å¨setteræ¹æ³ä¸ä½¿ç¨@Requiredæ¹æ³¨å¯ä»¥ä½¿è¯¥å±æ§æä¸ºå¿éçä¾èµé¡¹ã ä½æ¯ï¼æå¥½ä½¿ç¨å¸¦æåæ°çç¨åºéªè¯çæé å½æ°æ³¨å¥ã\n> \n> Springå¢ééå¸¸æå¡æé å½æ°æ³¨å¥ï¼å ä¸ºå®ä½¿æ¨å¯ä»¥å°åºç¨ç¨åºç»ä»¶å®ç°ä¸ºä¸å¯åå¯¹è±¡ï¼å¹¶ç¡®ä¿æéçä¾èµé¡¹ä¸ä¸ºnullã æ­¤å¤ï¼æ³¨å¥æé å½æ°çç»ä»¶å§ç»ä»¥å®å¨åå§åçç¶æè¿åå°å®¢æ·ç«¯ï¼è°ç¨ï¼ä»£ç ã éå¸¦è¯´æä¸ä¸ï¼æé å¨åå«å¤§éçåæ°æ¯ä¸å¥½çä»£ç ï¼è¿è¡¨æè¯¥ç±»å¯è½æ¿æäºå¤ªå¤çèè´£ï¼åºè¿è¡éæä»¥æ´å¥½å°è§£å³å³æ³¨ç¹åç¦»é®é¢ã\n> \n> Setteræ³¨å¥ä¸»è¦åºä»ç¨äºå¯ä»¥å¨ç±»ä¸­åéåççé»è®¤å¼çå¯éä¾èµé¡¹ã å¦åï¼å¿é¡»å¨ä»£ç ä½¿ç¨ä¾èµé¡¹çä»»ä½å°æ¹æ§è¡éç©ºæ£æ¥ã setteræ³¨å¥çä¸ä¸ªå¥½å¤æ¯ï¼setteræ¹æ³ä½¿è¯¥ç±»çå¯¹è±¡å¨ä»¥åå¯ä»¥éæ°éç½®æéæ°æ³¨å¥ã å æ­¤ï¼éè¿JMX MBeanè¿è¡ç®¡çæ¯ç¨äºsetteræ³¨å¥çå¸åç¨ä¾ã\n> \n> ä½¿ç¨å¯¹ç¹å®ç±»æææä¹çDIã ææ¶ï¼å¨å¤çæ¨æ²¡ææºä»£ç çç¬¬ä¸æ¹ç±»æ¶ï¼å°ä¸ºæ¨ååºéæ©ã ä¾å¦ï¼å¦æç¬¬ä¸æ¹ç±»æªå¬å¼ä»»ä½setteræ¹æ³ï¼åæé å½æ°æ³¨å¥å¯è½æ¯DIçå¯ä¸å¯ç¨å½¢å¼ã\n\n# ä¾èµè§£æè¿ç¨\n\nå®¹å¨æå¦ä¸æ¹å¼æ§è¡beanä¾èµé¡¹è§£æï¼\n\n * ä½¿ç¨æè¿°ææbeançéç½®åæ°æ®åå»ºååå§åApplicationContextã å¯ä»¥éè¿XMLï¼Javaä»£ç ææ³¨è§£æå®éç½®åæ°æ®ã\n\n * å¯¹äºæ¯ä¸ªbeanï¼å®çä¾èµå³ç³»é½ä»¥å±æ§ãæé å½æ°åæ°æéæå·¥åæ¹æ³çåæ°çå½¢å¼è¡¨ç¤º(å¦ææ¨ä½¿ç¨è¯¥æ¹æ³èä¸æ¯æ®éçæé å½æ°)ãå½å®éåå»ºbeanæ¶ï¼å°åbeanæä¾è¿äºä¾èµé¡¹ã\n\n * æ¯ä¸ªå±æ§ææé å½æ°åæ°é½æ¯è¦è®¾ç½®çå®åï¼æèæ¯å¯¹å®¹å¨ä¸­å¦ä¸ä¸ªbeançå¼ç¨ã\n\n * ä½ä¸ºå¼çæ¯ä¸ªå±æ§ææé å½æ°åæ°é½å°ä»å¶æå®çæ ¼å¼è½¬æ¢ä¸ºè¯¥å±æ§ææé å½æ°åæ°çå®éç±»åãé»è®¤æåµä¸ï¼Springå¯ä»¥å°ä»¥å­ç¬¦ä¸²æ ¼å¼æä¾çå¼è½¬æ¢ä¸ºææåç½®ç±»åï¼æ¯å¦intãlongãstringãbooleanç­ç­ã\n\nå¨åå»ºå®¹å¨æ¶ï¼Springå®¹å¨ä¼éªè¯æ¯ä¸ªbeançéç½®ã ä½æ¯ï¼å¨å®éåå»ºBeanä¹åï¼ä¸ä¼è®¾ç½®Beanå±æ§æ¬èº«ã åå»ºå®¹å¨æ¶ï¼å°åå»ºå·æåä¾ä½ç¨åå¹¶è®¾ç½®ä¸ºé¢åå®ä¾åï¼é»è®¤ï¼çBeanã ä½ç¨åå¨Beanä½ç¨åä¸­å®ä¹ã å¦åï¼ä»å¨è¯·æ±æ¶æåå»ºBeanã åå»ºååébeançä¾èµå³ç³»åå¶ä¾èµå³ç³»ï¼ä¾æ­¤ç±»æ¨ï¼æ¶ï¼åå»ºbeanå¯è½ä¼å¯¼è´åå»ºä¸ä¸ªbeanå¾ã è¯·æ³¨æï¼è¿äºä¾èµé¡¹ä¹é´çè§£æä¸å¹éå¯è½ä¼å¨åæåºç°ï¼å³å¨ç¬¬ä¸æ¬¡åå»ºåå½±åçbeanæ¶ã\n\n> å¦æä¸»è¦ä½¿ç¨æé å½æ°æ³¨å¥ï¼åå¯è½ä¼åå»ºæ æ³è§£æçå¾ªç¯ä¾èµæ¹æ¡ã\n> \n> ä¾å¦ï¼Aç±»éè¿æé å½æ°æ³¨å¥éè¦Bç±»çå®ä¾ï¼èBç±»éè¿æé å½æ°æ³¨å¥éè¦Aç±»çå®ä¾ã å¦ææ¨ä¸ºå°ç±»AåBç¸äºæ³¨å¥èéç½®äºbeanï¼åSpring IoCå®¹å¨ä¼å¨è¿è¡æ¶æ£æµå°æ­¤å¾ªç¯å¼ç¨ï¼å¹¶æåºBeanCurrentlyInCreationExceptionã\n> \n> ä¸ç§å¯è½çè§£å³æ¹æ¡æ¯ç¼è¾æäºç±»çæºä»£ç ï¼è¿äºç±»çæºä»£ç ç±setterèä¸æ¯æé å½æ°æ¥éç½®ã æèï¼é¿åæé å½æ°æ³¨å¥ï¼èä»ä½¿ç¨setteræ³¨å¥ã æ¢å¥è¯è¯´ï¼å°½ç®¡ä¸å»ºè®®è¿æ ·åï¼ä½æ¯æ¨å¯ä»¥ä½¿ç¨setteræ³¨å¥éç½®å¾ªç¯ä¾èµé¡¹ã\n> \n> ä¸å¸åæåµï¼æ²¡æå¾ªç¯ä¾èµå³ç³»ï¼ä¸åï¼Bean AåBean Bä¹é´çå¾ªç¯ä¾èµå³ç³»è¿«ä½¿å¶ä¸­ä¸ä¸ªBeanå¨å®å¨åå§åä¹åè¢«æ³¨å¥å¦ä¸ä¸ªBeanï¼ç»å¸çâé¸¡ä¸èâåºæ¯ï¼ã\n\néå¸¸ï¼æ¨å¯ä»¥ä¿¡ä»»Springåæ­£ç¡®çäºã å®å¨å®¹å¨å è½½æ¶æ£æµéç½®é®é¢ï¼ä¾å¦å¯¹ä¸å­å¨çBeançå¼ç¨åå¾ªç¯ä¾èµé¡¹ã Springè®¾ç½®å±æ§å¹¶å°½å¯è½æå°è§£å³ä¾èµå³ç³»--å¨å®éåå»ºbeanæ¶ã è¿æå³çï¼å¦æåå»ºå¯¹è±¡æå¶ä¾èµé¡¹ä¹ä¸æé®é¢ï¼åæ­£ç¡®å è½½äºSpringçå®¹å¨ä»¥åå¯ä»¥å¨æ¨è¯·æ±å¯¹è±¡æ¶æåºå¼å¸¸-ä¾å¦ï¼beanä¼å ä¸å­å¨ææ æå±æ§èæåºå¼å¸¸ãè¿æ ·å¯è½ä¼å»¶è¿æäºéç½®é®é¢çå¯è§æ§ï¼æä»¥è¿å°±æ¯ä¸ºä»ä¹é»è®¤æåµä¸ApplicationContextå®ç°ä¼é¢åå®ä¾ååä¾beançåå ã å¨å®ééè¦è¿äºbeanä¹åéè¦è±ä¸äºåææ¶é´ååå­æ¥åå»ºå®ä»¬ï¼æ¨ä¼å¨åå»ºApplicationContextæ¶åç°éç½®é®é¢ï¼èä¸æ¯ç¨åã æ¨ä»ç¶å¯ä»¥è¦çæ­¤é»è®¤è¡ä¸ºï¼ä»¥ä¾¿åä¾beanå»¶è¿åå§åï¼èä¸æ¯é¢åå®ä¾åã\n\nå¦æä¸å­å¨å¾ªç¯ä¾èµå³ç³»ï¼åå¨å°ä¸ä¸ªæå¤ä¸ªåä½Beanæ³¨å¥å°ä»å±Beanä¸­æ¶ï¼æ¯ä¸ªåä½Beanå¨æ³¨å¥å°ä»å±Beanä¸­ä¹åé½å·²å®å¨éç½®ã è¿æå³çï¼å¦æbean Aä¾èµäºbean Bï¼åSpring IoCå®¹å¨ä¼å¨å¯¹bean Aè°ç¨setteræ¹æ³ä¹åå®å¨éç½®beanBãæ¢å¥è¯è¯´ï¼è¢«å®ä¾åçbeanï¼å¦æå®ä¸æ¯é¢åå®ä¾åçåä¾ï¼ ï¼ï¼å®çä¾èµé¡¹è¢«è®¾ç½®ï¼å¹¶è°ç¨äºç¸å³ççå½å¨ææ¹æ³ï¼ä¾å¦å·²éç½®çinitæ¹æ³æInitializingBeanåè°æ¹æ³ï¼ã\n\n# ä¾èµæ³¨å¥å®ä¾\n\nä¸é¢çç¤ºä¾ä¸ºåºäºsetterçDIä½¿ç¨åºäºxmlçéç½®åæ°æ®ãSpring XMLéç½®æä»¶çä¸å°é¨åæå®äºä¸äºbeanå®ä¹ï¼å¦ä¸æç¤º\n\n<bean id="exampleBean" class="examples.ExampleBean">\n    \x3c!-- setter injection using the nested ref element --\x3e\n    <property name="beanOne">\n        <ref bean="anotherExampleBean"/>\n    </property>\n\n    \x3c!-- setter injection using the neater ref attribute --\x3e\n    <property name="beanTwo" ref="yetAnotherBean"/>\n    <property name="integerProperty" value="1"/>\n</bean>\n\n<bean id="anotherExampleBean" class="examples.AnotherBean"/>\n<bean id="yetAnotherBean" class="examples.YetAnotherBean"/>\n\n\npublic class ExampleBean {\n\n    private AnotherBean beanOne;\n\n    private YetAnotherBean beanTwo;\n\n    private int i;\n\n    public void setBeanOne(AnotherBean beanOne) {\n        this.beanOne = beanOne;\n    }\n\n    public void setBeanTwo(YetAnotherBean beanTwo) {\n        this.beanTwo = beanTwo;\n    }\n\n    public void setIntegerProperty(int i) {\n        this.i = i;\n    }\n}\n\n\nå¨åé¢çç¤ºä¾ä¸­ï¼å°setterå£°æä¸ºä¸XMLæä»¶ä¸­æå®çå±æ§å¹éãä¸é¢çç¤ºä¾ä½¿ç¨åºäºæé å½æ°çDI\n\n<bean id="exampleBean" class="examples.ExampleBean">\n    \x3c!-- constructor injection using the nested ref element --\x3e\n    <constructor-arg>\n        <ref bean="anotherExampleBean"/>\n    </constructor-arg>\n\n    \x3c!-- constructor injection using the neater ref attribute --\x3e\n    <constructor-arg ref="yetAnotherBean"/>\n\n    <constructor-arg type="int" value="1"/>\n</bean>\n\n<bean id="anotherExampleBean" class="examples.AnotherBean"/>\n<bean id="yetAnotherBean" class="examples.YetAnotherBean"/>\n\n\npublic class ExampleBean {\n\n    private AnotherBean beanOne;\n\n    private YetAnotherBean beanTwo;\n\n    private int i;\n\n    public ExampleBean(\n        AnotherBean anotherBean, YetAnotherBean yetAnotherBean, int i) {\n        this.beanOne = anotherBean;\n        this.beanTwo = yetAnotherBean;\n        this.i = i;\n    }\n}\n\n\nbeanå®ä¹ä¸­æå®çæé å½æ°åæ°ç¨ä½ExampleBeanæé å½æ°çåæ°ã\n\nç°å¨èèè¯¥ç¤ºä¾çä¸ä¸ªåä½ï¼å¨è¯¥åä½ä¸­ï¼ä¸æ¯ä½¿ç¨æé å½æ°ï¼èæ¯åè¯Springè°ç¨éæå·¥åæ¹æ³ä»¥è¿åå¯¹è±¡çå®ä¾ï¼\n\n<bean id="exampleBean" class="examples.ExampleBean" factory-method="createInstance">\n    <constructor-arg ref="anotherExampleBean"/>\n    <constructor-arg ref="yetAnotherBean"/>\n    <constructor-arg value="1"/>\n</bean>\n\n<bean id="anotherExampleBean" class="examples.AnotherBean"/>\n<bean id="yetAnotherBean" class="examples.YetAnotherBean"/>\n\n\npublic class ExampleBean {\n\n    // a private constructor\n    private ExampleBean(...) {\n        ...\n    }\n\n    // a static factory method; the arguments to this method can be\n    // considered the dependencies of the bean that is returned,\n    // regardless of how those arguments are actually used.\n    public static ExampleBean createInstance (\n        AnotherBean anotherBean, YetAnotherBean yetAnotherBean, int i) {\n\n        ExampleBean eb = new ExampleBean (...);\n        // some other operations...\n        return eb;\n    }\n}\n\n\néæå·¥åæ¹æ³çåæ°ç±<constructor-arg />åç´ æä¾ï¼ä¸å®éä½¿ç¨æé å½æ°çæåµå®å¨ç¸åã factoryæ¹æ³è¿åçç±»çç±»åä¸å¿ä¸åå«éæå·¥åæ¹æ³çç±»çç±»åç¸åï¼å°½ç®¡å¨æ­¤ç¤ºä¾ä¸­æ¯ï¼ã å®ä¾ï¼ééæï¼å·¥åæ¹æ³å¯ä»¥ä»¥åºæ¬ä¸ç¸åçæ¹å¼ä½¿ç¨ï¼é¤äºä½¿ç¨factory-beanå±æ§ä»£æ¿classå±æ§ä¹å¤ï¼ï¼å æ­¤å¨æ­¤ä¸è®¨è®ºè¿äºç»èã\n\n\n# 1.4.2. ä¾èµéç½®è¯¦è§£\n\nå¦ä¸ä¸èæè¿°ï¼æ¨å¯ä»¥å°beanå±æ§åæé å¨åæ°å®ä¹ä¸ºå¯¹å®¹å¨ä¸­å¶ä»beanï¼åä½èï¼çå¼ç¨æåèå®ä¹çå¼ã SpringçåºäºXMLçéç½®åæ°æ®ä¸ºè¾¾å°æ­¤ç®çå¨å¶<property />å<constructor-arg />åç´ ä¸­æ¯æå­åç´ ç±»åã\n\n# ç´æ¥å¼ï¼åè¯­ï¼Stringsç­ï¼\n\n<property />åç´ çvalueå±æ§å°å±æ§ææé å¨åæ°æå®ä¸ºäººç±»å¯è¯»çå­ç¬¦ä¸²è¡¨ç¤ºå½¢å¼ã Springçè½¬æ¢æå¡ç¨äºå°è¿äºå¼ä»å­ç¬¦ä¸²è½¬æ¢ä¸ºå±æ§æåæ°çå®éç±»åã ä»¥ä¸ç¤ºä¾æ¾ç¤ºäºè®¾ç½®çåç§å¼ï¼\n\n<bean id="myDataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">\n    \x3c!-- results in a setDriverClassName(String) call --\x3e\n    <property name="driverClassName" value="com.mysql.jdbc.Driver"/>\n    <property name="url" value="jdbc:mysql://localhost:3306/mydb"/>\n    <property name="username" value="root"/>\n    <property name="password" value="misterkaoli"/>\n</bean>\n\n\nä¸é¢çç¤ºä¾ä½¿ç¨p-namespaceè¿è¡æ´ç®æ´çXMLéç½®\n\n<beans xmlns="http://www.springframework.org/schema/beans"\n    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n    xmlns:p="http://www.springframework.org/schema/p"\n    xsi:schemaLocation="http://www.springframework.org/schema/beans\n    https://www.springframework.org/schema/beans/spring-beans.xsd">\n\n    <bean id="myDataSource" class="org.apache.commons.dbcp.BasicDataSource"\n        destroy-method="close"\n        p:driverClassName="com.mysql.jdbc.Driver"\n        p:url="jdbc:mysql://localhost:3306/mydb"\n        p:username="root"\n        p:password="misterkaoli"/>\n\n</beans>\n\n\nåé¢çXMLæ´ç®æ´ã ä½æ¯ï¼é¤éå¨åå»ºbeanå®ä¹æ¶ä½¿ç¨æ¯æèªå¨å±æ§è¡¥å¨çIDEï¼ä¾å¦IntelliJ IDEAæEclipseçSpring Toolsï¼ï¼å¦åéè¯¯æ¯å¨è¿è¡æ¶èä¸æ¯ç¼ç æ¶åç°çã å¼ºçå»ºè®®æ¨ä½¿ç¨æ­¤ç±»IDEå¸®å©å¼åã\n\næ¨è¿å¯ä»¥éç½®java.util.Propertieså®ä¾ï¼å¦ä¸æç¤ºï¼\n\n<bean id="mappings"\n    class="org.springframework.context.support.PropertySourcesPlaceholderConfigurer">\n\n    \x3c!-- typed as a java.util.Properties --\x3e\n    <property name="properties">\n        <value>\n            jdbc.driver.className=com.mysql.jdbc.Driver\n            jdbc.url=jdbc:mysql://localhost:3306/mydb\n        </value>\n    </property>\n</bean>\n\n\nSpringå®¹å¨éè¿ä½¿ç¨JavaBeans PropertyEditoræºå¶å°<value />åç´ åçææ¬è½¬æ¢ä¸ºjava.util.Propertieså®ä¾ã è¿å¾æ¹ä¾¿ï¼å¹¶ä¸æ¯Springå¢éåç±ä½¿ç¨åµå¥ç<value />åç´ èä¸æ¯valueå±æ§çå ä¸ªå°æ¹ä¹ä¸ã\n\nidrefåç´ \n\nidrefåç´ åªæ¯å°å®¹å¨ä¸­å¦ä¸ä¸ªbeançidï¼å­ç¬¦ä¸²å¼-ä¸æ¯å¼ç¨ï¼ä¼ éç»<constructor-arg />æ<property />åç´ çä¸ç§é²éæ¹æ³ã ä»¥ä¸ç¤ºä¾æ¾ç¤ºäºå¦ä½ä½¿ç¨å®ï¼\n\n<bean id="theTargetBean" class="..."/>\n\n<bean id="theClientBean" class="...">\n    <property name="targetName">\n        <idref bean="theTargetBean"/>\n    </property>\n</bean>\n\n\nåé¢çbeanå®ä¹ä»£ç çæ®µ(å¨è¿è¡æ¶)ä¸ä¸é¢çä»£ç çæ®µå®å¨ç­ä»·\n\n<bean id="theTargetBean" class="..." />\n\n<bean id="client" class="...">\n    <property name="targetName" value="theTargetBean"/>\n</bean>\n\n\nç¬¬ä¸ç§å½¢å¼ä¼äºç¬¬äºç§å½¢å¼ï¼å ä¸ºä½¿ç¨idrefæ è®°å¯ä½¿å®¹å¨å¨é¨ç½²æ¶éªè¯æå¼ç¨çåä¸ºbeançå®éå­å¨ã å¨ç¬¬äºä¸ªåä½ä¸­ï¼ä¸å¯¹ä¼ éç»å®¢æ·ç«¯beançtargetNameå±æ§çå¼æ§è¡éªè¯ã æ¼åéè¯¯ä»å¨å®éå®ä¾åå®¢æ·ç«¯beanæ¶æåç°ï¼ææå¯è½å¯¼è´è´å½çç»æï¼ã å¦æå®¢æ·ç«¯Beanæ¯ååBeanï¼åå¯è½å¨é¨ç½²å®¹å¨å¾ä¹ä¹åæåç°æ­¤éè¯¯åæäº§ççå¼å¸¸ã\n\n> è¿éä¼ çé½æ¯å­é¢éï¼èä¸æ¯beanå¼ç¨ï¼idrefä¸valueçåºå«åªæ¯åèä¼åæ ¡éªã\n> \n> å¨4.0 Bean XSDä¸­ä¸åæ¯æidrefåç´ ä¸çlocalå±æ§ï¼å ä¸ºå®ä¸åæä¾å¸¸è§Beanå¼ç¨ä¸çå¼ï¼è¿éä¸å¥½çè§£ï¼ä¹ålocalå±æ§çä½ç¨æ¯ï¼åªè½æå®ä¸å½åéç½®çå¯¹è±¡å¨åä¸ä¸ªéç½®æä»¶çå¯¹è±¡å®ä¹çåç§°ï¼æä»¥è¿éè®¤ä¸º5.3.2æè¿ä¸ªå±æ§åºå¼å°±è¡äºï¼ã åçº§å°4.0æ¨¡å¼æ¶ï¼å°ç°æçidref localå±æ§æ´æ¹ä¸ºidref beanã\n\n<idref />åç´ å¸¦æ¥ä»·å¼çä¸ä¸ªå¸¸è§å°æ¹ï¼è³å°å¨Spring 2.0ä¹åççæ¬ä¸­ï¼æ¯å¨ProxyFactoryBean beanå®ä¹ä¸­éç½®AOPæ¦æªå¨ã å¨æå®æ¦æªå¨åç§°æ¶ä½¿ç¨<idref />åç´ å¯é²æ­¢æ¨æ¼åéè¯¯çæ¦æªå¨IDã\n\n# å¼ç¨å¶ä»Bean\n\nrefåç´ æ¯<constructor-arg />æ<property />å®ä¹åç´ åçæåä¸ä¸ªåç´ ã å¨è¿éï¼æ¨å°Beançæå®å±æ§çå¼è®¾ç½®ä¸ºå¯¹å®¹å¨ç®¡ççå¦ä¸ä¸ªBeanï¼åä½èï¼çå¼ç¨ã å¼ç¨çbeanæ¯è¦è®¾ç½®å¶å±æ§çbeançä¾èµï¼å¹¶ä¸å¨è®¾ç½®å±æ§ä¹åæ ¹æ®éè¦å¯¹å¶è¿è¡åå§åã ï¼å¦æåä½èæ¯åä¾beanï¼åå®å¯è½å·²ç»ç±å®¹å¨åå§åäºãï¼ææå¼ç¨æç»é½æ¯å¯¹å¦ä¸ä¸ªå¯¹è±¡çå¼ç¨ã ä½ç¨äºåéªè¯åå³äºæ¨æ¯éè¿beanè¿æ¯parentæå®å¦ä¸ä¸ªå¯¹è±¡çIDæåç§°ã\n\néè¿<ref />æ è®°çbeanå±æ§æå®ç®æ beanæ¯æéç¨çå½¢å¼ï¼å¹¶ä¸åè®¸åå»ºå¯¹åä¸å®¹å¨æç¶å®¹å¨ä¸­ä»»ä½beançå¼ç¨ï¼èä¸ç®¡å®æ¯å¦å¨åä¸XMLæä»¶ä¸­ã beanå±æ§çå¼å¯ä»¥ä¸ç®æ beançidå±æ§ç¸åï¼ä¹å¯ä»¥ä¸ç®æ beançnameå±æ§ä¸­çå¼ä¹ä¸ç¸åã ä¸é¢çç¤ºä¾æ¼ç¤ºå¦ä½ä½¿ç¨refåç´ ï¼\n\n<ref bean="someBean"/>\n\n\néè¿parentå±æ§æå®ç®æ Beanå°åå»ºå¯¹å½åå®¹å¨çç¶å®¹å¨ä¸­çBeançå¼ç¨ã parentå±æ§çå¼å¯ä»¥ä¸ç®æ Beançidå±æ§æç®æ Beançåç§°å±æ§ä¸­çå¼ä¹ä¸ç¸åã ç®æ Beanå¿é¡»ä½äºå½åå®¹å¨çç¶å®¹å¨ä¸­ã å¨å®¹å¨å·æå±æ¬¡ç»æå¹¶ä¸è¦åè£ä¸ä¸ªä¸å¨ç¶å®¹å¨ä¸­å·²å­å¨çbeanå·æç¸ååç§°çä»£çbeanæ¶ï¼æåºè¯¥ä½¿ç¨parentå±æ§ã ä»¥ä¸æ¸åæ¾ç¤ºäºå¦ä½ä½¿ç¨parentå±æ§ï¼\n\n\x3c!-- in the parent context --\x3e\n<bean id="accountService" class="com.something.SimpleAccountService">\n    \x3c!-- insert dependencies as required as here --\x3e\n</bean>\n\n\n\x3c!-- in the child (descendant) context --\x3e\n<bean id="accountService" \x3c!-- bean name is the same as the parent bean --\x3e\n    class="org.springframework.aop.framework.ProxyFactoryBean">\n    <property name="target">\n        <ref parent="accountService"/> \x3c!-- notice how we refer to the parent bean --\x3e\n    </property>\n    \x3c!-- insert other configuration and dependencies as required here --\x3e\n</bean>\n\n\n> refåç´ çlocalå±æ§å¨4.0 Bean XSDä¸­ä¸ååæ¯æï¼å ä¸ºå®ä¸åæä¾å¸¸è§Beanå¼ç¨ä¸çå¼ã åçº§å°4.0æ¨¡å¼æ¶ï¼å°ç°æçref localæ´æ¹ä¸ºref beanã\n\n# åé¨Beans\n\n<property />æ<constructor-arg />åç´ åç<bean />åç´ å®ä¹äºä¸ä¸ªåé¨beanï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\n<bean id="outer" class="...">\n    \x3c!-- instead of using a reference to a target bean, simply define the target bean inline --\x3e\n    <property name="target">\n        <bean class="com.example.Person"> \x3c!-- this is the inner bean --\x3e\n            <property name="name" value="Fiona Apple"/>\n            <property name="age" value="25"/>\n        </bean>\n    </property>\n</bean>\n\n\nåé¨beanå®ä¹ä¸éè¦å®ä¹IDæåç§°ã å¦ææå®ï¼åå®¹å¨ä¸ä½¿ç¨è¯¥å¼ä½ä¸ºæ è¯ç¬¦ã å®¹å¨å¨åå»ºæ¶ä¹ä¼å¿½ç¥scopeæ å¿ï¼å ä¸ºåé¨Beanå§ç»æ¯å¿åçï¼å¹¶ä¸å§ç»ä¸å¤é¨Beanä¸èµ·åå»ºã ä¸è½ç¬ç«è®¿é®åé¨beanï¼ä¹ä¸è½å°å®ä»¬æ³¨å¥å°åä½beanä¸­ï¼é¤äºå°è£çbeanï¼ã\n\n# éå\n\n<list />ï¼<set />ï¼<map />å<props />åç´ åå«è®¾ç½®Javaéåç±»åçListï¼Setï¼MapåPropertiesçå±æ§ååæ°ã ä»¥ä¸ç¤ºä¾æ¾ç¤ºäºå¦ä½ä½¿ç¨å®ä»¬ï¼\n\n<bean id="moreComplexObject" class="example.ComplexObject">\n    \x3c!-- results in a setAdminEmails(java.util.Properties) call --\x3e\n    <property name="adminEmails">\n        <props>\n            <prop key="administrator">administrator@example.org</prop>\n            <prop key="support">support@example.org</prop>\n            <prop key="development">development@example.org</prop>\n        </props>\n    </property>\n    \x3c!-- results in a setSomeList(java.util.List) call --\x3e\n    <property name="someList">\n        <list>\n            <value>a list element followed by a reference</value>\n            <ref bean="myDataSource" />\n        </list>\n    </property>\n    \x3c!-- results in a setSomeMap(java.util.Map) call --\x3e\n    <property name="someMap">\n        <map>\n            <entry key="an entry" value="just some string"/>\n            <entry key ="a ref" value-ref="myDataSource"/>\n        </map>\n    </property>\n    \x3c!-- results in a setSomeSet(java.util.Set) call --\x3e\n    <property name="someSet">\n        <set>\n            <value>just some string</value>\n            <ref bean="myDataSource" />\n        </set>\n    </property>\n</bean>\n\n\nå¶ä¸­ï¼mapçkeyæèvalueï¼æsetçvalueï¼å¯ä»¥æ¯ä»¥ä¸ä»»ä¸åç´ ï¼\n\nbean | ref | idref | list | set | map | props | value | null\n\n\néååå¹¶\n\nSpringå®¹å¨è¿æ¯æåå¹¶éåã åºç¨ç¨åºå¼åäººåå¯ä»¥å®ä¹ç¶<list />ï¼<map />ï¼<set />æ<props />åç´ ï¼å¹¶å·æä»ç¶éåç»§æ¿å¹¶è¦çå¼çå­åç´ ï¼ï¼æã ä¹å°±æ¯è¯´ï¼å­éåçå¼æ¯åå¹¶ç¶éååå­éåçåç´ çç»æï¼å­éåçåç´ ä¼è¦çç¶éåä¸­æå®çå¼ã\n\nä¸é¢çç¤ºä¾æ¼ç¤ºäºéååå¹¶ï¼\n\n<beans>\n    <bean id="parent" abstract="true" class="example.ComplexObject">\n        <property name="adminEmails">\n            <props>\n                <prop key="administrator">administrator@example.com</prop>\n                <prop key="support">support@example.com</prop>\n            </props>\n        </property>\n    </bean>\n    <bean id="child" parent="parent">\n        <property name="adminEmails">\n            \x3c!-- the merge is specified on the child collection definition --\x3e\n            <props merge="true">\n                <prop key="sales">sales@example.com</prop>\n                <prop key="support">support@example.co.uk</prop>\n            </props>\n        </property>\n    </bean>\n<beans>\n\n\næ³¨æå­beanå®ä¹çadminEmailså±æ§ç<props />åç´ ä¸ä½¿ç¨merge = trueå±æ§ã å½å­beanç±å®¹å¨è§£æå¹¶å®ä¾ååï¼çæçå®ä¾å·æadminEmails Propertieséåï¼å¶ä¸­åå«å°å­beançadminEmailséåä¸ç¶beançadminEmailséååå¹¶çç»æã ä»¥ä¸æ¸åæ¾ç¤ºäºç»æï¼\n\nadministrator=administrator@example.com\nsales=sales@example.com\nsupport=support@example.co.uk\n\n\nå­Propertieséåçå¼éç»§æ¿äºç¶<props />çææå±æ§ï¼å­å±æ§çsupportå¼è¦çäºç¶éåä¸­çå¼ã\n\næ­¤åå¹¶è¡ä¸ºç±»ä¼¼å°éç¨äº<list />ï¼<map />å<set />éåç±»åã å¨<list />åç´ çç¹å®æåµä¸ï¼å°ç»´æ¤ä¸Listéåç±»åå³èçè¯­ä¹ï¼å³ï¼å¼çæåºéåçæ¦å¿µï¼ã ç¶çº§çå¼åäºå­çº§åè¡¨çææå¼ã å¯¹äºMapï¼SetåPropertieséåç±»åï¼ä¸å­å¨æåºã å æ­¤ï¼å¯¹äºå®¹å¨åé¨ä½¿ç¨çå³èMapï¼SetåPropertieså®ç°ç±»åçéåï¼æ²¡æææçæåºè¯­ä¹ã\n\néååå¹¶çéå¶\n\næ¨ä¸è½åå¹¶ä¸åçéåç±»å(å¦MapåList)ãå¦ææ¨å°è¯è¿æ ·åï¼åä¼æåºéå½çå¼å¸¸ãå¿é¡»å¨ä¸å±çç»§æ¿çå­éåå®ä¹ä¸æå®mergeå±æ§ãå¨ç¶éåå®ä¹ä¸æå®mergeå±æ§æ¯å¤ä½çï¼å¹¶ä¸ä¸ä¼å¯¼è´æéçåå¹¶ã\n\nå¼ºç±»åçéå\n\néçJava 5ä¸­æ³åç±»åçå¼å¥ï¼æ¨å¯ä»¥ä½¿ç¨å¼ºç±»åéåã ä¹å°±æ¯è¯´ï¼å¯ä»¥å£°æä¸ä¸ªCollectionç±»åï¼ä½¿å¶åªè½åå«ï¼ä¾å¦ï¼Stringåç´ ã å¦æä½¿ç¨Springå°å¼ºç±»åçCollectionä¾èµæ³¨å¥å°Beanä¸­ï¼åå¯ä»¥å©ç¨Springçç±»åè½¬æ¢æ¯æï¼ä»¥ä¾¿å¨å°å¼ºç±»åçCollectionå®ä¾çåç´ æ·»å å°Beanä¸­ä¹åï¼åå°å¶è½¬æ¢ä¸ºéå½çç±»åã ä»¥ä¸Javaç±»åbeanå®ä¹æ¾ç¤ºäºå¦ä½æ§è¡æ­¤æä½ï¼\n\npublic class SomeClass {\n\n    private Map<String, Float> accounts;\n\n    public void setAccounts(Map<String, Float> accounts) {\n        this.accounts = accounts;\n    }\n}\n\n\n<beans>\n    <bean id="something" class="x.y.SomeClass">\n        <property name="accounts">\n            <map>\n                <entry key="one" value="9.99"/>\n                <entry key="two" value="2.75"/>\n                <entry key="six" value="3.99"/>\n            </map>\n        </property>\n    </bean>\n</beans>\n\n\nå½åå¤æ³¨å¥something beançaccountså±æ§æ¶ï¼å¯ä»¥éè¿åå°è·å¾æå³å¼ºç±»åMap <Stringï¼Float>çåç´ ç±»åçæ³åä¿¡æ¯ã å æ­¤ï¼Springçç±»åè½¬æ¢åºç¡æ¶æå°åç§å¼åç´ è¯å«ä¸ºFloatç±»åï¼å¹¶å°å­ç¬¦ä¸²å¼ï¼9.99ã2.75å3.99ï¼è½¬æ¢ä¸ºå®éçFloatç±»åã\n\n# Nullåç©ºString\n\nSpringå°å±æ§ä¹ç±»çç©ºåæ°è§ä¸ºç©ºå­ç¬¦ä¸²ãä»¥ä¸åºäºxmlçéç½®åæ°æ®çæ®µå°emailå±æ§è®¾ç½®ä¸ºç©ºå­ç¬¦ä¸²å¼("")ã\n\n<bean class="ExampleBean">\n    <property name="email" value=""/>\n</bean>\n\n\nç­ä»·äºï¼\n\nexampleBean.setEmail("");\n\n\n<null />åç´ å¤çç©ºå¼ã ä»¥ä¸æ¸åæ¾ç¤ºäºä¸ä¸ªç¤ºä¾ï¼\n\n<bean class="ExampleBean">\n    <property name="email">\n        <null/>\n    </property>\n</bean>\n\n\nç­ä»·äºï¼\n\nexampleBean.setEmail(null);\n\n\n# p-namespace\n\néè¿p-namespaceï¼æ¨å¯ä»¥ä½¿ç¨beanåç´ çå±æ§ï¼èä¸æ¯åµå¥ç<property />åç´ ï¼æ¥æè¿°åä½beançå±æ§å¼ï¼æåæ¶ä½¿ç¨è¿ä¸¤èã\n\nSpringæ¯æå¸¦æå½åç©ºé´çå¯æ©å±éç½®æ ¼å¼ï¼è¿äºåç§°ç©ºé´åºäºXML Schemaå®ä¹ã æ¬ç« è®¨è®ºçbeanéç½®æ ¼å¼å¨XML Schemaææ¡£ä¸­å®ä¹ã ä½æ¯ï¼p-namespaceæªå¨XSDæä»¶ä¸­å®ä¹ï¼ä»å­å¨äºSpring Coreä¸­ã\n\nä¸é¢çç¤ºä¾æ¾ç¤ºäºä¸¤ä¸ªè§£æå°ç¸åç»æçXMLçæ®µ(ç¬¬ä¸ä¸ªä½¿ç¨æ åXMLæ ¼å¼ï¼ç¬¬äºä¸ªä½¿ç¨p-namespace)ï¼\n\n<beans xmlns="http://www.springframework.org/schema/beans"\n    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n    xmlns:p="http://www.springframework.org/schema/p"\n    xsi:schemaLocation="http://www.springframework.org/schema/beans\n        https://www.springframework.org/schema/beans/spring-beans.xsd">\n\n    <bean name="classic" class="com.example.ExampleBean">\n        <property name="email" value="someone@somewhere.com"/>\n    </bean>\n\n    <bean name="p-namespace" class="com.example.ExampleBean"\n        p:email="someone@somewhere.com"/>\n</beans>\n\n\nè¯¥ç¤ºä¾æ¾ç¤ºäºbeanå®ä¹ä¸­çp-namespaceä¸­çä¸ä¸ªåä¸ºemailçå±æ§ãè¿åè¯Springåå«ä¸ä¸ªå±æ§å£°æãå¦åæè¿°ï¼p-namespaceæ²¡æschema å®ä¹ï¼å æ­¤å¯ä»¥å°å±æ§çåç§°è®¾ç½®ä¸ºå±æ§åã\n\nä¸ä¸ä¸ªç¤ºä¾åæ¬å¦å¤ä¸¤ä¸ªbeanå®ä¹ï¼å®ä»¬é½å¼ç¨äºå¦ä¸ä¸ªbeanï¼\n\n<beans xmlns="http://www.springframework.org/schema/beans"\n    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n    xmlns:p="http://www.springframework.org/schema/p"\n    xsi:schemaLocation="http://www.springframework.org/schema/beans\n        https://www.springframework.org/schema/beans/spring-beans.xsd">\n\n    <bean name="john-classic" class="com.example.Person">\n        <property name="name" value="John Doe"/>\n        <property name="spouse" ref="jane"/>\n    </bean>\n\n    <bean name="john-modern"\n        class="com.example.Person"\n        p:name="John Doe"\n        p:spouse-ref="jane"/>\n\n    <bean name="jane" class="com.example.Person">\n        <property name="name" value="Jane Doe"/>\n    </bean>\n</beans>\n\n\næ­¤ç¤ºä¾ä¸ä»åæ¬ä½¿ç¨p-namespaceçå±æ§å¼ï¼èä¸è¿ä½¿ç¨ç¹æ®æ ¼å¼æ¥å£°æå±æ§å¼ç¨ã ç¬¬ä¸ä¸ªbeanå®ä¹ä½¿ç¨<property name="spouse" ref="jane" />åå»ºä»bean johnå°bean janeçå¼ç¨ï¼èç¬¬äºä¸ªbeanå®ä¹ä½¿ç¨p:spouse-ref="jane"å±æ§åç¸åçäºæã å¨è¿ç§æåµä¸ï¼spouseæ¯å±æ§åç§°ï¼è-refé¨åè¡¨ç¤ºè¿ä¸æ¯ä¸ä¸ªç´æ¥å¼ï¼èæ¯å¯¹å¦ä¸ä¸ªbeançå¼ç¨ã\n\n> p-namespaceä¸åæ åXMLæ ¼å¼é£ä¹çµæ´»ãä¾å¦ï¼å£°æå±æ§å¼ç¨çæ ¼å¼ä¸ä»¥Refç»å°¾çå±æ§åçå²çª(æéªè¯ä»è½æ­£ç¡®è§£æ)ï¼èæ åXMLæ ¼å¼æ²¡æãæä»¬å»ºè®®æ¨è°¨æå°éæ©èªå·±çæ¹æ³ï¼å¹¶å°å¶åç¥å¢éæåï¼ä»¥é¿åçæåæ¶ä½¿ç¨è¿ä¸ç§æ¹æ³çXMLææ¡£ã\n\n# c-namespace\n\nä¸p-namespaceçXMLå¿«æ·æ¹å¼ç±»ä¼¼ï¼Spring 3.1ä¸­å¼å¥çc-namespaceåè®¸åèå±æ§æ¥éç½®æé å½æ°åæ°ï¼èä¸æ¯åµå¥çconstructor-argåç´ ã\n\nä¸é¢çç¤ºä¾ä½¿ç¨c:namespaceæ¥åååºäºæé å¨çä¾èµæ³¨å¥ç¸åçäºæ\n\n<beans xmlns="http://www.springframework.org/schema/beans"\n    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n    xmlns:c="http://www.springframework.org/schema/c"\n    xsi:schemaLocation="http://www.springframework.org/schema/beans\n        https://www.springframework.org/schema/beans/spring-beans.xsd">\n\n    <bean id="beanTwo" class="x.y.ThingTwo"/>\n    <bean id="beanThree" class="x.y.ThingThree"/>\n\n    \x3c!-- traditional declaration with optional argument names --\x3e\n    <bean id="beanOne" class="x.y.ThingOne">\n        <constructor-arg name="thingTwo" ref="beanTwo"/>\n        <constructor-arg name="thingThree" ref="beanThree"/>\n        <constructor-arg name="email" value="something@somewhere.com"/>\n    </bean>\n\n    \x3c!-- c-namespace declaration with argument names --\x3e\n    <bean id="beanOne" class="x.y.ThingOne" c:thingTwo-ref="beanTwo"\n        c:thingThree-ref="beanThree" c:email="something@somewhere.com"/>\n\n</beans>\n\n\nc:å½åç©ºé´ä½¿ç¨ä¸p: ç¸åççº¦å®(beanå¼ç¨çæ«å°¾æ¯-ref)ï¼éè¿å®ä»¬çåç§°è®¾ç½®æé å¨åæ°ãç±»ä¼¼å°ï¼å®éè¦å¨XMLæä»¶ä¸­å£°æï¼å³ä½¿å®ä¸æ¯å¨XSDæ¨¡å¼ä¸­å®ä¹ç(å®å­å¨äºSpring Coreä¸­)ã\n\nå¯¹äºæå°æ°æåµä¸æ æ³ä½¿ç¨æé å½æ°åæ°åç§°çæåµï¼éå¸¸ï¼å¦æå­èç æ¯å¨æ²¡æè°è¯ä¿¡æ¯çæåµä¸ç¼è¯çï¼ï¼åå¯ä»¥ä½¿ç¨åæ°ç´¢å¼ï¼å¦ä¸æç¤ºï¼\n\n\x3c!-- c-namespace index declaration --\x3e\n<bean id="beanOne" class="x.y.ThingOne" c:_0-ref="beanTwo" c:_1-ref="beanThree"\n    c:_2="something@somewhere.com"/>\n\n\n> ç±äºXMLè¯­æ³çåå ï¼ç´¢å¼è¡¨ç¤ºæ³éè¦æåå¯¼ç¬¦å· "_"ï¼å ä¸ºXMLå±æ§åä¸è½ä»¥æ°å­å¼å¤´(å°½ç®¡æäºideåè®¸)ã<constructor-arg>åç´ ä¹å¯ä»¥ä½¿ç¨ç¸åºçç´¢å¼è¡¨ç¤ºæ³ï¼ä½ä¸å¸¸ç¨ï¼å ä¸ºå¨é£éå£°æçæ®éé¡ºåºéå¸¸å°±è¶³å¤äºã\n\n# å¤åå±æ§å\n\nå¨è®¾ç½®beanå±æ§æ¶ï¼å¯ä»¥ä½¿ç¨å¤åæåµå¥å±æ§åï¼åªè¦è·¯å¾çææç»ä»¶(æç»å±æ§åé¤å¤)é½ä¸æ¯nullçãèèä¸é¢çbeanå®ä¹\n\n<bean id="something" class="things.ThingOne">\n    <property name="fred.bob.sammy" value="123" />\n</bean>\n\n\nsomething beanæä¸ä¸ªfredå±æ§ï¼å®æä¸ä¸ªbobå±æ§ï¼bobè¿æä¸ä¸ªsammyå±æ§ï¼æåçsammyå±æ§è¢«è®¾ç½®ä¸ºå¼123ãä¸ºäºæ­£å¸¸è§£æï¼å¨æé beanä¹åï¼somethingçfredå±æ§åfredçbobå±æ§ä¸è½ä¸ºç©ºãå¦åï¼æåºNullPointerExceptionã\n\n<?xml version="1.0" encoding="UTF-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p"\n       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">\n<bean id="student" class="pre.chl.spring.core.Student" p:ref-ref="courseRef">\n    \x3c!--å¦ææä¸é¢è¿è¡æ³¨éäºå°±ä¼æå¼å¸¸NullValueInNestedPathException\n\tå¦æä¸æ³¨éï¼scoreæåçå¼ä¹æ¯99ï¼å¯è§på½åç©ºé´ååå§æ ç­¾æ··ç¨å¯è½ä¼åºç°å²\tçªï¼åºè¯¥åªä¼éåå§æ ç­¾åç´ å»è§£æ--\x3e\n    \x3c!--<property name="ref" ref="courseRef"/>--\x3e\n    <property name="ref.score" value="99"/>\n</bean>\n    <bean id="courseRef" class="pre.chl.spring.core.Course" p:score="100"/>\n</beans>\n\n\n\n# 1.4.3. depends-on\n\nå¦æä¸ä¸ªbeanæ¯å¦ä¸ä¸ªbeançä¾èµé¡¹ï¼åéå¸¸æå³çå°ä¸ä¸ªbeanè®¾ç½®ä¸ºå¦ä¸ä¸ªbeançå±æ§ã éå¸¸ï¼æ¨å¯ä»¥ä½¿ç¨åºäºXMLçéç½®åæ°æ®ä¸­ç<ref />åç´ æ¥å®ææ­¤æä½ã ä½æ¯ï¼ææ¶beanä¹é´çä¾èµä¸å¤ªç´æ¥ã ä¸ä¸ªä¾å­æ¯å½è¦è§¦åç±»ä¸­çéæåå§åå¨çæ¶åï¼ä¾å¦æ°æ®åºé©±å¨ç¨åºæ³¨åã depends-onå¯ä»¥æ¾å¼å°å¼ºå¶åå§åä¸ä¸ªæå¤ä¸ªä½¿ç¨è¯¥åç´ å¼ç¨çbeanã ä¸é¢çç¤ºä¾ä½¿ç¨depends-onå±æ§æ¥è¡¨ç¤ºå¯¹åä¾beançä¾èµå³ç³»ï¼\n\n<bean id="beanOne" class="ExampleBean" depends-on="manager"/>\n<bean id="manager" class="ManagerBean" />\n\n\nè¦è¡¨è¾¾å¯¹å¤ä¸ªbeançä¾èµå³ç³»ï¼è¯·æä¾ä¸ä¸ªbeanåç§°çåè¡¨ä½ä¸ºdepends-onå±æ§çå¼ï¼éå·ï¼ç©ºæ ¼ååå·é½æ¯åæ³ çåéç¬¦ï¼ï¼\n\n<bean id="beanOne" class="ExampleBean" depends-on="manager,accountDao">\n    <property name="manager" ref="manager" />\n</bean>\n\n<bean id="manager" class="ManagerBean" />\n<bean id="accountDao" class="x.y.jdbc.JdbcAccountDao" />\n\n\n> depends-onæ¢å¯ä»¥æå®åå§åæ¶ä¾èµé¡¹ï¼å¨åä¾beançæåµä¸ï¼ä¹å¯ä»¥æå®ç¸åºçéæ¯æ¶ä¾èµé¡¹ãå¨éæ¯ç»å®beanæ¬èº«ä¹åï¼é¦åéæ¯ depends-onçbeanãå æ­¤ï¼ depends-onè¿å¯ä»¥æ§å¶å³é­é¡ºåºã\n\n\n# 1.4.4. æå è½½Beans\n\né»è®¤æåµä¸ï¼ä½ä¸ºåå§åè¿ç¨çä¸é¨åï¼ApplicationContextå®ç°ä¼å°½æ©åå»ºåéç½®ææåä¾beanã éå¸¸ï¼è¿ç§é¢åå§åæ¯å¯åçï¼å ä¸ºä¸æ°å°æ¶çè³æ°å¤©åç¸æ¯ï¼ä¼ç«å³åç°éç½®æç¯å¢åæ°ä¸­çéè¯¯ã å¦ææ¨ä¸å¸æè¿æ ·åï¼åå¯ä»¥éè¿å°beanå®ä¹æ è®°ä¸ºå»¶è¿åå§åæ¥é»æ­¢åä¾beançé¢å®ä¾åã å»¶è¿åå§åçbeanåè¯IoCå®¹å¨å¨é¦æ¬¡è¯·æ±æ¶ï¼èä¸æ¯å¨å¯å¨æ¶ï¼æåå»ºä¸ä¸ªbeanå®ä¾ã\n\nå¨XMLä¸­ï¼æ­¤è¡ä¸ºç±<bean />åç´ ä¸çlazy-initå±æ§æ§å¶ï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\n<bean id="lazy" class="com.something.ExpensiveToCreateBean" lazy-init="true"/>\n<bean name="not.lazy" class="com.something.AnotherBean"/>\n\n\nApplicationContextä½¿ç¨ä¸è¿°éç½®æ¶ï¼å½ApplicationContextå¯å¨ï¼lazy beanä¸ä¼ç«å³é¢å®ä¾åï¼not.lazy beanè¢«å°½æ©å°é¢å®ä¾åã\n\nä½æ¯ï¼å½å»¶è¿åå§åçbeanæ¯æªå»¶è¿åå§åçåä¾beançä¾èµé¡¹æ¶ï¼ApplicationContextä¼å¨å¯å¨æ¶åå»ºå»¶è¿åå§åçbeanï¼å ä¸ºå®å¿é¡»æ»¡è¶³åä¾çä¾èµå³ç³»ã å»¶è¿åå§åçbeanè¢«æ³¨å¥å°å¶ä»æªå»¶è¿åå§åçåä¾beanä¸­ã\n\næ¨è¿å¯ä»¥ä½¿ç¨<beans />åç´ ä¸çdefault-lazy-initå±æ§å¨å®¹å¨çº§å«æ§å¶å»¶è¿åå§åï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\n<beans default-lazy-init="true">\n    \x3c!-- no beans will be pre-instantiated... --\x3e\n</beans>\n\n\n\n# 1.4.5. èªå¨è£éåä½è\n\nSpringå®¹å¨å¯ä»¥èªå¨è£éåä½beanä¹é´çå³ç³»ãæ¨å¯ä»¥éè¿æ£æ¥ApplicationContextçåå®¹ï¼è®©Springä¸ºæ¨çbeanèªå¨è§£æåä½è(å¶ä»bean)ãèªå¨è£éå·æä»¥ä¸ä¼ç¹ï¼\n\n * èªå¨è£éå¯ä»¥æ¾èåå°æå®å±æ§ææé å¨åæ°çéè¦ã(æ¬ç« å¶ä»å°æ¹è®¨è®ºçå¶ä»æºå¶ï¼æ¯å¦beanæ¨¡æ¿ï¼å¨è¿æ¹é¢ä¹å¾æä»·å¼ã)\n\n * éçå¯¹è±¡çæ´æ°ï¼èªå¨è£éå¯ä»¥æ´æ°éç½®ã ä¾å¦ï¼å¦æéè¦å°ä¾èµé¡¹æ·»å å°ç±»ä¸­ï¼åæ éä¿®æ¹éç½®å³å¯èªå¨æ»¡è¶³è¯¥ä¾èµé¡¹ã å æ­¤ï¼èªå¨è£éå¨å¼åè¿ç¨ä¸­ç¹å«æç¨ï¼èä¸å¿å¦å®å¨ä»£ç åºåå¾æ´ç¨³å®æ¶åæ¢å°æ¾å¼è£éçéæ©ã\n\nä½¿ç¨åºäºXMLçéç½®åæ°æ®æ¶ï¼è¯·åéâä¾èµæ³¨å¥âï¼ï¼å¯ä»¥ä½¿ç¨<bean />åç´ çautowireå±æ§ä¸ºbeanå®ä¹æå®èªå¨è£éæ¨¡å¼ã èªå¨è£éåè½å·æåç§æ¨¡å¼ã æ¨å¯ä»¥ä¸ºæ¯ä¸ªbeanæå®èªå¨è£éï¼å¹¶éæ©è¦èªå¨è£éçæ¨¡å¼ã ä¸è¡¨æè¿°äºåç§èªå¨è£éæ¨¡å¼ï¼\n\nMODE          EXPLANATION\nno            (é»è®¤)ä¸èªå¨è£éãBeanå¼ç¨å¿é¡»ç±refåç´ å®ä¹ãå¯¹äºè¾å¤§çé¨ç½²ï¼ä¸å»ºè®®æ´æ¹é»è®¤è®¾ç½®ï¼å ä¸ºæ¾å¼å°æå®åä½èå¯ä»¥æä¾æ´å¥½çæ§å¶åéæåº¦ãå¨æç§ç¨åº¦ä¸ï¼å®è®°å½äºç³»ç»çç»æã\nbyName        æå±æ§åç§°èªå¨è£éã Springæ¥æ¾ä¸éè¦èªå¨è£éçå±æ§ååçbeanã\n              ä¾å¦ï¼å¦æä¸ä¸ªbeanå®ä¹è¢«è®¾ç½®ä¸ºæåç§°èªå¨è£éï¼å¹¶ä¸åå«ä¸ä¸ªmasterå±æ§ï¼å³ï¼å®å·æsetMasterï¼..ï¼æ¹æ³ï¼ï¼é£ä¹Springå°æ¥æ¾ä¸ä¸ªåä¸ºmasterçbeanå®ä¹å¹¶ä½¿ç¨å®æ¥è®¾ç½®è¯¥å±æ§ã\nbyType        å¦æå®¹å¨ä¸­æ°å¥½å­å¨è¯¥å±æ§ç±»åçä¸ä¸ªbeanï¼åèªå¨è£éè¯¥å±æ§ãå¦æå­å¨å¤ä¸ªï¼å°æåºä¸ä¸ªè´å½å¼å¸¸ï¼è¿è¡¨ææ¨ä¸è½å¯¹è¯¥beanä½¿ç¨byTypeèªå¨è£éãå¦ææ²¡æå¹éçbeanï¼åä»ä¹ä¹ä¸ä¼åç(å±æ§æ²¡æè®¾ç½®)ã\nconstructor   ä¸byTypeç±»ä¼¼ï¼ä½éç¨äºæé å½æ°åæ°ã å¦æå®¹å¨ä¸­ä¸å­å¨æé å½æ°åæ°ç±»åçä¸ä¸ªbeanï¼åå°å¼åè´å½éè¯¯ã\n\nä½¿ç¨byTypeææé å¨èªå¨è£éæ¨¡å¼ï¼æ¨å¯ä»¥è£éæ°ç»åéåç±»ã å¨è¿ç§æåµä¸ï¼å°æä¾å®¹å¨ä¸­ä¸é¢æç±»åå¹éçææèªå¨è£éåéï¼ä»¥æ»¡è¶³ä¾èµã å¦æææçkeyç±»åä¸ºStringï¼åå¯ä»¥èªå¨è£éå¼ºç±»åMapå®ä¾ã èªå¨è£éçMapå®ä¾çå¼åæ¬ä¸ææç±»åå¹éçææbeanå®ä¾ï¼å¹¶ä¸Mapå®ä¾çkeyåå«ç¸åºçbeanåç§°ã\n\n# èªå¨è£éçå±éåç¼ºç¹\n\nå½å¨é¡¹ç®ä¸­ä¸è´ä½¿ç¨èªå¨è£éæ¶ï¼èªå¨è£éæææä½³ã å¦æä¸å¨é¨ä½¿ç¨èªå¨è£éï¼åå¯è½ä¼ä½¿å¼åäººåä½¿ç¨èªå¨è£éä»æ¥è£éä¸ä¸ªæä¸¤ä¸ªBeanå®ä¹èæå°å°æã\n\nèèèªå¨è£éçå±éæ§åç¼ºç¹ï¼\n\n * propertyåconstructor-argè®¾ç½®ä¸­çæ¾å¼ä¾èµæ»æ¯è¦çèªå¨è£éãæ¨ä¸è½èªå¨è£éç®åçå±æ§ï¼å¦åè¯­ãStringsåClasses(ä»¥åè¿äºç®åå±æ§çæ°ç»)ãè¿ç§éå¶æ¯ç±è®¾è®¡é æçã\n\n * èªå¨è£éä¸å¦æ¾ç¤ºè£éä¸¥æ ¼ãå°½ç®¡å¦æ­¤ï¼æ­£å¦åé¢çè¡¨ä¸­ææåºçé£æ ·ï¼å¨åºç°å¯è½äº§çæå¤ç»æçæ­§ä¹æ¶ï¼Springä¼è°¨æå°é¿åçæµãspringç®¡ççå¯¹è±¡ä¹é´çå³ç³»ä¸åæ¾å¼å°è®°å½ã\n\n * ä»Springå®¹å¨çæææ¡£çå·¥å·å¯è½æ æ³ä½¿ç¨è£éä¿¡æ¯ã\n\n * å®¹å¨åçå¤ä¸ªbeanå®ä¹å¯è½ä¸è¦èªå¨è£éçsetteræ¹æ³ææé å¨åæ°æå®çç±»åå¹éã å¯¹äºæ°ç»ï¼éåæMapå®ä¾ï¼è¿ä¸ä¸å®æ¯é®é¢ã ä½æ¯ï¼å¯¹äºéè¦åä¸ªå¼çä¾èµé¡¹ï¼ä¸ä¼éä¾¿è§£å³æ­¤æ­§ä¹ã å¦ææ²¡æå¯ä¸çbeanå®ä¹å¯ç¨ï¼åä¼å¼åå¼å¸¸ã\n\nå¨åä¸ç§æåµä¸ï¼æ¨æå ç§éæ©ï¼\n\n * ä½¿ç¨æ¾ç¤ºè£éèä¸æ¯èªå¨è£é\n\n * éè¿å°å¶beançautowire-candidateå±æ§è®¾ç½®ä¸ºfalseï¼é¿åèªå¨è£ébeanï¼å¦ä¸ä¸èæè¿°ã\n\n * éè¿å°å¶<bean />åç´ çprimaryå±æ§è®¾ç½®ä¸ºtrueï¼å°å®ä¹çåä¸ªbeanæå®ä¸ºä¸»è¦åéå¯¹è±¡ã\n\n * å®ç°åºäºæ³¨è§£çéç½®æä¾çæ´ç»ç²åº¦çæ§å¶ã\n\n# ä»èªå¨è£éä¸­æé¤Bean\n\nå¨æ¯ä¸ªbeançåºç¡ä¸ï¼æ¨å¯ä»¥ä»èªå¨è£éä¸­æé¤ä¸ä¸ªbeanã ä½¿ç¨SpringçXMLæ ¼å¼ï¼å°<bean />åç´ çautowire-candidateå±æ§è®¾ç½®ä¸ºfalseã å®¹å¨ä½¿ç¹å®çbeanå¯¹èªå¨è£éåºç¡æ¶æä¸å¯ç¨ï¼åæ¬æ³¨è§£å¼çéç½®ï¼ä¾å¦@Autowiredï¼ã\n\n> autowire-candidateå±æ§è¢«è®¾è®¡ä¸ºåªå½±ååºäºç±»åçèªå¨è£éãå®ä¸å½±åéè¿åç§°è¿è¡çæ¾å¼å¼ç¨ï¼å³ä½¿æå®çbeanæ²¡æè¢«æ è®°ä¸ºèªå¨è£éåéå¯¹è±¡ï¼ä¹ä¼è§£æè¯¥å¼ç¨ãå æ­¤ï¼å¦æåç§°å¹éï¼æåç§°èªå¨è£éä»ç¶ä¼æ³¨å¥ä¸ä¸ªbeanã\n\næ¨è¿å¯ä»¥åºäºä¸Beanåç§°çæ¨¡å¼å¹éæ¥éå¶èªå¨è£éåéé¡¹ã é¡¶çº§<beans />åç´ å¨å¶default-autowire-candidateså±æ§ä¸­æ¥åä¸ä¸ªæå¤ä¸ªæ¨¡å¼ã ä¾å¦ï¼è¦å°èªå¨è£éåéç¶æéå¶ä¸ºåç§°ä»¥Repositoryç»å°¾çä»»ä½beanï¼è¯·æä¾* Repositoryå¼ã è¦æä¾å¤ç§æ¨¡å¼ï¼è¯·å¨ä»¥éå·åéçåè¡¨ä¸­å®ä¹å®ä»¬ã Beanå®ä¹çautowire-candidateå±æ§çæ¾å¼å¼trueæfalseå§ç»ä¼åã å¯¹äºæ­¤ç±»beanï¼æ¨¡å¼å¹éè§åä¸éç¨ã\n\nè¿äºææ¯å¯¹äºé£äºæ¨ä¸å¸æéè¿èªå¨è£éè¢«æ³¨å¥å°å¶ä»beanä¸­çbeanéå¸¸æç¨ãè¿å¹¶ä¸æå³çä¸è½ä½¿ç¨èªå¨è£éæ¥éç½®è¢«æé¤çbeanæ¬èº«ãç¸åï¼beanæ¬èº«å¹¶ä¸æ¯èªå¨è£éå¶ä»beançåéå¯¹è±¡ã\n\n\n# 1.4.6. æ¹æ³æ³¨å¥\n\nå¨å¤§å¤æ°åºç¨åºæ¯ä¸­ï¼å®¹å¨ä¸­çå¤§å¤æ°beanæ¯åä¾çã å½åä¾Beanéè¦ä¸å¦ä¸ä¸ªåä¾Beanåä½æéåä¾Beanéè¦ä¸å¦ä¸ä¸ªéåä¾Beanåä½æ¶ï¼éå¸¸å¯ä»¥éè¿å°ä¸ä¸ªBeanå®ä¹ä¸ºå¦ä¸ä¸ªBeançå±æ§æ¥å¤çä¾èµã å½beanççå½å¨æä¸åæ¶ä¼åºç°é®é¢ã åè®¾åä¾bean Aå¯è½éè¦ä½¿ç¨éåä¾ï¼ååï¼bean Bï¼ä¹è®¸æ¯å¨Açæ¯ä¸ªæ¹æ³è°ç¨æ¶ä½¿ç¨çãå®¹å¨ä»åå»ºä¸æ¬¡åä¾bean Aï¼å æ­¤åªæä¸æ¬¡æºä¼æ¥è®¾ç½®å±æ§ã æ¯æ¬¡éè¦ä¸ä¸ªbean Bæ¶ï¼å®¹å¨é½æ æ³ä¸ºbean Aæä¾ä¸ä¸ªæ°çbean Bå®ä¾ã\n\nä¸ä¸ªè§£å³æ¹æ¡æ¯æ¾å¼ä¸äºæ§å¶åè½¬ãæ¨å¯ä»¥éè¿å®ç°ApplicationContextAwareæ¥å£ä½¿bean Aæç¥å°å®¹å¨ï¼å¹¶å¨bean Aæ¯æ¬¡éè¦bean Bå®ä¾æ¶åå®¹å¨ååºgetBean(âBâ)è°ç¨æ¥è·å¾(éå¸¸æ¯æ°ç)ãä¸é¢çç¤ºä¾æ¼ç¤ºäºè¿ç§æ¹æ³ï¼\n\n// a class that uses a stateful Command-style class to perform some processing\npackage fiona.apple;\n\n// Spring-API imports\nimport org.springframework.beans.BeansException;\nimport org.springframework.context.ApplicationContext;\nimport org.springframework.context.ApplicationContextAware;\n\npublic class CommandManager implements ApplicationContextAware {\n\n    private ApplicationContext applicationContext;\n\n    public Object process(Map commandState) {\n        // grab a new instance of the appropriate Command\n        Command command = createCommand();\n        // set the state on the (hopefully brand new) Command instance\n        command.setState(commandState);\n        return command.execute();\n    }\n\n    protected Command createCommand() {\n        // notice the Spring API dependency!\n        return this.applicationContext.getBean("command", Command.class);\n    }\n\n    public void setApplicationContext(\n            ApplicationContext applicationContext) throws BeansException {\n        this.applicationContext = applicationContext;\n    }\n}\n\n\nåé¢çæåµæ¯ä¸å¯åçï¼å ä¸ºä¸å¡ä»£ç è½å¤æç¥Springæ¡æ¶å¹¶ä¸ä¹è¦åãæ¹æ³æ³¨å¥æ¯Spring IoCå®¹å¨çä¸ä¸ªé«çº§ç¹æ§ï¼å®è®©æ¨å¾å¥½å°å¤çè¿ä¸ªç¨ä¾ã\n\n> æ¨å¯ä»¥å¨è¿ç¯åå®¢æç« ä¸­éè¯»æ´å¤å³äºæ¹æ³æ³¨å¥çæ¢è®¨ã\n\n# LookUpæ¹æ³æ³¨å¥\n\nLookup æ¹æ³æ³¨å¥æ¯å®¹å¨éåå®¹å¨ç®¡ççBeanä¸çæ¹æ³å¹¶è¿åå®¹å¨ä¸­å¦ä¸ä¸ªBeançåè½ã æ¥æ¾éå¸¸æ¶åååbeanï¼å¦ä¸ä¸èä¸­æè¿°ã Springæ¡æ¶éè¿ä½¿ç¨CGLIBåºä¸­çå­èç çæåè½æ¥å¨æçæè¦çè¯¥æ¹æ³çå­ç±»ï¼ä»èå®ç°æ­¤æ¹æ³æ³¨å¥ã\n\n>  * ä¸ºäºä½¿æ­¤å¨æå­ç±»èµ·ä½ç¨ï¼Spring Beanå®¹å¨å­ç±»çç±»åä¹ä¸è½æ¯finalï¼èè¦è¦ççæ¹æ³ä¹ä¸è½æ¯finalã\n> \n>  * å¯¹å·ææ½è±¡æ¹æ³çç±»è¿è¡ååæµè¯éè¦æ¨èªå·±å¯¹è¯¥ç±»è¿è¡å­ç±»åï¼å¹¶æä¾è¯¥æ½è±¡æ¹æ³çstubå®ç°ã\n> \n>  * ç»ä»¶æ«æä¹éè¦å·ä½çæ¹æ³ï¼è¿éè¦å·ä½çç±»ã\n> \n>  * å¦ä¸ä¸ªå³é®éå¶æ¯ï¼æ¥æ¾æ¹æ³ä¸éç¨äºå·¥åæ¹æ³ï¼å°¤å¶ä¸éç¨äºéç½®ç±»ä¸­ç@Beanæ¹æ³ï¼å ä¸ºå¨è¿ç§æåµä¸ï¼å®¹å¨ä¸è´è´£åå»ºå®ä¾ï¼å æ­¤æ æ³åå»ºè¿è¡æ¶çæç å¨æå­ç±»ã\n\nå¯¹äºåé¢çä»£ç çæ®µä¸­çCommandManagerç±»ï¼Springå®¹å¨å¨æå°éåcreateCommandï¼ï¼æ¹æ³ã å¦éåçç¤ºä¾æç¤ºï¼CommandManagerç±»æ²¡æä»»ä½Springä¾èµé¡¹ï¼\n\npackage fiona.apple;\n\n// no more Spring imports!\n\npublic abstract class CommandManager {\n\n    public Object process(Object commandState) {\n        // grab a new instance of the appropriate Command interface\n        Command command = createCommand();\n        // set the state on the (hopefully brand new) Command instance\n        command.setState(commandState);\n        return command.execute();\n    }\n\n    // okay... but where is the implementation of this method?\n    protected abstract Command createCommand();\n}\n\n\nå¨åå«è¦æ³¨å¥çæ¹æ³çå®¢æ·ç«¯ç±»ï¼å¨æ¬ä¾ä¸­ä¸ºCommandManagerï¼ä¸­ï¼è¦æ³¨å¥çæ¹æ³éè¦ä»¥ä¸å½¢å¼çç­¾åï¼\n\n<public|protected> [abstract] <return-type> theMethodName(no-arguments);\n\n\nå¦ææ¹æ³æ¯æ½è±¡çï¼åå¨æçæçå­ç±»å®ç°è¯¥æ¹æ³ãå¦åï¼å¨æçæçå­ç±»ä¼è¦çå¨åå§ç±»ä¸­å®ä¹çå·ä½æ¹æ³ãèèä»¥ä¸ç¤ºä¾:\n\n\x3c!-- a stateful bean deployed as a prototype (non-singleton) --\x3e\n<bean id="myCommand" class="fiona.apple.AsyncCommand" scope="prototype">\n    \x3c!-- inject dependencies here as required --\x3e\n</bean>\n\n\x3c!-- commandProcessor uses statefulCommandHelper --\x3e\n<bean id="commandManager" class="fiona.apple.CommandManager">\n    <lookup-method name="createCommand" bean="myCommand"/>\n</bean>\n\n\nidä¸ºcommandManagerçbeanå¨éè¦myCommand beançæ°å®ä¾æ¶è°ç¨èªå·±çcreateCommand()æ¹æ³ãå¦æç¡®å®éè¦é¨ç½²myCommand beanï¼é£ä¹å¿é¡»å°å¿å°å°å¶ä½ä¸ºååé¨ç½²ãå¦ææ¯åä¾ï¼åæ¯æ¬¡è¿åmyCommand beançç¸åå®ä¾ã\n\nå¦å¤ï¼å¨åºäºæ³¨è§£çç»ä»¶æ¨¡å¼ä¸­ï¼æ¨å¯ä»¥éè¿@Lookupæ³¨è§£å£°æä¸ä¸ªæ¥æ¾æ¹æ³ï¼å¦ä¸é¢çç¤ºä¾æç¤ºï¼\n\npublic abstract class CommandManager {\n\n    public Object process(Object commandState) {\n        Command command = createCommand();\n        command.setState(commandState);\n        return command.execute();\n    }\n\n    @Lookup("myCommand")\n    protected abstract Command createCommand();\n}\n\n\næèï¼æ´å¸¸ç¨çæ¯ï¼æ¨å¯ä»¥ä¾èµäºæ ¹æ®æ¥æ¾æ¹æ³å£°æçè¿åç±»åè§£æç®æ bean\n\npublic abstract class CommandManager {\n\n    public Object process(Object commandState) {\n        MyCommand command = createCommand();\n        command.setState(commandState);\n        return command.execute();\n    }\n\n    @Lookup\n    protected abstract MyCommand createCommand();\n}\n\n\nè¯·æ³¨æï¼éå¸¸åºä½¿ç¨å·ä½çstubå®ç°å£°ææ­¤ç±»å¸¦æ³¨è§£çæ¥æ¾æ¹æ³ï¼ä»¥ä½¿å¶ä¸Springçç»ä»¶æ«æè§åï¼é»è®¤æåµä¸æ½è±¡ç±»ä¼è¢«å¿½ç¥ï¼å¼å®¹ã æ­¤éå¶ä¸éç¨äºæ¾å¼æ³¨åææ¾å¼å¯¼å¥çBeanç±»ã\n\n> è®¿é®ä½ç¨åä¸åçç®æ beançå¦ä¸ç§æ¹æ³æ¯ObjectFactory / Provideræ³¨å¥ç¹ã\n> \n> ServiceLocatorFactoryBeanï¼å¨org.springframework.beans.factory.configåä¸­ï¼ä¹å¾æç¨ã\n\n# ä»»ææ¹æ³æ¿æ¢\n\nä¸æ¥æ¾æ¹æ³æ³¨å¥ç¸æ¯ï¼æ¹æ³æ³¨å¥çä¸ç§ä¸å¤ªæç¨çå½¢å¼æ¯è½å¤ç¨å¦ä¸ç§æ¹æ³å®ç°æ¿æ¢æç®¡beanä¸­çä»»ææ¹æ³ã æ¨å¯ä»¥æ¾å¿å°è·³è¿æ¬èçå¶ä½é¨åï¼ç´å°æ¨çæ­£éè¦æ­¤åè½ä¸ºæ­¢ã\n\nåå©åºäºXMLçéç½®åæ°æ®ï¼æ¨å¯ä»¥ä½¿ç¨replaced-methodåç´ å°ç°æçæ¹æ³å®ç°æ¿æ¢ä¸ºå¦ä¸ä¸ªã èèä»¥ä¸ç±»ï¼è¯¥ç±»å·æä¸ä¸ªæä»¬è¦è¦ççåä¸ºcomputeValueçæ¹æ³ï¼\n\npublic class MyValueCalculator {\n\n    public String computeValue(String input) {\n        // some real code...\n    }\n\n    // some other methods...\n}\n\n\nä¸ä¸ªå®ç°org.springframework.beans.factory.support.MethodReplaceræ¥å£çç±»æä¾äºæ°çæ¹æ³å®ä¹ï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\n/**\n * meant to be used to override the existing computeValue(String)\n * implementation in MyValueCalculator\n */\npublic class ReplacementComputeValue implements MethodReplacer {\n\n    public Object reimplement(Object o, Method m, Object[] args) throws Throwable {\n        // get the input value, work with it, and return a computed result\n        String input = (String) args[0];\n        ...\n        return ...;\n    }\n}\n\n\nç¨äºé¨ç½²åå§ç±»å¹¶æå®æ¹æ³éåçBeanå®ä¹ç±»ä¼¼äºä»¥ä¸ç¤ºä¾ï¼\n\n<bean id="myValueCalculator" class="x.y.z.MyValueCalculator">\n    \x3c!-- arbitrary method replacement --\x3e\n    <replaced-method name="computeValue" replacer="replacementComputeValue">\n        <arg-type>String</arg-type>\n    </replaced-method>\n</bean>\n\n<bean id="replacementComputeValue" class="a.b.c.ReplacementComputeValue"/>\n\n\næ¨å¯ä»¥å¨<replaced-method />åç´ åä½¿ç¨ä¸ä¸ªæå¤ä¸ª<arg-type />åç´ æ¥æç¤ºè¢«è¦ççæ¹æ³çæ¹æ³ç­¾åã ä»å½æ¹æ³éè½½ä¸ç±»ä¸­å­å¨å¤ä¸ªåä½æ¶ï¼æéè¦å¯¹åæ°ç­¾åã ä¸ºäºæ¹ä¾¿èµ·è§ï¼åæ°çç±»åå­ç¬¦ä¸²å¯ä»¥æ¯å®å¨éå®ç±»ååç§°çå­å­ç¬¦ä¸²ã ä¾å¦ï¼ä»¥ä¸ææé½å¹éjava.lang.Stringï¼\n\njava.lang.String\nString\nStr\n\n\nå ä¸ºåæ°çæ°ééå¸¸è¶³ä»¥åºåæ¯ä¸ªå¯è½çéæ©ï¼æä»¥éè¿è®©æ¨ä»é®å¥ä¸åæ°ç±»åå¹éçæç­å­ç¬¦ä¸²ï¼æ­¤å¿«æ·æ¹å¼å¯ä»¥èçå¾å¤è¾å¥ã\n\n\n# 1.5. Beanä½ç¨å\n\nåå»ºä¸ä¸ªbeanå®ä¹æ¶ï¼å°åå»ºä¸ä¸ªéç½®ï¼è¯¥éç½®ç¨äºåå»ºè¯¥beanå®ä¹æå®ä¹çç±»çå®ä¾ã beanå®ä¹æ¯éç½®çææ³å¾éè¦ï¼å ä¸ºå®æå³æ¨å¯ä»¥ä»ä¸ä¸ªéç½®ä¸­åå»ºä¸ä¸ªç±»çè®¸å¤å¯¹è±¡å®ä¾ã\n\næ¨ä¸ä»å¯ä»¥æ§å¶è¦æå¥å°ä»ç¹å®beanå®ä¹åå»ºçå¯¹è±¡ä¸­çåç§ä¾èµé¡¹åéç½®å¼ï¼è¿å¯ä»¥æ§å¶ä»ç¹å®beanå®ä¹åå»ºçå¯¹è±¡çä½ç¨åã è¿ç§æ¹æ³åè½å¼ºå¤§ä¸çµæ´»ï¼å ä¸ºæ¨å¯ä»¥éæ©éè¿éç½®åå»ºçå¯¹è±¡çä½ç¨åï¼èä¸å¿å¨Javaç±»çº§å«ä¸bakeï¼è¿éä¸ç¥éå¦ä½ç¿»è¯ï¼å¯¹è±¡çä½ç¨åã å¯ä»¥å°Beanå®ä¹ä¸ºé¨ç½²å¨å¤ä¸ªä½ç¨åä¹ä¸ä¸­ã Springæ¡æ¶æ¯æå­ä¸ªä½ç¨åï¼å¶ä¸­åä¸ªåªæå¨ä½¿ç¨Webæç¥çApplicationContextæ¶æå¯ç¨ã æ¨è¿å¯ä»¥åå»ºèªå®ä¹ä½ç¨åã\n\nSCOPE         DESCRIPTION\nsingleton     ï¼é»è®¤å¼ï¼å°æ¯ä¸ªSpring IoCå®¹å¨çåä¸ªbeanå®ä¹ä½ç¨åéå®ä¸ºåä¸ªå¯¹è±¡å®ä¾ã\nprototype     å°åä¸ªbeanå®ä¹çä½ç¨åéå®ä¸ºä»»ææ°éçå¯¹è±¡å®ä¾ã\nrequest       å°åä¸ªbeanå®ä¹çä½ç¨åéå®ä¸ºåä¸ªHTTPè¯·æ±ççå½å¨æåã\n              ä¹å°±æ¯è¯´ï¼æ¯ä¸ªHTTPè¯·æ±é½æä¸ä¸ªèªå·±çbeanå®ä¾ï¼å®æ¯å¨åä¸ªbeanå®ä¹çåºç¡ä¸åå»ºçã\n              ä»å¨webæç¥çSpring ApplicationContextä¸ä¸æä¸­ææã\nsession       å°åä¸ªbeanå®ä¹çä½ç¨åéå®ä¸ºHTTP sessionççå½å¨æåã ä»å¨webæç¥çSpring\n              ApplicationContextä¸ä¸æä¸­ææã\napplication   å°åä¸ªbeanå®ä¹çä½ç¨åéå®ä¸ºServletContextççå½å¨æåã ä»å¨webæç¥çSpring\n              ApplicationContextä¸ä¸æä¸­ææã\nwebsocket     å°åä¸ªbeanå®ä¹çä½ç¨åéå®ä¸ºWebSocketççå½å¨æåã ä»å¨webæç¥çSpring\n              ApplicationContextä¸ä¸æä¸­ææã\n\n> ä»Spring 3.0å¼å§ï¼çº¿ç¨ä½ç¨åå¯ç¨ï¼ä½é»è®¤æåµä¸æªæ³¨åã æå³æ´å¤ä¿¡æ¯ï¼è¯·åè§SimpleThreadScopeææ¡£ã æå³å¦ä½æ³¨åæ­¤æä»»ä½å¶ä»èªå®ä¹ä½ç¨åçè¯´æï¼è¯·åéèªå®ä¹ä½ç¨åã\n\n\n# 1.5.1. åä¾ä½ç¨å\n\nä¸ä¸ªåä¾beanåªæä¸ä¸ªå±äº«å®ä¾è¢«ç®¡çï¼ææå¯¹å·æä¸ä¸ªæå¤ä¸ªä¸è¯¥beanå®ä¹å¹éçIDçbeançè¯·æ±é½ä¼å¯¼è´Springå®¹å¨è¿åä¸ä¸ªç¹å®çbeanå®ä¾ã\n\næ¢å¥è¯è¯´ï¼å½æ¨å®ä¹ä¸ä¸ªbeanå®ä¹å¹¶å°å¶å®ä¹ä¸ºåä¾æ¶ï¼Spring IoCå®¹å¨å°ä¸ºè¯¥beanå®ä¹æå®ä¹çå¯¹è±¡åå»ºä¸ä¸ªå®ä¾ã è¯¥åä¸ªå®ä¾å­å¨å¨æ­¤ç±»åä¾beançç¼å­ä¸­ï¼å¹¶ä¸å¯¹è¯¥å½åbeançææåç»­è¯·æ±åå¼ç¨é½è¿åç¼å­çå¯¹è±¡ã ä¸å¾æ¾ç¤ºäºåä¾ä½ç¨åçå·¥ä½æ¹å¼ï¼\n\n\n\nSpringçåä¾beanæ¦å¿µä¸ãGang of Four (GoF)ãä¸ä¹¦ä¸­å®ä¹çåä¾æ¨¡å¼ä¸åã GoFä¸­çåä¾å¯¹å¯¹è±¡çä½ç¨åè¿è¡ç¡¬ç¼ç ï¼ä»¥ä½¿æ¯ä¸ªClassLoaderåªè½åå»ºä¸ä¸ªç¹å®ç±»çä¸ä¸ªå®ä¾ã æå¥½å°Springåä¾ä½ç¨åæè¿°ä¸ºæ¯ä¸ªå®¹å¨åæ¯ä¸ªbeanã è¿æå³çï¼å¦ææ¨å¨åä¸ªSpringå®¹å¨ä¸­ä¸ºç¹å®ç±»å®ä¹ä¸ä¸ªbeanï¼åSpringå®¹å¨å°åå»ºè¯¥beanå®ä¹æå®ä¹çç±»çä¸ä¸ªä¸åªæä¸ä¸ªå®ä¾ã åä¾ä½ç¨åæ¯Springä¸­çé»è®¤ä½ç¨åã è¦å¨XMLä¸­å®ä¹åä¾beanï¼å¯ä»¥å¦ä»¥ä¸ç¤ºä¾æç¤ºå®ä¹beanï¼\n\n<bean id="accountService" class="com.something.DefaultAccountService"/>\n\n\x3c!-- the following is equivalent, though redundant (singleton scope is the default) --\x3e\n<bean id="accountService" class="com.something.DefaultAccountService" scope="singleton"/>\n\n\n\n# 1.5.2. ååä½ç¨å\n\næ¯æ¬¡è¯·æ±ç¹å®beanæ¶ï¼éåä¾çååä½ç¨åé½ä¼å¯¼è´åå»ºä¸ä¸ªæ°çbeanå®ä¾ã ä¹å°±æ¯è¯´ï¼è¯¥Beanè¢«æ³¨å¥å°å¦ä¸ä¸ªBeanä¸­ï¼æèæ¨å¯ä»¥éè¿å®¹å¨ä¸çgetBeanï¼ï¼æ¹æ³è°ç¨æ¥è¯·æ±å®ã éå¸¸ï¼åºå°ååä½ç¨åç¨äºæææç¶æçBeanï¼å°åä¾ä½ç¨åç¨äºæ ç¶æçBeanã\n\nä¸é¢çå¾è¡¨è¯´æäºSpringååä½ç¨å\n\n\n\n(æ°æ®è®¿é®å¯¹è±¡(DAO)éå¸¸ä¸è¢«éç½®ä¸ºååï¼å ä¸ºå¸åçDAOä¸ææä»»ä½ä¼è¯ç¶æãéç¨åä¾å¾çæ ¸å¿å¯¹æä»¬æ¥è¯´æ´å®¹æã)\n\nä¸é¢çç¤ºä¾å¨XMLä¸­å°beanå®ä¹ååï¼\n\n<bean id="accountService" class="com.something.DefaultAccountService" scope="prototype"/>\n\n\nä¸å¶ä»ä½ç¨åç¸åï¼Springä¸ç®¡çååBeançå®æ´çå½å¨æã å®¹å¨å®ä¾åï¼éç½®æç»è£ååå¯¹è±¡ï¼ç¶åå°å¶äº¤ç»å®¢æ·ç«¯ï¼èæ éä¿æå¯¹è¯¥ååå®ä¾çè¿ä¸æ­¥è®°å½ã å æ­¤ï¼å°½ç®¡æ è®ºå¨ä»ä¹ä½ç¨äºä¸é½ä¼å¨ææå¯¹è±¡ä¸è°ç¨åå§åçå½å¨æåè°æ¹æ³ï¼ä½å¯¹äºååï¼åä¸ä¼è°ç¨å·²éç½®çéæ¯çå½å¨æåè°ã å®¢æ·ç«¯ä»£ç å¿é¡»æ¸é¤ååä½ç¨ååçå¯¹è±¡ï¼å¹¶éæ¾ååBeanæ¥æçæè´µèµæºã ä¸ºäºä½¿Springå®¹å¨éæ¾ååä½ç¨ä¸çbeanææ¥æçèµæºï¼è¯·å°è¯ä½¿ç¨èªå®ä¹beanåç½®å¤çå¨ï¼è¯¥å¤çå¨åå«å¯¹éè¦æ¸ççbeançå¼ç¨ã\n\nå¨æäºæ¹é¢ï¼Springå®¹å¨å¨ååä½ç¨åBeanæ¹é¢çè§è²æ¯Java newè¿ç®ç¬¦çæ¿ä»£ã è¶è¿è¯¥ç¹ï¼ä¹å°±æ¯newä¹åï¼çææçå½å¨æç®¡çå¿é¡»ç±å®¢æ·ç«¯å¤çã ï¼æå³Springå®¹å¨ä¸­beanççå½å¨æçè¯¦ç»ä¿¡æ¯ï¼è¯·åéçå½å¨æåè°ãï¼\n\n\n# 1.5.3. åå«ååbeanå¼ç¨çåä¾beans\n\nå½æ¨ä½¿ç¨å¯¹ååbeanæä¾èµæ§çåä¾ä½ç¨åBeanæ¶ï¼è¯·æ³¨æï¼ä¾èµå³ç³»å¨å®ä¾åæ¶è§£æã å æ­¤ï¼å¦æå°ä¾èµçååbeanä¾èµé¡¹æ³¨å¥å°åä¾beanä¸­ï¼åå°å®ä¾åæ°çååbeanï¼ç¶åå°ä¾èµé¡¹æ³¨å¥å°åä¾beanä¸­ã ååå®ä¾æ¯æ¾ç»æä¾ç»åä¾beançå¯ä¸å®ä¾ã\n\nä½æ¯ï¼åè®¾æ¨å¸æåä¾ä½ç¨åçbeanå¨è¿è¡æ¶éå¤è·åååä½ç¨åçbeançæ°å®ä¾ã æ¨ä¸è½å°ååä½ç¨åçbeanä¾èµæ³¨å¥å°æ¨çåä¾beanä¸­ï¼å ä¸ºå½Springå®¹å¨å®ä¾ååä¾beanå¹¶è§£æå¹¶æ³¨å¥å¶ä¾èµé¡¹æ¶ï¼è¯¥æ³¨å¥ä»åçä¸æ¬¡ã å¦æå¨è¿è¡æ¶ä¸æ­¢ä¸æ¬¡éè¦ååbeançæ°å®ä¾ï¼è¯·åè§[æ¹æ³æ³¨å¥](###1.4.6. æ¹æ³æ³¨å¥)ã\n\n\n# 1.5.4. Request, Session, Application, and WebSocket ä½ç¨å\n\nåªæå½æ¨ä½¿ç¨webæç¥çSpring ApplicationContextå®ç°(å¦XmlWebApplicationContext)æ¶ï¼request,session, application, åwebsocketä½ç¨åæå¯ç¨ãå¦æå¨å¸¸è§çSpring IoCå®¹å¨(å¦ClassPathXmlApplicationContext)ä¸­ä½¿ç¨è¿äºä½ç¨åï¼åä¼æåºä¸ä¸ªæªç¥beanä½ç¨åçIllegalStateExceptionã\n\n# åå§Webéç½®\n\nä¸ºäºæ¯ærequest,session,application,websocketè¿äºåºäºwebçbeanä½ç¨åï¼éè¦å¨å®ä¹beanååä¸äºåå§åéç½®ï¼singleton,prototypeæ åä½ç¨åä¸æ¯å¿é¡»çï¼ã\n\nå¦åå®æè¿äºåå§åæ­¥éª¤åå³äºä½ çServletç¯å¢ã\n\nå¦ææ¨å¨ Spring Web MVC ä¸­è®¿é®ä»¥ä¸ä½ç¨å beanï¼å®éä¸æ¯å¨ Spring DispatcherServlet å¤ççè¯·æ±ä¸­ï¼åä¸éè¦ç¹æ®è®¾ç½®ãDispatcherServlet å·²ç»æ´é²äºææç¸å³çç¶æã\n\nå¦æä½ ç¨çæ¯Servlet2.5çwebå®¹å¨ï¼å¨SpringçDispatcherServletå¤é¨å¤çè¯·æ±ï¼ä¾å¦JSFæèStrutsï¼ï¼ä½ éè¦æ³¨åorg.springframework.web.context.request.RequestContextListener ï¼ServletRequestListener.Servlet 3.0+ï¼,ä¹å¯ä»¥ç¨WebApplicationInitializeræ¥å£ä»¥ç¼ç¨æ¹å¼å®ç°ï¼æèå¯¹äºæ´èçå®¹å¨æ¥è¯´ï¼æ·»å ä»¥ä¸å£°æå¨web.xmlæä»¶ä¸­\n\n<web-app>\n    ...\n    <listener>\n        <listener-class>\n            org.springframework.web.context.request.RequestContextListener\n        </listener-class>\n    </listener>\n    ...\n</web-app>\n\n\næèå¯ä»¥ç¨SpringçRequestContextFilterï¼è¿ä¸ªè¿æ»¤å¨æ å°åå³äºwebåºç¨çéç½®ï¼æä»¥å¿é¡»åéå¾æ´æ¹å®ï¼ä»¥ä¸æ¯ä¸ä¸ªwebåºç¨çé¨åè¿æ»¤å¨éç½®ï¼\n\n<web-app>\n    ...\n    <filter>\n        <filter-name>requestContextFilter</filter-name>\n        <filter-class>org.springframework.web.filter.RequestContextFilter</filter-class>\n    </filter>\n    <filter-mapping>\n        <filter-name>requestContextFilter</filter-name>\n        <url-pattern>/*</url-pattern>\n    </filter-mapping>\n    ...\n</web-app>\n\n\nDispatcherServletãRequestContextListener å RequestContextFilter é½åå®å¨ç¸åçäºæï¼å³å° HTTP è¯·æ±å¯¹è±¡ç»å®å°ä¸ºè¯¥è¯·æ±æä¾æå¡ççº¿ç¨ã è¿ä½¿å¾requeståsessionä½ç¨åç bean å¨è°ç¨é¾çæ´ä¸æ¸¸å¯ç¨ã\n\n# Reqeustä½ç¨å\n\nä»¥ä¸é¢çxmlå½¢å¼çbeanå®ä¹ä¸¾ä¾ï¼\n\n<bean id="loginAction" class="com.something.LoginAction" scope="request"/>\n\n\nSpring å®¹å¨éè¿ä¸ºæ¯ä¸ª HTTP è¯·æ±ä½¿ç¨ loginAction bean å®ä¹æ¥åå»º LoginAction bean çæ°å®ä¾ã ä¹å°±æ¯è¯´ï¼ loginAction bean çä½ç¨åæ¯ HTTP è¯·æ±çº§å«çã æ¨å¯ä»¥æ ¹æ®éè¦æ´æ¹æåå»ºå®ä¾çåé¨ç¶æï¼å ä¸ºä»åä¸loginAction bean å®ä¹åå»ºçå¶ä»å®ä¾ä¸ä¼çå°è¿äºç¶ææ´æ¹ã å®ä»¬æ¯éå¯¹åä¸ªè¯·æ±çã å½è¯·æ±å®æå¤çæ¶ï¼è¯¥è¯·æ±èå´åç bean å°è¢«åºå¼ã\n\nå½ä½¿ç¨æ³¨è§£é©±å¨çç»ä»¶æèJavaéç½®æ¶ï¼@ReqeustScopeæ³¨è§£å¯ç¨äºæå®ä¸ä¸ªç»ä»¶ä¸ºrequestä½ç¨åï¼å¦ä¸ç¤ºä¾ï¼\n\n@RequestScope\n@Component\npublic class LoginAction {\n    // ...\n}\n\n\n# Sessionä½ç¨å\n\nä»¥ä¸é¢çxmlå½¢å¼çbeanå®ä¹ä¸¾ä¾ï¼\n\n<bean id="userPreferences" class="com.something.UserPreferences" scope="session"/>\n\n\nSpring å®¹å¨éè¿å¨åä¸ª HTTP ä¼è¯ççå½å¨æä¸­ä½¿ç¨ userPreferences bean å®ä¹åå»º UserPreferences bean çæ°å®ä¾ã æ¢å¥è¯è¯´ï¼userPreferences bean ä½ç¨åæ¯ HTTP ä¼è¯çº§å«ã ä¸Reqeustä½ç¨åç bean ä¸æ ·ï¼æ¨å¯ä»¥æ ¹æ®éè¦æ´æ¹æåå»ºå®ä¾çåé¨ç¶æï¼å¶ä»HTTP Sessionä¹å¨ä½¿ç¨ä»ç¸å userPreferences bean å®ä¹åå»ºçå®ä¾ä¸ä¼çå°è¿äºç¶ææ´æ¹ ï¼å ä¸ºå®ä»¬ç¹å®äºåä¸ª HTTP ä¼è¯ã å½ HTTP ä¼è¯æç»è¢«ä¸¢å¼æ¶ï¼ä½ç¨åä¸ºè¯¥ç¹å® HTTP ä¼è¯ç bean ä¹å°è¢«ä¸¢å¼ã\n\nå½ä½¿ç¨æ³¨è§£é©±å¨çç»ä»¶æèJavaéç½®æ¶ï¼@SessionScopeæ³¨è§£å¯ç¨äºæå®ä¸ä¸ªç»ä»¶ä¸ºsessionä½ç¨åï¼å¦ä¸ç¤ºä¾ï¼\n\n@SessionScope\n@Component\npublic class UserPreferences {\n    // ...\n}\n\n\n# Applicationä½ç¨å\n\nä»¥ä¸é¢çxmlå½¢å¼çbeanå®ä¹ä¸¾ä¾ï¼\n\n<bean id="appPreferences" class="com.something.AppPreferences" scope="application"/>\n\n\nSpring å®¹å¨éè¿ä¸ºæ´ä¸ª Web åºç¨ç¨åºä½¿ç¨ä»¥ä¸å®ä¹ä¸æ¬¡æ¥åå»º AppPreferences bean çæ°å®ä¾ã ä¹å°±æ¯è¯´ï¼appPreferences bean çèå´å¨ ServletContext çº§å«ï¼å¹¶å­å¨ä¸ºå¸¸è§ ServletContext å±æ§ã è¿æç¹ç±»ä¼¼äº Spring åä¾ beanï¼ä½å¨ä¸¤ä¸ªéè¦æ¹é¢ææä¸åï¼å®æ¯æ¯ä¸ª ServletContext çåä¾ï¼èä¸æ¯æ¯ä¸ª Spring \'ApplicationContext\'ï¼å¨ä»»ä½ç»å®ç Web åºç¨ç¨åºä¸­å¯è½æå¤ä¸ªï¼ï¼å¹¶ä¸å®å®éä¸æ¯å¬å¼çï¼å æ­¤ ä½ä¸º ServletContext å±æ§å¯è§ã\n\nå½ä½¿ç¨æ³¨è§£é©±å¨çç»ä»¶æèJavaéç½®æ¶ï¼@ApplicationScopeæ³¨è§£å¯ç¨äºæå®ä¸ä¸ªç»ä»¶ä¸ºapplicationä½ç¨åï¼å¦ä¸ç¤ºä¾ï¼\n\n@ApplicationScope\n@Component\npublic class AppPreferences {\n    // ...\n}\n\n\n# ä¾èµä¸­çä½ç¨åbean\n\nSpring IoC å®¹å¨ä¸ä»ç®¡çå¯¹è±¡ï¼beanï¼çå®ä¾åï¼è¿ç®¡çåä½èï¼æä¾èµé¡¹ï¼çè¿æ¥ã å¦ææ¨æ³å°ï¼ä¾å¦ï¼ä¸ä¸ª HTTP è¯·æ±èå´ç bean æ³¨å¥å°å¦ä¸ä¸ªçå½å¨ææ´é¿ç bean ä¸­ï¼æ¨å¯ä»¥éæ©æ³¨å¥ä¸ä¸ª AOP ä»£çæ¥ä»£æ¿è¯¥ä½ç¨åç beanã ä¹å°±æ¯è¯´ï¼æ¨éè¦æ³¨å¥ä¸ä¸ªä»£çå¯¹è±¡ï¼è¯¥å¯¹è±¡å¬å¼ä¸ä½ç¨åå¯¹è±¡ç¸åçå¬å±æ¥å£ï¼ä½ä¹å¯ä»¥ä»ç¸å³ä½ç¨åï¼ä¾å¦ HTTP è¯·æ±ï¼ä¸­æ£ç´¢çå®ç®æ å¯¹è±¡ï¼å¹¶å°æ¹æ³è°ç¨å§æç»çå®å¯¹è±¡ã\n\n> æ¨è¿å¯ä»¥å¨ä½ç¨åä¸ºåä¾ç bean ä¹é´ä½¿ç¨<aop:scoped-proxy/>ï¼ç¶åå¼ç¨éè¿å¯åºååçä¸­é´ä»£çï¼å æ­¤è½å¤å¨ååºååæ¶éæ°è·åç®æ åä¾ beanã\n> \n> å½éå¯¹ååç bean å£°æ<aop:scoped-proxy/> æ¶ï¼å±äº«ä»£çä¸çæ¯ä¸ªæ¹æ³è°ç¨é½ä¼å¯¼è´åå»ºä¸ä¸ªæ°çç®æ å®ä¾ï¼ç¶åå°è°ç¨è½¬åå°è¯¥å®ä¾ã\n> \n> æ­¤å¤ï¼ååä»£çå¹¶ä¸æ¯ä»¥çå½å¨æå®å¨çæ¹å¼ä»è¾ç­ä½ç¨åè®¿é® bean çå¯ä¸æ¹æ³ã æ¨è¿å¯ä»¥å°æ¨çæ³¨å¥ç¹ï¼å³æé å½æ°æ setter åæ°æèªå¨è£éå­æ®µï¼å£°æä¸º ObjectFactory<MyTargetBean>ï¼ä»èåè®¸æ¯æ¬¡éè¦æ¶è°ç¨ getObject() æ¥æéæ£ç´¢å½åå®ä¾ â æ éä¿çå®ä¾æåç¬å­å¨ã\n> \n> ä½ä¸ºæ©å±åä½ï¼æ¨å¯ä»¥å£°æ ObjectProvider<MyTargetBean>ï¼å®æä¾äºå ä¸ªé¢å¤çè®¿é®åä½ï¼åæ¬ getIfAvailable å getIfUniqueã\n> \n> æ­¤ JSR-330 åä½ç§°ä¸º Providerï¼å¹¶ä¸ Provider<MyTargetBean> å£°æåæ¯æ¬¡æ£ç´¢å°è¯çç¸åº get() è°ç¨ä¸èµ·ä½¿ç¨ã æå³ JSR-330 æ´ä½çæ´å¤è¯¦ç»ä¿¡æ¯ï¼è¯·åè§æ­¤å¤ã\n\nä¸ä¾ä¸­çéç½®åªæä¸è¡ï¼ä½äºè§£å¶èåçâwhyâä»¥åâhowâå¾éè¦ï¼\n\n<?xml version="1.0" encoding="UTF-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n    xmlns:aop="http://www.springframework.org/schema/aop"\n    xsi:schemaLocation="http://www.springframework.org/schema/beans\n        https://www.springframework.org/schema/beans/spring-beans.xsd\n        http://www.springframework.org/schema/aop\n        https://www.springframework.org/schema/aop/spring-aop.xsd">\n\n    \x3c!-- an HTTP Session-scoped bean exposed as a proxy --\x3e\n    <bean id="userPreferences" class="com.something.UserPreferences" scope="session">\n        \x3c!-- instructs the container to proxy the surrounding bean --\x3e\n        <aop:scoped-proxy/> \n    </bean>\n\n    \x3c!-- a singleton-scoped bean injected with a proxy to the above bean --\x3e\n    <bean id="userService" class="com.something.SimpleUserService">\n        \x3c!-- a reference to the proxied userPreferences bean --\x3e\n        <property name="userPreferences" ref="userPreferences"/>\n    </bean>\n</beans>\n\n\nè¦åå»ºè¿æ ·çä»£çï¼è¦å° <aop:scoped-proxy/> åç´ æå¥å°ä½ç¨å bean å®ä¹ä¸­ï¼è¯·åééæ©è¦åå»ºçä»£çç±»åååºäºXMLéç½®æ¨¡å¼ï¼ã ä¸ºä»ä¹å¨è¯·æ±ãä¼è¯åèªå®ä¹èå´çº§å«èå´åç bean å®ä¹éè¦<aop:scoped-proxy/> åç´ ï¼ èèä»¥ä¸åä¾ bean å®ä¹ï¼å¹¶å°å¶ä¸æ¨éè¦ä¸ºä¸è¿°èå´å®ä¹çåå®¹è¿è¡å¯¹æ¯ï¼è¯·æ³¨æï¼ä»¥ä¸ userPreferences bean å®ä¹ä¸å®æ´ï¼ï¼\n\n<bean id="userPreferences" class="com.something.UserPreferences" scope="session"/>\n\n<bean id="userManager" class="com.something.UserManager">\n    <property name="userPreferences" ref="userPreferences"/>\n</bean>\n\n\nå¨åé¢çç¤ºä¾ä¸­ï¼åä¾ bean (userManager) è¢«æ³¨å¥äºå¯¹ HTTP ä¼è¯èå´ bean (userPreferences) çå¼ç¨ã è¿éçéç¹æ¯ userManager bean æ¯ä¸ä¸ªåä¾ï¼å®å¨æ¯ä¸ªå®¹å¨ä¸­è¢«å®ä¾åä¸æ¬¡ï¼å¹¶ä¸å®çä¾èµé¡¹ï¼å¨è¿ç§æåµä¸åªæä¸ä¸ªï¼userPreferences beanï¼ä¹åªæ³¨å¥ä¸æ¬¡ã è¿æå³ç userManager bean åªå¯¹å®å¨ç¸åç userPreferences å¯¹è±¡ï¼å³æåæ³¨å¥å®çé£ä¸ªå¯¹è±¡ï¼è¿è¡æä½ã\n\nè¿ä¸æ¯æ¨å°çå½å¨æè¾ç­çä½ç¨å bean æ³¨å¥å°çå½å¨æè¾é¿çä½ç¨å beanï¼ä¾å¦ï¼å° HTTP ä¼è¯ä½ç¨åç bean ä½ä¸ºä¾èµé¡¹æ³¨å¥å°åä¾ bean ä¸­ï¼æ¶æ³è¦çè¡ä¸ºã ç¸åï¼æ¨éè¦ä¸ä¸ª userManager å¯¹è±¡ï¼å¹¶ä¸ï¼å¯¹äº HTTP ä¼è¯ççå½å¨æï¼æ¨éè¦ä¸ä¸ªç¹å®äº HTTP ä¼è¯ç userPreferences å¯¹è±¡ã å æ­¤ï¼å®¹å¨åå»ºä¸ä¸ªå¯¹è±¡ï¼è¯¥å¯¹è±¡å¬å¼ä¸ UserPreferences ç±»å®å¨ç¸åçå¬å±æ¥å£ï¼çæ³æåµä¸æ¯ä¸ä¸ª UserPreferences å®ä¾çå¯¹è±¡ï¼ï¼å®å¯ä»¥ä»ä½ç¨åæºå¶ï¼HTTP è¯·æ±ãä¼è¯ç­ï¼ä¸­è·åçæ­£ç UserPreferences å¯¹è±¡ ãå®¹å¨å°è¿ä¸ªä»£çå¯¹è±¡æ³¨å¥å° userManager bean ä¸­ï¼å®ä¸ç¥éè¿ä¸ª UserPreferences å¼ç¨æ¯ä¸ä¸ªä»£çã å¨è¿ä¸ªä¾å­ä¸­ï¼å½ä¸ä¸ª UserManager å®ä¾å¨ä¾èµæ³¨å¥ç UserPreferences å¯¹è±¡ä¸è°ç¨ä¸ä¸ªæ¹æ³æ¶ï¼å®å®éä¸æ¯å¨è°ç¨ä»£çä¸çä¸ä¸ªæ¹æ³ã ç¶åä»£çä»ï¼å¨è¿ç§æåµä¸ï¼HTTP ä¼è¯ä¸­è·åçå®ç UserPreferences å¯¹è±¡ï¼å¹¶å°æ¹æ³è°ç¨å§æç»æ£ç´¢å°ççå® UserPreferences å¯¹è±¡ã\n\nå æ­¤ï¼å¨å°requeståsessionä½ç¨åç bean æ³¨å¥å¯¹è±¡æ¶ï¼æ¨éè¦ä»¥ä¸ï¼æ­£ç¡®ä¸å®æ´çï¼éç½®ï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\n<bean id="userPreferences" class="com.something.UserPreferences" scope="session">\n    <aop:scoped-proxy/>\n</bean>\n\n<bean id="userManager" class="com.something.UserManager">\n    <property name="userPreferences" ref="userPreferences"/>\n</bean>\n\n\n# éæ©è¦åå»ºçä»£çå¯¹è±¡ç±»å\n\né»è®¤æåµä¸ï¼å½ Spring å®¹å¨ä¸ºä½¿ç¨ <aop:scoped-proxy/> åç´ æ è®°ç bean åå»ºä»£çæ¶ï¼å°åå»ºåºäº CGLIB çç±»ä»£çã\n\n> CGLIB ä»£çåªæ¦æªå¬å±æ¹æ³è°ç¨ï¼ ä¸è¦å¨è¿æ ·çä»£çä¸è°ç¨éå¬å±æ¹æ³ã å®ä»¬ä¸ä¼å§æç»å®éä½ç¨åçç®æ å¯¹è±¡ã\n\næèï¼æ¨å¯ä»¥éç½® Spring å®¹å¨ï¼éè¿ä¸º <aop:scoped-proxy/> åç´ ç proxy-target-class å±æ§çå¼æå® false æ¥ä¸ºæ­¤ç±»ä½ç¨å bean åå»ºæ åçåºäº JDK æ¥å£çä»£çã ä½¿ç¨åºäº JDK æ¥å£çä»£çæå³çæ¨ä¸éè¦åºç¨ç¨åºç±»è·¯å¾ä¸­çå¶ä»åºæ¥å®ç°æ­¤ç±»ä»£çã ä½æ¯ï¼è¿ä¹æå³çä½ç¨å bean çç±»å¿é¡»è³å°å®ç°ä¸ä¸ªæ¥å£ï¼å¹¶ä¸æ³¨å¥ä½ç¨å bean çææä¾èµé½å¿é¡»éè¿å¶æ¥å£ä¹ä¸å¼ç¨ beanã ä»¥ä¸ç¤ºä¾æ¾ç¤ºäºåºäºæ¥å£çä»£çï¼\n\n\x3c!-- DefaultUserPreferences implements the UserPreferences interface --\x3e\n<bean id="userPreferences" class="com.stuff.DefaultUserPreferences" scope="session">\n    <aop:scoped-proxy proxy-target-class="false"/>\n</bean>\n\n<bean id="userManager" class="com.stuff.UserManager">\n    <property name="userPreferences" ref="userPreferences"/>\n</bean>\n\n\næå³éæ©åºäºç±»æåºäºæ¥å£çä»£ççæ´å¤è¯¦ç»ä¿¡æ¯ï¼è¯·åéä»£çæºå¶ã\n\n\n# 1.5.5. èªå®ä¹ä½ç¨å\n\nbean ä½ç¨åæºå¶æ¯å¯æ©å±çã æ¨å¯ä»¥å®ä¹èªå·±çä½ç¨åï¼çè³éæ°å®ä¹ç°æä½ç¨åï¼å°½ç®¡åèè¢«è®¤ä¸ºæ¯ä¸å¥½çåæ³ï¼å¹¶ä¸æ¨ä¸è½è¦çåç½®çåä¾åååä½ç¨åã\n\n# åå»ºèªå®ä¹ä½ç¨å\n\nè¦å°èªå®ä¹ä½ç¨åéæå° Spring å®¹å¨ä¸­ï¼æ¨éè¦å®ç° org.springframework.beans.factory.config.Scopeæ¥å£ï¼è¿å¨æ¬èä¸­è¿è¡äºæè¿°ã æå³å¦ä½å®ç°æ¨èªå·±çä½ç¨åï¼è¯·åé Spring Framework æ¬èº«æä¾ç Scope å®ç°å Scope javadocï¼å®æ´è¯¦ç»å°è§£éäºæ¨éè¦å®ç°çæ¹æ³ã\n\nScope æ¥å£æåç§æ¹æ³å¯ä»¥ä»ä½ç¨åä¸­è·åå¯¹è±¡ï¼ä»ä½ç¨åä¸­ç§»é¤å®ä»¬ï¼ä»¥åè®©å®ä»¬è¢«éæ¯ã\n\nä¾å¦ï¼ä¼è¯ä½ç¨åå®ç°è¿åä¼è¯ä½ç¨å beanï¼å¦æå®ä¸å­å¨ï¼åè¯¥æ¹æ³å¨å°å®ç»å®å°ä¼è¯ä»¥ä¾å°æ¥å¼ç¨åè¿åè¯¥ bean çä¸ä¸ªæ°å®ä¾ï¼ã ä»¥ä¸æ¹æ³ä»ä½ç¨åè¿åå¯¹è±¡ï¼\n\nObject get(String name, ObjectFactory<?> objectFactory)\n\n\nä¾å¦ï¼ä¼è¯ä½ç¨åå®ç°ä»ä¼è¯ä¸­å é¤ä¼è¯ä½ç¨åç beanã åºè¯¥è¿åä¸ä¸ªå¯¹è±¡ï¼ä½å¦ææ²¡ææ¾å°å·ææå®åç§°çå¯¹è±¡ï¼æ¨å¯ä»¥è¿å nullã ä»¥ä¸æ¹æ³ä»ä½ç¨åä¸­å é¤å¯¹è±¡ï¼\n\nObject remove(String name)\n\n\nä»¥ä¸æ¹æ³æ³¨åäºä¸ä¸ªåè°ï¼å½å®è¢«éæ¯æä½ç¨åä¸­çæå®å¯¹è±¡è¢«éæ¯æ¶ï¼è¯¥ä½ç¨ååºè¯¥è°ç¨è¯¥åè°ï¼\n\nvoid registerDestructionCallback(String name, Runnable destructionCallback)\n\n\næå³éæ¯åè°çæ´å¤ä¿¡æ¯ï¼è¯·åé javadoc æ Spring scopeå®ç°ã\n\nä»¥ä¸æ¹æ³è·åä½ç¨åçä¼è¯æ è¯ç¬¦ï¼\n\nString getConversationId()\n\n\nè¿ä¸ªæ è¯ç¬¦å¯¹äºæ¯ä¸ªä½ç¨åé½æ¯ä¸åçã å¯¹äºä¼è¯ä½ç¨åçå®ç°ï¼æ­¤æ è¯ç¬¦å¯ä»¥æ¯sessionæ è¯ç¬¦ã\n\n# ä½¿ç¨èªå®ä¹ä½ç¨å\n\nå¨æ¨ç¼åå¹¶æµè¯ä¸ä¸ªæå¤ä¸ªèªå®ä¹ Scope å®ç°ä¹åï¼æ¨éè¦è®© Spring å®¹å¨æç¥ä½ çæ°ä½ç¨åã ä»¥ä¸æ¹æ³æ¯å Spring å®¹å¨æ³¨åæ° Scope çä¸­å¿æ¹æ³ï¼\n\nvoid registerScope(String scopeName, Scope scope);\n\n\næ­¤æ¹æ³å¨ ````ConfigurableBeanFactoryæ¥å£ä¸å£°æï¼è¯¥æ¥å£å¯éè¿ Spring éå¸¦çå¤§å¤æ°å·ä½ApplicationContext``` å®ç°ç BeanFactory å±æ§è·å¾ã\n\nregisterScope(..) æ¹æ³çç¬¬ä¸ä¸ªåæ°æ¯ä¸ä½ç¨åå³èçå¯ä¸åç§°ã Spring å®¹å¨æ¬èº«ä¸­æ­¤ç±»åç§°çç¤ºä¾æ¯singletonåprototypeã registerScope(..) æ¹æ³çç¬¬äºä¸ªåæ°æ¯æ¨å¸ææ³¨ååä½¿ç¨çèªå®ä¹ Scope å®ç°çå®éå®ä¾ã\n\nâåè®¾å·²ç¼åäºèªå®ä¹å®ç°ï¼ç¶åæç§ä¸ä¸ä¸ªç¤ºä¾è¿è¡æ³¨åãâ\n\n> ä¸ä¸ä¸ªç¤ºä¾ä½¿ç¨ SimpleThreadScopeï¼å®åå«å¨ Spring ä¸­ï¼ä½é»è®¤æåµä¸æªæ³¨åãå¯¹äºæ¨èªå·±çèªå®ä¹ Scope å®ç°ï¼ä½¿ç¨æ¹æ³æ¯ç¸åçã\n\nScope threadScope = new SimpleThreadScope();\nbeanFactory.registerScope("thread", threadScope);\n\n\nç¶åï¼æ¨å¯ä»¥åå»ºç¬¦åèªå®ä¹ Scope è§åç bean å®ä¹ï¼å¦ä¸æç¤ºï¼\n\n<bean id="..." class="..." scope="thread">\n\n\nä½¿ç¨èªå®ä¹ Scope å®ç°ï¼æ¨ä¸ä»éäºä»¥ç¼ç¨æ¹å¼æ³¨åãæ¨è¿å¯ä»¥ä½¿ç¨ CustomScopeConfigurer ç±»ä»¥å£°ææ¹å¼è¿è¡ Scope æ³¨åï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\n<?xml version="1.0" encoding="UTF-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n    xmlns:aop="http://www.springframework.org/schema/aop"\n    xsi:schemaLocation="http://www.springframework.org/schema/beans\n        https://www.springframework.org/schema/beans/spring-beans.xsd\n        http://www.springframework.org/schema/aop\n        https://www.springframework.org/schema/aop/spring-aop.xsd">\n\n    <bean class="org.springframework.beans.factory.config.CustomScopeConfigurer">\n        <property name="scopes">\n            <map>\n                <entry key="thread">\n                    <bean class="org.springframework.context.support.SimpleThreadScope"/>\n                </entry>\n            </map>\n        </property>\n    </bean>\n\n    <bean id="thing2" class="x.y.Thing2" scope="thread">\n        <property name="name" value="Rick"/>\n        <aop:scoped-proxy/>\n    </bean>\n\n    <bean id="thing1" class="x.y.Thing1">\n        <property name="thing2" ref="thing2"/>\n    </bean>\n\n</beans>\n\n\n> å½æ¨å° <aop:scoped-proxy/> æ¾å¨ FactoryBean å®ç°ä¸­æ¶ï¼ä½ç¨åçæ¯å·¥å bean æ¬èº«ï¼èä¸æ¯ä» getObject() è¿åçå¯¹è±¡ã\n\n\n# 1.6. èªå®ä¹beanæ§è´¨\n\nSpring Frameworkæä¾äºè®¸å¤æ¥å£ï¼å¯ä»¥ç¨äºèªå®ä¹Beançæ§è´¨ãæ¬èå°å¶åç»å¦ä¸ï¼\n\n * Lifecycle Callbacks\n * ApplicationContextAware & BeanNameAware\n * å¶ä»Awareæ¥å£\n\n\n# 1.6.1. Lifecycle åè°\n\nè¦ä¸å®¹å¨ç®¡ççbeançå½å¨æäº¤äºï¼ä½ å¯ä»¥å®ç°InitializingBeanåDisposableBeanæ¥å£ï¼å®¹å¨ä¼å¨åèä¸è°ç¨afterPropertiesSet()ï¼å¨åèè°ç¨destroy()æ¹æ³ï¼è®©beanå¨åå§ååéæ¯çæ¶åæ§è¡æäºæä½ã\n\n> ð¡ JSR-250 @PostConstructå@predestroyæ³¨è§£éå¸¸è¢«è®¤ä¸ºæ¯å¨ç°ä»£Springåºç¨ä¸­æ¥æ¶çå½å¨æåè°çæä½³å®è·µãä½¿ç¨è¿äºæ³¨è§£æå³çæ¨çbeanä¸è¦åå°Springç¹å®çæ¥å£ã\n> \n> å¦ææ¨ä¸æ³ä½¿ç¨JSR-250æ³¨è§£ï¼åéè¦è§£è¦ï¼è¯·èèä½¿ç¨init-methodådestroy-methodç beanå®ä¹åæ°æ®ã\n\nå¨åé¨ï¼Springæ¡æ¶ä½¿ç¨BeanPostProcessorå®ç°æ¥å¤çå®å¯ä»¥æ¾å°çä»»ä½åè°æ¥å£å¹¶è°ç¨éå½çæ¹æ³ãå¦ææ¨éè¦èªå®ä¹åè½æå¶ä»çå½å¨æè¡ä¸º,Springåä¸ä¼é»è®¤æä¾ï¼æ¨å¯ä»¥èªå·±å®ç°BeanPostProcessorãæå³æ´å¤ä¿¡æ¯ï¼è¯·åéå®¹å¨æ©å±ç¹ã\n\né¤äºåå§ååéæ¯åè°ä¹å¤ï¼Springæç®¡å¯¹è±¡è¿å¯ä»¥å®ç°Lifecycleæ¥å£ï¼ä»¥ä¾¿è¿äºå¯¹è±¡å¯ä»¥åä¸å°å®¹å¨å¯å¨åå³é­è¿ç¨ï¼ä½ä¸ºå®¹å¨èªå·±ççå½å¨æçé©±å¨ã\n\n# Initializationåå§ååè°\n\norg.springframework.Beans.Factory.InitializationBeanæ¥å£åè®¸beanå¨å®¹å¨ä¸­è®¾ç½®å®beanä¸çææå¿éå±æ§åæ§è¡åå§åå·¥ä½ãInitializingBeanæ¥å£å®ä¹äºä¸ä¸ªæ¹æ³ï¼\n\nvoid afterPropertiesSet() throws Exception;\n\n\n**æä»¬å»ºè®®æ¨ä¸è¦ä½¿ç¨InitializingBeanæ¥å£ï¼å ä¸ºå®ä¸å¿è¦å°å°ä»£ç è¦åå°Springãæèï¼æä»¬å»ºè®®ä½¿ç¨@PostConstructæ³¨è§£ææå®POJOåå§åæ¹æ³ãå¨åºäºXMLçéç½®åæ°æ®çæåµä¸ï¼æ¨å¯ä»¥ä½¿ç¨init-methodå±æ§æå®å·ævoid No-Argumentç­¾åçæ¹æ³çåç§°ãä½¿ç¨Javaéç½®ï¼æ¨å¯ä»¥ä½¿ç¨@Beançinitmethodå±æ§ã**è¯·åéæ¥æ¶çå½å¨æåè°ãèèä»¥ä¸ç¤ºä¾ï¼\n\n<bean id="exampleInitBean" class="examples.ExampleBean" init-method="init"/>\n\n\npublic class ExampleBean {\n\n    public void init() {\n        // do some initialization work\n    }\n}\n\n\næ­¤ç¤ºä¾ä¸ä»¥ä¸ç¤ºä¾å ä¹å®å¨ç¸å:\n\n<bean id="exampleInitBean" class="examples.AnotherExampleBean"/>\n\n\npublic class AnotherExampleBean implements InitializingBean {\n\n    @Override\n    public void afterPropertiesSet() {\n        // do some initialization work\n    }\n}\n\n\nä½æ¯ï¼ç¬¬ä¸ä¸ªç¤ºä¾ä»£ç æ²¡æä¸Springè¦åã\n\n# Destructionéæ¯åè°\n\nå®ç°org.springframework.beans.factory.disposablebeanæ¥å£åè®¸beanå½åå«å®çå®¹å¨è¢«éæ¯æ¶ä¼æ¶å°åè°ãDisposableBeanæ¥å£å®ä¹äºä¸ä¸ªæ¹æ³ï¼\n\nvoid destroy() throws Exception;\n\n\n**æä»¬å»ºè®®æ¨ä¸è¦ä½¿ç¨DisposableBeanæ¥å£ï¼å ä¸ºå®ä¸å¿è¦å°å°ä»£ç è¦åå°Springãæèï¼æä»¬å»ºè®®ä½¿ç¨@PreDestroyæ³¨è§£ææå®beanå®ä¹æ¯æçæ³åæ¹æ³ãå¨åºäºXMLçéç½®åæ°æ®çæåµä¸ï¼æ¨å¯ä»¥å¨ä¸­ä½¿ç¨destroy-methodå±æ§ãä½¿ç¨Javaéç½®ï¼æ¨å¯ä»¥ä½¿ç¨@BeançdestroyMethoadå±æ§ã**è¯·åéæ¥æ¶çå½å¨æåè°ãèèä»¥ä¸ç¤ºä¾ï¼\n\n<bean id="exampleInitBean" class="examples.ExampleBean" destroy-method="cleanup"/>\n\n\npublic class ExampleBean {\n\n    public void cleanup() {\n        // do some destruction work (like releasing pooled connections)\n    }\n}\n\n\næ­¤ç¤ºä¾ä¸ä»¥ä¸ç¤ºä¾å ä¹å®å¨ç¸å:\n\n<bean id="exampleInitBean" class="examples.AnotherExampleBean"/>\n\n\npublic class AnotherExampleBean implements DisposableBean {\n\n    @Override\n    public void destroy() {\n        // do some destruction work (like releasing pooled connections)\n    }\n}\n\n\nä½æ¯ï¼ç¬¬ä¸ä¸ªç¤ºä¾ä»£ç æ²¡æä¸Springè¦åã\n\n> ð¡ æ¨å¯ä»¥åé<bean>åç´ çdestroy-methodå±æ§ä¸ä¸ªç¹æ®ï¼æ¨æ­ï¼å¼ï¼è¯¥å¼æç¤ºSpringå¨ç¹å®beanç±»ä¸èªå¨æ£æµpulic closeæèshutdownãï¼ä»»ä½å®ç°java.lang.autoclosableæjava.io.closableçç±»é½ä¼å¹éãï¼æ¨è¿å¯ä»¥å¨<bean>åç´ çdefault-destroy-methodå±æ§ä¸è®¾ç½®æ­¤ç¹æ®ï¼æ¨æ­çï¼å¼ä»¥åºç¨æ­¤è¡ä¸ºå°ä¸ç»beanä¸ï¼è¯·åéé»è®¤åå§ååéæ¯æ¹æ³ï¼ãè¯·æ³¨æï¼è¿æ¯Javaéç½®çé»è®¤è¡ä¸ºã\n\n# é»è®¤åå§ååéæ¯æ¹æ³\n\nå½ä¸éè¿å®ç°Springç¹å®çInitializingBeanåDisposableBeanå®ä¹çæ¥å£æ¥å®æåå§ååéæ¯æ¹æ³åè°æ¶ï¼éå¸¸ä¼ä½¿ç¨åinit()ï¼initialize()ï¼dispose()ç­åç§°ç¼åæ¹æ³ãçæ³æåµä¸ï¼è¿äºçå½å¨æåè°æ¹æ³çåç§°å¨é¡¹ç®ä¸­åºè¯¥æ ååï¼ä»¥ä¾¿ææå¼åäººåä½¿ç¨ç¸åçæ¹æ³åç§°å¹¶ç¡®ä¿ä¸è´æ§ã\n\næ¨å¯ä»¥éç½®Springå®¹å¨å¨æ¯ä¸ªbeanä¸æ¥æ¾æå®å½åçåå§ååéæ¯åè°æ¹æ³ãè¿æå³çæ¨ä½ä¸ºåºç¨ç¨åºå¼åäººåï¼ä¸ç¨ä¸ºæ¯ä¸ªbeanéç½®init-methoad="init"çå±æ§ï¼å°±å¯ä»¥ç¼ååä¸ºinit()çåå§ååè°æ¹æ³ãSpring IoCå®¹å¨å¨åå»ºbeanæ¶è°ç¨è¯¥æ¹æ³ï¼å¹¶æ ¹æ®ååæè¿°çæ åçå½å¨æåè°çº¦å®ï¼ãæ­¤åè½è¿ç¡®ä¿äºåå§ååéæ¯æ¹æ³åè°çå½åä¸è´çº¦å®ã\n\nåè®¾æ¨çåå§ååè°æ¹æ³åä¸ºinit()ï¼æ¨çéæ¯åè°æ¹æ³åä¸ºdestroy()ãç¶åï¼æ¨çç±»ç±»ä¼¼ä»¥ä¸ç¤ºä¾ï¼\n\npublic class DefaultBlogService implements BlogService {\n\n    private BlogDao blogDao;\n\n    public void setBlogDao(BlogDao blogDao) {\n        this.blogDao = blogDao;\n    }\n\n    // this is (unsurprisingly) the initialization callback method\n    public void init() {\n        if (this.blogDao == null) {\n            throw new IllegalStateException("The [blogDao] property must be set.");\n        }\n    }\n}\n\n\nç¶åï¼æ¨å¯ä»¥å¨ç±»ä¼¼äºä»¥ä¸åå®¹çbeanå®ä¹ä¸­ä½¿ç¨è¯¥ç±»ï¼\n\n<beans default-init-method="init">\n\n    <bean id="blogService" class="com.something.DefaultBlogService">\n        <property name="blogDao" ref="blogDao" />\n    </bean>\n\n</beans>\n\n\né¡¶çº§åç´ å±æ§ä¸çdefault-init-methodå±æ§çå­å¨ä¼å¯¼è´Spring IoCå®¹å¨è¯å«Beanç±»ä¸­ç§°ä¸ºinitçæ¹æ³ä½ä¸ºåå§åæ¹æ³åè°ãåå»ºå¹¶ç»è£Beanæ¶ï¼å¦æBeanç±»å·æè¿æ ·çæ¹æ³ï¼åä¼å¨éå½çæ¶é´è°ç¨å®ã\n\næ¨å¯ä»¥ç±»ä¼¼å°éè¿å¨é¡¶çº§åç´ ä¸ä½¿ç¨efault-destroy-methodå±æ§æ¥éç½®é»è®¤éæ¯åè°ã\n\nå½ç°æbeanç±»å·²ç»æä¸çº¦å®åè°æ¹æ³æå·®å¼çæ¹æ³æ¶ï¼å¯ä»¥éè¿ä½¿ç¨çinit-methodådestroy-methodå±æ§æå®æ¹æ³åç§°æ¥è¦çé»è®¤å¼ã\n\nSpring å®¹å¨ä¿è¯å¨åbeanæ³¨å¥ææä¾èµé¡¹ä¹åç«å³è°ç¨éç½®çåå§ååè°æ¹æ³ãå æ­¤ï¼å¨åå§beanä¸æä¼è°ç¨åå§ååè°ï¼è¿æå³çAOPæ¦æªå¨ç­å°æªåºç¨äºbeanãé¦åå®å¨åå»ºç®æ beanï¼ç¶ååºç¨å·æå¶æ¦æªé¾çAOPä»£çãå¦æç®æ beanåä»£çåç¬å®ä¹ï¼åæ¨çä»£ç çè³å¯ä»¥ç»è¿ä»£çç´æ¥ä¸åå§ç®æ beanäº¤äºãå æ­¤ï¼å°æ¦æªå¨åºç¨äºinitæ¹æ³æ¯çç¾çï¼å ä¸ºè¿æ ·åä¼å°ç®æ beanççå½å¨æè¦åå°å¶ä»£çææ¦æªå¨ï¼å¹¶å¨ä»£ç ä¸åå§ç®æ beanç´æ¥äº¤äºæ¶çä¸å¥æªçè¯­ä¹ã\n\n# ç»åçå½å¨ææºå¶\n\næªè³Spring 2.5ï¼æ¨æä¸ç§æ¹å¼æ§å¶beançå£°æå¨æï¼ä½ å¯ä»¥ç»åè¿äºæºå¶æ¥æ§å¶beançå£°æå¨æï¼\n\n * InitializingBeanåDisposableBeanåè°æ¥å£\n * èªå®ä¹init()ådestroyæ¹æ³\n * @PostContructå@PreDestroyæ³¨è§£\n\n> å¦æä¸ºbeanéç½®äºå¤ä¸ªçå½å¨ææºå¶ï¼å¹¶ä¸æ¯ä¸ªæºå¶éç½®äºä¸ååç§°çæ¹æ³ï¼åæ¯ä¸ªéç½®çæ¹æ³æç§ååºçé¡ºåºè¿è¡ãä½æ¯ï¼å¦æéç½®äºç¸ååç§°çæ¹æ³ - ä¾å¦ï¼åå§åæ¹æ³init() - å¯¹äºè¿äºçå½å¨ææºå¶ä¸­çå¤ä¸ªï¼è¯¥æ¹æ³åªä¼è¿è¡ä¸æ¬¡ã\n\nä¸ºåä¸beanéç½®çå¤ä¸ªçå½å¨ææºå¶ï¼rè¥å·æä¸åçåå§åæ¹æ³ï¼æç§å¦ä¸æç¤ºé¡ºåºæ§è¡ï¼\n\n 1. @PostConstructæ³¨éçæ¹æ³\n 2. InitializingBeanåè°æ¥å£ä¸­çafterPropertiesSet() æ¹æ³\n 3. èªå®ä¹ç init() æ¹æ³\n\néæ¯æ¹æ³ä»¥ç¸åçé¡ºåºè°ç¨ï¼\n\n 1. @PreDestroyæ³¨éçæ¹æ³\n 2. DisposableBeanåè°æ¥å£ä¸­çdestroy() æ¹æ³\n 3. èªå®ä¹ç destroy() æ¹æ³\n\n# å¯å¨ååæ­¢åè°\n\nLifecycleæ¥å£ä¸ºå¯¹è±¡å®ä¹äºä»»ä½å·æå¶èªèº«çå½å¨æè¦æ±çåºæ¬æ¹æ³ï¼ä¾å¦å¯å¨ååæ­¢æäºåå°è¿ç¨ï¼ï¼\n\npublic interface Lifecycle {\n\n    void start();\n\n    void stop();\n\n    boolean isRunning();\n}\n\n\nä»»ä½Springç®¡ççå¯¹è±¡é½å¯ä»¥å®ç°çå½å¨ææ¥å£ãç¶åï¼å½ApplicationContextæ¬èº«æ¥æ¶å¼å§ååæ­¢ä¿¡å·ï¼ä¾å¦ï¼å¨è¿è¡æ¶è¿è¡åæ­¢/éå¯ï¼æ¶ï¼å®å°è¿äºè°ç¨çº§èå°è¯¥ä¸ä¸æä¸­å®ä¹çææçå½å¨æå®ç°ãå®éè¿å°å¶å§æ´¾ç»LifecycleProcessoræ¥å®ç°è¿ä¸ç¹ï¼å¦ä¸æç¤ºæç¤ºï¼\n\npublic interface LifecycleProcessor extends Lifecycle {\n\n    void onRefresh();\n\n    void onClose();\n}\n\n\nè¯·æ³¨æï¼LifecyCleProcessoræ¬èº«æ¯Lifecycleæ¥å£çæ©å±ãå®è¿æ·»å äºå¦å¤ä¸¤ä¸ªæ¹æ³ï¼å°å¨åºç¨ä¸ä¸æå·æ°åå³é­æ¶è°ç¨ã\n\n> ð¡è¯·æ³¨æï¼å¸¸è§org.springframework.context.Lifecycleæ¥å£æ¯ä¸ä¸ªç®åççº¦å®ï¼ç¨äºæ¾å¼å¯å¨ååæ­¢éç¥ï¼å¹¶ä¸æå³çä¸ä¸æå·æ°æ¶èªå¨å¯å¨ãå¯¹ç¹å®beançèªå¨å¯å¨ï¼åæ¬å¯å¨é¶æ®µï¼è¿è¡ç»ç²åº¦æ§å¶ï¼è¯·èèå®ç°org.springframework.context.SmartLifecycleã\n> \n> æ­¤å¤ï¼è¯·æ³¨æï¼éæ¯åä¸ä¿è¯åèµ·åæ­¢éç¥ãä¸è¬å¨åæ­¢æ¶ï¼ææLifecycleå®ç°ç±»é¦åå¨å¸¸è§éæ¯åè°ä¼ æ­ä¹åæ¥æ¶åæ­¢éç¥ãä½æ¯ï¼å¨ä¸ä¸æç­å·æ°æåæ­¢å·æ°å°è¯æé´ï¼åªè°ç¨éæ¯æ¹æ³ã\n\nå¯å¨åå³é­è°ç¨çé¡ºåºå¾éè¦ãå¦æå¨ä»»ä½ä¸¤ä¸ªå¯¹è±¡ä¹é´å­å¨ä¾èµå³ç³»ï¼åéè¦ä¾èµçå°äºå¶ä¾èµé¡¹å¯å¨åå¯å¨ï¼å¹¶ä¸å¨å¶ä¾èµé¡¹åæ­¢ååæ­¢ãä½æ¯ææ¶ï¼ç´æ¥ä¾èµæ¯æªç¥çãæ¨å¯è½åªç¥éæç§ç±»åçå¯¹è±¡åºè¯¥å¨å¦ä¸ä¸ªç±»åçå¯¹è±¡ä¹åå¯å¨ãå¨è¿äºæåµä¸ï¼SmartLifecycleæ¥å£å®ä¹äºå¦ä¸ä¸ªéé¡¹ï¼å³å¨å¶ç¶æ¥å£Phasedå®ä¹çgetPhase()æ¹æ³ãä»¥ä¸æ¯è¯¥æ¥å£çå®ä¹ï¼\n\npublic interface Phased {\n\n    int getPhase();\n}\n\n\nä»¥ä¸æ¯SmartLifecycleæ¥å£çå®ä¹ï¼\n\npublic interface SmartLifecycle extends Lifecycle, Phased {\n\n    boolean isAutoStartup();\n\n    void stop(Runnable callback);\n}\n\n\nå¯å¨æ¶ï¼é¡ºä½æä½çå¯¹è±¡é¦åå¯å¨ãåæ­¢æ¶ï¼é¡ºåºç¸åãå æ­¤ï¼ä¸ä¸ªå®ç°SmartLifecycleä¸å¶getphase()æ¹æ³è¿åInteger.MIN_VALUEçå¯¹è±¡å°æ¯ç¬¬ä¸ä¸ªå¯å¨åæååæ­¢ãä¹å°±æ¯è¯´ï¼è¿åInteger.MAX_VALUEçå¼çå°æåå¯å¨å¹¶é¦ååæ­¢ï¼å¯è½æ¯å ä¸ºå®åå³äºè¦è¿è¡çå¶ä»è¿ç¨ï¼ãå¾éè¦çæ¯è¦ç¥éä¸å®ç°SmartLifecycleçä»»ä½æ®éLifecycleå®ä¾çé»è®¤é¡ºä½å¼æ¯0ãå æ­¤ï¼ä»»ä½è´çé¡ºä½å¼è¡¨ç¤ºå¯¹è±¡åºè¯¥å¨è¿äºæ åç»ä»¶ä¹åå¯å¨ï¼å¹¶å¨å¶ä¹ååæ­¢ï¼ãåä¹äº¦ç¶ã\n\nSmartLifecycleå®ä¹çstopæ¹æ³æ¥åä¸ä¸ªçº¿ç¨åè°ãå¨è¯¥å®ç°çå³é­è¿ç¨å®æåï¼ä»»ä½å®ç°å¿é¡»è°ç¨åè°çº¿ç¨çrun()æ¹æ³ãè¿ä½¿å¾å¨å¿è¦æ¶å¯ç¨å¼æ­¥å³é­ï¼å ä¸ºLifecycleProcessoræ¥å£çé»è®¤å®ç°DefaultLifeCycleProcessorï¼å¨æ¯ä¸ªé¶æ®µåçå¯¹è±¡ç»ç­å¾å®ä¹çè¶æ¶æ¶é´åè°ç¨è¯¥åè°ãé»è®¤çè¶æ¶æ¶é´ä¸º30ç§ãæ¨å¯ä»¥éè¿å¨ä¸ä¸æä¸­å®ä¹åä¸ºlifecycleProcessorçbeanæ¥è¦çé»è®¤çå½å¨æå¤çå¨å®ä¾ãå¦ææ¨åªæ³ä¿®æ¹è¶æ¶æ¶é´ï¼ä»¥ä¸å®ä¹å°±è¶³å¤äºï¼\n\n<bean id="lifecycleProcessor" class="org.springframework.context.support.DefaultLifecycleProcessor">\n    \x3c!-- timeout value in milliseconds --\x3e\n    <property name="timeoutPerShutdownPhase" value="10000"/>\n</bean>\n\n\nå¦åæè¿°ï¼LifecyCleProcessoræ¥å£ä¹å®ä¹äºå·æ°åå³é­ä¸ä¸æçåè°æ¹æ³ãåèé©±å¨äºåæ­¢è¿ç¨ï¼ä»¿ä½stop()è¢«æ¾ç¤ºè°ç¨ä¸æ ·ï¼ä½å®åçå¨ä¸ä¸æå³é­çè¿ç¨ä¸­ãå¦ä¸æ¹é¢ï¼ârefreshâåè°å¯ä»¥å¯ç¨SmartLifecycle beançå¦ä¸ä¸ªåè½ãå·æ°ä¸ä¸æï¼å¨å®ä¾åå¹¶åå§åææå¯¹è±¡åï¼æ¶ï¼è°ç¨è¯¥åè°ãæ­¤æ¶ï¼é»è®¤çå½å¨æå¤çå¨æ£æ¥æ¯ä¸ªSmartLifecycleå¯¹è±¡çisAutostArtup()æ¹æ³è¿åçå¸å°å¼ãå¦æä¸ºtrueï¼åå¨å·æ°æ¶å¯å¨è¯¥å¯¹è±¡ï¼èä¸æ¯ç­å¾ä¸ä¸ææå¶èªå·±çstart()æ¹æ³è¢«æ¾å¼è°ç¨ï¼ä¸ä¸ä¸æå·æ°ä¸åï¼æ åä¸ä¸æå®ç°ä¸ä¼èªå¨å¯å¨ï¼ãphaseå¼åä¾èµå³ç³»ç¡®å®å¦åæè¿°çå¯å¨é¡ºåºã\n\n# å¨éwebåºç¨ä¸­ä¼éå°å³é­Spring Iocå®¹å¨\n\n> æ¬èä»éç¨äºéWebåºç¨ç¨åºãSpringçåºäºWebçApplicationContextå®ç°å·²æç¸å³ä»£ç ï¼è½å¨Webåºç¨ç¨åºå³é­æ¶ä¼éå°å³é­Spring IoCå®¹å¨ã\n\nå¦æå¨éWebåºç¨ç¨åºç¯å¢ä¸­ä½¿ç¨SpringçIoCå®¹å¨ï¼ä¾å¦ï¼å¨å¯å®¢æ·ç«¯æ¡é¢ç¯å¢ä¸­ï¼ï¼è¯·ä½¿ç¨JVMæ³¨åå³é­hookãè¿æ ·åç¡®ä¿äºä¸ä¸ªä¼éçåæ­¢ï¼å¹¶å¨åä¾beanä¸è°ç¨ç¸å³çéæ¯æ¹æ³ï¼ä»¥ä¾¿éæ¾ææèµæºãæ¨å¿é¡»æ­£ç¡®éç½®åå®ç°è¿äºéæ¯åè°ã\n\nè¦æ³¨åå³é­hookï¼è¯·è°ç¨å¨ConfigurableApplicationContextæ¥å£ä¸å£°æçregisterShutdownHook()æ¹æ³ï¼å¦ä»¥ä¸ç¤ºä¾æ¾ç¤ºï¼\n\nimport org.springframework.context.ConfigurableApplicationContext;\nimport org.springframework.context.support.ClassPathXmlApplicationContext;\n\npublic final class Boot {\n\n    public static void main(final String[] args) throws Exception {\n        ConfigurableApplicationContext ctx = new ClassPathXmlApplicationContext("beans.xml");\n\n        // add a shutdown hook for the above context...\n        ctx.registerShutdownHook();\n\n        // app runs here...\n\n        // main method exits, hook is called prior to the app shutting down...\n    }\n}\n\n\n\n# 1.6.2. ApplicationContextAwareåBeanNameAware\n\nå½ApplicationContextåå»ºå®ç°org.springframework.context.applicationContextawareæ¥å£çå¯¹è±¡å®ä¾æ¶ï¼å°æä¾è¯¥ApplicationContextçå¼ç¨ãä»¥ä¸åè¡¨æ¾ç¤ºäºApplicationContextawareæ¥å£çå®ä¹ï¼\n\npublic interface ApplicationContextAware {\n\n    void setApplicationContext(ApplicationContext applicationContext) throws BeansException;\n}\n\n\nå æ­¤ï¼beanå¯ä»¥éè¿ç¼ç¨æ¹å¼æä½åå»ºå®ä»¬çApplicationContextï¼éè¿ApplicationContextæ¥å£æéè¿å°å¼ç¨è½¬æ¢ä¸ºè¯¥æ¥å£çå·²ç¥å­ç±»ï¼ä¾å¦å¬å¼å¶ä»åè½çConfigurableApplicationContextï¼ãä¸ä¸ªä½ç¨å°±æ¯æ£ç´¢å¶ä»beanãææ¶è¿ç§è½åå¾æç¨ãä½æ¯ï¼ä¸è¬èè¨ï¼æ¨åºè¯¥é¿åä½¿ç¨å®ï¼å ä¸ºå®å°ä»£ç ä¸Springè¦åï¼å¹¶ä¸ä¸éµå¾ªæ§å¶åè½¬çé£æ ¼(ä¾èµä½ä¸ºbeançå±æ§æä¾)ãApplicationContextçå¶ä»æ¹æ³æä¾å¯¹æä»¶èµæºçè®¿é®ï¼åå¸åºç¨ç¨åºäºä»¶åè®¿é®MessagesSourceãè¿äºéå åè½å¨ApplicationContextçéå åè½ä¸­æè¿°ã\n\nèªå¨æ³¨å¥æ¯è·å¾å¯¹ApplicationContextçå¼ç¨çå¦ä¸ç§éæ©ãä¼ ç»çæé å½æ°æ³¨å¥åæç±»åæ³¨å¥æ¨¡å¼ï¼å¦1.4.5æè¿°ï¼å¯ä»¥åå«ä¸ºæé å½æ°åæ°æSetteræ¹æ³åæ°åå«æä¾ApplicationContextçä¾èµãæ´çµæ´»çæ¹å¼ï¼åæ¬èªå¨æ³¨å¥å­æ®µåå¤ä¸ªåæ°æ¹æ³çè½åï¼è¯·ä½¿ç¨åºäºæ³¨è§£çèªå¨æ³¨å¥åè½ãå¦ææ¨å¨éè¦çå°æ¹ä½¿ç¨äº@Autowiredæ³¨è§£ï¼ææç±»åçApplicationContextå°èªå¨æ³¨å¥å°å­æ®µï¼æé å½æ°ææ¹æ³åæ°ä¸­ãæå³æ´å¤ä¿¡æ¯ï¼è¯·åéä½¿ç¨@Autowiredã\n\nå½ApplicationContextåå»ºä¸ä¸ªå®ç°org.springFramework.Beans.Factory.BeannameAwareæ¥å£çç±»æ¶ï¼è¯¥ç±»ä¼è·å¾è·å®èªèº«å®ä¹ç¸å³çåç§°ãä»¥ä¸åè¡¨æ¾ç¤ºäºBeannameawareæ¥å£çå®ä¹ï¼\n\npublic interface BeanNameAware {\n\n    void setBeanName(String name) throws BeansException;\n}\n\n\nè¯¥æ¹æ³åè°å°ä¼å¨æ®ébeanå±æ§è®¾å¼åï¼åå§ååè°ä¹å(å¦InitializingBeanãafterPropertiesSetãèªå®ä¹åå§åæ¹æ³)è°ç¨ã\n\n\n# 1.6.3. å¶ä»Awareæ¥å£\n\né¤äºApplicationContextawareåBeannameawareä¹å¤ï¼Springè¿æä¾äºæ´å¤çAwareåè°æ¥å£ï¼è®©beanåå®¹å¨ææå®ä»¬éè¦ä¾èµæä¸ªæç¡®çåºç¡æ¶æãä½ä¸ºä¸è¬è§åï¼åç§°è¡¨ç¤ºä¾èµç±»åãå¦ä¸è¡¨æ ¼4(æªç¿»è¯)æ»ç»äºæéè¦çAwareæ¥å£ï¼\n\nNAME                             INJECTED DEPENDENCY                                            EXPLAINED INâ¦\nApplicationContextAware          Declaring ApplicationContext.                                  ApplicationContextAware and BeanNameAware\nApplicationEventPublisherAware   Event publisher of the enclosing ApplicationContext.           Additional Capabilities of the ApplicationContext\nBeanClassLoaderAware             Class loader used to load the bean classes.                    Instantiating Beans\nBeanFactoryAware                 Declaring BeanFactory.                                         ApplicationContextAware and BeanNameAware\nBeanNameAware                    Name of the declaring bean.                                    ApplicationContextAware and BeanNameAware\nLoadTimeWeaverAware              Defined weaver for processing class definition at load time.   Load-time Weaving with AspectJ in the Spring Framework\nMessageSourceAware               Configured strategy for resolving messages (with support for   Additional Capabilities of the ApplicationContext\n                                 parametrization and internationalization).\nNotificationPublisherAware       Spring JMX notification publisher.                             Notifications\nResourceLoaderAware              Configured loader for low-level access to resources.           Resources\nServletConfigAware               Current ServletConfig the container runs in. Valid only in a   Spring MVC\n                                 web-aware Spring ApplicationContext.\nServletContextAware              Current ServletContext the container runs in. Valid only in    Spring MVC\n                                 a web-aware Spring ApplicationContext.\n\nè¯·æ³¨æï¼ä½¿ç¨è¿äºæ¥å£ä½ çä»£ç å°ä¸Spring APIè¦åï¼å¹¶ä¸ä¸éµå¾ªæ§å¶åè½¬çé£æ ¼ãå æ­¤ï¼æä»¬æ¨èå®ä»¬å¨éè¦å¯¹å®¹å¨è¿è¡ç¼ç¨è®¿é®çåºç¡æ¶æbeanä¸­ä½¿ç¨ã\n\n\n# 1.7. Beanå®ä¹ç»§æ¿\n\nBeanå®ä¹å¯ä»¥åå«å¤§éçéç½®ä¿¡æ¯ï¼åæ¬æé å½æ°åæ°ï¼å±æ§å¼åç¹å®äºå®¹å¨çä¿¡æ¯ï¼ä¾å¦åå§åæ¹æ³ï¼éæå·¥åæ¹æ³åç§°ç­ãå­beanå®ä¹ä»ç¶å®ä¹ç»§æ¿éç½®æ°æ®ãå­å®ä¹å¯ä»¥æ ¹æ®éè¦è¦çæäºå¼ææ·»å å¶ä»å¼ãä½¿ç¨ç¶ãå­beanå®ä¹å¯ä»¥åå°éç½®ãå®éä¸ï¼è¿æ¯æ¨¡æ¿æ¨¡å¼çä¸ç§å½¢å¼ã\n\nå¦ææ¨ä»¥ç¼ç¨æ¹å¼ä½¿ç¨ApplicationContextæ¥å£ï¼åå­Beanå®ä¹ç±ChildBeanDefinitionç±»è¡¨ç¤ºãå¤§å¤æ°ç¨æ·ä¸ä¼å¨è¿ç§çº§å«ä½¿ç¨å®ä»¬ãç¸åï¼ä»ä»¬å¨è¯¸å¦ClassPathxMlApplicationContextç­ç±»ä¸­å£°æå°éç½®beanå®ä¹ãä½¿ç¨åºäºXMLçéç½®åæ°æ®æ¶ï¼å¯ä»¥ä½¿ç¨parentå±æ§æå®å­beanå®ä¹ï¼æå®ç¶beanä½ä¸ºæ­¤å±æ§çå¼ãä»¥ä¸ç¤ºä¾æ¾ç¤ºäºå¦ä½åï¼\n\n<bean id="inheritedTestBean" abstract="true"\n        class="org.springframework.beans.TestBean">\n    <property name="name" value="parent"/>\n    <property name="age" value="1"/>\n</bean>\n\n<bean id="inheritsWithDifferentClass"\n        class="org.springframework.beans.DerivedTestBean"\n        parent="inheritedTestBean" init-method="initialize">  1ï¸â£\n    <property name="name" value="override"/>\n    \x3c!-- the age property value of 1 will be inherited from parent --\x3e\n</bean>\n\n\nå¦ææ²¡ææå®ï¼åå­beanä½¿ç¨ç¶beançå®ä¹ï¼ä½ä¹å¯ä»¥è¦çå®ãå¨åä¸ç§æåµä¸ï¼å­beanå¿é¡»ä¸ç¶beanå¼å®¹ï¼å³å®å¿é¡»æ¥åç¶å±æ§å¼ï¼ã\n\nå­beanå®ä¹ç»§æ¿ä½ç¨åï¼æé å½æ°åæ°å¼ï¼å±æ§å¼åä»ç¶ç±»è¦ççæ¹æ³ï¼å¹¶å¯éæ©æ·»å æ°å¼ãæ¨æå®çä»»ä½ä½ç¨åï¼åå§åæ¹æ³ï¼éæ¯æ¹æ³æéæå·¥åæ¹æ³è®¾ç½®å°ä¼è¦çç¶ç±»ä¸­å¯¹åºè®¾ç½®ã\n\nå©ä½çè®¾ç½®å§ç»ä»å­å®ä¹ä¸­å¼ç¨ï¼ä¾èµï¼èªå¨è£éæ¨¡å¼ï¼ä¾èµå³ç³»æ£æ¥ï¼åä¾åæå è½½ã\n\nåé¢çç¤ºä¾éè¿ä½¿ç¨abstractå±æ§å°ç¶beanå®ä¹æ¾å¼æ è®°ä¸ºæ½è±¡ç±»ãå¦æç¶å®ä¹æªæå®ç±»ï¼åç¶beanå®ä¹abstractå±æ§æ¯å¿é¡»çï¼å¦ä»¥ä¸ç¤ºä¾æ¾ç¤ºï¼\n\n<bean id="inheritedTestBeanWithoutClass" abstract="true">\n    <property name="name" value="parent"/>\n    <property name="age" value="1"/>\n</bean>\n\n<bean id="inheritsWithClass" class="org.springframework.beans.DerivedTestBean"\n        parent="inheritedTestBeanWithoutClass" init-method="initialize">\n    <property name="name" value="override"/>\n    \x3c!-- age will inherit the value of 1 from the parent bean definition--\x3e\n</bean>\n\n\nç¶beanæ æ³èªå¨åï¼å ä¸ºå®æ¯ä¸å®æ´çï¼å¹¶ä¸ä¹æç¡®æ è®°ä¸ºæ½è±¡ãå½å®ä¹æ¯æ½è±¡çæ¶åï¼å®ä»ç¨ä¸ºçº¯æ¨¡æ¿beanå®ä¹ï¼å®ç¨ä½å­å®ä¹çç¶å®ä¹ãå°è¯èªå·±ä½¿ç¨è¿æ ·ä¸ä¸ªæ½è±¡ç¶beanï¼éè¿å°å¶ä½ä¸ºå¦ä¸ä¸ªbeançrefå±æ§ï¼å¦åä½¿ç¨ç¶bean idæ¾ç¤ºæ§è¡getBean()è°ç¨å°è¿åéè¯¯ãåæ ·ï¼å®¹å¨çåé¨é¢çpreInstantiateSingletons()æ¹æ³å¿½ç¥äºè¢«å®ä¹ä¸ºæ½è±¡çbeanå®ä¹ã\n\n> â¹ï¸ApplicationContexté»è®¤é¢åå®ä¾åææåä¾beanãå æ­¤ï¼å¦ææ¨ææç®ä»ç¨ä½ä¸ºæ¨¡æ¿çï¼ç¶ï¼beanå®ä¹ï¼å¹¶ä¸æ­¤å®ä¹å®ä¹äºç±»ï¼åå¿é¡»ç¡®ä¿å°abstractå±æ§è®¾ç½®ä¸ºtrueï¼å¦ååºç¨ä¸ä¸æå°ï¼å°è¯ï¼é¢å®ä¾åæ½è±¡ç±»ã\n\n\n# 1.8. å®¹å¨æ©å±ç¹\n\néå¸¸ï¼åºç¨ç¨åºå¼åèä¸éè¦å­ç±»åApplicationContextå®ç°ç±»ãç¸åï¼Spring IoCå®¹å¨å¯ä»¥éè¿ç¹æ®çéææ¥å£å®ç°æ©å±ãæ¥ä¸æ¥çå èå°ä»ç»è¿äºéææ¥å£ã\n\n\n# 1.8.1. ç¨BeanPostProcessorèªå®ä¹Beans\n\nBeanPostProcessoræ¥å£å®ä¹äºå¯ä»¥å®ç°çåè°æ¹æ³ï¼ä»¥æä¾èªå·±çï¼æè¦çå®¹å¨çé»è®¤ï¼å®ä¾åé»è¾ï¼ä¾èµè§£æé»è¾ç­ãå¦æè¦å¨Springå®¹å¨å®æå®ä¾åï¼éç½®ååå§åBeanåå®ç°æäºèªå®ä¹é»è¾ï¼å¯ä»¥æå¥ä¸ä¸ªæå¤ä¸ªèªå®ä¹BeanPostProcessorå®ç°ã\n\næ¨å¯ä»¥éç½®å¤ä¸ªBeanPostProcessorå®ä¾ï¼æ¨å¯ä»¥éè¿è®¾ç½®orderå±æ§æ¥æ§å¶è¿äºBeanPostProcessorå®ä¾è¿è¡çé¡ºåºãåªæå½BeanPostProcessorå®ç°Orderedæ¥å£æ¶ï¼æè½è®¾ç½®æ­¤å±æ§ãå¦ææ¨ç¼åèªå·±çBeanPostProcessorï¼ååºèèå®ç°Orderedæ¥å£ãæå³è¯¦ç»ä¿¡æ¯ï¼è¯·åéBeanPostProcessoråOrderedçJavadocãå¦è¯·åéå³äºBeanPostProcessorå®ä¾çç¨åºåæ³¨åçè¯´æã\n\n> â¹ï¸BeanPostProcessorå®ä¾å¨Beanï¼æObjectï¼å®ä¾ä¸è¿è¡ãä¹å°±æ¯è¯´ï¼Spring IoCå®¹å¨å®ä¾åäºä¸ä¸ªbeanå®ä¾ï¼ç¶åBeanbostprocessorå®ä¾æ§è¡å®ä»¬çåè°æ¹æ³ã\n> \n> BeanPostProcessorå®ä¾ä½ç¨åæ¯å®¹å¨ãä»å½æ¨ä½¿ç¨å®¹å¨å±æ¬¡ç»ææ¶æèµ·ä½ç¨ãå¦æå¨ä¸ä¸ªå®¹å¨ä¸­å®ä¹BeanPostProcessorï¼åå®ä»å¨è¯¥å®¹å¨ä¸­å¤çbeanãæ¢å¥è¯è¯´ï¼å³ä½¿ä¸¤ä¸ªå®¹å¨é½æ¯ç¸åå±æ¬¡ç»æçä¸é¨åï¼å¨ä¸ä¸ªå®¹å¨ä¸­å®ä¹çbeanä¹ä¸ä¼è¢«å¦ä¸ä¸ªå®¹å¨ä¸­å®ä¹çBeanPostProcessorå¤çã\n\nè¯¥org.springframework.beans.factory.config.BeanPostProcessoræ¥å£åæ¬æ­£å¥½ä¸¤ä¸ªåè°æ¹æ³ãå½æ­¤ç±»è¢«å®¹å¨æ³¨åä¸ºåç½®å¤çå¨æ¶ï¼å¯¹äºæ¯ä¸ªå®¹å¨åå»ºçbeanå®ä¾ï¼åå¤çå¨å¨å®¹å¨åå§åæ¹æ³ï¼ä¾å¦InitializationBean.afterPropertiesset()æä»»ä½å£°æçinitæ¹æ³ï¼è¢«è°ç¨åï¼å¹¶å¨ä»»ä½beanåå§ååè°ä¹åè°ç¨ãåå¤çå¨å¯ä»¥å¯¹beanå®ä¾æ§è¡ä»»ä½æä½ï¼åæ¬å®å¨å¿½ç¥åè°ãbeanåç½®å¤çå¨éå¸¸æ£æ¥åè°æ¥å£ï¼æèå®å¯è½ä¼å°beanåè£ä¸ºä»£çãä¸äºSpring AOPåºç¡æ¶æç±»å°±æ¯beanåå¤çå¨çå®ç°ï¼ä»¥æä¾ä»£çåè£é»è¾ã\n\nApplicationContextå°èªå¨æ£æµå¨éç½®åæ°æ®ä¸­å®ä¹çå®ç°BeanPostProcessoræ¥å£çä»»ä½BeanãApplicationContextå°è¿äºbeanæ³¨åä¸ºåå¤çå¨ï¼ä»¥ä¾¿ç¨åå¯ä»¥å¨beanåå»ºåè¢«è°ç¨ãBeanåå¤çå¨è½ä»¥ä¸ä»»ä½å¶ä»beanç¸åçæ¹å¼é¨ç½²å¨å®¹å¨ä¸­ã\n\næ³¨æï¼å¨éç½®ç±»ä¸ä½¿ç¨@Beanå·¥åæ¹æ³å£°æBeanPostProcessoræ¶ï¼å·¥åæ¹æ³çè¿åç±»ååºè¯¥æ¯å®ç°ç±»æ¬èº«æè³å°æ¯org.springframework.beans.factory.config.beanpostProcessoræ¥å£ï¼ä»¥æ¸æ¥å°è¡¨ç¤ºè¯¥beançåå¤çå¨æ§è´¨ãå¦åï¼ApplicationContextæ æ³å¨å®å¨åå»ºå®ä¹åéè¿ç±»åèªå¨æ¢æµå°å®ãç±äºéè¦æåå®ä¾åBeanPostProcessorä»¥ä¾¿å¨ä¸ä¸æä¸­åå§åå¶ä»Beanæ¶åºç¨å¤çå¨ï¼å æ­¤è¯¥æ©æç±»åæ£æµè³å³éè¦ã\n\n> â¹ï¸ä»¥ç¼ç¨æ¹å¼æ³¨åBeanPostProcessorå®ä¾\n> \n> è½ç¶BeanPostProcessoræ³¨åçæ¨èæ¹æ³æ¯éè¿ApplicationContextèªå¨æ£æµï¼å¦åæè¿°ï¼ï¼ä½æ¨å¯ä»¥ä½¿ç¨ConfigurableBeanFactoryçaddBeanPostProcessoræ¹æ³è¿è¡ç¼ç¨æ¹å¼æ³¨åãå½æ¨éè¦è¯ä¼°æ¡ä»¶é»è¾æçè³ç¨äºå¨å±æ¬¡ç»æä¸­çä¸ä¸æä¸­å¤å¶beanåå¤çå¨æ¶ï¼è¿å¯è½å¾æç¨ãä½è¯·æ³¨æï¼Orderedæ¥å£å¯¹ç¼ç¨æ·»å çBeanPostProcessorå®ä¾æ æãå¨è¿éï¼æ§è¡é¡ºåºå°±æ¯æ³¨åé¡ºåºãè¿è¦æ³¨æï¼æ è®ºä»»ä½æå®çé¡ºåºå¦ä½ï¼ç¼ç¨æ¹å¼æ³¨åçBeanPostProcessorå®ä¾é½ä¼å¨éè¿èªå¨æ£æµæ³¨åçé£äºå¤çå¨ä¹åä¹åæ§è¡ã\n\n> â¹ï¸BeanPostProcessorå®ä¾åAOPèªå¨ä»£ç\n> \n> å®ç°BeanPostProcessoræ¥å£çç±»æ¯ç¹æ®çï¼å®¹å¨ä¼ç¹æ®å¤çãææBeanPostProcessorå®ä¾åå®ä»¬ç´æ¥å¼ç¨çBeanï¼å¨å¯å¨æ¶é½ä¼ä½ä¸ºApplicationContextçç¹æ®å¯å¨é¶æ®µçä¸é¨åãæ¥ä¸æ¥ï¼ææBeanPostProcessorå®ä¾é½ä»¥æå®çé¡ºåºæ³¨åï¼å¹¶åºç¨äºå®¹å¨ä¸­çææå¶ä»beanãç±äºAOPèªå¨ä»£çå®ç°ä¸ºBeanPostProcessoræ¬èº«ï¼å æ­¤BeanPostProcessorå®ä¾åå®ä»¬ç´æ¥å¼ç¨çBeané½æ²¡æèµæ ¼èªå¨ä»£çï¼å æ­¤ï¼å®ä»¬æ²¡æåé¢ã\n> \n> å¦ææ¨ä½¿ç¨autowiringæ@Resourceï¼å¯è½autowiringå¤±è´¥ï¼å°beansè£éå°BeanPostProcessorä¸­ï¼åå¨æç´¢ç±»åå¹éçä¾èµåéæ¶ï¼Springå¯è½ä¼å¾å°éè¯¯çBeanï¼å æ­¤ä½¿å¶æ æ³è¢«èªå¨ä»£çæè¢«å¶ä»åå¤çå¨å¤çãä¾å¦ï¼å¦ææ¨æè¢«@Resourceæ³¨è§£æ æ³¨çä¾èµé¡¹ï¼å¦å­æ®µæsetteræ¹æ³åä¸å·²å£°æåç§°çbeanä¸ç´æ¥å¯¹åºä¸æ²¡æä½¿ç¨nameå±æ§çè¯ï¼Springæç´¢å¶ä»beanä»¥æç±»åå¹éå®ä»¬ã\n\nä»¥ä¸ç¤ºä¾æ¾ç¤ºå¦ä½å¨ApplicationContextä¸­ç¼åï¼æ³¨ååä½¿ç¨BeanPostProcessorå®ä¾\n\n# ä¾ï¼Hell World, BeanPostProcessor -style\n\nç¬¬ä¸ä¸ªä¾å­è¯´æäºåºæ¬ç¨æ³ãè¯¥ç¤ºä¾æ¾ç¤ºäºèªå®ä¹BeanPostProcessorå®ç°ï¼è¯¥å®ç°è°ç¨æ¯ä¸ªbeançtoString()æ¹æ³ï¼å®ç±å®¹å¨åå»ºå¹¶å°çæçå­ç¬¦ä¸²æå°å°ç³»ç»æ§å¶å°ã\n\npackage scripting;\n\nimport org.springframework.beans.factory.config.BeanPostProcessor;\n\npublic class InstantiationTracingBeanPostProcessor implements BeanPostProcessor {\n\n    // simply return the instantiated bean as-is\n    public Object postProcessBeforeInitialization(Object bean, String beanName) {\n        return bean; // we could potentially return any object reference here...\n    }\n\n    public Object postProcessAfterInitialization(Object bean, String beanName) {\n        System.out.println("Bean \'" + beanName + "\' created : " + bean.toString());\n        return bean;\n    }\n}\n\n\nä»¥ä¸beansåç´ ä½¿ç¨InstantialTracingBeanPostProcessorï¼\n\n<?xml version="1.0" encoding="UTF-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n    xmlns:lang="http://www.springframework.org/schema/lang"\n    xsi:schemaLocation="http://www.springframework.org/schema/beans\n        https://www.springframework.org/schema/beans/spring-beans.xsd\n        http://www.springframework.org/schema/lang\n        https://www.springframework.org/schema/lang/spring-lang.xsd">\n\n    <lang:groovy id="messenger"\n            script-source="classpath:org/springframework/scripting/groovy/Messenger.groovy">\n        <lang:property name="message" value="Fiona Apple Is Just So Dreamy."/>\n    </lang:groovy>\n\n    \x3c!--\n    when the above bean (messenger) is instantiated, this custom\n    BeanPostProcessor implementation will output the fact to the system console\n    --\x3e\n    <bean class="scripting.InstantiationTracingBeanPostProcessor"/>\n\n</beans>\n\n\nè¯·æ³¨æInstantialTracingBeanPostProcessoræ¯å¦ä½è¢«å®ä¹çãå®çè³æ²¡æåå­ï¼èä¸å ä¸ºå®æ¯ä¸ä¸ªbeanï¼å®å¯ä»¥åä»»ä½å¶ä»beanä¸æ ·ä¾èµæ³¨å¥ãï¼åé¢çéç½®è¿å®ä¹äºç±Groovyèæ¬å¤ä»½çbeanãSpringå¨æè¯­è¨æ¯æå¨æ­¤ç« èä¸­è¯¦è¿°ãï¼\n\nä»¥ä¸Javaåºç¨ç¨åºè¿è¡åé¢çä»£ç åéç½®ï¼\n\nimport org.springframework.context.ApplicationContext;\nimport org.springframework.context.support.ClassPathXmlApplicationContext;\nimport org.springframework.scripting.Messenger;\n\npublic final class Boot {\n\n    public static void main(final String[] args) throws Exception {\n        ApplicationContext ctx = new ClassPathXmlApplicationContext("scripting/beans.xml");\n        Messenger messenger = ctx.getBean("messenger", Messenger.class);\n        System.out.println(messenger);\n    }\n\n}\n\n\nåé¢åºç¨ç¨åºçè¾åºç±»ä¼¼äºä»¥ä¸åå®¹ï¼\n\nBean \'messenger\' created : org.springframework.scripting.groovy.GroovyMessenger@272961\norg.springframework.scripting.groovy.GroovyMessenger@272961\n\n\n# ä¾ï¼RequiredAnnotationBeanPostProcessor\n\nä½¿ç¨åè°æ¥å£ææ³¨è§£è¿æ¥èªå®ä¹BeanPostProcessorå®ç°æ¯æ©å±Spring IoCå®¹å¨çå¸¸è§æ¹æ³ãä¸ä¸ªä¾å­æ¯SpringçResertandannotationBeanPostProcessor - ä¸ä¸ªSpringå®ç°çBeanPostProcessorï¼å®ç¡®ä¿ç¨ï¼ä»»æï¼æ³¨è§£æ è®°çbeanä¸çä¾èµæ³¨å¥å±æ§å®éä¸ï¼è¢«éç½®ä¸º)æå¼ã\n\n\n# 1.8.2. ä½¿ç¨BeanFactoryPostProcessorèªå®ä¹éç½®åæ°æ®\n\næä»¬æ¥ççä¸ä¸ä¸ªæ©å±ç¹æ¯org.springframework.beans.factory.config.BeanfactoryPostProcessorãæ­¤æ¥å£çè¯­ä¹ç±»ä¼¼äºBeanPostProcessorçè¯­ä¹ï¼å¶ä¸­ä¸ä¸ªä¸»è¦åºå«ï¼BeanFactoryPostProcessorå¨æä½çæ¯Beanéç½®åæ°æ®ãä¹å°±æ¯è¯´ï¼Spring IoCå®¹å¨åè®¸BeanFactoryPostPostProcessorè¯»åéç½®åæ°æ®ï¼å¹¶ä¸å¨å®¹å¨å®ä¾åBeanFactoryPostProcessorå®ä¾ä¹å¤çä»»ä½Beanä¹åå¯è½ä¼æ´æ¹å®ã\n\næ¨å¯ä»¥éç½®å¤ä¸ªBeanFactoryPostProcessorå®ä¾ï¼æ¨å¯ä»¥éè¿è®¾ç½®orderå±æ§æ¥æ§å¶è¿äºBeanFactoryPostProcessorå®ä¾è¿è¡çé¡ºåºãåªæå½BeanFactoryPostProcessorå®ç°Orderedæ¥å£æ¶ï¼æè½è®¾ç½®æ­¤å±æ§ãå¦ææ¨ç¼åèªå·±çBeanFactoryPostProcessorï¼ååºèèå®ç°Orderedæ¥å£ãæå³è¯¦ç»ä¿¡æ¯ï¼è¯·åéBeanFactoryPostProcessoråOrderedçJavadocã\n\n> â¹ï¸å¦æè¦æ´æ¹å®éBeanå®ä¾ï¼å³ï¼ä»éç½®åæ°æ®åå»ºçå¯¹è±¡ï¼ï¼åéè¦ä½¿ç¨BeanPostProcessorï¼ãè½ç¶ææ¯ä¸å¯ä»¥å¨BeanFactoryPostProcessorä¸­ä½¿ç¨beanå®ä¾ï¼ä¾å¦ï¼éè¿ä½¿ç¨BeanFactory.getBean()ï¼ï¼ä½è¿æ ·åä¼å¯¼è´æ´æ©çbeanå®ä¾åï¼è¿åæ åå®¹å¨çå½å¨æãè¿å¯è½å¯¼è´è´å¯ä½ç¨ï¼ä¾å¦ç»è¿Beanåå¤çã\n> \n> BeanFactoryPostProcessorå®ä¾ä½ç¨åæ¯å®¹å¨ãä»å½æ¨ä½¿ç¨å®¹å¨å±æ¬¡ç»ææ¶æèµ·ä½ç¨ãå¦æå¨ä¸ä¸ªå®¹å¨ä¸­å®ä¹BeanFactoryPostProcessorï¼åå®ä»å¨è¯¥å®¹å¨ä¸­å¤çbeanåæ°æ®ãæ¢å¥è¯è¯´ï¼å³ä½¿ä¸¤ä¸ªå®¹å¨é½æ¯ç¸åå±æ¬¡ç»æçä¸é¨åï¼å¨ä¸ä¸ªå®¹å¨ä¸­beançåæ°æ®ä¹ä¸ä¼è¢«å¦ä¸ä¸ªå®¹å¨ä¸­å®ä¹çBeanFactoryPostProcessorå¤çã\n\nå°èªå¨è¿è¡å¨ApplicationContextä¸­å£°æçBeanå·¥ååå¤çå¨ï¼ä»¥ä¾¿å°æ´æ¹åºç¨äºå®ä¹å®¹å¨çéç½®åæ°æ®ãSpringåæ¬è®¸å¤é¢å®ä¹çBeanå·¥ååå¤çå¨ï¼ä¾å¦PropertyOverrideConfigureråPropertySourcesPlaceholderConfigurerãæ¨è¿å¯ä»¥ä½¿ç¨èªå®ä¹BeanFactoryPostProcessor - ä¾å¦ï¼æ³¨åèªå®ä¹å±æ§ç¼è¾å¨ã\n\nApplicationContextä¼èªå¨æ£æµé¨ç½²å¨å®ä¸­çä»»ä½å®ç°äºBeanFactoryPostPostPostPostoræ¥å£çBeanãå®å¨éå½çæ¶é´ä½¿ç¨è¿äºä½ä¸ºbeanå·¥ååå¤çå¨çbeanãæ¨å¯ä»¥æç§ä»»ä½å¶ä»beançæ¹å¼é¨ç½²è¿äºåå¤çå¨beanã\n\n> â¹ï¸ä¸BeanPostProcessorä¸æ ·ï¼æ¨éå¸¸ä¸å¸æéç½®BeanFactoryPostProcessorsä¸ºå»¶è¿åå§åãå¦ææ²¡æå¶ä»beanå¼ç¨Bean(Factory)PostProcessorï¼åæ ¹æ¬ä¸ä¼ç«å³å®ä¾åãå æ­¤ï¼å°å¶æ è®°ä¸ºå»¶æ¶åå§åå°è¢«å¿½ç¥ï¼å¹¶ä¸å³ä½¿å¨åç´ å£°æä¸å°default-lazy-initå±æ§è®¾ç½®ä¸ºtrueï¼Bean(Factory)PostProcessorä¹ä¼ç«å³å®ä¾åã\n\n# ä¾ï¼ç±»åç§°æ¿æ¢PropertySourcesPlaceholderConfigurer\n\næ¨å¯ä»¥éè¿PropertySourcesPlaceholderConfigurerä½¿ç¨æ åJava Propertiesæ ¼å¼å¨åç¬æä»¶ä¸­ä»Beanå®ä¹ä¸­å¤é¨åå±æ§å¼ãè¿æ ·åä½¿å¾é¨ç½²åºç¨ç¨åºçäººè½å¤èªå®ä¹ç¹å®äºç¯å¢çå±æ§ï¼ä¾å¦æ°æ®åºURLåå¯ç ï¼èæ éæå¿ä¿®æ¹å®¹å¨çä¸»è¦XMLå®ä¹æä»¶å¸¦æ¥çå¤ææ§æé£é©ã\n\nèèä»¥ä¸åºäºXMLçéç½®åæ°æ®çæ®µï¼å¶ä¸­å®ä¹äºå·æå ä½ç¬¦å¼çæ°æ®æºï¼\n\n<bean class="org.springframework.context.support.PropertySourcesPlaceholderConfigurer">\n    <property name="locations" value="classpath:com/something/jdbc.properties"/>\n</bean>\n\n<bean id="dataSource" destroy-method="close"\n        class="org.apache.commons.dbcp.BasicDataSource">\n    <property name="driverClassName" value="${jdbc.driverClassName}"/>\n    <property name="url" value="${jdbc.url}"/>\n    <property name="username" value="${jdbc.username}"/>\n    <property name="password" value="${jdbc.password}"/>\n</bean>\n\n\nè¯¥ç¤ºä¾æ¾ç¤ºäºä»å¤é¨å±æ§æä»¶éç½®çå±æ§ãå¨è¿è¡æ¶ï¼PropertySourcePlaceHolterConfigureråºç¨äºæ¿æ¢æ°æ®æºçæäºå±æ§çåæ°æ®ãè¦æ¿æ¢çå¼è¢«æå®ä¸º$ {property-name}çå ä½ç¬¦å½¢å¼ï¼å®éµå¾ªAntålog4jåJSP EL é£æ ¼ã\n\nå®éå¼æ¥èªæ åJava Propertiesæ ¼å¼çå¦ä¸ä¸ªæä»¶ï¼\n\njdbc.driverClassName=org.hsqldb.jdbcDriver\njdbc.url=jdbc:hsqldb:hsql://production:9002\njdbc.username=sa\njdbc.password=root\n\n\nå æ­¤ï¼$ {jdbc.username}å­ç¬¦ä¸²å¨è¿è¡æ¶æ¿æ¢ä¸º\'sa\'ï¼å±æ§æä»¶ä¸­å¶ä»å ä½ç¬¦å¼ä¹ä¸æ ·æé®å¼å¹éæ¿æ¢ãPropertySourcesPlaceholderConfigureræ£æ¥å¨Beanå®ä¹çå¤§å¤æ°å±æ§ä¸­çå ä½ç¬¦ãæ­¤å¤ï¼æ¨å¯ä»¥èªå®ä¹å ä½ç¬¦åç¼ååç¼ã\n\nä½¿ç¨Spring 2.5ä¸­å¼å¥çä¸ä¸æå½åç©ºé´ï¼æ¨å¯ä»¥ä½¿ç¨ä¸ç¨éç½®åç´ éç½®å±æ§å ä½ç¬¦ãæ¨å¯ä»¥å¨locationå±æ§ä¸­æä¾ä¸ä¸ªæå¤ä¸ªä½ç½®ä½ä¸ºéå·åéçåè¡¨ï¼å¦ä»¥ä¸ç¤ºä¾æ¾ç¤ºï¼\n\n<context:property-placeholder location="classpath:com/something/jdbc.properties"/>\n\n\nè¯¥PropertySourcesPlaceholderConfigurerä¸ä»ä¼å¨ä½ æå®çPropertiesæä»¶ä¸­æ¥æ¾ãé»è®¤æåµä¸ï¼å¦æä¸è½å¨æå®çå±æ§æä»¶ä¸­æ¾å°å±æ§ï¼å®ä¼éå¯¹Spring Environmentå±æ§éç½®åæ®éçJava Systemå±æ§éç½®è¿è¡æ¥æ¾ã\n\n> ð¡æ¨å¯ä»¥ä½¿ç¨PropertySourcePlaceHolderConfigureræ¥æ¿æ¢ç±»åï¼å½æ¨å¿é¡»å¨è¿è¡æ¶éæ©ç¹å®å®ç°ç±»æ¶æç¨ãä»¥ä¸ç¤ºä¾æ¾ç¤ºäºå¦ä½æ§è¡æ­¤æä½ï¼\n> \n> <bean class="org.springframework.beans.factory.config.PropertySourcesPlaceholderConfigurer">\n>     <property name="locations">\n>         <value>classpath:com/something/strategy.properties</value>\n>     </property>\n>     <property name="properties">\n>         <value>custom.strategy.class=com.something.DefaultStrategy</value>\n>     </property>\n> </bean>\n> \n> <bean id="serviceStrategy" class="${custom.strategy.class}"/>\n> \n> \n> å¦æå¨è¿è¡æ¶æ æ³å¨è¿è¡æ¶è§£æå°ææç±»å«ï¼åå¨å°è¦åå»ºæ¶ï¼å¯¹äºéæå è½½beanï¼ApplicationContextçpreInstantiateSingletons()é¶æ®µï¼ï¼Beanè§£æå¤±è´¥ã\n\n# ä¾ï¼PropertyOverrideConfigurer\n\nPropertyOverrideConfigurerï¼å¦ä¸ä¸ªbean factoryåå¤çå¨ï¼ç±»ä¼¼äºPropertySourcePlaceHolderConfigurerï¼ä½ä¸åèä¸åï¼åå§å®ä¹å¯ä»¥å·æé»è®¤å¼ææ ¹æ¬æ²¡æå¼ä½ä¸ºbeançå±æ§ãå¦æè¦ççPropertiesæä»¶æ²¡ææäºbeanå±æ§çæ¡ç®ï¼åä½¿ç¨é»è®¤ä¸ä¸æå®ä¹ã\n\nè¯·æ³¨æï¼beanå®ä¹æ æ³æç¥è¢«è¦çï¼å æ­¤è¦ççéç½®åºç¨äºXMLå®ä¹æä»¶ä¸ä¼æ¾èæè§ãå¦ææå¤ä¸ªPropertyOverrideConfigurerå®ä¾å®ä¹ç¸åçbeanå±æ§çä¸åå¼ï¼ç±äºè¦çæºå¶åªä¼ä½¿ç¨æåä¸ä¸ªã\n\nå±æ§æä»¶éç½®è¡éç¨ä»¥ä¸æ ¼å¼ï¼\n\nbeanName.property=value\n\n\nä»¥ä¸åè¡¨æ¾ç¤ºäºæ ¼å¼çç¤ºä¾ï¼\n\ndataSource.driverClassName=com.mysql.jdbc.Driver\ndataSource.url=jdbc:mysql:mydb\n\n\næ­¤ç¤ºä¾æä»¶å¯ä»¥ä¸åå«ä¸ä¸ªåä¸ºdataSourceçbeançå®¹å¨å®ä¹ä¸èµ·ä½¿ç¨ï¼å¶ä¸­åå«driveråurlå±æ§ã\n\nè¿æ¯æå¤åå±æ§åç§°ï¼åªè¦é¤äºè¢«è¦ççæç»å±æ§ä¹å¤çè·¯å¾ä¸ççæ¯ä¸ªç»ä»¶é½æ¯éç©ºçï¼å¯è½ç±æé å½æ°åå§åï¼ãå¨ä»¥ä¸ç¤ºä¾ä¸­ï¼tom beançfredå±æ§çbobå±æ§çsammyå±æ§è®¾ç½®ä¸ºå¸¸é123ï¼\n\ntom.fred.bob.sammy=123\n\n\n> â¹ï¸æå®çè¦çå¼å§ç»æ¯å­é¢éãå®ä»¬ä¸ä¼ç¿»è¯æbeanå¼ç¨ãæ­¤çº¦å®è¿éç¨äºXML Beanå®ä¹ä¸­çåå§å¼æå®ä¸ºbeanå¼ç¨æ¶ã\n\nå¨Spring 2.5ä¸­å¼å¥çä¸ä¸æå½åç©ºé´ï¼å¯ä»¥ä½¿ç¨ä¸ç¨éç½®åç´ éç½®å±æ§è¦çï¼å¦ä»¥ä¸ç¤ºä¾æ¾ç¤ºï¼\n\n<context:property-override location="classpath:override.properties"/>\n\n\n\n# 1.8.3. ä½¿ç¨FactoryBeanèªå®ä¹å®ä¾åé»è¾\n\næ¬èº«æ¯å·¥åçå¯¹è±¡å¯ä»¥å®ç°org.springframework.beans.factory.FactoryBeanæ¥å£ã\n\nFactoryBeanæ¥å£æ¯Spring IoCå®¹å¨çå®ä¾åé»è¾çå¯ææç¹ãå¦ææ¨æå¤æçåå§åä»£ç ï¼åå¨Javaä¸­å¯ä»¥æ¯åé¿çï¼å¯è½ï¼XMLæ´å¥½å°è¡¨è¾¾ï¼æ¨å¯ä»¥åå»ºèªå·±çFactoryBeanï¼å¨è¯¥ç±»ä¸­åå¥å¤æçåå§åé»è¾ï¼ç¶åå°æ¨çèªå®ä¹FactoryBeanæå¥å®¹å¨ä¸­ã\n\nFactoryBeanæ¥å£æä¾ä¸ä¸ªæ¹æ³ï¼\n\n * Object getObject()ï¼è¿åæ­¤å·¥ååå»ºçå¯¹è±¡çå®ä¾ãå®ä¾å¯è½ä¼è¢«å±äº«ï¼å·ä½åå³äºæ­¤åºåæ¯å¦è¿ååä¾æååã\n\n * boolean isSingleton()ï¼å¦æFactoryBeanè¿ååä¾beanæ­¤æ¹æ³è¿åtrueå¦åè¿åfalseã\n\n * Class getObjectType()ï¼è¿ågetObject()æ¹æ³è¿åçå¯¹è±¡ç±»åï¼å¦æç±»åä¸è½æåæ¨æ­åè¿ånullã\n\nFactoryBeanææ³åæ¥å£ç¨äºSpringæ¡æ¶åçè®¸å¤å°æ¹ãspringåé¨å°±æFactoryBeanæ¥å£ç50å¤ä¸ªå®ç°ã\n\nå½æ¨éè¦è¯¢é®å®éFactoryBeanå®ä¾èä¸æ¯å®çæçbeanæ¶ï¼è¯·å¨è°ç¨ApplicationContextçgetBean()æ¹æ³æ¶ä½¿ç¨andç¬¦å·ï¼ï¼ï¼åç¼ãå¯¹äºç»å®çFactoryBeanï¼è°ç¨å®¹å¨ä¸çgetBean("myBean")è¿åFactoryBeanäº§ççbeanï¼èè°ç¨getBean("&myBean")è¿åFactoryBeanå®ä¾æ¬èº«ã\n\n\n# 1.9. åºäºæ³¨è§£çå®¹å¨éç½®\n\n> åºäºæ³¨è§£çéç½®æ¯å¦æ¯åºäºXMLçéç½®æ´å¥½ï¼\n> \n> åºäºæ³¨è§£çéç½®å¼åºäºæ­¤é®é¢ãé¿è¯ç­è¯´æ¯âå¾çæåµâãä¹å°±æ¯è¯´ï¼æ¯ç§æ¹æ³é½æå¶å©å¼ãèä¸éå¸¸ç±å¼åäººåå³å®åªç§ç­ç¥æ´éåä»ä»¬ãç±äºå®ä»¬çå®ä¹æ¹å¼ï¼æ³¨è§£å¨ä»ä»¬çå£°æä¸­æä¾äºä¸ä¸æï¼æä»¥éç½®æ´ç­æ´ç®ç»ãä½æ¯ï¼XMLéç½®çä¼å¿æ¯ä¸ä¾µå¥æºä»£ç æä¸éè¦éæ°ç¼è¯å®ä»¬ãä¸äºå¼åäººååæ¬¢æ³¨è§£çæ¹å¼ï¼èå¶ä»å¼åäººååè®¤ä¸ºè¢«æ³¨è§£çç±»ä¸åæ¯POJOï¼èä¸è¿ä¼ä½¿å¾éç½®åå¾åæ£ï¼æ´é¾æ§å¶ã\n> \n> æ è®ºåªç§éæ©ï¼Springé½å¯ä»¥å¼å®¹è¿ä¸¤ç§é£æ ¼ï¼çè³å°å®ä»¬æ··åå¨ä¸èµ·ãå¼å¾æ³¨æçæ¯ï¼éè¿å¶JavaConfigéé¡¹ï¼Springè®©æ³¨è§£ä»¥éä¾µå¥æ§æ¹å¼ä½¿ç¨ï¼èæ éæ¥è§¦ç®æ ç»ä»¶æºä»£ç ï¼å¹¶ä¸å¨å·¥å·æ¹é¢ï¼ææéç½®æ ·å¼é½æ¯æEclipseçSpring Toolsæ¯æã\n\nåºäºæ³¨è§£çéç½®æä¾äºXMLéç½®çæ¿ä»£æ¹æ³ï¼å®ä¾èµäºè¦è£éçç»ä»¶èä¸æ¯ç¨å°æ¬å·å£°æçå­èç åæ°æ®ãå¼åèéè¿å¨ç¸å³ç±»ï¼æ¹æ³æå­æ®µå£°æä¸ä½¿ç¨æ³¨è§£ï¼å°éç½®ç§»å¨å°ç»ä»¶ç±»èªèº«ä¸­èä¸æ¯ä½¿ç¨XMLãå¦ç¤ºä¾RequiredAnnotationBeanPostProcessorï¼ä½¿ç¨BeanPostProcessorä¸æ³¨è§£ç»åæ¯æ©å±Spring IoCå®¹å¨çå¸¸è§æ¹æ³ãä¾å¦ï¼Spring 2.0å¼å¥äº@Requiredæ³¨è§£ï¼ä½¿å¾å¼ºå¶ä¾èµå±æ§æä¸ºå¯è½ãSpring 2.5ä½¿å¾å¯ä»¥éµå¾ªç¸åçä¸è¬æ¹æ³æ¥é©±å¨Springçä¾èµæ³¨å¥ãæ¬è´¨ä¸ï¼@Autowiredæ³¨éæä¾äºç¸åçè½åï¼å¦Autowiringæè¿°ï¼ä½å·ææ´ç»ç²åº¦çæ§å¶åæ´å¹¿æ³çéç¨æ§ãSpring 2.5è¿å¢å äºå¯¹JSR-250æ³¨è§£çæ¯æï¼ä¾å¦@PostConstructå@PreDestroyãSpring 3.0æ·»å äºåå«å¨javax.injectä¸­çæ¯æJSR-330ï¼Javaä¾èµæ³¨å¥ï¼çæ³¨è§£ï¼ä¾å¦@Injectå@Namedãæå³è¿äºæ³¨è§£çè¯¦ç»ä¿¡æ¯å¯ä»¥å¨ç¸å³ç« èä¸­æ¾å°ã\n\n> â¹ï¸åºäºæ³¨è§£çæ³¨å¥å¨XMLæ³¨å¥ä¹åè¿è¡ãå æ­¤ï¼åºäºXMLçéç½®è¦çäºéè¿ä¸¤ç§æ¹æ³å±æ§çè£éã\n\nå½ç¶ï¼æ¨å¯ä»¥å°å®ä»¬æ³¨åä¸ºåç¬çbeanå®ä¹ï¼ä½ä¹å¯ä»¥éè¿å¨åºäºXMLçSpringéç½®ä¸­åå«ä»¥ä¸æ ç­¾æ¥éå¼æ³¨åï¼æ³¨æåå«contextå½åç©ºé´ï¼ï¼\n\n<?xml version="1.0" encoding="UTF-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n    xmlns:context="http://www.springframework.org/schema/context"\n    xsi:schemaLocation="http://www.springframework.org/schema/beans\n        https://www.springframework.org/schema/beans/spring-beans.xsd\n        http://www.springframework.org/schema/context\n        https://www.springframework.org/schema/context/spring-context.xsd">\n\n    <context:annotation-config/>\n\n</beans>\n\n\n(éå¼æ³¨åçåå¤çå¨åæ¬AutowiredAnnotationBeanPostProcessor, CommonAnnotationBeanPostProcessor, PersistenceAnnotationBeanPostProcessor,RequiredAnnotationBeanPostProcessor, CommonAnnotationBeanPostProcessor, PersistenceAnnotationBeanPostProcessor, RequiredAnnotationBeanPostProcessor.)\n\n> â¹ï¸<context:annotation-config />ä»æ¥æ¾å¨å®ä¹å®çåä¸åºç¨ç¨åºä¸ä¸æä¸­çæ³¨è§£ãè¿æå³çï¼å¦æå°<context:annotation-config />æ¾å¨DispatcherServletçWebApplicationContextä¸­ï¼ååªä¼æ«æControllerä¸­ç@Autowired æ³¨è§£çbeanãæå³æ´å¤ä¿¡æ¯ï¼è¯·åéDispatcherServletã\n\n\n# 1.9.1. @Required\n\n@Requiredæ³¨è§£éç¨äºbeanå±æ§setteræ¹æ³ï¼å¦ä¸ä¾æç¤ºï¼\n\npublic class SimpleMovieLister {\n\n    private MovieFinder movieFinder;\n\n    @Required\n    public void setMovieFinder(MovieFinder movieFinder) {\n        this.movieFinder = movieFinder;\n    }\n\n    // ...\n}\n\n\næ­¤æ³¨è§£è¡¨ç¤ºå¿é¡»éè¿Beanå®ä¹ä¸­çæ¾å¼å±æ§å¼æéè¿èªå¨è£éå¨éç½®beanæ¶å¡«åbeançå±æ§ãå¦æå°æªå¡«ååæ³¨è§£å½±åçbeanå±æ§ï¼åè¯¥å®¹å¨ä¼æåºå¼å¸¸ãè¿åè®¸æ´æ©çå¤±è´¥ï¼é¿åäºåç»­çNullPointerExceptionç­ãæä»¬ä»ç¶å»ºè®®æ¨å°æ­è¨æ¾å¥Beanç±»æ¬èº«ï¼ä¾å¦ï¼initæ¹æ³ï¼ãè¿æ ·åå³ä½¿å¨å®¹å¨å¤é¨ä½¿ç¨ç±»æ¶ï¼ä¹å¯ä»¥æ¿å°æéçå¼ç¨åå¼ã\n\n> â¹ï¸@Requiredå¨Spring Framework 5.1ä¸­æ­£å¼è¿æ¶ï¼æ¯æä½¿ç¨æé å½æ°æ³¨å¥æéçè®¾ç½®ï¼æInitializingBean.afterPropertiesSet()çèªå®ä¹å®ç°ä»¥åBeanå±æ§çsetterå®ç°ï¼ã\n\n\n# 1.9.2. ä½¿ç¨@Autowired\n\n> â¹ï¸JSR 330ç@Injectæ³¨è§£å¯ä»¥ç¨äºä»£æ¿æ¬èä¸­åå«çç¤ºä¾ä¸­çSpring @Autowiredæ³¨éãæå³è¯¦ç»ä¿¡æ¯ï¼è¯·åéæ­¤å¤ã\n\nä½ å¯ä»¥åºç¨@Autowiredæ³¨è§£äºæé å¨ï¼å°±åä¸é¢è¿æ ·ï¼\n\npublic class MovieRecommender {\n\n    private final CustomerPreferenceDao customerPreferenceDao;\n\n    @Autowired\n    public MovieRecommender(CustomerPreferenceDao customerPreferenceDao) {\n        this.customerPreferenceDao = customerPreferenceDao;\n    }\n\n    // ...\n}\n\n\n> â¹ï¸æªè³Spring Framework 4.3ï¼å¦æç®æ beanä»å®ä¹ä¸ä¸ªæé å½æ°ï¼åä¸åéè¦å¨æ­¤æé å½æ°ä¸ç¨@Autowiredæ³¨è§£ãä½æ¯ï¼å¦ææå¤ä¸ªæé å½æ°å¹¶ä¸æ²¡æä¸»/é»è®¤æé å½æ°ï¼åè³å°æä¸ä¸ªæé å½æ°å¿é¡»ç¨@Autowiredæ³¨è§£ï¼ä»¥æç¤ºå®¹å¨ä½¿ç¨åªä¸ä¸ªæé å¨ã\n\nä½ ä¹å¯ä»¥åä¸é¢è¿æ ·åºç¨@Autowiredæ³¨è§£äºä¼ ç»setteræ¹æ³ï¼\n\npublic class SimpleMovieLister {\n\n    private MovieFinder movieFinder;\n\n    @Autowired\n    public void setMovieFinder(MovieFinder movieFinder) {\n        this.movieFinder = movieFinder;\n    }\n\n    // ...\n}\n\n\nä½ è¿å¯ä»¥åä¸é¢è¿æ ·åºç¨@Autowiredæ³¨è§£äºä»»æåç§°åå¤åæ°çæ¹æ³ï¼\n\npublic class MovieRecommender {\n\n    private MovieCatalog movieCatalog;\n\n    private CustomerPreferenceDao customerPreferenceDao;\n\n    @Autowired\n    public void prepare(MovieCatalog movieCatalog,\n            CustomerPreferenceDao customerPreferenceDao) {\n        this.movieCatalog = movieCatalog;\n        this.customerPreferenceDao = customerPreferenceDao;\n    }\n\n    // ...\n}\n\n\nä½ ä¹å¯ä»¥å°@Autowiredåºç¨äºå­æ®µï¼çè³å°å¶ä¸æé å½æ°æ··åï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\npublic class MovieRecommender {\n\n    private final CustomerPreferenceDao customerPreferenceDao;\n\n    @Autowired\n    private MovieCatalog movieCatalog;\n\n    @Autowired\n    public MovieRecommender(CustomerPreferenceDao customerPreferenceDao) {\n        this.customerPreferenceDao = customerPreferenceDao;\n    }\n\n    // ...\n}\n\n\n> ð¡ç¡®ä¿æ¨çç®æ ç»ä»¶ï¼ä¾å¦ï¼MovieCatalogæCustomerPreferenceDaoï¼åç¨@ Autowiredæ³¨è§£çæ³¨å¥ç¹çç±»åå£°æä¸è´ãå¦åï¼è¿è¡æ¶å¯è½å ç±»åä¸å¹éèæ³¨å¥å¤±è´¥ã\n> \n> å¯¹äºéè¿ç±»è·¯å¾æ«ææ¾å°çXMLå®ä¹çbeanæç»ä»¶ç±»ï¼å®¹å¨éå¸¸é¢åç¥éç¡®åçç±»åãä½æ¯ï¼å¯¹äº@Beanå·¥åæ¹æ³ï¼æ¨éè¦ç¡®ä¿å£°æçè¿åç±»åæ¯è¶³å¤æç¡®çãå¯¹äºå®ç°å¤ä¸ªæ¥å£æå¯è½ç±å¶å®ç°ç±»åå¼ç¨çç»ä»¶ï¼èèå¨å·¥åæ¹æ³ä¸å£°ææå·ä½çè¿åç±»åï¼è³å°è·æ³¨å¥ç¹éè¦çç±»åä¸æ ·ï¼ã\n\næ¨è¿å¯ä»¥å°@Autowiredæ³¨è§£æ·»å å°ææå¾å°è¯¥ç±»åæ°ç»çå­æ®µææ¹æ³ä¸ï¼è®©Springä»ApplicationContextè¿åææè¿ç§ç±»åçbeanï¼å¦ä¸æç¤ºï¼\n\npublic class MovieRecommender {\n\n    @Autowired\n    private MovieCatalog[] movieCatalogs;\n\n    // ...\n}\n\n\nç±»åéåä¹æ¯ä¸æ ·ï¼\n\npublic class MovieRecommender {\n\n    private Set<MovieCatalog> movieCatalogs;\n\n    @Autowired\n    public void setMovieCatalogs(Set<MovieCatalog> movieCatalogs) {\n        this.movieCatalogs = movieCatalogs;\n    }\n\n    // ...\n}\n\n\n> ð¡å¦ææ¨å¸æä»¥ç¹å®é¡ºåºæåºæ°ç»æåè¡¨ä¸­çåç´ ï¼æ¨çç®æ beanå¯ä»¥å®ç°org.springframework.core.Orderedæ¥å£æä½¿ç¨@Orderææ å@Priorityæ³¨è§£ãå¦åï¼å®ä»¬çé¡ºåºè·å®¹å¨ä¸­å®ä¹çç®æ beançæ³¨åé¡ºåºä¸æ ·ã\n> \n> æ¨å¯ä»¥éå¯¹åä¸ªbeanå®ä¹ï¼å¦ææå¤ä¸ªä½¿ç¨ç¸åçbeanç±»çå®ä¹ï¼å¨ç®æ ç±»çº§å«å@Beanæ¹æ³ä¸­å£°æ@Orderæ³¨è§£ã@Orderå¼å¯è½ä¼å½±åæ³¨å¥ç¹çä¼åçº§ï¼ä½è¯·æ³¨æå®ä»¬ä¸ä¼å½±ååä¾çå¯å¨é¡ºåºï¼è¿æ¯ç±ä¾èµå³ç³»å@DependsOnå£°æå³å®çé®é¢ã\n> \n> è¯·æ³¨æï¼æ åjavax.annotation.Priorityæ³¨è§£å¨@Beançº§å«ä¸å¯ç¨ï¼å ä¸ºå®æ æ³å¨æ¹æ³ä¸­å£°æãå®çè¯­ä¹è·éè¿@Orderå¼ä¸æ¯ç§ç±»åçåä¸ªbeanä¸ç@Primaryç»åç±»ä¼¼ã\n\nåªè¦é¢æçkeyç±»åä¸ºStringï¼å³ä½¿æ¯Mapå®ä¾ä¹å¯ä»¥èªå¨æ³¨å¥ãæ å°å¼åå«é¢æç±»åçææbeanï¼é®åå«ç¸åºçbeanåç§°ï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\npublic class MovieRecommender {\n\n    private Map<String, MovieCatalog> movieCatalogs;\n\n    @Autowired\n    public void setMovieCatalogs(Map<String, MovieCatalog> movieCatalogs) {\n        this.movieCatalogs = movieCatalogs;\n    }\n\n    // ...\n}\n\n\né»è®¤æåµä¸ï¼å½æ²¡æå¹éçåébeanå¯ç¨äºç»å®æ³¨å¥ç¹æ¶ï¼èªå¨æ³¨å¥å¤±è´¥ãå¨å£°æçæ°ç»ï¼éåææ å°çæåµä¸ï¼é¢æè³å°æä¸ä¸ªå¹éçåç´ ã\n\né»è®¤è¡ä¸ºæ¯å°å¸¦æ³¨è§£çæ¹æ³åå­æ®µè§ä¸ºå¿é¡»çä¾èµé¡¹ãæ¨å¯ä»¥éè¿ä»¥ä¸ç¤ºä¾ä¸­æ¼ç¤ºæ´æ¹æ­¤è¡ä¸ºï¼ä½¿æ¡æ¶è½å¤è®©å¶åä¸ºéå¿é¡»çæ¥è·³è¿ä¸ä¸ªä¸æ»¡è¶³ä¾èµçæ³¨å¥ç¹ï¼å³ï¼éè¿å°@Autowiredä¸­çrequiredå±æ§è®¾ç½®ä¸ºfalse)ï¼\n\npublic class SimpleMovieLister {\n\n    private MovieFinder movieFinder;\n\n    @Autowired(required = false)\n    public void setMovieFinder(MovieFinder movieFinder) {\n        this.movieFinder = movieFinder;\n    }\n\n    // ...\n}\n\n\nå¦æå®çä¾èµé¡¹ï¼æå¨å¤ä¸ªåæ°çæåµä¸ï¼ä¸å¯ç¨ï¼åä¸ä¼è°ç¨æ­¤éå¿éçæ¹æ³ãå¨è¿ç§æåµä¸ï¼éå¿é¡»çå­æ®µä¸ä¼å¡«åï¼ä¼ç¨å¶é»è®¤å¼ä»£æ¿ã\n\nè¢«æ³¨å¥çæé å¨åå·¥åæ¹æ³åæ°æ¯ä¸ä¸ªç¹æ®æåµï¼å ä¸º@Autowiredä¸­requiredå±æ§ç±äºSpringçæé å½æ°è§£æç®æ³å¯è½æ½å¨å°å¤çå¤ä¸ªæé å½æ°ï¼å æ­¤å·æç¨å¾®ä¸åçå«ä¹ãé»è®¤æåµä¸æé å¨åå·¥åæ¹æ³åæ°æ¯å¿é¡»çï¼ä½å¨åä¸ªæé å½æ°åºæ¯ä¸­æä¸äºç¹æ®è§åï¼ä¾å¦å¤åç´ æ³¨å¥ç¹ï¼æ°ç»ï¼éåï¼æ å°ï¼ï¼å¦ææ²¡æå¯å¹éçbeanï¼åè§£æä¸ºç©ºå®ä¾ãè¿åè®¸å¸¸è§çå®ç°æ¨¡å¼ï¼å¶ä¸­ææä¾èµå³ç³»é½å¯ä»¥å¨å¯ä¸çå¤åæ°æé å½æ°ä¸­å£°æ - ä¾å¦ï¼å¨æ²¡æ@Autowiredæ³¨è§£çæåµä¸è¢«å£°æä¸ºåä¸ªå¬å±æé å½æ°ã\n\n> â¹ï¸ç»å®beanåªæä¸ä¸ªæé å½æ°å¯ä»¥è¢«required=trueç@Autowiredå£°æï¼è¡¨æè¿ä¸ªæé å¨æ¯å¶ä½ä¸ºSpring beanè¦æ³¨å¥çæé å¨ãå æ­¤ï¼å¦æå¶requiredå±æ§ä¸ºé»è®¤å¼trueï¼ååªæåä¸ªæé å½æ°å¯ä»¥ç¨@Autowiredæ³¨è§£å£°æãå¦æå¤ä¸ªæé å½æ°å£°æäºè¿ä¸ªæ³¨è§£ï¼åå®ä»¬é½å¿é¡»å°requiredè®¾ç½®ä¸ºfalseï¼ä»¥ä¾¿è¢«è§ä¸ºç¨äºèªå¨è£éçåéèï¼ç±»ä¼¼äºXMLä¸­çautowire=constructorï¼ãSpringå®¹å¨å°éæ©è½æå¤§æ»¡è¶³ä¾èµçæé å¨ãå¦æåéèæ²¡æä¸ä¸ªæ»¡è¶³çï¼åå°ä½¿ç¨ä¸»/é»è®¤æé å½æ°ï¼å¦æå­å¨ï¼ãåæ ·ï¼å¦æç±»å£°æå¤ä¸ªæé å½æ°ï¼ä½é½æ²¡æå£°æ@Autowiredæ³¨è§£ï¼åå°ä½¿ç¨ä¸»/é»è®¤æé å½æ°ï¼å¦æå­å¨ï¼ãå¦æç±»ä»å£°æåä¸ªæé å½æ°ï¼å³ä½¿æ²¡ææ³¨è§£ï¼ä¹å°å§ç»ä½¿ç¨å®ãè¯·æ³¨æï¼æ³¨è§£å£°æçæé å½æ°ä¿®é¥°ç¬¦ä¸å¿ä¸ºpublicã\n> \n> å¨setteræ¹æ³ä¸å»ºè®®ä½¿ç¨@Autowiredçrequiredå±æ§èä¸æ¯å·²å¼ç¨ç@Requiredæ³¨è§£ãå°requiredå±æ§è®¾ç½®ä¸ºfalseè¡¨ç¤ºèªå¨æ³¨å¥ç®æ ä¸æ¯å¿é¡»çï¼å¦æå®æ æ³èªå¨æ³¨å¥åå°å¿½ç¥è¯¥å±æ§ãå¦ä¸æ¹é¢ï¼@Requiredå¼ºå¶å±æ§è®¾ç½®ï¼æ è®ºç¨å®¹å¨æ¯æçä»ä¹ææ®µï¼å¦ææ²¡æå®ä¹ä»»ä½å¼ï¼åä¼æåºç¸åºçå¼å¸¸ã\n\næèï¼æ¨å¯ä»¥éè¿Java 8çjava.util.optionsè¡¨ç¤ºç¹å®ä¾èµçéå¿è¦æ§è´¨ï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\npublic class SimpleMovieLister {\n\n    @Autowired\n    public void setMovieFinder(Optional<MovieFinder> movieFinder) {\n        ...\n    }\n}\n\n\næªè³Spring Framework 5.0ï¼æ¨ä¹å¯ä»¥ä½¿ç¨@Nullableæ³¨éï¼ä»»ä½åä¸­çä»»ä½ç±»å - ä¾å¦ï¼JSR-305ä¸­çjavax.annotation.Nullableï¼æåªæ¯å©ç¨Kotlinåç½®çç©ºå®å¨æ¯æï¼\n\npublic class SimpleMovieLister {\n\n    @Autowired\n    public void setMovieFinder(@Nullable MovieFinder movieFinder) {\n        ...\n    }\n}\n\n\næ¨è¿å¯ä»¥ä½¿ç¨@Autowiredç¨äºä¼æå¨ç¥çå¯è§£æä¾èµæ§çæ¥å£ï¼BeanFactoryï¼ApplicationContextï¼Environmentï¼ResourceLoaderï¼ApplicationEventPublisheråMessageSourceãè¿äºæ¥å£åå¶æ©å±æ¥å£ï¼ä¾å¦ConfigurableApplicationContextæResourcePatternResolverï¼ä¼èªå¨è§£æï¼æ éç¹æ®è®¾ç½®ãä»¥ä¸ç¤ºä¾æ³¨å¥ApplicationContextå¯¹è±¡ï¼\n\npublic class MovieRecommender {\n\n    @Autowired\n    private ApplicationContext context;\n\n    public MovieRecommender() {\n    }\n\n    // ...\n}\n\n\n> â¹ï¸@Autowiredï¼@Injectï¼@Valueå@Resourceæ³¨è§£ç±Spring BeanPostProcessorå®ç°å¤çãè¿æå³çæ¨æ æ³å¨æ¨èªå·±çBeanPostProcessoræBeanFactoryPostProcessorç±»åä¸­åºç¨è¿äºæ³¨è§£ï¼å¦ææï¼ãè¿äºç±»åå¿é¡»éè¿ä½¿ç¨XMLæSpring @Beanæ¹æ³æ¾å¼æ³¨å¥ã\n\n\n# 1.9.3. ä½¿ç¨@Primaryè°æ´åºäºæ³¨è§£çèªå¨æ³¨å¥\n\nå ä¸ºæç±»åçèªå¨æ³¨å¥å¯è½æå¤ä¸ªåéèï¼æä»¥éå¸¸éè¦æ´ç²¾ç»å°æ§å¶éæ©è¿ç¨ãå®ç°è¿ä¸ç®æ çä¸ç§æ¹æ³æ¯Springç@Primaryæ³¨è§£ã@Primaryè¡¨ç¤ºå½åå¼ä¾èµæå¤ä¸ªåéèæ¶ï¼åºç»åºæ³¨å¥beançé¦éé¡¹ãå¦æåéèä¸­å­å¨ä¸ä¸ªä¸»beanï¼åå®å°æä¸ºèªå¨æ³¨å¥çå¼ã\n\nå°±åä»¥ä¸éç½®ï¼å°FirstMovieCatalogå®ä¹ä¸ºMovieCatalogç±»åçä¸»beanï¼\n\n@Configuration\npublic class MovieConfiguration {\n\n    @Bean\n    @Primary\n    public MovieCatalog firstMovieCatalog() { ... }\n\n    @Bean\n    public MovieCatalog secondMovieCatalog() { ... }\n\n    // ...\n}\n\n\nä½¿ç¨åé¢çéç½®ï¼ä¸é¢çMovieRecommenderå°æ³¨å¥firstMovieCatalogï¼\n\npublic class MovieRecommender {\n\n    @Autowired\n    private MovieCatalog movieCatalog;\n\n    // ...\n}\n\n\nç¸åºçbeanå®ä¹å¦ä¸ï¼\n\n<?xml version="1.0" encoding="UTF-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n    xmlns:context="http://www.springframework.org/schema/context"\n    xsi:schemaLocation="http://www.springframework.org/schema/beans\n        https://www.springframework.org/schema/beans/spring-beans.xsd\n        http://www.springframework.org/schema/context\n        https://www.springframework.org/schema/context/spring-context.xsd">\n\n    <context:annotation-config/>\n\n    <bean class="example.SimpleMovieCatalog" primary="true">\n        \x3c!-- inject any dependencies required by this bean --\x3e\n    </bean>\n\n    <bean class="example.SimpleMovieCatalog">\n        \x3c!-- inject any dependencies required by this bean --\x3e\n    </bean>\n\n    <bean id="movieRecommender" class="example.MovieRecommender"/>\n\n</beans>\n\n\n\n# 1.9.4. ä½¿ç¨@Qualifiersè°æ´åºäºæ³¨è§£çèªå¨æ³¨å¥\n\n\n# éå½\n\n\n# æå¡å®ä½å¨æ¨¡å¼\n\n> æå¡å®ä½å¨æ¨¡å¼ æå¡å®ä½å¨æ¨¡å¼ï¼Service Locator Patternï¼ç¨å¨æä»¬æ³ä½¿ç¨ JNDI æ¥è¯¢å®ä½åç§æå¡çæ¶åãèèå°ä¸ºæä¸ªæå¡æ¥æ¾ JNDI çä»£ä»·å¾é«ï¼æå¡å®ä½å¨æ¨¡å¼ååå©ç¨äºç¼å­ææ¯ãå¨é¦æ¬¡è¯·æ±æä¸ªæå¡æ¶ï¼æå¡å®ä½å¨å¨ JNDI ä¸­æ¥æ¾æå¡ï¼å¹¶ç¼å­è¯¥æå¡å¯¹è±¡ãå½åæ¬¡è¯·æ±ç¸åçæå¡æ¶ï¼æå¡å®ä½å¨ä¼å¨å®çç¼å­ä¸­æ¥æ¾ï¼è¿æ ·å¯ä»¥å¨å¾å¤§ç¨åº¦ä¸æé«åºç¨ç¨åºçæ§è½\n\næå¡å®ä½å¨æ¨¡å¼ï¼Service Locator Patternï¼ç¨å¨æä»¬æ³ä½¿ç¨ JNDI æ¥è¯¢å®ä½åç§æå¡çæ¶åãèèå°ä¸ºæä¸ªæå¡æ¥æ¾ JNDI çä»£ä»·å¾é«ï¼æå¡å®ä½å¨æ¨¡å¼ååå©ç¨äºç¼å­ææ¯ãå¨é¦æ¬¡è¯·æ±æä¸ªæå¡æ¶ï¼æå¡å®ä½å¨å¨ JNDI ä¸­æ¥æ¾æå¡ï¼å¹¶ç¼å­è¯¥æå¡å¯¹è±¡ãå½åæ¬¡è¯·æ±ç¸åçæå¡æ¶ï¼æå¡å®ä½å¨ä¼å¨å®çç¼å­ä¸­æ¥æ¾ï¼è¿æ ·å¯ä»¥å¨å¾å¤§ç¨åº¦ä¸æé«åºç¨ç¨åºçæ§è½ãä»¥ä¸æ¯è¿ç§è®¾è®¡æ¨¡å¼çå®ä½ã\n\n * æå¡ï¼Serviceï¼ - å®éå¤çè¯·æ±çæå¡ãå¯¹è¿ç§æå¡çå¼ç¨å¯ä»¥å¨ JNDI æå¡å¨ä¸­æ¥æ¾å°ã\n\n * Context / åå§ç Context - JNDI Context å¸¦æå¯¹è¦æ¥æ¾çæå¡çå¼ç¨ã\n\n * æå¡å®ä½å¨ï¼Service Locatorï¼ - æå¡å®ä½å¨æ¯éè¿ JNDI æ¥æ¾åç¼å­æå¡æ¥è·åæå¡çåç¹æ¥è§¦ã\n\n * ç¼å­ï¼Cacheï¼ - ç¼å­å­å¨æå¡çå¼ç¨ï¼ä»¥ä¾¿å¤ç¨å®ä»¬ã\n\n * å®¢æ·ç«¯ï¼Clientï¼ - Client æ¯éè¿ ServiceLocator è°ç¨æå¡çå¯¹è±¡ã\n\n',normalizedContent:'# æ ¸å¿ææ¯\n\n> 5.3.2\n\n\n# 1.iocå®¹å¨\n\n\n# 1.1. spring iocå®¹å¨åbeansä»ç»\n\næ¬ç« ä»ç»äºæ§å¶åè½¬ï¼iocï¼åççspringæ¡æ¶å®ç°ã iocä¹ç§°ä¸ºä¾èµæ³¨å¥ï¼diï¼ã å¨æ­¤è¿ç¨ä¸­ï¼å¯¹è±¡ä»éè¿æé å½æ°åæ°ï¼å·¥åæ¹æ³çåæ°æå¨æé åæä»å·¥åæ¹æ³è¿ååå¨å¯¹è±¡å®ä¾ä¸è®¾ç½®çå±æ§æ¥å®ä¹å¶ä¾èµé¡¹ï¼å³ä¸å®ä»¬ä¸èµ·ä½¿ç¨çå¶ä»å¯¹è±¡ï¼ ã ç¶åï¼å®¹å¨å¨åå»ºbeanæ¶æ³¨å¥é£äºä¾èµé¡¹ã æ­¤è¿ç¨ä»æ ¹æ¬ä¸è®²æ¯beanæ¬èº«éè¿ä½¿ç¨ç±»çç´æ¥æé æè¯¸å¦æå¡å®ä½å¨æ¨¡å¼ä¹ç±»çæºå¶æ¥æ§å¶å¶ä¾èµé¡¹çå®ä¾æä½ç½®çéè¿ç¨ï¼å æ­¤ç§°ä¸ºæ§å¶çåè½¬ï¼ã\n\norg.springframework.beansåorg.springframework.contextåæ¯spring frameworkçiocå®¹å¨çåºç¡ãbeanfactoryæ¥å£æä¾äºä¸ç§è½å¤ç®¡çä»»ä½ç±»åå¯¹è±¡çé«çº§éç½®æºå¶ãapplicationcontextæ¯beanfactoryçå­æ¥å£ã å®å¢å äºï¼\n\n * ä¸spring aopåè½è½»æ¾éæ\n * æ¶æ¯èµæºå¤çï¼ç¨äºå½éåï¼\n * äºä»¶åå¸\n * åºç¨å±ç¹å®çä¸ä¸æï¼ä¾å¦webåºç¨ç¨åºä¸­ä½¿ç¨çwebapplicationcontext\n\nç®èè¨ä¹ï¼beanfactoryæä¾äºéç½®æ¡æ¶ååºæ¬çåè½ï¼èapplicationcontextæ·»å äºæ´å¤ä¼ä¸ç¹å®çåè½ã applicationcontextæ¯beanfactoryçå®æ´è¶éï¼å¨æ¬ç« ä¸­ä»å¨springçiocå®¹å¨æè¿°ä¸­ä½¿ç¨ã\n\nå¨springä¸­ï¼ææåºç¨ç¨åºä¸»å¹²å¹¶ç±spring iocå®¹å¨ç®¡ççå¯¹è±¡ç§°ä¸ºbeanãbeanæ¯ç±spring iocå®¹å¨å®ä¾åãç»è£åç®¡ççå¯¹è±¡ãå¦åï¼beanåªæ¯åºç¨ç¨åºä¸­ä¼å¤å¯¹è±¡ä¸­çä¸ä¸ªãbeanåå¶ä¹é´çä¾èµå³ç³»åæ å¨å®¹å¨ä½¿ç¨çéç½®åæ°æ®ä¸­ã\n\n\n# 1.2. containerä»ç»\n\norg.springframework.context.applicationcontextæ¥å£ä»£è¡¨spring iocå®¹å¨ï¼å¹¶è´è´£å®ä¾åï¼éç½®åç»è£beanã å®¹å¨éè¿è¯»åéç½®åæ°æ®è·åæå³è¦å®ä¾åï¼éç½®åç»è£åªäºå¯¹è±¡çè¯´æã éç½®åæ°æ®ä»¥xmlï¼javaæ³¨è§£æjavaä»£ç è¡¨ç¤ºã å®ä½¿æ¨è½å¤è¡¨è¾¾ç»æåºç¨ç¨åºçå¯¹è±¡ä»¥åè¿äºå¯¹è±¡ä¹é´çä¸°å¯ç¸äºä¾èµå³ç³»ã\n\nspringæä¾äºapplicationcontextæ¥å£çå ç§å®ç°ã å¨ç¬ç«åºç¨ç¨åºä¸­ï¼éå¸¸åå»ºclasspathxmlapplicationcontextæfilesystemxmlapplicationcontextçå®ä¾ã å°½ç®¡xmlæ¯å®ä¹éç½®åæ°æ®çä¼ ç»æ ¼å¼ï¼ä½æ¯å¯ä»¥éè¿æä¾å°éxmléç½®æ¥å£°ææ§å°å¯ç¨å¯¹å¶ä»åæ°æ®æ ¼å¼çæ¯æï¼ä»èæç¤ºå®¹å¨å°javaæ³¨è§£æä»£ç ç¨ä½åæ°æ®æ ¼å¼ã\n\nå¨å¤§å¤æ°åºç¨åºæ¯ä¸­ï¼ä¸éè¦æ¾å¼ç¨æ·ä»£ç å³å¯å®ä¾åä¸ä¸ªspring iocå®¹å¨çä¸ä¸ªæå¤ä¸ªå®ä¾ã ä¾å¦ï¼å¨webåºç¨ç¨åºåºæ¯ä¸­ï¼åºç¨ç¨åºçweb.xmlæä»¶ä¸­çç®åå«è¡ï¼çº¦ï¼æ ·æ¿webæè¿°ç¬¦xmléå¸¸å°±è¶³å¤äºã å¦ææ¨ä½¿ç¨spring tools for eclipseï¼ç±eclipseé©±å¨çå¼åç¯å¢ï¼ï¼ååªéåå»å ä¸é¼ æ æå»é®å³å¯è½»æ¾åå»ºæ­¤æ ·æ¿éç½®ã\n\nä¸å¾æ¾ç¤ºäºspringçå·¥ä½åççé«çº§è§å¾ã æ¨çåºç¨ç¨åºç±»ä¸éç½®åæ°æ®ç»åå¨ä¸èµ·ï¼ä»¥ä¾¿å¨åå»ºååå§åapplicationcontextä¹åï¼æ¨å°æ¥æä¸ä¸ªå®å¨éç½®ä¸å¯æ§è¡çç³»ç»æåºç¨ç¨åºã\n\n\n\n\n# 1.2.1. åæ°æ®éç½®\n\nå¦ä¸å¾æç¤ºï¼spring iocå®¹å¨ä½¿ç¨ä¸ç§å½¢å¼çéç½®åæ°æ®ã æ­¤éç½®åæ°æ®è¡¨ç¤ºæ¨ä½ä¸ºåºç¨ç¨åºå¼åäººåå¦ä½åè¯springå®¹å¨å®ä¾åï¼éç½®åç»è£åºç¨ç¨åºä¸­çå¯¹è±¡ãä¼ ç»ä¸ï¼éç½®åæ°æ®ä»¥ç®åç´è§çxmlæ ¼å¼æä¾ï¼è¿æ¯æ¬ç« å¤§é¨åç¨æ¥ä¼ è¾¾spring iocå®¹å¨çå³é®æ¦å¿µååè½çæ ¼å¼ã\n\n> åºäºxmlçåæ°æ®ä¸æ¯éç½®åæ°æ®çå¯ä¸åè®¸å½¢å¼ã spring iocå®¹å¨æ¬èº«ä¸å®éåå¥æ­¤éç½®åæ°æ®çæ ¼å¼å®å¨è±é©ã å¦ä»ï¼è®¸å¤å¼åäººåä¸ºä»ä»¬çspringåºç¨ç¨åºéæ©åºäºjavaä»£ç çéç½®ã\n\n * åºäºæ³¨è§£çéç½®ï¼spring 2.5å¼å¥äºå¯¹åºäºæ³¨è§£çéç½®åæ°æ®çæ¯æã\n * åºäºjavaçéç½®ï¼ä»spring 3.0å¼å§ï¼spring javaconfigé¡¹ç®æä¾çè®¸å¤åè½æä¸ºæ ¸å¿spring frameworkçä¸é¨åã å æ­¤ï¼æ¨å¯ä»¥ä½¿ç¨javaèä¸æ¯xmlæä»¶æ¥å®ä¹åºç¨ç¨åºç±»å¤é¨çbeanã è¦ä½¿ç¨è¿äºæ°åè½ï¼è¯·åè§@ configurationï¼@beanï¼@importå@dependsonæ³¨è§£ã\n\nspringéç½®ç±å®¹å¨å¿é¡»ç®¡ççè³å°ä¸ä¸ªï¼éå¸¸æ¯ä¸ä¸ªä»¥ä¸ï¼beanå®ä¹ç»æã åºäºxmlçéç½®åæ°æ®å°è¿äºbeanéç½®ä¸ºé¡¶çº§<beans />åç´ åç<bean />åç´ ã javaéç½®éå¸¸å¨@configurationç±»ä¸­ä½¿ç¨@beanæ³¨éçæ¹æ³ã\n\nè¿äºbeanå®ä¹å¯¹åºäºç»æåºç¨ç¨åºçå®éå¯¹è±¡ã éå¸¸ï¼æ¨å®ä¹æå¡å±å¯¹è±¡ï¼æ°æ®è®¿é®å¯¹è±¡ï¼daoï¼ï¼è¡¨ç¤ºå¯¹è±¡ï¼ä¾å¦struts actionå®ä¾ï¼ï¼åºç¡ç»æå¯¹è±¡ï¼ä¾å¦hibernate sessionfactoriesï¼jmséåï¼ç­ç­ã éå¸¸ï¼ä¸ä¼å¨å®¹å¨ä¸­éç½®ç»ç²åº¦çåå¯¹è±¡ï¼å ä¸ºdaoåä¸å¡é»è¾éå¸¸è´è´£åå»ºåå è½½åå¯¹è±¡ã ä½æ¯ï¼æ¨å¯ä»¥ä½¿ç¨springä¸aspectjçéææ¥éç½®å¨iocå®¹å¨æ§å¶ä¹å¤åå»ºçå¯¹è±¡ã è¯·åéä½¿ç¨aspectjéè¿springä¾èµæ³¨å¥åå¯¹è±¡ã\n\nä»¥ä¸ç¤ºä¾æ¾ç¤ºäºåºäºxmlçéç½®åæ°æ®çåºæ¬ç»æï¼\n\n<?xml version="1.0" encoding="utf-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n    xmlns:xsi="http://www.w3.org/2001/xmlschema-instance"\n    xsi:schemalocation="http://www.springframework.org/schema/beans\n        https://www.springframework.org/schema/beans/spring-beans.xsd">\n\n    <bean id="..." class="...">  \n        \x3c!-- collaborators and configuration for this bean go here --\x3e\n    </bean>\n\n    <bean id="..." class="...">\n        \x3c!-- collaborators and configuration for this bean go here --\x3e\n    </bean>\n\n    \x3c!-- more bean definitions go here --\x3e\n\n</beans>\n\n\n * idå±æ§æ¯ä¸ä¸ªæ è¯åä¸ªbeanå®ä¹çå­ç¬¦ä¸²ãå®çå¼æä»£è¯¥å¯¹è±¡çå¼ç¨ã\n\n * classå±æ§å®ä¹beançç±»åå¹¶ä½¿ç¨å®å¨éå®åã\n\n\n# 1.2.2. å®¹å¨åå§å\n\næä¾ç»applicationcontextæé å½æ°çä¸ä¸ªæå¤ä¸ªä½ç½®è·¯å¾æ¯èµæºå­ç¬¦ä¸²ï¼è¿äºèµæºå­ç¬¦ä¸²ä½¿å®¹å¨å¯ä»¥ä»åç§å¤é¨èµæºï¼ä¾å¦æ¬å°æä»¶ç³»ç»ï¼java classpathç­ï¼å è½½éç½®åæ°æ®ã\n\napplicationcontext context = new classpathxmlapplicationcontext("services.xml", "daos.xml");\n\n\n<?xml version="1.0" encoding="utf-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n    xmlns:xsi="http://www.w3.org/2001/xmlschema-instance"\n    xsi:schemalocation="http://www.springframework.org/schema/beans\n        https://www.springframework.org/schema/beans/spring-beans.xsd">\n\n    \x3c!-- services --\x3e\n\n    <bean id="petstore" class="org.springframework.samples.jpetstore.services.petstoreserviceimpl">\n        <property name="accountdao" ref="accountdao"/>\n        <property name="itemdao" ref="itemdao"/>\n        \x3c!-- additional collaborators and configuration for this bean go here --\x3e\n    </bean>\n\n    \x3c!-- more bean definitions for services go here --\x3e\n\n</beans>\n\n\n<?xml version="1.0" encoding="utf-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n    xmlns:xsi="http://www.w3.org/2001/xmlschema-instance"\n    xsi:schemalocation="http://www.springframework.org/schema/beans\n        https://www.springframework.org/schema/beans/spring-beans.xsd">\n\n    <bean id="accountdao"\n        class="org.springframework.samples.jpetstore.dao.jpa.jpaaccountdao">\n        \x3c!-- additional collaborators and configuration for this bean go here --\x3e\n    </bean>\n\n    <bean id="itemdao" class="org.springframework.samples.jpetstore.dao.jpa.jpaitemdao">\n        \x3c!-- additional collaborators and configuration for this bean go here --\x3e\n    </bean>\n\n    \x3c!-- more bean definitions for data access objects go here --\x3e\n\n</beans>\n\n\nå¨åé¢çç¤ºä¾ä¸­ï¼æå¡å±ç±petstoreserviceimplç±»åä¸¤ä¸ªjpaaccountdaoåjpaitemdaoç±»åçæ°æ®è®¿é®å¯¹è±¡ç»æï¼åºäºjpaå¯¹è±¡å³ç³»æ å°æ åï¼ã å±æ§åç§°åç´ å¼ç¨javabeanå±æ§çåç§°ï¼èrefåç´ å¼ç¨å¦ä¸ä¸ªbeanå®ä¹çåç§°ã idårefåç´ ä¹é´çè¿ç§èç³»è¡¨è¾¾äºåä½å¯¹è±¡ä¹é´çä¾èµæ§ã\n\n# æé åºäºxmlçåæ°æ®\n\nä½¿beanå®ä¹è·¨è¶å¤ä¸ªxmlæä»¶å¯è½å¾æç¨ã éå¸¸ï¼æ¯ä¸ªåç¬çxmléç½®æä»¶é½ä»£è¡¨ä½ç³»ç»æä¸­çé»è¾å±ææ¨¡åãæ¨å¯ä»¥ä½¿ç¨åºç¨ç¨åºä¸ä¸ææé å½æ°ä»ææè¿äºxmlçæ®µä¸­å è½½beanå®ä¹ã å¦ä¸ä¸èä¸­æç¤ºï¼æ­¤æé å½æ°å·æå¤ä¸ªresourceä½ç½®ã æèï¼ä½¿ç¨<import />åç´ çä¸ä¸ªæå¤ä¸ªå®ä¾ä»å¦ä¸ä¸ªæä»¶å è½½beanå®ä¹ã ä»¥ä¸ç¤ºä¾æ¾ç¤ºäºå¦ä½æ§è¡æ­¤æä½ï¼\n\ncode\n\n<beans>\n    <import resource="services.xml"/>\n    <import resource="resources/messagesource.xml"/>\n    <import resource="/resources/themesource.xml"/>\n\n    <bean id="bean1" class="..."/>\n    <bean id="bean2" class="..."/>\n</beans>\n\n\nå¨åé¢çç¤ºä¾ä¸­ï¼å¤é¨beanå®ä¹æ¯ä»ä¸ä¸ªæä»¶å è½½çï¼services.xmlï¼messagesource.xmlåthemesource.xmlã ææä½ç½®è·¯å¾é½ç¸å¯¹äºæ§è¡å¯¼å¥çå®ä¹æä»¶ï¼å æ­¤ï¼services.xmlå¿é¡»ä¸æ§è¡å¯¼å¥çæä»¶ä½äºåä¸ç®å½æç±»è·¯å¾ä½ç½®ï¼èmessagesource.xmlåthemesource.xmlå¿é¡»ä½äºè¯¥ä½ç½®ä¸æ¹çèµæºä½ç½® ã å¦æ¨æè§ï¼ææ è¢«å¿½ç¥ã ä½æ¯ï¼é´äºè¿äºè·¯å¾æ¯ç¸å¯¹çï¼æå¥½ä¸è¦ä½¿ç¨ä»»ä½æçº¿ã æ ¹æ®spring schemaï¼å¯¼å¥çæä»¶çåå®¹ï¼åæ¬é¡¶çº§<beans />åç´ ï¼å¿é¡»æ¯ææçxml beanå®ä¹ã\n\n> å¯ä»¥ä½ä¸å»ºè®®ä½¿ç¨ç¸å¯¹è·¯å¾â ../âå¼ç¨ç¶ç®å½ä¸­çæä»¶ã è¿æ ·åä¼åå»ºå¯¹å½ååºç¨ç¨åºå¤é¨æä»¶çä¾èµã ç¹å«æ¯ï¼ä¸å»ºè®®å¯¹classpathï¼urlï¼ä¾å¦ï¼classpathï¼../ services.xmlï¼ä½¿ç¨æ­¤å¼ç¨ï¼å¨urlä¸­ï¼è¿è¡æ¶è§£æè¿ç¨ä¼éæ©âæè¿âçclasspathæ ¹ç®å½ï¼ç¶åæ¥çå¶ç¶ç®å½ã ç±»è·¯å¾éç½®çæ´æ¹å¯è½å¯¼è´éæ©å¶ä»éè¯¯çç®å½ãæ¨å§ç»å¯ä»¥ä½¿ç¨ç»å¯¹èµæºè·¯å¾èä¸æ¯ç¸å¯¹è·¯å¾ï¼ä¾å¦ï¼fileï¼cï¼/config/services.xmlæclasspathï¼/config/services.xmlã ä½æ¯è¯·æ³¨æï¼æ¨æ­£å¨å°åºç¨ç¨åºçéç½®è¦åå°ç¹å®çç»å¯¹è·¯å¾ã éå¸¸ï¼æå¥½ä¸ºè¿æ ·çç»å¯¹è·¯å¾ä¿çä¸ä¸ªé´æ¥å¯»åï¼ä¾å¦ï¼éè¿å¨è¿è¡æ¶éå¯¹jvmç³»ç»å±æ§è§£æçâ $ {â¦}âå ä½ç¬¦ã\n\nå½åç©ºé´æ¬èº«æä¾äºimportæä»¤ç¹æ§ãé¤äºæ®ébeanå®ä¹ä¹å¤ï¼springæä¾çxmlåç§°ç©ºé´çéæ©ä¸­è¿æå¶ä»éç½®ç¹æ§ï¼ä¾å¦contextåutilå½åç©ºé´ã\n\n# the groovy bean definition dsl(é¢åç¹å®è¯­è¨)\n\nä½ä¸ºå¤é¨åéç½®åæ°æ®çå¦ä¸ä¸ªç¤ºä¾ï¼beanå®ä¹ä¹å¯ä»¥å¨springçgroovy beanå®ä¹dslä¸­è¡¨è¾¾ï¼å¦grailsæ¡æ¶æç¤ºã éå¸¸ï¼è¿ç§éç½®ä½äºâ .groovyâæä»¶ä¸­ï¼å¶ç»æå¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\nbeans {\n    datasource(basicdatasource) {\n        driverclassname = "org.hsqldb.jdbcdriver"\n        url = "jdbc:hsqldb:mem:grailsdb"\n        username = "sa"\n        password = ""\n        settings = [mynew:"setting"]\n    }\n    sessionfactory(sessionfactory) {\n        datasource = datasource\n    }\n    myservice(myservice) {\n        nestedbean = { anotherbean bean ->\n            datasource = datasource\n        }\n    }\n}\n\n\nè¿ç§éç½®æ ·å¼å¨å¾å¤§ç¨åº¦ä¸ç­åäºxml beanå®ä¹ï¼çè³æ¯æspringçxmléç½®åç§°ç©ºé´ã å®è¿åè®¸éè¿importbeansæä»¤å¯¼å¥xml beanå®ä¹æä»¶ã\n\n\n# 1.2.3. ä½¿ç¨å®¹å¨\n\napplicationcontextæ¯é«çº§çå·¥åæ¥å£ï¼è¯¥å·¥åè½å¤ç»´æ¤ä¸åbeanåå¶ä¾èµå³ç³»çæ³¨åè¡¨ã éè¿ä½¿ç¨æ¹æ³t getbean(string nameï¼class <t> requiredtype)ï¼å¯ä»¥æ£ç´¢beançå®ä¾ã\n\n// create and configure beans\napplicationcontext context = new classpathxmlapplicationcontext("services.xml", "daos.xml");\n\n// retrieve configured instance\npetstoreservice service = context.getbean("petstore", petstoreservice.class);\n\n// use configured instance\nlist<string> userlist = service.getusernamelist();\n\n\nå¨groovyéç½®ä¸­ï¼ä½¿ç¨çèµ·æ¥éå¸¸ç¸ä¼¼ãå®æä¸ä¸ªä¸åçä¸ä¸æå®ç°ç±»ï¼è¯¥ç±»æ¯ægroovy(ä½ä¹çè§£xml beanå®ä¹)ãä¸é¢çç¤ºä¾æ¾ç¤ºäºgroovyéç½®\n\napplicationcontext context = new genericgroovyapplicationcontext("services.groovy", "daos.groovy");\n\n\næçµæ´»çåä½æ¯ç»åreaderå§æä½¿ç¨çgenericapplicationcontextï¼ä¾å¦ï¼ä½¿ç¨xmlæä»¶çxmlbeandefinitionreaderï¼å¦ä¸é¢çç¤ºä¾æç¤º\n\ngenericapplicationcontext context = new genericapplicationcontext();\nnew xmlbeandefinitionreader(context).loadbeandefinitions("services.xml", "daos.xml");\ncontext.refresh();\n\n\nè¿å¯ä»¥ä¸ºgroovyæä»¶ä½¿ç¨groovybeandefinitionreaderï¼å¦ä¸é¢çç¤ºä¾æç¤º\n\ngenericapplicationcontext context = new genericapplicationcontext();\nnew groovybeandefinitionreader(context).loadbeandefinitions("services.groovy", "daos.groovy");\ncontext.refresh();\n\n\næ¨å¯ä»¥å¨ç¸åçapplicationcontextä¸æ··ååå¹éè¿æ ·çè¯»åå¨å§æ´¾ï¼ä»ä¸åçéç½®æºè¯»åbeanå®ä¹.\n\nç¶åå¯ä»¥ä½¿ç¨getbeanæ£ç´¢beançå®ä¾ã applicationcontextæ¥å£è¿æå¶ä»å ç§æ£ç´¢beançæ¹æ³ï¼ä½æ¯çæ³æåµä¸ï¼æ¨çåºç¨ç¨åºä»£ç æ°¸è¿ä¸è¦ä½¿ç¨å®ä»¬ã å®éä¸ï¼æ¨çåºç¨ç¨åºä»£ç åºè¯¥æ ¹æ¬ä¸è°ç¨getbeanï¼ï¼æ¹æ³ï¼å æ­¤å®å¨ä¸ä¾èµäºspring apiã ä¾å¦ï¼springä¸webæ¡æ¶çéæä¸ºåç§webæ¡æ¶ç»ä»¶ï¼ä¾å¦æ§å¶å¨åjsfç®¡ççbeanï¼æä¾äºä¾èµé¡¹æ³¨å¥ï¼ä½¿æ¨å¯ä»¥éè¿åæ°æ®ï¼ä¾å¦èªå¨è£éæ³¨éï¼å£°æå¯¹ç¹å®beançä¾èµé¡¹ã\n\n\n# 1.3. beanä»ç»\n\nå¨å®¹å¨æ¬èº«åï¼beanå®ä¹è¡¨ç¤ºä¸ºbeandefinitionå¯¹è±¡ï¼å¶ä¸­åå«ï¼é¤å¶ä»ä¿¡æ¯å¤ï¼ä»¥ä¸åæ°æ®ï¼\n\n * åéå®çç±»åï¼éå¸¸ï¼å®ä¹äºbeançå®éå®ç°ç±»ã\n\n * beanè¡ä¸ºéç½®åç´ ï¼ç¨äºå£°æbeanå¨å®¹å¨ä¸­çè¡ä¸ºï¼ä½ç¨åï¼çå½å¨æåè°ç­ï¼ã\n\n * å¼ç¨è¯¥beanå®æå¶å·¥ä½æéçå¶ä»beanã è¿äºå¼ç¨ä¹ç§°ä¸ºåä½èæä¾èµé¡¹ã\n\n * è¦å¨æ°åå»ºçå¯¹è±¡ä¸­è®¾ç½®çå¶ä»éç½®è®¾ç½®ï¼ä¾å¦ï¼æ± çå¤§å°éå¶æå¨ç®¡çè¿æ¥æ± çbeanä¸­è¦ä½¿ç¨çè¿æ¥æ°ã\n\nè¯¥åæ°æ®è½¬æ¢ä¸ºä¸ç»ç»ææ¯ä¸ªbeanå®ä¹çå±æ§ãä¸è¡¨æè¿°äºè¿äºå±æ§\n\nproperty                   explained inâ¦\nclass                      instantiating beans\nname                       naming beans\nscope                      bean scopes\nconstructor arguments      dependency injection\nproperties                 dependency injection\nautowiring mode            autowiring collaborators\nlazy initialization mode   lazy-initialized beans\ninitialization method      initialization callbacks\ndestruction method         destruction callbacks\n\né¤äºåå«æå³å¦ä½åå»ºç¹å®beançä¿¡æ¯çbeanå®ä¹ä¹å¤ï¼applicationcontextå®ç°è¿åè®¸æ³¨åå¨å®¹å¨å¤é¨ï¼ç±ç¨æ·ï¼åå»ºçç°æå¯¹è±¡ã è¿æ¯éè¿éè¿getbeanfactoryï¼ï¼æ¹æ³è®¿é®applicationcontextçbeanfactoryæ¥å®æçï¼è¯¥æ¹æ³è¿åbeanfactory defaultlistablebeanfactoryå®ç°ã defaultlistablebeanfactoryéè¿registersingletonï¼..ï¼åregisterbeandefinitionï¼..ï¼æ¹æ³æ¯ææ­¤æ³¨åã ä½æ¯ï¼å¸åçåºç¨ç¨åºåªè½ä¸éè¿å¸¸è§beanå®ä¹åæ°æ®å®ä¹çbeanä¸èµ·ä½¿ç¨ã\n\n> beanåæ°æ®åæå¨æä¾çåä¾å®ä¾éè¦å°½æ©æ³¨åï¼ä»¥ä¾¿å®¹å¨å¨èªå¨è£éåå¶ä»èªçæ­¥éª¤æé´æ­£ç¡®å°å¤æ­å®ä»¬ãè½ç¶å¨æç§ç¨åº¦ä¸æ¯æè¦çç°æåæ°æ®åç°æçåä¾å®ä¾ï¼ä½å¨è¿è¡æ¶æ³¨åæ°bean(ä¸å¯¹å·¥åçå®æ¶è®¿é®å¹¶å)ä¸åå®æ¹æ¯æï¼å¯è½ä¼å¯¼è´å¹¶åè®¿é®å¼å¸¸ãbeanå®¹å¨ä¸­çä¸ä¸è´ç¶æï¼æèä¸¤èé½æã\n\n\n# 1.3.1. beanså½å\n\næ¯ä¸ªbeanå·æä¸ä¸ªæå¤ä¸ªæ è¯ç¬¦ã è¿äºæ è¯ç¬¦å¨æ¿è½½beançå®¹å¨åå¿é¡»å¯ä¸ã ä¸ä¸ªbeanéå¸¸åªæä¸ä¸ªæ è¯ç¬¦ã ä½æ¯ï¼å¦æéè¦å¤ä¸ªï¼åå¯ä»¥å°å¤ä½çå«åè§ä¸ºå«åã\n\nå¨åºäºxmlçéç½®åæ°æ®ä¸­ï¼å¯ä»¥ä½¿ç¨idå±æ§å/ænameå±æ§æ¥æå®beanæ è¯ç¬¦ã idå±æ§å¯è®©æ¨ç²¾ç¡®æå®ä¸ä¸ªidã æç§æ¯ä¾ï¼è¿äºåç§°æ¯å­æ¯æ°å­ï¼â mybeanâï¼â someserviceâç­ï¼ï¼ä½å®ä»¬ä¹å¯ä»¥åå«ç¹æ®å­ç¬¦ã å¦æè¦ä¸ºbeanå¼å¥å¶ä»å«åï¼è¿å¯ä»¥å¨nameå±æ§ä¸­æå®å®ä»¬ï¼å¹¶ç¨éå·ï¼ï¼ï¼ï¼åå·ï¼;ï¼æç©ºæ ¼åéã ä½ä¸ºåå²è®°å½ï¼å¨spring 3.1ä¹åççæ¬ä¸­ï¼idå±æ§å®ä¹ä¸ºxsdï¼idç±»åï¼è¯¥ç±»åéå¶äºå¯è½çå­ç¬¦ã ä»3.1å¼å§ï¼å®è¢«å®ä¹ä¸ºxsdï¼stringç±»åã è¯·æ³¨æï¼bean idå¯ä¸æ§ä»ç±å®¹å¨å¼ºå¶æ§è¡ï¼å°½ç®¡ä¸åç±xmlè§£æå¨æ§è¡ã\n\næ¨ä¸éè¦æä¾beançåç§°æidã å¦ææªæç¡®æä¾åç§°æidï¼åå®¹å¨å°ä¸ºè¯¥beançæä¸ä¸ªå¯ä¸çåç§°ã ä½æ¯ï¼å¦æè¦æåç§°å¼ç¨è¯¥beanï¼åéè¿ä½¿ç¨refåç´ ææå¡å®ä½å¨æ ·å¼æ¥æ¾ï¼å¿é¡»æä¾ä¸ä¸ªåç§°ã ä¸æä¾åç§°çå¨æºä¸ä½¿ç¨åé¨beanåèªå¨è£éåä½ç±»æå³ã\n\n> çº¦å®æ¯å¨å½åbeanæ¶ä½¿ç¨æ åjavaçº¦å®æ¥å½åå®ä¾å­æ®µåãä¹å°±æ¯è¯´ï¼beanåç§°ä»¥å°åå­æ¯å¼å¤´ï¼å¹¶ä»é£ééç¨é©¼å³°æ ¼å¼ãè¿äºåç§°çä¾å­åæ¬accountmanagerãaccountserviceãuserdaoãlogincontrollerç­ç­ãä¸è´å°å½åbeanå¯ä»¥ä½¿éç½®æ´æäºéè¯»åçè§£ãå¦å¤ï¼å¦ææ¨ä½¿ç¨spring aopï¼å¨å°éç¥(advice)åºç¨å°ä¸ç»ä¸åç§°ç¸å³çbeanæ¶ï¼å®ä¼å¾æç¨ã\n> \n> éè¿å¨ç±»è·¯å¾ä¸­è¿è¡ç»ä»¶æ«æï¼springä¼æç§åé¢æè¿°çè§åä¸ºæªå½åçç»ä»¶çæbeanåç§°ï¼æ¬è´¨ä¸ï¼éç¨ç®åçç±»åç§°å¹¶å°å¶åå§å­ç¬¦è½¬æ¢ä¸ºå°åã ä½æ¯ï¼å¨ç¹æ®æåµä¸ï¼å¦ææå¤ä¸ªå­ç¬¦å¹¶ä¸ç¬¬ä¸ä¸ªåç¬¬äºä¸ªå­ç¬¦åä¸ºå¤§åå­æ¯ï¼åä¼ä¿çåå§å¤§å°åã è¿äºè§åä¸java.beans.introspector.decapitalizeï¼springä½¿ç¨çï¼å®ä¹çè§åç¸åã\n\n# beanå«å\n\nå¨beanå®ä¹æ¬èº«ä¸­ï¼å¯ä»¥ä½¿ç¨ç±idå±æ§æå®çæå¤ä¸ä¸ªåç§°ånameå±æ§ä¸­ä»»ææ°éçå¶ä»åç§°çç»åï¼ä¸ºbeanæä¾å¤ä¸ªåç§°ã è¿äºåç§°å¯ä»¥æ¯åä¸ä¸ªbeançç­æå«åï¼å¹¶ä¸å¨æäºæåµä¸å¾æç¨ï¼ä¾å¦ï¼éè¿ä½¿ç¨ç¹å®äºè¯¥ç»ä»¶æ¬èº«çbeanåç§°ï¼è®©åºç¨ç¨åºä¸­çæ¯ä¸ªç»ä»¶é½å¼ç¨ä¸ä¸ªå¬å±ä¾èµé¡¹ã\n\nä½æ¯ï¼å¨å®éå®ä¹beançå°æ¹æå®ææå«åå¹¶ä¸å¤ã ææ¶éè¦ä¸ºå¨å«å¤å®ä¹çbeanå¼å¥å«åã è¿å¨å¤§åç³»ç»ä¸­éå¸¸æ¯è¿ç§æåµï¼å¨å¤§åç³»ç»ä¸­ï¼éç½®å¨æ¯ä¸ªå­ç³»ç»ä¹é´åéï¼æ¯ä¸ªå­ç³»ç»é½æèªå·±çå¯¹è±¡å®ä¹éã å¨åºäºxmlçéç½®åæ°æ®ä¸­ï¼å¯ä»¥ä½¿ç¨<alias />åç´ æ¥å®ææ­¤æä½ã ä»¥ä¸ç¤ºä¾æ¾ç¤ºäºå¦ä½æ§è¡æ­¤æä½ï¼\n\n<alias name="fromname" alias="toname"/>\n\n\nä¾å¦ï¼å­ç³»ç»açéç½®åæ°æ®å¯ä»¥éè¿subsystema-datasourceçåç§°å¼ç¨æ°æ®æºã å­ç³»ç»bçéç½®åæ°æ®å¯ä»¥éè¿subsystemb-datasourceçåç§°å¼ç¨æ°æ®æºã ç»æä½¿ç¨è¿ä¸¤ä¸ªå­ç³»ç»çä¸»åºç¨ç¨åºæ¶ï¼ä¸»åºç¨ç¨åºéè¿myapp-datasourceçåç§°å¼ç¨æ°æ®æºã è¦ä½¿ææä¸ä¸ªåç§°é½å¼ç¨ç¸åçå¯¹è±¡ï¼å¯ä»¥å°ä»¥ä¸å«åå®ä¹æ·»å å°éç½®åæ°æ®ä¸­ï¼\n\n<alias name="myapp-datasource" alias="subsystema-datasource"/>\n<alias name="myapp-datasource" alias="subsystemb-datasource"/>\n\n\nç°å¨ï¼æ¯ä¸ªç»ä»¶åä¸»åºç¨ç¨åºé½å¯ä»¥éè¿å¯ä¸çåç§°å¼ç¨æ°æ®æºï¼å¹¶ä¸ä¿è¯ä¸ä¼ä¸ä»»ä½å¶ä»å®ä¹(ææå°åå»ºä¸ä¸ªåç§°ç©ºé´)å²çªï¼ä½å®ä»¬å¼ç¨çæ¯åä¸ä¸ªbeanã\n\n> å¦æä½¿ç¨javaconfigurationï¼å@beanæ³¨è§£å¯ç¨äºæä¾å«åã\n\n\n# 1.3.2. å®ä¾åbeans\n\nbeanå®ä¹æ¬è´¨ä¸æ¯åå»ºä¸ä¸ªæå¤ä¸ªå¯¹è±¡çæ¹æ³ãå½è¢«è¯·æ±æ¶ï¼å®¹å¨æ¥çæå®beançæ¹æ³ï¼å¹¶ä½¿ç¨è¯¥beanå®ä¹å°è£çéç½®åæ°æ®åå»º(æè·å)å®éå¯¹è±¡ã\n\nå¦æä½¿ç¨åºäºxmlçéç½®åæ°æ®ï¼åå¨<bean />åç´ çclasså±æ§ä¸­æå®è¦å®ä¾åçå¯¹è±¡çç±»åï¼æç±»ï¼ã è¿ä¸ªç±»å±æ§ï¼å¨åé¨æ¯beandefinitionå®ä¾çclasså±æ§ï¼éå¸¸æ¯å¿éçã ï¼å¯ä»¥éè¿ä»¥ä¸ä¸¤ç§æ¹å¼ä¹ä¸ä½¿ç¨classå±æ§ï¼\n\n * éå¸¸ï¼å¨å®¹å¨æ¬èº«éè¿åå°æ§å°è°ç¨å¶æé å½æ°ç´æ¥åå»ºbeançæåµä¸ï¼æå®è¦æé çbeanç±»ï¼è¿å¨æç§ç¨åº¦ä¸ç­åäºä½¿ç¨newè¿ç®ç¬¦çjavaä»£ç ã\n\n * è¦æå®åå«ç¨äºåå»ºå¯¹è±¡çéæå·¥åæ¹æ³çå®éç±»ï¼å¨ä¸å¤ªå¸¸è§çæåµä¸ï¼å®¹å¨å°å¨ç±»ä¸è°ç¨éæå·¥åæ¹æ³ä»¥åå»ºbeanã ä»éæå·¥åæ¹æ³çè°ç¨è¿åçå¯¹è±¡ç±»åå¯ä»¥æ¯åä¸ç±»ï¼ä¹å¯ä»¥æ¯å®å¨ä¸åçå¦ä¸ç±»ã\n\n> å¦æè¦ä¸ºéæåé¨ç±»éç½®beanå®ä¹ï¼åå¿é¡»ä½¿ç¨åé¨ç±»çäºè¿å¶åç§°ãä¾å¦ï¼å¦ææ¨å¨com.exampleåä¸­æä¸ä¸ªåä¸ºsomethingçç±»ï¼å¹¶ä¸æ­¤somethingç±»å·æä¸ä¸ªåä¸ºotherthingçéæåé¨ç±»ï¼åbeanå®ä¹ä¸çclasså±æ§çå¼ä¸ºcom.example.something $ otherthingãè¯·æ³¨æï¼åç§°ä¸­ä½¿ç¨$å­ç¬¦å°åé¨ç±»çç±»åä¸å¤é¨ç±»ååå¼ã\n\n# æé å¨å®ä¾å\n\nå½éè¿æé æ¹æ³åå»ºä¸ä¸ªbeanæ¶ï¼æææ®éç±»é½å¯ä»¥è¢«springä½¿ç¨å¹¶å¼å®¹ã ä¹å°±æ¯è¯´ï¼æ­£å¨å¼åçç±»ä¸éè¦å®ç°ä»»ä½ç¹å®çæ¥å£æä»¥ç¹å®çæ¹å¼è¿è¡ç¼ç ã åªéæå®beanç±»å°±è¶³å¤äºã ä½æ¯ï¼æ ¹æ®æ¨ç¨äºè¯¥ç¹å®beançiocçç±»åï¼æ¨å¯è½éè¦ä¸ä¸ªé»è®¤ï¼ç©ºï¼æé å½æ°ã\n\nspring iocå®¹å¨å ä¹å¯ä»¥ç®¡çæ¨è¦ç®¡ççä»»ä½ç±»ã å®ä¸ä»éäºç®¡ççæ­£çjavabeanã å¤§å¤æ°springç¨æ·æ´åæ¬¢å®éçjavabeanï¼å®ä»å·æé»è®¤ï¼æ åæ°ï¼æé å½æ°ï¼å¹¶å·ææ ¹æ®å®¹å¨ä¸­çå±æ§æé çéå½setterågetterã æ¨è¿å¯ä»¥å¨å®¹å¨ä¸­å·ææ´å¤ébeanè§èçç±»ã ä¾å¦ï¼å¦ææ¨éè¦ä½¿ç¨ç»å¯¹ä¸ç¬¦åjavabeanè§èçæ§å¼è¿æ¥æ± ï¼åspringä¹å¯ä»¥å¯¹å¶è¿è¡ç®¡çã\n\n# éæå·¥åå®ä¾å\n\nå®ä¹ä½¿ç¨éæå·¥åæ¹æ³åå»ºçbeanæ¶ï¼è¯·ä½¿ç¨classå±æ§æå®åå«éæå·¥åæ¹æ³çç±»ï¼å¹¶ä½¿ç¨åä¸ºfactory-methodçå±æ§æå®å·¥åæ¹æ³æ¬èº«çåç§°ã æ¨åºè¯¥è½å¤è°ç¨æ­¤æ¹æ³ï¼ä½¿ç¨å¯éåæ°ï¼å¦ç¨åæè¿°ï¼å¹¶è¿åä¸ä¸ªæ´»å¨å¯¹è±¡ï¼è¯¥å¯¹è±¡éåå°è¢«è§ä¸ºå·²éè¿æé å½æ°åå»ºã è¿ç§beanå®ä¹çä¸ç§ç¨æ³æ¯å¨æ§çä»£ç ä¸­è°ç¨éæå·¥åã\n\nä»¥ä¸beanå®ä¹æå®éè¿è°ç¨å·¥åæ¹æ³æ¥åå»ºbeanã è¯¥å®ä¹ä¸æå®è¿åå¯¹è±¡çç±»åï¼ç±»ï¼ï¼èä»æå®åå«å·¥åæ¹æ³çç±»ã å¨æ­¤ç¤ºä¾ä¸­ï¼createinstanceï¼ï¼æ¹æ³å¿é¡»æ¯éææ¹æ³ã ä»¥ä¸ç¤ºä¾æ¾ç¤ºå¦ä½æå®å·¥åæ¹æ³ï¼\n\n<bean id="clientservice"\n    class="examples.clientservice"\n    factory-method="createinstance"/>\n\n\nä»¥ä¸ç¤ºä¾æ¾ç¤ºäºå¯ä¸åé¢çbeanå®ä¹ä¸èµ·ä½¿ç¨çç±»ï¼\n\npublic class clientservice {\n    private static clientservice clientservice = new clientservice();\n    private clientservice() {}\n\n    public static clientservice createinstance() {\n        return clientservice;\n    }\n}\n\n\n# å®ä¾å·¥åå®ä¾å\n\nç±»ä¼¼äºéè¿éæå·¥åæ¹æ³è¿è¡å®ä¾åï¼ä½¿ç¨å®ä¾å·¥åæ¹æ³è¿è¡å®ä¾åä¼ä»å®¹å¨ä¸­è°ç¨ç°æbeançééææ¹æ³æ¥åå»ºæ°beanã è¦ä½¿ç¨æ­¤æºå¶ï¼è¯·å°classå±æ§ä¿çä¸ºç©ºï¼å¹¶å¨factory-beanå±æ§ä¸­ï¼å¨å½åï¼æç¥åï¼å®¹å¨ä¸­æå®åå«è¦åå»ºè¯¥å¯¹è±¡çå®ä¾æ¹æ³çbeançåç§°ã ä½¿ç¨factory-methodå±æ§è®¾ç½®å·¥åæ¹æ³æ¬èº«çåç§°ã ä»¥ä¸ç¤ºä¾æ¾ç¤ºäºå¦ä½éç½®æ­¤ç±»beanï¼\n\n\x3c!-- the factory bean, which contains a method called createinstance() --\x3e\n<bean id="servicelocator" class="examples.defaultservicelocator">\n    \x3c!-- inject any dependencies required by this locator bean --\x3e\n</bean>\n\n\x3c!-- the bean to be created via the factory bean --\x3e\n<bean id="clientservice"\n    factory-bean="servicelocator"\n    factory-method="createclientserviceinstance"/>\n\n\npublic class defaultservicelocator {\n\n    private static clientservice clientservice = new clientserviceimpl();\n\n    public clientservice createclientserviceinstance() {\n        return clientservice;\n    }\n}\n\n\nä¸ä¸ªå·¥åç±»ä¹å¯ä»¥åå«ä¸ä¸ªä»¥ä¸çå·¥åæ¹æ³ï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\n<bean id="servicelocator" class="examples.defaultservicelocator">\n    \x3c!-- inject any dependencies required by this locator bean --\x3e\n</bean>\n\n<bean id="clientservice"\n    factory-bean="servicelocator"\n    factory-method="createclientserviceinstance"/>\n\n<bean id="accountservice"\n    factory-bean="servicelocator"\n    factory-method="createaccountserviceinstance"/>\n\n\npublic class defaultservicelocator {\n\n    private static clientservice clientservice = new clientserviceimpl();\n\n    private static accountservice accountservice = new accountserviceimpl();\n\n    public clientservice createclientserviceinstance() {\n        return clientservice;\n    }\n\n    public accountservice createaccountserviceinstance() {\n        return accountservice;\n    }\n}\n\n\nè¿ç§æ¹æ³è¡¨æï¼å·¥åbeanæ¬èº«å¯ä»¥éè¿ä¾èµé¡¹æ³¨å¥ï¼diï¼è¿è¡ç®¡çåéç½®ã\n\n> å¨springææ¡£ä¸­ï¼â factory beanâæ¯æå¨springå®¹å¨ä¸­éç½®å¹¶éè¿å®ä¾æéæå·¥åæ¹æ³åå»ºå¯¹è±¡çbeanã ç¸æ¯ä¹ä¸ï¼factorybeanï¼æ³¨æå¤§å°åï¼æ¯æç¹å®äºspringçfactorybeanå®ç°ç±»ã\n\n# ç¡®å®beançè¿è¡æ¶ç±»å\n\nç¡®å®ç¹å®beançè¿è¡æ¶ç±»åå¹¶éæäºã beanåæ°æ®å®ä¹ä¸­çæå®ç±»åªæ¯åå§ç±»å¼ç¨ï¼å¯è½ä¸å£°æçå·¥åæ¹æ³ç»åä½¿ç¨ï¼æèæ¯factorybeanç±»ï¼è¿å¯è½å¯¼è´beançè¿è¡æ¶ç±»åä¸åï¼æèå¨å®ä¾çº§å·¥åæ¹æ³ï¼éè¿æå®çfactory-beanåç§°è§£æï¼çæåµä¸å®å¨ä¸è¿è¡è®¾ç½® ã æ­¤å¤ï¼aopä»£çå¯ä»¥ä½¿ç¨åºäºæ¥å£çä»£çåè£beanå®ä¾ï¼èç®æ beançå®éç±»åï¼ä»æ¯å¶å®ç°çæ¥å£ï¼çæ´é²ç¨åº¦æéã\n\næ¾åºç¹å®beançå®éè¿è¡æ¶ç±»åçæ¨èæ¹æ³æ¯å¯¹æå®beanåç§°çbeanfactory.gettypeè°ç¨ã è¿èèäºä¸è¿°æææåµï¼å¹¶è¿åäºéå¯¹ç¸åbeanåç§°çbeanfactory.getbeanè°ç¨å°è¿åçå¯¹è±¡çç±»åã\n\n\n# 1.4. ä¾èµdependencies\n\nå¸åçä¼ä¸åºç¨ç¨åºä¸åå«åä¸ªå¯¹è±¡(æspringæ¯è¯­ä¸­çbean)ãå³ä½¿æ¯æç®åçåºç¨ç¨åºä¹æå ä¸ªå¯¹è±¡ä¸èµ·å·¥ä½ï¼ä»¥è¡¨ç¤ºæç»ç¨æ·è®¤ä¸ºä¸è´çåºç¨ç¨åºãä¸ä¸èå°è§£éå¦ä½ä»å®ä¹å¤§éç¬ç«çbeanå®ä¹è¿æ¸¡å°ä¸ä¸ªå®å¨å®ç°çåºç¨ç¨åºï¼å¨è¯¥åºç¨ç¨åºä¸­ï¼å¯¹è±¡ç¸äºåä½ä»¥å®ç°ç®æ ã\n\n\n# 1.4.1. ä¾èµæ³¨å¥\n\nä¾èµæ³¨å¥ï¼diï¼æ¯ä¸ä¸ªè¿ç¨ï¼å¨è¿ä¸ªè¿ç¨ä¸­ï¼å¯¹è±¡ä»éè¿æé å½æ°åæ°ãå·¥åæ¹æ³çåæ°ï¼æèå¨å¯¹è±¡å®ä¾è¢«æé æä»å·¥åæ¹æ³è¿ååè®¾ç½®çå±æ§æ¥å®ä¹å®ä»¬çä¾èµé¡¹(å³ä¸å®ä»¬ä¸èµ·å·¥ä½çå¶ä»å¯¹è±¡)ã ç¶åï¼å®¹å¨å¨åå»ºbeanæ¶æ³¨å¥é£äºä¾èµé¡¹ã ä»æ ¹æ¬ä¸è®²ï¼æ­¤è¿ç¨æ¯éè¿ä½¿ç¨ç±»çç´æ¥æé ææå¡å®ä½å¨æ¨¡å¼æ¥æ§å¶beanèªèº«ä¾èµçå®ä¾æä½ç½®çbeanåå»ºçéè¿ç¨ï¼å æ­¤ç§°ä¸ºcontrol inversion-æ§å¶åè½¬ï¼\n\nä½¿ç¨diåååï¼ä»£ç æ´å æ¸æ°ï¼å½æä¾å¯¹è±¡çä¾èµå³ç³»æ¶ï¼è§£è¦ä¼æ´å ææãå¯¹è±¡ä¸æ¥æ¾å®çä¾èµé¡¹ï¼ä¹ä¸ç¥éä¾èµé¡¹çä½ç½®æç±»ãå æ­¤ï¼æ¨çç±»åå¾æ´å®¹ææµè¯ï¼ç¹å«æ¯å½ä¾èµå³ç³»å¨æ¥å£ææ½è±¡åºç±»ä¸æ¶ï¼è¿äºä¾èµå³ç³»åè®¸å¨ååæµè¯ä¸­ä½¿ç¨stubæmock å®ç°ã\n\nä¾èµæ³¨å¥æä¸¤ç§ä¸»è¦çåä½:åºäºæé å½æ°çä¾èµæ³¨å¥ååºäºsetterçä¾èµæ³¨å¥ã\n\n# æé å¨æ³¨å¥\n\nåºäºæé å½æ°çdiæ¯éè¿å®¹å¨è°ç¨å·æå¤ä¸ªåæ°çæé å½æ°æ¥å®æçï¼æ¯ä¸ªåæ°è¡¨ç¤ºä¸ä¸ªä¾èµé¡¹ã è°ç¨å¸¦æç¹å®åæ°çéæå·¥åæ¹æ³æ¥æé beanå ä¹æ¯ç­æçï¼å¹¶ä¸æ¬æ¬¡è®¨è®ºå°æé å½æ°åéæå·¥åæ¹æ³çåæ°è§ä¸ºç±»ä¼¼ã ä»¥ä¸ç¤ºä¾æ¾ç¤ºäºåªè½éè¿æé å½æ°æ³¨å¥è¿è¡ä¾èµé¡¹æ³¨å¥çç±»ï¼\n\npublic class simplemovielister {\n\n    // the simplemovielister has a dependency on a moviefinder\n    private moviefinder moviefinder;\n\n    // a constructor so that the spring container can inject a moviefinder\n    public simplemovielister(moviefinder moviefinder) {\n        this.moviefinder = moviefinder;\n    }\n\t/*è¿éçmoviefinderéç±iocå®¹å¨ç®¡çï¼è¥æå¤ä¸ªæé å¨çè¯ï¼éè¦æ³¨ææ¯å¦æ­£ç¡®ä½¿ç¨ï¼å¯åè\n      https://blog.csdn.net/qq_41737716/article/details/85596817*/\n    // business logic that actually uses the injected moviefinder is omitted...\n}\n\n\næ³¨æï¼è¯¥ç±»æ²¡æä»ä¹ç¹å«çã å®æ¯ä¸ä¸ªpojoï¼ä¸ä¾èµäºç¹å®äºå®¹å¨çæ¥å£ï¼åºç±»ææ³¨è§£ã\n\næé å¨åæ°è§£æ\n\næé å½æ°åæ°è§£æå¹ééè¿ä½¿ç¨åæ°çç±»åè¿è¡ã å¦æbeanå®ä¹çæé å½æ°åæ°ä¸­æ²¡ææ½å¨çæ­§ä¹ï¼åå¨å®ä¾åbeanæ¶ï¼å¨beanå®ä¹ä¸­å®ä¹æé å½æ°åæ°çé¡ºåºå°±æ¯å°è¿äºåæ°æä¾ç»éå½çæé å½æ°çé¡ºåºã èèä»¥ä¸ç±»ï¼\n\npackage x.y;\n\npublic class thingone {\n\n    public thingone(thingtwo thingtwo, thingthree thingthree) {\n        // ...\n    }\n}\n\n\nåè®¾thingtwoåthingthreeç±»æ²¡æéè¿ç»§æ¿å³èï¼åä¸å­å¨æ½å¨çæ­§ä¹ã å æ­¤ï¼ä»¥ä¸éç½®å¯ä»¥æ­£å¸¸è¿è¡ï¼å¹¶ä¸æ¨æ éå¨<constructor-arg />åç´ ä¸­æ¾å¼æå®æé å½æ°åæ°ç´¢å¼æç±»åã\n\n<beans>\n    <bean id="beanone" class="x.y.thingone">\n        <constructor-arg ref="beantwo"/>\n        <constructor-arg ref="beanthree"/>\n    </bean>\n\n    <bean id="beantwo" class="x.y.thingtwo"/>\n\n    <bean id="beanthree" class="x.y.thingthree"/>\n</beans>\n\n\nå½å¼ç¨å¦ä¸ä¸ªbeanæ¶ï¼ç±»åæ¯å·²ç¥çï¼å¹¶ä¸å¯ä»¥åçå¹éï¼ä¸åé¢çç¤ºä¾ä¸æ ·ï¼ã å½ä½¿ç¨ç®åç±»åï¼ä¾å¦<value> true </value>ï¼æ¶ï¼springæ æ³ç¡®å®å¼çç±»åï¼å æ­¤å¨æ²¡ææç¤ºçæåµä¸æ æ³æç±»åè¿è¡å¹éã èèä»¥ä¸ç±»å«ï¼\n\npackage examples;\n\npublic class examplebean {\n\n    // number of years to calculate the ultimate answer\n    private int years;\n\n    // the answer to life, the universe, and everything\n    private string ultimateanswer;\n\n    public examplebean(int years, string ultimateanswer) {\n        this.years = years;\n        this.ultimateanswer = ultimateanswer;\n    }\n}\n\n\næé å¨åæ°ç±»åå¹é\n\nå¨ä¸è¿°æåµä¸ï¼å¦æéè¿ä½¿ç¨typeå±æ§æ¾å¼æå®æé å½æ°åæ°çç±»åï¼åå®¹å¨å¯ä»¥ä½¿ç¨ç®åç±»åçç±»åå¹éã å¦ä¸ä¾æç¤ºï¼\n\n<bean id="examplebean" class="examples.examplebean">\n    <constructor-arg type="int" value="7500000"/>\n    <constructor-arg type="java.lang.string" value="42"/>\n</bean>\n\n\næé å¨åæ°ç´¢å¼\n\næ¨å¯ä»¥ä½¿ç¨indexå±æ§æ¥æ¾å¼æå®æé å½æ°åæ°çç´¢å¼ï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\n<bean id="examplebean" class="examples.examplebean">\n    <constructor-arg index="0" value="7500000"/>\n    <constructor-arg index="1" value="42"/>\n</bean>\n\n\né¤äºè§£å³å¤ä¸ªç®åå¼çæ­§ä¹ä¹å¤ï¼æå®ç´¢å¼è¿å¯ä»¥è§£å³æé å½æ°æä¸¤ä¸ªç¸åç±»åçåæ°çæ­§ä¹ã\n\n> ç´¢å¼ä»0å¼å§ã\n\næé å¨åæ°å\n\nè¿å¯ä»¥ä½¿ç¨æé å½æ°åæ°åæ¥æ¶é¤å¼çæ­§ä¹ï¼å¦ä¸é¢çç¤ºä¾æç¤º\n\n<bean id="examplebean" class="examples.examplebean">\n    <constructor-arg name="years" value="7500000"/>\n    <constructor-arg name="ultimateanswer" value="42"/>\n</bean>\n\n\nè¯·è®°ä½ï¼è¦ä½¿å¶è½å¤å¼ç®±å³ç¨ï¼æ¨çä»£ç å¿é¡»å¨ç¼è¯æ¶å¯ç¨debugæ å¿ï¼ä»¥ä¾¿springå¯ä»¥ä»æé å½æ°æ¥æ¾åæ°åãå¦ææ¨ä¸è½æä¸å¸æç¨debugæ å¿ç¼è¯æ¨çä»£ç ï¼æ¨å¯ä»¥ä½¿ç¨@constructorproperties jdkæ³¨è§£æ¥æ¾å¼å°å½åæ¨çæé å½æ°åæ°ãç¤ºä¾ç±»å¦ä¸æç¤º\n\npackage examples;\n\npublic class examplebean {\n\n    // fields omitted\n\n    @constructorproperties({"years", "ultimateanswer"})\n    public examplebean(int years, string ultimateanswer) {\n        this.years = years;\n        this.ultimateanswer = ultimateanswer;\n    }\n}\n\n\n# setteræ³¨å¥\n\nåºäºsetterçdiæ¯ç±å®¹å¨å¨è°ç¨æ åæ°æé å½æ°ææ åæ°éæå·¥åæ¹æ³æ¥å®ä¾åbeanä¹ååè°ç¨beanä¸çsetteræ¹æ³æ¥å®ç°çã\n\nä¸é¢çç¤ºä¾æ¾ç¤ºäºä¸ä¸ªåªè½éè¿ä½¿ç¨çº¯setteræ³¨å¥æ¥æ³¨å¥ä¾èµé¡¹çç±»ãè¿ä¸ªç±»æ¯ä¼ ç»çjavaãå®æ¯ä¸ä¸ªä¸ä¾èµäºå®¹å¨ç¹å®æ¥å£ãåºç±»ææ³¨è§£çpojoã\n\npublic class simplemovielister {\n\n    // the simplemovielister has a dependency on the moviefinder\n    private moviefinder moviefinder;\n\n    // a setter method so that the spring container can inject a moviefinder\n    public void setmoviefinder(moviefinder moviefinder) {\n        this.moviefinder = moviefinder;\n    }\n\n    // business logic that actually uses the injected moviefinder is omitted...\n}\n\n\napplicationcontextæ¯æå®ç®¡ççbeançåºäºæé å½æ°ååºäºsetterçdiã å¨å·²ç»éè¿æé å½æ°æ¹æ³æ³¨å¥äºæäºä¾èµé¡¹ä¹åï¼å®è¿æ¯æåºäºsetterçdiã æ¨å¯ä»¥ä»¥beandefinitionçå½¢å¼éç½®ä¾èµé¡¹ï¼å¹¶ä¸propertyeditorå®ä¾ç»åä½¿ç¨ï¼ä»¥å°å±æ§ä»ä¸ç§æ ¼å¼è½¬æ¢ä¸ºå¦ä¸ç§æ ¼å¼ã ä½æ¯ï¼å¤§å¤æ°springç¨æ·å¹¶ä¸ç´æ¥ï¼å³ä»¥ç¼ç¨æ¹å¼ï¼ä½¿ç¨è¿äºç±»ï¼èæ¯ä½¿ç¨xml beanå®ä¹ï¼å¸¦æ³¨è§£çç»ä»¶ï¼å³ä»¥@ componentï¼@ controllerç­è¿è¡æ³¨è§£çç±»ï¼æ@beanæ¹æ³æ¥å¤çè¿äºç±»ã åºäºjavaç@configurationç±»ã ç¶åå°å®ä»¬å¨åé¨è½¬æ¢ä¸ºbeandefinitionå®ä¾ï¼å¹¶ç¨äºå è½½æ´ä¸ªspring iocå®¹å¨å®ä¾ã\n\n> ç±äºå¯ä»¥æ··åä½¿ç¨åºäºæé å½æ°çdiååºäºsetterçdiï¼å æ­¤å°æé å½æ°ç¨äºå¼ºå¶æ§ä¾èµé¡¹å¹¶å°setteræ¹æ³æéç½®æ¹æ³ç¨äºå¯éçä¾èµé¡¹æ¯ä¸ä¸ªå¾å¥½çç»éªã æ³¨æï¼å¨setteræ¹æ³ä¸ä½¿ç¨@requiredæ¹æ³¨å¯ä»¥ä½¿è¯¥å±æ§æä¸ºå¿éçä¾èµé¡¹ã ä½æ¯ï¼æå¥½ä½¿ç¨å¸¦æåæ°çç¨åºéªè¯çæé å½æ°æ³¨å¥ã\n> \n> springå¢ééå¸¸æå¡æé å½æ°æ³¨å¥ï¼å ä¸ºå®ä½¿æ¨å¯ä»¥å°åºç¨ç¨åºç»ä»¶å®ç°ä¸ºä¸å¯åå¯¹è±¡ï¼å¹¶ç¡®ä¿æéçä¾èµé¡¹ä¸ä¸ºnullã æ­¤å¤ï¼æ³¨å¥æé å½æ°çç»ä»¶å§ç»ä»¥å®å¨åå§åçç¶æè¿åå°å®¢æ·ç«¯ï¼è°ç¨ï¼ä»£ç ã éå¸¦è¯´æä¸ä¸ï¼æé å¨åå«å¤§éçåæ°æ¯ä¸å¥½çä»£ç ï¼è¿è¡¨æè¯¥ç±»å¯è½æ¿æäºå¤ªå¤çèè´£ï¼åºè¿è¡éæä»¥æ´å¥½å°è§£å³å³æ³¨ç¹åç¦»é®é¢ã\n> \n> setteræ³¨å¥ä¸»è¦åºä»ç¨äºå¯ä»¥å¨ç±»ä¸­åéåççé»è®¤å¼çå¯éä¾èµé¡¹ã å¦åï¼å¿é¡»å¨ä»£ç ä½¿ç¨ä¾èµé¡¹çä»»ä½å°æ¹æ§è¡éç©ºæ£æ¥ã setteræ³¨å¥çä¸ä¸ªå¥½å¤æ¯ï¼setteræ¹æ³ä½¿è¯¥ç±»çå¯¹è±¡å¨ä»¥åå¯ä»¥éæ°éç½®æéæ°æ³¨å¥ã å æ­¤ï¼éè¿jmx mbeanè¿è¡ç®¡çæ¯ç¨äºsetteræ³¨å¥çå¸åç¨ä¾ã\n> \n> ä½¿ç¨å¯¹ç¹å®ç±»æææä¹çdiã ææ¶ï¼å¨å¤çæ¨æ²¡ææºä»£ç çç¬¬ä¸æ¹ç±»æ¶ï¼å°ä¸ºæ¨ååºéæ©ã ä¾å¦ï¼å¦æç¬¬ä¸æ¹ç±»æªå¬å¼ä»»ä½setteræ¹æ³ï¼åæé å½æ°æ³¨å¥å¯è½æ¯diçå¯ä¸å¯ç¨å½¢å¼ã\n\n# ä¾èµè§£æè¿ç¨\n\nå®¹å¨æå¦ä¸æ¹å¼æ§è¡beanä¾èµé¡¹è§£æï¼\n\n * ä½¿ç¨æè¿°ææbeançéç½®åæ°æ®åå»ºååå§åapplicationcontextã å¯ä»¥éè¿xmlï¼javaä»£ç ææ³¨è§£æå®éç½®åæ°æ®ã\n\n * å¯¹äºæ¯ä¸ªbeanï¼å®çä¾èµå³ç³»é½ä»¥å±æ§ãæé å½æ°åæ°æéæå·¥åæ¹æ³çåæ°çå½¢å¼è¡¨ç¤º(å¦ææ¨ä½¿ç¨è¯¥æ¹æ³èä¸æ¯æ®éçæé å½æ°)ãå½å®éåå»ºbeanæ¶ï¼å°åbeanæä¾è¿äºä¾èµé¡¹ã\n\n * æ¯ä¸ªå±æ§ææé å½æ°åæ°é½æ¯è¦è®¾ç½®çå®åï¼æèæ¯å¯¹å®¹å¨ä¸­å¦ä¸ä¸ªbeançå¼ç¨ã\n\n * ä½ä¸ºå¼çæ¯ä¸ªå±æ§ææé å½æ°åæ°é½å°ä»å¶æå®çæ ¼å¼è½¬æ¢ä¸ºè¯¥å±æ§ææé å½æ°åæ°çå®éç±»åãé»è®¤æåµä¸ï¼springå¯ä»¥å°ä»¥å­ç¬¦ä¸²æ ¼å¼æä¾çå¼è½¬æ¢ä¸ºææåç½®ç±»åï¼æ¯å¦intãlongãstringãbooleanç­ç­ã\n\nå¨åå»ºå®¹å¨æ¶ï¼springå®¹å¨ä¼éªè¯æ¯ä¸ªbeançéç½®ã ä½æ¯ï¼å¨å®éåå»ºbeanä¹åï¼ä¸ä¼è®¾ç½®beanå±æ§æ¬èº«ã åå»ºå®¹å¨æ¶ï¼å°åå»ºå·æåä¾ä½ç¨åå¹¶è®¾ç½®ä¸ºé¢åå®ä¾åï¼é»è®¤ï¼çbeanã ä½ç¨åå¨beanä½ç¨åä¸­å®ä¹ã å¦åï¼ä»å¨è¯·æ±æ¶æåå»ºbeanã åå»ºååébeançä¾èµå³ç³»åå¶ä¾èµå³ç³»ï¼ä¾æ­¤ç±»æ¨ï¼æ¶ï¼åå»ºbeanå¯è½ä¼å¯¼è´åå»ºä¸ä¸ªbeanå¾ã è¯·æ³¨æï¼è¿äºä¾èµé¡¹ä¹é´çè§£æä¸å¹éå¯è½ä¼å¨åæåºç°ï¼å³å¨ç¬¬ä¸æ¬¡åå»ºåå½±åçbeanæ¶ã\n\n> å¦æä¸»è¦ä½¿ç¨æé å½æ°æ³¨å¥ï¼åå¯è½ä¼åå»ºæ æ³è§£æçå¾ªç¯ä¾èµæ¹æ¡ã\n> \n> ä¾å¦ï¼aç±»éè¿æé å½æ°æ³¨å¥éè¦bç±»çå®ä¾ï¼èbç±»éè¿æé å½æ°æ³¨å¥éè¦aç±»çå®ä¾ã å¦ææ¨ä¸ºå°ç±»aåbç¸äºæ³¨å¥èéç½®äºbeanï¼åspring iocå®¹å¨ä¼å¨è¿è¡æ¶æ£æµå°æ­¤å¾ªç¯å¼ç¨ï¼å¹¶æåºbeancurrentlyincreationexceptionã\n> \n> ä¸ç§å¯è½çè§£å³æ¹æ¡æ¯ç¼è¾æäºç±»çæºä»£ç ï¼è¿äºç±»çæºä»£ç ç±setterèä¸æ¯æé å½æ°æ¥éç½®ã æèï¼é¿åæé å½æ°æ³¨å¥ï¼èä»ä½¿ç¨setteræ³¨å¥ã æ¢å¥è¯è¯´ï¼å°½ç®¡ä¸å»ºè®®è¿æ ·åï¼ä½æ¯æ¨å¯ä»¥ä½¿ç¨setteræ³¨å¥éç½®å¾ªç¯ä¾èµé¡¹ã\n> \n> ä¸å¸åæåµï¼æ²¡æå¾ªç¯ä¾èµå³ç³»ï¼ä¸åï¼bean aåbean bä¹é´çå¾ªç¯ä¾èµå³ç³»è¿«ä½¿å¶ä¸­ä¸ä¸ªbeanå¨å®å¨åå§åä¹åè¢«æ³¨å¥å¦ä¸ä¸ªbeanï¼ç»å¸çâé¸¡ä¸èâåºæ¯ï¼ã\n\néå¸¸ï¼æ¨å¯ä»¥ä¿¡ä»»springåæ­£ç¡®çäºã å®å¨å®¹å¨å è½½æ¶æ£æµéç½®é®é¢ï¼ä¾å¦å¯¹ä¸å­å¨çbeançå¼ç¨åå¾ªç¯ä¾èµé¡¹ã springè®¾ç½®å±æ§å¹¶å°½å¯è½æå°è§£å³ä¾èµå³ç³»--å¨å®éåå»ºbeanæ¶ã è¿æå³çï¼å¦æåå»ºå¯¹è±¡æå¶ä¾èµé¡¹ä¹ä¸æé®é¢ï¼åæ­£ç¡®å è½½äºspringçå®¹å¨ä»¥åå¯ä»¥å¨æ¨è¯·æ±å¯¹è±¡æ¶æåºå¼å¸¸-ä¾å¦ï¼beanä¼å ä¸å­å¨ææ æå±æ§èæåºå¼å¸¸ãè¿æ ·å¯è½ä¼å»¶è¿æäºéç½®é®é¢çå¯è§æ§ï¼æä»¥è¿å°±æ¯ä¸ºä»ä¹é»è®¤æåµä¸applicationcontextå®ç°ä¼é¢åå®ä¾ååä¾beançåå ã å¨å®ééè¦è¿äºbeanä¹åéè¦è±ä¸äºåææ¶é´ååå­æ¥åå»ºå®ä»¬ï¼æ¨ä¼å¨åå»ºapplicationcontextæ¶åç°éç½®é®é¢ï¼èä¸æ¯ç¨åã æ¨ä»ç¶å¯ä»¥è¦çæ­¤é»è®¤è¡ä¸ºï¼ä»¥ä¾¿åä¾beanå»¶è¿åå§åï¼èä¸æ¯é¢åå®ä¾åã\n\nå¦æä¸å­å¨å¾ªç¯ä¾èµå³ç³»ï¼åå¨å°ä¸ä¸ªæå¤ä¸ªåä½beanæ³¨å¥å°ä»å±beanä¸­æ¶ï¼æ¯ä¸ªåä½beanå¨æ³¨å¥å°ä»å±beanä¸­ä¹åé½å·²å®å¨éç½®ã è¿æå³çï¼å¦æbean aä¾èµäºbean bï¼åspring iocå®¹å¨ä¼å¨å¯¹bean aè°ç¨setteræ¹æ³ä¹åå®å¨éç½®beanbãæ¢å¥è¯è¯´ï¼è¢«å®ä¾åçbeanï¼å¦æå®ä¸æ¯é¢åå®ä¾åçåä¾ï¼ ï¼ï¼å®çä¾èµé¡¹è¢«è®¾ç½®ï¼å¹¶è°ç¨äºç¸å³ççå½å¨ææ¹æ³ï¼ä¾å¦å·²éç½®çinitæ¹æ³æinitializingbeanåè°æ¹æ³ï¼ã\n\n# ä¾èµæ³¨å¥å®ä¾\n\nä¸é¢çç¤ºä¾ä¸ºåºäºsetterçdiä½¿ç¨åºäºxmlçéç½®åæ°æ®ãspring xmléç½®æä»¶çä¸å°é¨åæå®äºä¸äºbeanå®ä¹ï¼å¦ä¸æç¤º\n\n<bean id="examplebean" class="examples.examplebean">\n    \x3c!-- setter injection using the nested ref element --\x3e\n    <property name="beanone">\n        <ref bean="anotherexamplebean"/>\n    </property>\n\n    \x3c!-- setter injection using the neater ref attribute --\x3e\n    <property name="beantwo" ref="yetanotherbean"/>\n    <property name="integerproperty" value="1"/>\n</bean>\n\n<bean id="anotherexamplebean" class="examples.anotherbean"/>\n<bean id="yetanotherbean" class="examples.yetanotherbean"/>\n\n\npublic class examplebean {\n\n    private anotherbean beanone;\n\n    private yetanotherbean beantwo;\n\n    private int i;\n\n    public void setbeanone(anotherbean beanone) {\n        this.beanone = beanone;\n    }\n\n    public void setbeantwo(yetanotherbean beantwo) {\n        this.beantwo = beantwo;\n    }\n\n    public void setintegerproperty(int i) {\n        this.i = i;\n    }\n}\n\n\nå¨åé¢çç¤ºä¾ä¸­ï¼å°setterå£°æä¸ºä¸xmlæä»¶ä¸­æå®çå±æ§å¹éãä¸é¢çç¤ºä¾ä½¿ç¨åºäºæé å½æ°çdi\n\n<bean id="examplebean" class="examples.examplebean">\n    \x3c!-- constructor injection using the nested ref element --\x3e\n    <constructor-arg>\n        <ref bean="anotherexamplebean"/>\n    </constructor-arg>\n\n    \x3c!-- constructor injection using the neater ref attribute --\x3e\n    <constructor-arg ref="yetanotherbean"/>\n\n    <constructor-arg type="int" value="1"/>\n</bean>\n\n<bean id="anotherexamplebean" class="examples.anotherbean"/>\n<bean id="yetanotherbean" class="examples.yetanotherbean"/>\n\n\npublic class examplebean {\n\n    private anotherbean beanone;\n\n    private yetanotherbean beantwo;\n\n    private int i;\n\n    public examplebean(\n        anotherbean anotherbean, yetanotherbean yetanotherbean, int i) {\n        this.beanone = anotherbean;\n        this.beantwo = yetanotherbean;\n        this.i = i;\n    }\n}\n\n\nbeanå®ä¹ä¸­æå®çæé å½æ°åæ°ç¨ä½examplebeanæé å½æ°çåæ°ã\n\nç°å¨èèè¯¥ç¤ºä¾çä¸ä¸ªåä½ï¼å¨è¯¥åä½ä¸­ï¼ä¸æ¯ä½¿ç¨æé å½æ°ï¼èæ¯åè¯springè°ç¨éæå·¥åæ¹æ³ä»¥è¿åå¯¹è±¡çå®ä¾ï¼\n\n<bean id="examplebean" class="examples.examplebean" factory-method="createinstance">\n    <constructor-arg ref="anotherexamplebean"/>\n    <constructor-arg ref="yetanotherbean"/>\n    <constructor-arg value="1"/>\n</bean>\n\n<bean id="anotherexamplebean" class="examples.anotherbean"/>\n<bean id="yetanotherbean" class="examples.yetanotherbean"/>\n\n\npublic class examplebean {\n\n    // a private constructor\n    private examplebean(...) {\n        ...\n    }\n\n    // a static factory method; the arguments to this method can be\n    // considered the dependencies of the bean that is returned,\n    // regardless of how those arguments are actually used.\n    public static examplebean createinstance (\n        anotherbean anotherbean, yetanotherbean yetanotherbean, int i) {\n\n        examplebean eb = new examplebean (...);\n        // some other operations...\n        return eb;\n    }\n}\n\n\néæå·¥åæ¹æ³çåæ°ç±<constructor-arg />åç´ æä¾ï¼ä¸å®éä½¿ç¨æé å½æ°çæåµå®å¨ç¸åã factoryæ¹æ³è¿åçç±»çç±»åä¸å¿ä¸åå«éæå·¥åæ¹æ³çç±»çç±»åç¸åï¼å°½ç®¡å¨æ­¤ç¤ºä¾ä¸­æ¯ï¼ã å®ä¾ï¼ééæï¼å·¥åæ¹æ³å¯ä»¥ä»¥åºæ¬ä¸ç¸åçæ¹å¼ä½¿ç¨ï¼é¤äºä½¿ç¨factory-beanå±æ§ä»£æ¿classå±æ§ä¹å¤ï¼ï¼å æ­¤å¨æ­¤ä¸è®¨è®ºè¿äºç»èã\n\n\n# 1.4.2. ä¾èµéç½®è¯¦è§£\n\nå¦ä¸ä¸èæè¿°ï¼æ¨å¯ä»¥å°beanå±æ§åæé å¨åæ°å®ä¹ä¸ºå¯¹å®¹å¨ä¸­å¶ä»beanï¼åä½èï¼çå¼ç¨æåèå®ä¹çå¼ã springçåºäºxmlçéç½®åæ°æ®ä¸ºè¾¾å°æ­¤ç®çå¨å¶<property />å<constructor-arg />åç´ ä¸­æ¯æå­åç´ ç±»åã\n\n# ç´æ¥å¼ï¼åè¯­ï¼stringsç­ï¼\n\n<property />åç´ çvalueå±æ§å°å±æ§ææé å¨åæ°æå®ä¸ºäººç±»å¯è¯»çå­ç¬¦ä¸²è¡¨ç¤ºå½¢å¼ã springçè½¬æ¢æå¡ç¨äºå°è¿äºå¼ä»å­ç¬¦ä¸²è½¬æ¢ä¸ºå±æ§æåæ°çå®éç±»åã ä»¥ä¸ç¤ºä¾æ¾ç¤ºäºè®¾ç½®çåç§å¼ï¼\n\n<bean id="mydatasource" class="org.apache.commons.dbcp.basicdatasource" destroy-method="close">\n    \x3c!-- results in a setdriverclassname(string) call --\x3e\n    <property name="driverclassname" value="com.mysql.jdbc.driver"/>\n    <property name="url" value="jdbc:mysql://localhost:3306/mydb"/>\n    <property name="username" value="root"/>\n    <property name="password" value="misterkaoli"/>\n</bean>\n\n\nä¸é¢çç¤ºä¾ä½¿ç¨p-namespaceè¿è¡æ´ç®æ´çxmléç½®\n\n<beans xmlns="http://www.springframework.org/schema/beans"\n    xmlns:xsi="http://www.w3.org/2001/xmlschema-instance"\n    xmlns:p="http://www.springframework.org/schema/p"\n    xsi:schemalocation="http://www.springframework.org/schema/beans\n    https://www.springframework.org/schema/beans/spring-beans.xsd">\n\n    <bean id="mydatasource" class="org.apache.commons.dbcp.basicdatasource"\n        destroy-method="close"\n        p:driverclassname="com.mysql.jdbc.driver"\n        p:url="jdbc:mysql://localhost:3306/mydb"\n        p:username="root"\n        p:password="misterkaoli"/>\n\n</beans>\n\n\nåé¢çxmlæ´ç®æ´ã ä½æ¯ï¼é¤éå¨åå»ºbeanå®ä¹æ¶ä½¿ç¨æ¯æèªå¨å±æ§è¡¥å¨çideï¼ä¾å¦intellij ideaæeclipseçspring toolsï¼ï¼å¦åéè¯¯æ¯å¨è¿è¡æ¶èä¸æ¯ç¼ç æ¶åç°çã å¼ºçå»ºè®®æ¨ä½¿ç¨æ­¤ç±»ideå¸®å©å¼åã\n\næ¨è¿å¯ä»¥éç½®java.util.propertieså®ä¾ï¼å¦ä¸æç¤ºï¼\n\n<bean id="mappings"\n    class="org.springframework.context.support.propertysourcesplaceholderconfigurer">\n\n    \x3c!-- typed as a java.util.properties --\x3e\n    <property name="properties">\n        <value>\n            jdbc.driver.classname=com.mysql.jdbc.driver\n            jdbc.url=jdbc:mysql://localhost:3306/mydb\n        </value>\n    </property>\n</bean>\n\n\nspringå®¹å¨éè¿ä½¿ç¨javabeans propertyeditoræºå¶å°<value />åç´ åçææ¬è½¬æ¢ä¸ºjava.util.propertieså®ä¾ã è¿å¾æ¹ä¾¿ï¼å¹¶ä¸æ¯springå¢éåç±ä½¿ç¨åµå¥ç<value />åç´ èä¸æ¯valueå±æ§çå ä¸ªå°æ¹ä¹ä¸ã\n\nidrefåç´ \n\nidrefåç´ åªæ¯å°å®¹å¨ä¸­å¦ä¸ä¸ªbeançidï¼å­ç¬¦ä¸²å¼-ä¸æ¯å¼ç¨ï¼ä¼ éç»<constructor-arg />æ<property />åç´ çä¸ç§é²éæ¹æ³ã ä»¥ä¸ç¤ºä¾æ¾ç¤ºäºå¦ä½ä½¿ç¨å®ï¼\n\n<bean id="thetargetbean" class="..."/>\n\n<bean id="theclientbean" class="...">\n    <property name="targetname">\n        <idref bean="thetargetbean"/>\n    </property>\n</bean>\n\n\nåé¢çbeanå®ä¹ä»£ç çæ®µ(å¨è¿è¡æ¶)ä¸ä¸é¢çä»£ç çæ®µå®å¨ç­ä»·\n\n<bean id="thetargetbean" class="..." />\n\n<bean id="client" class="...">\n    <property name="targetname" value="thetargetbean"/>\n</bean>\n\n\nç¬¬ä¸ç§å½¢å¼ä¼äºç¬¬äºç§å½¢å¼ï¼å ä¸ºä½¿ç¨idrefæ è®°å¯ä½¿å®¹å¨å¨é¨ç½²æ¶éªè¯æå¼ç¨çåä¸ºbeançå®éå­å¨ã å¨ç¬¬äºä¸ªåä½ä¸­ï¼ä¸å¯¹ä¼ éç»å®¢æ·ç«¯beançtargetnameå±æ§çå¼æ§è¡éªè¯ã æ¼åéè¯¯ä»å¨å®éå®ä¾åå®¢æ·ç«¯beanæ¶æåç°ï¼ææå¯è½å¯¼è´è´å½çç»æï¼ã å¦æå®¢æ·ç«¯beanæ¯ååbeanï¼åå¯è½å¨é¨ç½²å®¹å¨å¾ä¹ä¹åæåç°æ­¤éè¯¯åæäº§ççå¼å¸¸ã\n\n> è¿éä¼ çé½æ¯å­é¢éï¼èä¸æ¯beanå¼ç¨ï¼idrefä¸valueçåºå«åªæ¯åèä¼åæ ¡éªã\n> \n> å¨4.0 bean xsdä¸­ä¸åæ¯æidrefåç´ ä¸çlocalå±æ§ï¼å ä¸ºå®ä¸åæä¾å¸¸è§beanå¼ç¨ä¸çå¼ï¼è¿éä¸å¥½çè§£ï¼ä¹ålocalå±æ§çä½ç¨æ¯ï¼åªè½æå®ä¸å½åéç½®çå¯¹è±¡å¨åä¸ä¸ªéç½®æä»¶çå¯¹è±¡å®ä¹çåç§°ï¼æä»¥è¿éè®¤ä¸º5.3.2æè¿ä¸ªå±æ§åºå¼å°±è¡äºï¼ã åçº§å°4.0æ¨¡å¼æ¶ï¼å°ç°æçidref localå±æ§æ´æ¹ä¸ºidref beanã\n\n<idref />åç´ å¸¦æ¥ä»·å¼çä¸ä¸ªå¸¸è§å°æ¹ï¼è³å°å¨spring 2.0ä¹åççæ¬ä¸­ï¼æ¯å¨proxyfactorybean beanå®ä¹ä¸­éç½®aopæ¦æªå¨ã å¨æå®æ¦æªå¨åç§°æ¶ä½¿ç¨<idref />åç´ å¯é²æ­¢æ¨æ¼åéè¯¯çæ¦æªå¨idã\n\n# å¼ç¨å¶ä»bean\n\nrefåç´ æ¯<constructor-arg />æ<property />å®ä¹åç´ åçæåä¸ä¸ªåç´ ã å¨è¿éï¼æ¨å°beançæå®å±æ§çå¼è®¾ç½®ä¸ºå¯¹å®¹å¨ç®¡ççå¦ä¸ä¸ªbeanï¼åä½èï¼çå¼ç¨ã å¼ç¨çbeanæ¯è¦è®¾ç½®å¶å±æ§çbeançä¾èµï¼å¹¶ä¸å¨è®¾ç½®å±æ§ä¹åæ ¹æ®éè¦å¯¹å¶è¿è¡åå§åã ï¼å¦æåä½èæ¯åä¾beanï¼åå®å¯è½å·²ç»ç±å®¹å¨åå§åäºãï¼ææå¼ç¨æç»é½æ¯å¯¹å¦ä¸ä¸ªå¯¹è±¡çå¼ç¨ã ä½ç¨äºåéªè¯åå³äºæ¨æ¯éè¿beanè¿æ¯parentæå®å¦ä¸ä¸ªå¯¹è±¡çidæåç§°ã\n\néè¿<ref />æ è®°çbeanå±æ§æå®ç®æ beanæ¯æéç¨çå½¢å¼ï¼å¹¶ä¸åè®¸åå»ºå¯¹åä¸å®¹å¨æç¶å®¹å¨ä¸­ä»»ä½beançå¼ç¨ï¼èä¸ç®¡å®æ¯å¦å¨åä¸xmlæä»¶ä¸­ã beanå±æ§çå¼å¯ä»¥ä¸ç®æ beançidå±æ§ç¸åï¼ä¹å¯ä»¥ä¸ç®æ beançnameå±æ§ä¸­çå¼ä¹ä¸ç¸åã ä¸é¢çç¤ºä¾æ¼ç¤ºå¦ä½ä½¿ç¨refåç´ ï¼\n\n<ref bean="somebean"/>\n\n\néè¿parentå±æ§æå®ç®æ beanå°åå»ºå¯¹å½åå®¹å¨çç¶å®¹å¨ä¸­çbeançå¼ç¨ã parentå±æ§çå¼å¯ä»¥ä¸ç®æ beançidå±æ§æç®æ beançåç§°å±æ§ä¸­çå¼ä¹ä¸ç¸åã ç®æ beanå¿é¡»ä½äºå½åå®¹å¨çç¶å®¹å¨ä¸­ã å¨å®¹å¨å·æå±æ¬¡ç»æå¹¶ä¸è¦åè£ä¸ä¸ªä¸å¨ç¶å®¹å¨ä¸­å·²å­å¨çbeanå·æç¸ååç§°çä»£çbeanæ¶ï¼æåºè¯¥ä½¿ç¨parentå±æ§ã ä»¥ä¸æ¸åæ¾ç¤ºäºå¦ä½ä½¿ç¨parentå±æ§ï¼\n\n\x3c!-- in the parent context --\x3e\n<bean id="accountservice" class="com.something.simpleaccountservice">\n    \x3c!-- insert dependencies as required as here --\x3e\n</bean>\n\n\n\x3c!-- in the child (descendant) context --\x3e\n<bean id="accountservice" \x3c!-- bean name is the same as the parent bean --\x3e\n    class="org.springframework.aop.framework.proxyfactorybean">\n    <property name="target">\n        <ref parent="accountservice"/> \x3c!-- notice how we refer to the parent bean --\x3e\n    </property>\n    \x3c!-- insert other configuration and dependencies as required here --\x3e\n</bean>\n\n\n> refåç´ çlocalå±æ§å¨4.0 bean xsdä¸­ä¸ååæ¯æï¼å ä¸ºå®ä¸åæä¾å¸¸è§beanå¼ç¨ä¸çå¼ã åçº§å°4.0æ¨¡å¼æ¶ï¼å°ç°æçref localæ´æ¹ä¸ºref beanã\n\n# åé¨beans\n\n<property />æ<constructor-arg />åç´ åç<bean />åç´ å®ä¹äºä¸ä¸ªåé¨beanï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\n<bean id="outer" class="...">\n    \x3c!-- instead of using a reference to a target bean, simply define the target bean inline --\x3e\n    <property name="target">\n        <bean class="com.example.person"> \x3c!-- this is the inner bean --\x3e\n            <property name="name" value="fiona apple"/>\n            <property name="age" value="25"/>\n        </bean>\n    </property>\n</bean>\n\n\nåé¨beanå®ä¹ä¸éè¦å®ä¹idæåç§°ã å¦ææå®ï¼åå®¹å¨ä¸ä½¿ç¨è¯¥å¼ä½ä¸ºæ è¯ç¬¦ã å®¹å¨å¨åå»ºæ¶ä¹ä¼å¿½ç¥scopeæ å¿ï¼å ä¸ºåé¨beanå§ç»æ¯å¿åçï¼å¹¶ä¸å§ç»ä¸å¤é¨beanä¸èµ·åå»ºã ä¸è½ç¬ç«è®¿é®åé¨beanï¼ä¹ä¸è½å°å®ä»¬æ³¨å¥å°åä½beanä¸­ï¼é¤äºå°è£çbeanï¼ã\n\n# éå\n\n<list />ï¼<set />ï¼<map />å<props />åç´ åå«è®¾ç½®javaéåç±»åçlistï¼setï¼mapåpropertiesçå±æ§ååæ°ã ä»¥ä¸ç¤ºä¾æ¾ç¤ºäºå¦ä½ä½¿ç¨å®ä»¬ï¼\n\n<bean id="morecomplexobject" class="example.complexobject">\n    \x3c!-- results in a setadminemails(java.util.properties) call --\x3e\n    <property name="adminemails">\n        <props>\n            <prop key="administrator">administrator@example.org</prop>\n            <prop key="support">support@example.org</prop>\n            <prop key="development">development@example.org</prop>\n        </props>\n    </property>\n    \x3c!-- results in a setsomelist(java.util.list) call --\x3e\n    <property name="somelist">\n        <list>\n            <value>a list element followed by a reference</value>\n            <ref bean="mydatasource" />\n        </list>\n    </property>\n    \x3c!-- results in a setsomemap(java.util.map) call --\x3e\n    <property name="somemap">\n        <map>\n            <entry key="an entry" value="just some string"/>\n            <entry key ="a ref" value-ref="mydatasource"/>\n        </map>\n    </property>\n    \x3c!-- results in a setsomeset(java.util.set) call --\x3e\n    <property name="someset">\n        <set>\n            <value>just some string</value>\n            <ref bean="mydatasource" />\n        </set>\n    </property>\n</bean>\n\n\nå¶ä¸­ï¼mapçkeyæèvalueï¼æsetçvalueï¼å¯ä»¥æ¯ä»¥ä¸ä»»ä¸åç´ ï¼\n\nbean | ref | idref | list | set | map | props | value | null\n\n\néååå¹¶\n\nspringå®¹å¨è¿æ¯æåå¹¶éåã åºç¨ç¨åºå¼åäººåå¯ä»¥å®ä¹ç¶<list />ï¼<map />ï¼<set />æ<props />åç´ ï¼å¹¶å·æä»ç¶éåç»§æ¿å¹¶è¦çå¼çå­åç´ ï¼ï¼æã ä¹å°±æ¯è¯´ï¼å­éåçå¼æ¯åå¹¶ç¶éååå­éåçåç´ çç»æï¼å­éåçåç´ ä¼è¦çç¶éåä¸­æå®çå¼ã\n\nä¸é¢çç¤ºä¾æ¼ç¤ºäºéååå¹¶ï¼\n\n<beans>\n    <bean id="parent" abstract="true" class="example.complexobject">\n        <property name="adminemails">\n            <props>\n                <prop key="administrator">administrator@example.com</prop>\n                <prop key="support">support@example.com</prop>\n            </props>\n        </property>\n    </bean>\n    <bean id="child" parent="parent">\n        <property name="adminemails">\n            \x3c!-- the merge is specified on the child collection definition --\x3e\n            <props merge="true">\n                <prop key="sales">sales@example.com</prop>\n                <prop key="support">support@example.co.uk</prop>\n            </props>\n        </property>\n    </bean>\n<beans>\n\n\næ³¨æå­beanå®ä¹çadminemailså±æ§ç<props />åç´ ä¸ä½¿ç¨merge = trueå±æ§ã å½å­beanç±å®¹å¨è§£æå¹¶å®ä¾ååï¼çæçå®ä¾å·æadminemails propertieséåï¼å¶ä¸­åå«å°å­beançadminemailséåä¸ç¶beançadminemailséååå¹¶çç»æã ä»¥ä¸æ¸åæ¾ç¤ºäºç»æï¼\n\nadministrator=administrator@example.com\nsales=sales@example.com\nsupport=support@example.co.uk\n\n\nå­propertieséåçå¼éç»§æ¿äºç¶<props />çææå±æ§ï¼å­å±æ§çsupportå¼è¦çäºç¶éåä¸­çå¼ã\n\næ­¤åå¹¶è¡ä¸ºç±»ä¼¼å°éç¨äº<list />ï¼<map />å<set />éåç±»åã å¨<list />åç´ çç¹å®æåµä¸ï¼å°ç»´æ¤ä¸listéåç±»åå³èçè¯­ä¹ï¼å³ï¼å¼çæåºéåçæ¦å¿µï¼ã ç¶çº§çå¼åäºå­çº§åè¡¨çææå¼ã å¯¹äºmapï¼setåpropertieséåç±»åï¼ä¸å­å¨æåºã å æ­¤ï¼å¯¹äºå®¹å¨åé¨ä½¿ç¨çå³èmapï¼setåpropertieså®ç°ç±»åçéåï¼æ²¡æææçæåºè¯­ä¹ã\n\néååå¹¶çéå¶\n\næ¨ä¸è½åå¹¶ä¸åçéåç±»å(å¦mapålist)ãå¦ææ¨å°è¯è¿æ ·åï¼åä¼æåºéå½çå¼å¸¸ãå¿é¡»å¨ä¸å±çç»§æ¿çå­éåå®ä¹ä¸æå®mergeå±æ§ãå¨ç¶éåå®ä¹ä¸æå®mergeå±æ§æ¯å¤ä½çï¼å¹¶ä¸ä¸ä¼å¯¼è´æéçåå¹¶ã\n\nå¼ºç±»åçéå\n\néçjava 5ä¸­æ³åç±»åçå¼å¥ï¼æ¨å¯ä»¥ä½¿ç¨å¼ºç±»åéåã ä¹å°±æ¯è¯´ï¼å¯ä»¥å£°æä¸ä¸ªcollectionç±»åï¼ä½¿å¶åªè½åå«ï¼ä¾å¦ï¼stringåç´ ã å¦æä½¿ç¨springå°å¼ºç±»åçcollectionä¾èµæ³¨å¥å°beanä¸­ï¼åå¯ä»¥å©ç¨springçç±»åè½¬æ¢æ¯æï¼ä»¥ä¾¿å¨å°å¼ºç±»åçcollectionå®ä¾çåç´ æ·»å å°beanä¸­ä¹åï¼åå°å¶è½¬æ¢ä¸ºéå½çç±»åã ä»¥ä¸javaç±»åbeanå®ä¹æ¾ç¤ºäºå¦ä½æ§è¡æ­¤æä½ï¼\n\npublic class someclass {\n\n    private map<string, float> accounts;\n\n    public void setaccounts(map<string, float> accounts) {\n        this.accounts = accounts;\n    }\n}\n\n\n<beans>\n    <bean id="something" class="x.y.someclass">\n        <property name="accounts">\n            <map>\n                <entry key="one" value="9.99"/>\n                <entry key="two" value="2.75"/>\n                <entry key="six" value="3.99"/>\n            </map>\n        </property>\n    </bean>\n</beans>\n\n\nå½åå¤æ³¨å¥something beançaccountså±æ§æ¶ï¼å¯ä»¥éè¿åå°è·å¾æå³å¼ºç±»åmap <stringï¼float>çåç´ ç±»åçæ³åä¿¡æ¯ã å æ­¤ï¼springçç±»åè½¬æ¢åºç¡æ¶æå°åç§å¼åç´ è¯å«ä¸ºfloatç±»åï¼å¹¶å°å­ç¬¦ä¸²å¼ï¼9.99ã2.75å3.99ï¼è½¬æ¢ä¸ºå®éçfloatç±»åã\n\n# nullåç©ºstring\n\nspringå°å±æ§ä¹ç±»çç©ºåæ°è§ä¸ºç©ºå­ç¬¦ä¸²ãä»¥ä¸åºäºxmlçéç½®åæ°æ®çæ®µå°emailå±æ§è®¾ç½®ä¸ºç©ºå­ç¬¦ä¸²å¼("")ã\n\n<bean class="examplebean">\n    <property name="email" value=""/>\n</bean>\n\n\nç­ä»·äºï¼\n\nexamplebean.setemail("");\n\n\n<null />åç´ å¤çç©ºå¼ã ä»¥ä¸æ¸åæ¾ç¤ºäºä¸ä¸ªç¤ºä¾ï¼\n\n<bean class="examplebean">\n    <property name="email">\n        <null/>\n    </property>\n</bean>\n\n\nç­ä»·äºï¼\n\nexamplebean.setemail(null);\n\n\n# p-namespace\n\néè¿p-namespaceï¼æ¨å¯ä»¥ä½¿ç¨beanåç´ çå±æ§ï¼èä¸æ¯åµå¥ç<property />åç´ ï¼æ¥æè¿°åä½beançå±æ§å¼ï¼æåæ¶ä½¿ç¨è¿ä¸¤èã\n\nspringæ¯æå¸¦æå½åç©ºé´çå¯æ©å±éç½®æ ¼å¼ï¼è¿äºåç§°ç©ºé´åºäºxml schemaå®ä¹ã æ¬ç« è®¨è®ºçbeanéç½®æ ¼å¼å¨xml schemaææ¡£ä¸­å®ä¹ã ä½æ¯ï¼p-namespaceæªå¨xsdæä»¶ä¸­å®ä¹ï¼ä»å­å¨äºspring coreä¸­ã\n\nä¸é¢çç¤ºä¾æ¾ç¤ºäºä¸¤ä¸ªè§£æå°ç¸åç»æçxmlçæ®µ(ç¬¬ä¸ä¸ªä½¿ç¨æ åxmlæ ¼å¼ï¼ç¬¬äºä¸ªä½¿ç¨p-namespace)ï¼\n\n<beans xmlns="http://www.springframework.org/schema/beans"\n    xmlns:xsi="http://www.w3.org/2001/xmlschema-instance"\n    xmlns:p="http://www.springframework.org/schema/p"\n    xsi:schemalocation="http://www.springframework.org/schema/beans\n        https://www.springframework.org/schema/beans/spring-beans.xsd">\n\n    <bean name="classic" class="com.example.examplebean">\n        <property name="email" value="someone@somewhere.com"/>\n    </bean>\n\n    <bean name="p-namespace" class="com.example.examplebean"\n        p:email="someone@somewhere.com"/>\n</beans>\n\n\nè¯¥ç¤ºä¾æ¾ç¤ºäºbeanå®ä¹ä¸­çp-namespaceä¸­çä¸ä¸ªåä¸ºemailçå±æ§ãè¿åè¯springåå«ä¸ä¸ªå±æ§å£°æãå¦åæè¿°ï¼p-namespaceæ²¡æschema å®ä¹ï¼å æ­¤å¯ä»¥å°å±æ§çåç§°è®¾ç½®ä¸ºå±æ§åã\n\nä¸ä¸ä¸ªç¤ºä¾åæ¬å¦å¤ä¸¤ä¸ªbeanå®ä¹ï¼å®ä»¬é½å¼ç¨äºå¦ä¸ä¸ªbeanï¼\n\n<beans xmlns="http://www.springframework.org/schema/beans"\n    xmlns:xsi="http://www.w3.org/2001/xmlschema-instance"\n    xmlns:p="http://www.springframework.org/schema/p"\n    xsi:schemalocation="http://www.springframework.org/schema/beans\n        https://www.springframework.org/schema/beans/spring-beans.xsd">\n\n    <bean name="john-classic" class="com.example.person">\n        <property name="name" value="john doe"/>\n        <property name="spouse" ref="jane"/>\n    </bean>\n\n    <bean name="john-modern"\n        class="com.example.person"\n        p:name="john doe"\n        p:spouse-ref="jane"/>\n\n    <bean name="jane" class="com.example.person">\n        <property name="name" value="jane doe"/>\n    </bean>\n</beans>\n\n\næ­¤ç¤ºä¾ä¸ä»åæ¬ä½¿ç¨p-namespaceçå±æ§å¼ï¼èä¸è¿ä½¿ç¨ç¹æ®æ ¼å¼æ¥å£°æå±æ§å¼ç¨ã ç¬¬ä¸ä¸ªbeanå®ä¹ä½¿ç¨<property name="spouse" ref="jane" />åå»ºä»bean johnå°bean janeçå¼ç¨ï¼èç¬¬äºä¸ªbeanå®ä¹ä½¿ç¨p:spouse-ref="jane"å±æ§åç¸åçäºæã å¨è¿ç§æåµä¸ï¼spouseæ¯å±æ§åç§°ï¼è-refé¨åè¡¨ç¤ºè¿ä¸æ¯ä¸ä¸ªç´æ¥å¼ï¼èæ¯å¯¹å¦ä¸ä¸ªbeançå¼ç¨ã\n\n> p-namespaceä¸åæ åxmlæ ¼å¼é£ä¹çµæ´»ãä¾å¦ï¼å£°æå±æ§å¼ç¨çæ ¼å¼ä¸ä»¥refç»å°¾çå±æ§åçå²çª(æéªè¯ä»è½æ­£ç¡®è§£æ)ï¼èæ åxmlæ ¼å¼æ²¡æãæä»¬å»ºè®®æ¨è°¨æå°éæ©èªå·±çæ¹æ³ï¼å¹¶å°å¶åç¥å¢éæåï¼ä»¥é¿åçæåæ¶ä½¿ç¨è¿ä¸ç§æ¹æ³çxmlææ¡£ã\n\n# c-namespace\n\nä¸p-namespaceçxmlå¿«æ·æ¹å¼ç±»ä¼¼ï¼spring 3.1ä¸­å¼å¥çc-namespaceåè®¸åèå±æ§æ¥éç½®æé å½æ°åæ°ï¼èä¸æ¯åµå¥çconstructor-argåç´ ã\n\nä¸é¢çç¤ºä¾ä½¿ç¨c:namespaceæ¥åååºäºæé å¨çä¾èµæ³¨å¥ç¸åçäºæ\n\n<beans xmlns="http://www.springframework.org/schema/beans"\n    xmlns:xsi="http://www.w3.org/2001/xmlschema-instance"\n    xmlns:c="http://www.springframework.org/schema/c"\n    xsi:schemalocation="http://www.springframework.org/schema/beans\n        https://www.springframework.org/schema/beans/spring-beans.xsd">\n\n    <bean id="beantwo" class="x.y.thingtwo"/>\n    <bean id="beanthree" class="x.y.thingthree"/>\n\n    \x3c!-- traditional declaration with optional argument names --\x3e\n    <bean id="beanone" class="x.y.thingone">\n        <constructor-arg name="thingtwo" ref="beantwo"/>\n        <constructor-arg name="thingthree" ref="beanthree"/>\n        <constructor-arg name="email" value="something@somewhere.com"/>\n    </bean>\n\n    \x3c!-- c-namespace declaration with argument names --\x3e\n    <bean id="beanone" class="x.y.thingone" c:thingtwo-ref="beantwo"\n        c:thingthree-ref="beanthree" c:email="something@somewhere.com"/>\n\n</beans>\n\n\nc:å½åç©ºé´ä½¿ç¨ä¸p: ç¸åççº¦å®(beanå¼ç¨çæ«å°¾æ¯-ref)ï¼éè¿å®ä»¬çåç§°è®¾ç½®æé å¨åæ°ãç±»ä¼¼å°ï¼å®éè¦å¨xmlæä»¶ä¸­å£°æï¼å³ä½¿å®ä¸æ¯å¨xsdæ¨¡å¼ä¸­å®ä¹ç(å®å­å¨äºspring coreä¸­)ã\n\nå¯¹äºæå°æ°æåµä¸æ æ³ä½¿ç¨æé å½æ°åæ°åç§°çæåµï¼éå¸¸ï¼å¦æå­èç æ¯å¨æ²¡æè°è¯ä¿¡æ¯çæåµä¸ç¼è¯çï¼ï¼åå¯ä»¥ä½¿ç¨åæ°ç´¢å¼ï¼å¦ä¸æç¤ºï¼\n\n\x3c!-- c-namespace index declaration --\x3e\n<bean id="beanone" class="x.y.thingone" c:_0-ref="beantwo" c:_1-ref="beanthree"\n    c:_2="something@somewhere.com"/>\n\n\n> ç±äºxmlè¯­æ³çåå ï¼ç´¢å¼è¡¨ç¤ºæ³éè¦æåå¯¼ç¬¦å· "_"ï¼å ä¸ºxmlå±æ§åä¸è½ä»¥æ°å­å¼å¤´(å°½ç®¡æäºideåè®¸)ã<constructor-arg>åç´ ä¹å¯ä»¥ä½¿ç¨ç¸åºçç´¢å¼è¡¨ç¤ºæ³ï¼ä½ä¸å¸¸ç¨ï¼å ä¸ºå¨é£éå£°æçæ®éé¡ºåºéå¸¸å°±è¶³å¤äºã\n\n# å¤åå±æ§å\n\nå¨è®¾ç½®beanå±æ§æ¶ï¼å¯ä»¥ä½¿ç¨å¤åæåµå¥å±æ§åï¼åªè¦è·¯å¾çææç»ä»¶(æç»å±æ§åé¤å¤)é½ä¸æ¯nullçãèèä¸é¢çbeanå®ä¹\n\n<bean id="something" class="things.thingone">\n    <property name="fred.bob.sammy" value="123" />\n</bean>\n\n\nsomething beanæä¸ä¸ªfredå±æ§ï¼å®æä¸ä¸ªbobå±æ§ï¼bobè¿æä¸ä¸ªsammyå±æ§ï¼æåçsammyå±æ§è¢«è®¾ç½®ä¸ºå¼123ãä¸ºäºæ­£å¸¸è§£æï¼å¨æé beanä¹åï¼somethingçfredå±æ§åfredçbobå±æ§ä¸è½ä¸ºç©ºãå¦åï¼æåºnullpointerexceptionã\n\n<?xml version="1.0" encoding="utf-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n       xmlns:xsi="http://www.w3.org/2001/xmlschema-instance" xmlns:p="http://www.springframework.org/schema/p"\n       xsi:schemalocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">\n<bean id="student" class="pre.chl.spring.core.student" p:ref-ref="courseref">\n    \x3c!--å¦ææä¸é¢è¿è¡æ³¨éäºå°±ä¼æå¼å¸¸nullvalueinnestedpathexception\n\tå¦æä¸æ³¨éï¼scoreæåçå¼ä¹æ¯99ï¼å¯è§på½åç©ºé´ååå§æ ç­¾æ··ç¨å¯è½ä¼åºç°å²\tçªï¼åºè¯¥åªä¼éåå§æ ç­¾åç´ å»è§£æ--\x3e\n    \x3c!--<property name="ref" ref="courseref"/>--\x3e\n    <property name="ref.score" value="99"/>\n</bean>\n    <bean id="courseref" class="pre.chl.spring.core.course" p:score="100"/>\n</beans>\n\n\n\n# 1.4.3. depends-on\n\nå¦æä¸ä¸ªbeanæ¯å¦ä¸ä¸ªbeançä¾èµé¡¹ï¼åéå¸¸æå³çå°ä¸ä¸ªbeanè®¾ç½®ä¸ºå¦ä¸ä¸ªbeançå±æ§ã éå¸¸ï¼æ¨å¯ä»¥ä½¿ç¨åºäºxmlçéç½®åæ°æ®ä¸­ç<ref />åç´ æ¥å®ææ­¤æä½ã ä½æ¯ï¼ææ¶beanä¹é´çä¾èµä¸å¤ªç´æ¥ã ä¸ä¸ªä¾å­æ¯å½è¦è§¦åç±»ä¸­çéæåå§åå¨çæ¶åï¼ä¾å¦æ°æ®åºé©±å¨ç¨åºæ³¨åã depends-onå¯ä»¥æ¾å¼å°å¼ºå¶åå§åä¸ä¸ªæå¤ä¸ªä½¿ç¨è¯¥åç´ å¼ç¨çbeanã ä¸é¢çç¤ºä¾ä½¿ç¨depends-onå±æ§æ¥è¡¨ç¤ºå¯¹åä¾beançä¾èµå³ç³»ï¼\n\n<bean id="beanone" class="examplebean" depends-on="manager"/>\n<bean id="manager" class="managerbean" />\n\n\nè¦è¡¨è¾¾å¯¹å¤ä¸ªbeançä¾èµå³ç³»ï¼è¯·æä¾ä¸ä¸ªbeanåç§°çåè¡¨ä½ä¸ºdepends-onå±æ§çå¼ï¼éå·ï¼ç©ºæ ¼ååå·é½æ¯åæ³ çåéç¬¦ï¼ï¼\n\n<bean id="beanone" class="examplebean" depends-on="manager,accountdao">\n    <property name="manager" ref="manager" />\n</bean>\n\n<bean id="manager" class="managerbean" />\n<bean id="accountdao" class="x.y.jdbc.jdbcaccountdao" />\n\n\n> depends-onæ¢å¯ä»¥æå®åå§åæ¶ä¾èµé¡¹ï¼å¨åä¾beançæåµä¸ï¼ä¹å¯ä»¥æå®ç¸åºçéæ¯æ¶ä¾èµé¡¹ãå¨éæ¯ç»å®beanæ¬èº«ä¹åï¼é¦åéæ¯ depends-onçbeanãå æ­¤ï¼ depends-onè¿å¯ä»¥æ§å¶å³é­é¡ºåºã\n\n\n# 1.4.4. æå è½½beans\n\né»è®¤æåµä¸ï¼ä½ä¸ºåå§åè¿ç¨çä¸é¨åï¼applicationcontextå®ç°ä¼å°½æ©åå»ºåéç½®ææåä¾beanã éå¸¸ï¼è¿ç§é¢åå§åæ¯å¯åçï¼å ä¸ºä¸æ°å°æ¶çè³æ°å¤©åç¸æ¯ï¼ä¼ç«å³åç°éç½®æç¯å¢åæ°ä¸­çéè¯¯ã å¦ææ¨ä¸å¸æè¿æ ·åï¼åå¯ä»¥éè¿å°beanå®ä¹æ è®°ä¸ºå»¶è¿åå§åæ¥é»æ­¢åä¾beançé¢å®ä¾åã å»¶è¿åå§åçbeanåè¯iocå®¹å¨å¨é¦æ¬¡è¯·æ±æ¶ï¼èä¸æ¯å¨å¯å¨æ¶ï¼æåå»ºä¸ä¸ªbeanå®ä¾ã\n\nå¨xmlä¸­ï¼æ­¤è¡ä¸ºç±<bean />åç´ ä¸çlazy-initå±æ§æ§å¶ï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\n<bean id="lazy" class="com.something.expensivetocreatebean" lazy-init="true"/>\n<bean name="not.lazy" class="com.something.anotherbean"/>\n\n\napplicationcontextä½¿ç¨ä¸è¿°éç½®æ¶ï¼å½applicationcontextå¯å¨ï¼lazy beanä¸ä¼ç«å³é¢å®ä¾åï¼not.lazy beanè¢«å°½æ©å°é¢å®ä¾åã\n\nä½æ¯ï¼å½å»¶è¿åå§åçbeanæ¯æªå»¶è¿åå§åçåä¾beançä¾èµé¡¹æ¶ï¼applicationcontextä¼å¨å¯å¨æ¶åå»ºå»¶è¿åå§åçbeanï¼å ä¸ºå®å¿é¡»æ»¡è¶³åä¾çä¾èµå³ç³»ã å»¶è¿åå§åçbeanè¢«æ³¨å¥å°å¶ä»æªå»¶è¿åå§åçåä¾beanä¸­ã\n\næ¨è¿å¯ä»¥ä½¿ç¨<beans />åç´ ä¸çdefault-lazy-initå±æ§å¨å®¹å¨çº§å«æ§å¶å»¶è¿åå§åï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\n<beans default-lazy-init="true">\n    \x3c!-- no beans will be pre-instantiated... --\x3e\n</beans>\n\n\n\n# 1.4.5. èªå¨è£éåä½è\n\nspringå®¹å¨å¯ä»¥èªå¨è£éåä½beanä¹é´çå³ç³»ãæ¨å¯ä»¥éè¿æ£æ¥applicationcontextçåå®¹ï¼è®©springä¸ºæ¨çbeanèªå¨è§£æåä½è(å¶ä»bean)ãèªå¨è£éå·æä»¥ä¸ä¼ç¹ï¼\n\n * èªå¨è£éå¯ä»¥æ¾èåå°æå®å±æ§ææé å¨åæ°çéè¦ã(æ¬ç« å¶ä»å°æ¹è®¨è®ºçå¶ä»æºå¶ï¼æ¯å¦beanæ¨¡æ¿ï¼å¨è¿æ¹é¢ä¹å¾æä»·å¼ã)\n\n * éçå¯¹è±¡çæ´æ°ï¼èªå¨è£éå¯ä»¥æ´æ°éç½®ã ä¾å¦ï¼å¦æéè¦å°ä¾èµé¡¹æ·»å å°ç±»ä¸­ï¼åæ éä¿®æ¹éç½®å³å¯èªå¨æ»¡è¶³è¯¥ä¾èµé¡¹ã å æ­¤ï¼èªå¨è£éå¨å¼åè¿ç¨ä¸­ç¹å«æç¨ï¼èä¸å¿å¦å®å¨ä»£ç åºåå¾æ´ç¨³å®æ¶åæ¢å°æ¾å¼è£éçéæ©ã\n\nä½¿ç¨åºäºxmlçéç½®åæ°æ®æ¶ï¼è¯·åéâä¾èµæ³¨å¥âï¼ï¼å¯ä»¥ä½¿ç¨<bean />åç´ çautowireå±æ§ä¸ºbeanå®ä¹æå®èªå¨è£éæ¨¡å¼ã èªå¨è£éåè½å·æåç§æ¨¡å¼ã æ¨å¯ä»¥ä¸ºæ¯ä¸ªbeanæå®èªå¨è£éï¼å¹¶éæ©è¦èªå¨è£éçæ¨¡å¼ã ä¸è¡¨æè¿°äºåç§èªå¨è£éæ¨¡å¼ï¼\n\nmode          explanation\nno            (é»è®¤)ä¸èªå¨è£éãbeanå¼ç¨å¿é¡»ç±refåç´ å®ä¹ãå¯¹äºè¾å¤§çé¨ç½²ï¼ä¸å»ºè®®æ´æ¹é»è®¤è®¾ç½®ï¼å ä¸ºæ¾å¼å°æå®åä½èå¯ä»¥æä¾æ´å¥½çæ§å¶åéæåº¦ãå¨æç§ç¨åº¦ä¸ï¼å®è®°å½äºç³»ç»çç»æã\nbyname        æå±æ§åç§°èªå¨è£éã springæ¥æ¾ä¸éè¦èªå¨è£éçå±æ§ååçbeanã\n              ä¾å¦ï¼å¦æä¸ä¸ªbeanå®ä¹è¢«è®¾ç½®ä¸ºæåç§°èªå¨è£éï¼å¹¶ä¸åå«ä¸ä¸ªmasterå±æ§ï¼å³ï¼å®å·æsetmasterï¼..ï¼æ¹æ³ï¼ï¼é£ä¹springå°æ¥æ¾ä¸ä¸ªåä¸ºmasterçbeanå®ä¹å¹¶ä½¿ç¨å®æ¥è®¾ç½®è¯¥å±æ§ã\nbytype        å¦æå®¹å¨ä¸­æ°å¥½å­å¨è¯¥å±æ§ç±»åçä¸ä¸ªbeanï¼åèªå¨è£éè¯¥å±æ§ãå¦æå­å¨å¤ä¸ªï¼å°æåºä¸ä¸ªè´å½å¼å¸¸ï¼è¿è¡¨ææ¨ä¸è½å¯¹è¯¥beanä½¿ç¨bytypeèªå¨è£éãå¦ææ²¡æå¹éçbeanï¼åä»ä¹ä¹ä¸ä¼åç(å±æ§æ²¡æè®¾ç½®)ã\nconstructor   ä¸bytypeç±»ä¼¼ï¼ä½éç¨äºæé å½æ°åæ°ã å¦æå®¹å¨ä¸­ä¸å­å¨æé å½æ°åæ°ç±»åçä¸ä¸ªbeanï¼åå°å¼åè´å½éè¯¯ã\n\nä½¿ç¨bytypeææé å¨èªå¨è£éæ¨¡å¼ï¼æ¨å¯ä»¥è£éæ°ç»åéåç±»ã å¨è¿ç§æåµä¸ï¼å°æä¾å®¹å¨ä¸­ä¸é¢æç±»åå¹éçææèªå¨è£éåéï¼ä»¥æ»¡è¶³ä¾èµã å¦æææçkeyç±»åä¸ºstringï¼åå¯ä»¥èªå¨è£éå¼ºç±»åmapå®ä¾ã èªå¨è£éçmapå®ä¾çå¼åæ¬ä¸ææç±»åå¹éçææbeanå®ä¾ï¼å¹¶ä¸mapå®ä¾çkeyåå«ç¸åºçbeanåç§°ã\n\n# èªå¨è£éçå±éåç¼ºç¹\n\nå½å¨é¡¹ç®ä¸­ä¸è´ä½¿ç¨èªå¨è£éæ¶ï¼èªå¨è£éæææä½³ã å¦æä¸å¨é¨ä½¿ç¨èªå¨è£éï¼åå¯è½ä¼ä½¿å¼åäººåä½¿ç¨èªå¨è£éä»æ¥è£éä¸ä¸ªæä¸¤ä¸ªbeanå®ä¹èæå°å°æã\n\nèèèªå¨è£éçå±éæ§åç¼ºç¹ï¼\n\n * propertyåconstructor-argè®¾ç½®ä¸­çæ¾å¼ä¾èµæ»æ¯è¦çèªå¨è£éãæ¨ä¸è½èªå¨è£éç®åçå±æ§ï¼å¦åè¯­ãstringsåclasses(ä»¥åè¿äºç®åå±æ§çæ°ç»)ãè¿ç§éå¶æ¯ç±è®¾è®¡é æçã\n\n * èªå¨è£éä¸å¦æ¾ç¤ºè£éä¸¥æ ¼ãå°½ç®¡å¦æ­¤ï¼æ­£å¦åé¢çè¡¨ä¸­ææåºçé£æ ·ï¼å¨åºç°å¯è½äº§çæå¤ç»æçæ­§ä¹æ¶ï¼springä¼è°¨æå°é¿åçæµãspringç®¡ççå¯¹è±¡ä¹é´çå³ç³»ä¸åæ¾å¼å°è®°å½ã\n\n * ä»springå®¹å¨çæææ¡£çå·¥å·å¯è½æ æ³ä½¿ç¨è£éä¿¡æ¯ã\n\n * å®¹å¨åçå¤ä¸ªbeanå®ä¹å¯è½ä¸è¦èªå¨è£éçsetteræ¹æ³ææé å¨åæ°æå®çç±»åå¹éã å¯¹äºæ°ç»ï¼éåæmapå®ä¾ï¼è¿ä¸ä¸å®æ¯é®é¢ã ä½æ¯ï¼å¯¹äºéè¦åä¸ªå¼çä¾èµé¡¹ï¼ä¸ä¼éä¾¿è§£å³æ­¤æ­§ä¹ã å¦ææ²¡æå¯ä¸çbeanå®ä¹å¯ç¨ï¼åä¼å¼åå¼å¸¸ã\n\nå¨åä¸ç§æåµä¸ï¼æ¨æå ç§éæ©ï¼\n\n * ä½¿ç¨æ¾ç¤ºè£éèä¸æ¯èªå¨è£é\n\n * éè¿å°å¶beançautowire-candidateå±æ§è®¾ç½®ä¸ºfalseï¼é¿åèªå¨è£ébeanï¼å¦ä¸ä¸èæè¿°ã\n\n * éè¿å°å¶<bean />åç´ çprimaryå±æ§è®¾ç½®ä¸ºtrueï¼å°å®ä¹çåä¸ªbeanæå®ä¸ºä¸»è¦åéå¯¹è±¡ã\n\n * å®ç°åºäºæ³¨è§£çéç½®æä¾çæ´ç»ç²åº¦çæ§å¶ã\n\n# ä»èªå¨è£éä¸­æé¤bean\n\nå¨æ¯ä¸ªbeançåºç¡ä¸ï¼æ¨å¯ä»¥ä»èªå¨è£éä¸­æé¤ä¸ä¸ªbeanã ä½¿ç¨springçxmlæ ¼å¼ï¼å°<bean />åç´ çautowire-candidateå±æ§è®¾ç½®ä¸ºfalseã å®¹å¨ä½¿ç¹å®çbeanå¯¹èªå¨è£éåºç¡æ¶æä¸å¯ç¨ï¼åæ¬æ³¨è§£å¼çéç½®ï¼ä¾å¦@autowiredï¼ã\n\n> autowire-candidateå±æ§è¢«è®¾è®¡ä¸ºåªå½±ååºäºç±»åçèªå¨è£éãå®ä¸å½±åéè¿åç§°è¿è¡çæ¾å¼å¼ç¨ï¼å³ä½¿æå®çbeanæ²¡æè¢«æ è®°ä¸ºèªå¨è£éåéå¯¹è±¡ï¼ä¹ä¼è§£æè¯¥å¼ç¨ãå æ­¤ï¼å¦æåç§°å¹éï¼æåç§°èªå¨è£éä»ç¶ä¼æ³¨å¥ä¸ä¸ªbeanã\n\næ¨è¿å¯ä»¥åºäºä¸beanåç§°çæ¨¡å¼å¹éæ¥éå¶èªå¨è£éåéé¡¹ã é¡¶çº§<beans />åç´ å¨å¶default-autowire-candidateså±æ§ä¸­æ¥åä¸ä¸ªæå¤ä¸ªæ¨¡å¼ã ä¾å¦ï¼è¦å°èªå¨è£éåéç¶æéå¶ä¸ºåç§°ä»¥repositoryç»å°¾çä»»ä½beanï¼è¯·æä¾* repositoryå¼ã è¦æä¾å¤ç§æ¨¡å¼ï¼è¯·å¨ä»¥éå·åéçåè¡¨ä¸­å®ä¹å®ä»¬ã beanå®ä¹çautowire-candidateå±æ§çæ¾å¼å¼trueæfalseå§ç»ä¼åã å¯¹äºæ­¤ç±»beanï¼æ¨¡å¼å¹éè§åä¸éç¨ã\n\nè¿äºææ¯å¯¹äºé£äºæ¨ä¸å¸æéè¿èªå¨è£éè¢«æ³¨å¥å°å¶ä»beanä¸­çbeanéå¸¸æç¨ãè¿å¹¶ä¸æå³çä¸è½ä½¿ç¨èªå¨è£éæ¥éç½®è¢«æé¤çbeanæ¬èº«ãç¸åï¼beanæ¬èº«å¹¶ä¸æ¯èªå¨è£éå¶ä»beançåéå¯¹è±¡ã\n\n\n# 1.4.6. æ¹æ³æ³¨å¥\n\nå¨å¤§å¤æ°åºç¨åºæ¯ä¸­ï¼å®¹å¨ä¸­çå¤§å¤æ°beanæ¯åä¾çã å½åä¾beanéè¦ä¸å¦ä¸ä¸ªåä¾beanåä½æéåä¾beanéè¦ä¸å¦ä¸ä¸ªéåä¾beanåä½æ¶ï¼éå¸¸å¯ä»¥éè¿å°ä¸ä¸ªbeanå®ä¹ä¸ºå¦ä¸ä¸ªbeançå±æ§æ¥å¤çä¾èµã å½beanççå½å¨æä¸åæ¶ä¼åºç°é®é¢ã åè®¾åä¾bean aå¯è½éè¦ä½¿ç¨éåä¾ï¼ååï¼bean bï¼ä¹è®¸æ¯å¨açæ¯ä¸ªæ¹æ³è°ç¨æ¶ä½¿ç¨çãå®¹å¨ä»åå»ºä¸æ¬¡åä¾bean aï¼å æ­¤åªæä¸æ¬¡æºä¼æ¥è®¾ç½®å±æ§ã æ¯æ¬¡éè¦ä¸ä¸ªbean bæ¶ï¼å®¹å¨é½æ æ³ä¸ºbean aæä¾ä¸ä¸ªæ°çbean bå®ä¾ã\n\nä¸ä¸ªè§£å³æ¹æ¡æ¯æ¾å¼ä¸äºæ§å¶åè½¬ãæ¨å¯ä»¥éè¿å®ç°applicationcontextawareæ¥å£ä½¿bean aæç¥å°å®¹å¨ï¼å¹¶å¨bean aæ¯æ¬¡éè¦bean bå®ä¾æ¶åå®¹å¨ååºgetbean(âbâ)è°ç¨æ¥è·å¾(éå¸¸æ¯æ°ç)ãä¸é¢çç¤ºä¾æ¼ç¤ºäºè¿ç§æ¹æ³ï¼\n\n// a class that uses a stateful command-style class to perform some processing\npackage fiona.apple;\n\n// spring-api imports\nimport org.springframework.beans.beansexception;\nimport org.springframework.context.applicationcontext;\nimport org.springframework.context.applicationcontextaware;\n\npublic class commandmanager implements applicationcontextaware {\n\n    private applicationcontext applicationcontext;\n\n    public object process(map commandstate) {\n        // grab a new instance of the appropriate command\n        command command = createcommand();\n        // set the state on the (hopefully brand new) command instance\n        command.setstate(commandstate);\n        return command.execute();\n    }\n\n    protected command createcommand() {\n        // notice the spring api dependency!\n        return this.applicationcontext.getbean("command", command.class);\n    }\n\n    public void setapplicationcontext(\n            applicationcontext applicationcontext) throws beansexception {\n        this.applicationcontext = applicationcontext;\n    }\n}\n\n\nåé¢çæåµæ¯ä¸å¯åçï¼å ä¸ºä¸å¡ä»£ç è½å¤æç¥springæ¡æ¶å¹¶ä¸ä¹è¦åãæ¹æ³æ³¨å¥æ¯spring iocå®¹å¨çä¸ä¸ªé«çº§ç¹æ§ï¼å®è®©æ¨å¾å¥½å°å¤çè¿ä¸ªç¨ä¾ã\n\n> æ¨å¯ä»¥å¨è¿ç¯åå®¢æç« ä¸­éè¯»æ´å¤å³äºæ¹æ³æ³¨å¥çæ¢è®¨ã\n\n# lookupæ¹æ³æ³¨å¥\n\nlookup æ¹æ³æ³¨å¥æ¯å®¹å¨éåå®¹å¨ç®¡ççbeanä¸çæ¹æ³å¹¶è¿åå®¹å¨ä¸­å¦ä¸ä¸ªbeançåè½ã æ¥æ¾éå¸¸æ¶åååbeanï¼å¦ä¸ä¸èä¸­æè¿°ã springæ¡æ¶éè¿ä½¿ç¨cglibåºä¸­çå­èç çæåè½æ¥å¨æçæè¦çè¯¥æ¹æ³çå­ç±»ï¼ä»èå®ç°æ­¤æ¹æ³æ³¨å¥ã\n\n>  * ä¸ºäºä½¿æ­¤å¨æå­ç±»èµ·ä½ç¨ï¼spring beanå®¹å¨å­ç±»çç±»åä¹ä¸è½æ¯finalï¼èè¦è¦ççæ¹æ³ä¹ä¸è½æ¯finalã\n> \n>  * å¯¹å·ææ½è±¡æ¹æ³çç±»è¿è¡ååæµè¯éè¦æ¨èªå·±å¯¹è¯¥ç±»è¿è¡å­ç±»åï¼å¹¶æä¾è¯¥æ½è±¡æ¹æ³çstubå®ç°ã\n> \n>  * ç»ä»¶æ«æä¹éè¦å·ä½çæ¹æ³ï¼è¿éè¦å·ä½çç±»ã\n> \n>  * å¦ä¸ä¸ªå³é®éå¶æ¯ï¼æ¥æ¾æ¹æ³ä¸éç¨äºå·¥åæ¹æ³ï¼å°¤å¶ä¸éç¨äºéç½®ç±»ä¸­ç@beanæ¹æ³ï¼å ä¸ºå¨è¿ç§æåµä¸ï¼å®¹å¨ä¸è´è´£åå»ºå®ä¾ï¼å æ­¤æ æ³åå»ºè¿è¡æ¶çæç å¨æå­ç±»ã\n\nå¯¹äºåé¢çä»£ç çæ®µä¸­çcommandmanagerç±»ï¼springå®¹å¨å¨æå°éåcreatecommandï¼ï¼æ¹æ³ã å¦éåçç¤ºä¾æç¤ºï¼commandmanagerç±»æ²¡æä»»ä½springä¾èµé¡¹ï¼\n\npackage fiona.apple;\n\n// no more spring imports!\n\npublic abstract class commandmanager {\n\n    public object process(object commandstate) {\n        // grab a new instance of the appropriate command interface\n        command command = createcommand();\n        // set the state on the (hopefully brand new) command instance\n        command.setstate(commandstate);\n        return command.execute();\n    }\n\n    // okay... but where is the implementation of this method?\n    protected abstract command createcommand();\n}\n\n\nå¨åå«è¦æ³¨å¥çæ¹æ³çå®¢æ·ç«¯ç±»ï¼å¨æ¬ä¾ä¸­ä¸ºcommandmanagerï¼ä¸­ï¼è¦æ³¨å¥çæ¹æ³éè¦ä»¥ä¸å½¢å¼çç­¾åï¼\n\n<public|protected> [abstract] <return-type> themethodname(no-arguments);\n\n\nå¦ææ¹æ³æ¯æ½è±¡çï¼åå¨æçæçå­ç±»å®ç°è¯¥æ¹æ³ãå¦åï¼å¨æçæçå­ç±»ä¼è¦çå¨åå§ç±»ä¸­å®ä¹çå·ä½æ¹æ³ãèèä»¥ä¸ç¤ºä¾:\n\n\x3c!-- a stateful bean deployed as a prototype (non-singleton) --\x3e\n<bean id="mycommand" class="fiona.apple.asynccommand" scope="prototype">\n    \x3c!-- inject dependencies here as required --\x3e\n</bean>\n\n\x3c!-- commandprocessor uses statefulcommandhelper --\x3e\n<bean id="commandmanager" class="fiona.apple.commandmanager">\n    <lookup-method name="createcommand" bean="mycommand"/>\n</bean>\n\n\nidä¸ºcommandmanagerçbeanå¨éè¦mycommand beançæ°å®ä¾æ¶è°ç¨èªå·±çcreatecommand()æ¹æ³ãå¦æç¡®å®éè¦é¨ç½²mycommand beanï¼é£ä¹å¿é¡»å°å¿å°å°å¶ä½ä¸ºååé¨ç½²ãå¦ææ¯åä¾ï¼åæ¯æ¬¡è¿åmycommand beançç¸åå®ä¾ã\n\nå¦å¤ï¼å¨åºäºæ³¨è§£çç»ä»¶æ¨¡å¼ä¸­ï¼æ¨å¯ä»¥éè¿@lookupæ³¨è§£å£°æä¸ä¸ªæ¥æ¾æ¹æ³ï¼å¦ä¸é¢çç¤ºä¾æç¤ºï¼\n\npublic abstract class commandmanager {\n\n    public object process(object commandstate) {\n        command command = createcommand();\n        command.setstate(commandstate);\n        return command.execute();\n    }\n\n    @lookup("mycommand")\n    protected abstract command createcommand();\n}\n\n\næèï¼æ´å¸¸ç¨çæ¯ï¼æ¨å¯ä»¥ä¾èµäºæ ¹æ®æ¥æ¾æ¹æ³å£°æçè¿åç±»åè§£æç®æ bean\n\npublic abstract class commandmanager {\n\n    public object process(object commandstate) {\n        mycommand command = createcommand();\n        command.setstate(commandstate);\n        return command.execute();\n    }\n\n    @lookup\n    protected abstract mycommand createcommand();\n}\n\n\nè¯·æ³¨æï¼éå¸¸åºä½¿ç¨å·ä½çstubå®ç°å£°ææ­¤ç±»å¸¦æ³¨è§£çæ¥æ¾æ¹æ³ï¼ä»¥ä½¿å¶ä¸springçç»ä»¶æ«æè§åï¼é»è®¤æåµä¸æ½è±¡ç±»ä¼è¢«å¿½ç¥ï¼å¼å®¹ã æ­¤éå¶ä¸éç¨äºæ¾å¼æ³¨åææ¾å¼å¯¼å¥çbeanç±»ã\n\n> è®¿é®ä½ç¨åä¸åçç®æ beançå¦ä¸ç§æ¹æ³æ¯objectfactory / provideræ³¨å¥ç¹ã\n> \n> servicelocatorfactorybeanï¼å¨org.springframework.beans.factory.configåä¸­ï¼ä¹å¾æç¨ã\n\n# ä»»ææ¹æ³æ¿æ¢\n\nä¸æ¥æ¾æ¹æ³æ³¨å¥ç¸æ¯ï¼æ¹æ³æ³¨å¥çä¸ç§ä¸å¤ªæç¨çå½¢å¼æ¯è½å¤ç¨å¦ä¸ç§æ¹æ³å®ç°æ¿æ¢æç®¡beanä¸­çä»»ææ¹æ³ã æ¨å¯ä»¥æ¾å¿å°è·³è¿æ¬èçå¶ä½é¨åï¼ç´å°æ¨çæ­£éè¦æ­¤åè½ä¸ºæ­¢ã\n\nåå©åºäºxmlçéç½®åæ°æ®ï¼æ¨å¯ä»¥ä½¿ç¨replaced-methodåç´ å°ç°æçæ¹æ³å®ç°æ¿æ¢ä¸ºå¦ä¸ä¸ªã èèä»¥ä¸ç±»ï¼è¯¥ç±»å·æä¸ä¸ªæä»¬è¦è¦ççåä¸ºcomputevalueçæ¹æ³ï¼\n\npublic class myvaluecalculator {\n\n    public string computevalue(string input) {\n        // some real code...\n    }\n\n    // some other methods...\n}\n\n\nä¸ä¸ªå®ç°org.springframework.beans.factory.support.methodreplaceræ¥å£çç±»æä¾äºæ°çæ¹æ³å®ä¹ï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\n/**\n * meant to be used to override the existing computevalue(string)\n * implementation in myvaluecalculator\n */\npublic class replacementcomputevalue implements methodreplacer {\n\n    public object reimplement(object o, method m, object[] args) throws throwable {\n        // get the input value, work with it, and return a computed result\n        string input = (string) args[0];\n        ...\n        return ...;\n    }\n}\n\n\nç¨äºé¨ç½²åå§ç±»å¹¶æå®æ¹æ³éåçbeanå®ä¹ç±»ä¼¼äºä»¥ä¸ç¤ºä¾ï¼\n\n<bean id="myvaluecalculator" class="x.y.z.myvaluecalculator">\n    \x3c!-- arbitrary method replacement --\x3e\n    <replaced-method name="computevalue" replacer="replacementcomputevalue">\n        <arg-type>string</arg-type>\n    </replaced-method>\n</bean>\n\n<bean id="replacementcomputevalue" class="a.b.c.replacementcomputevalue"/>\n\n\næ¨å¯ä»¥å¨<replaced-method />åç´ åä½¿ç¨ä¸ä¸ªæå¤ä¸ª<arg-type />åç´ æ¥æç¤ºè¢«è¦ççæ¹æ³çæ¹æ³ç­¾åã ä»å½æ¹æ³éè½½ä¸ç±»ä¸­å­å¨å¤ä¸ªåä½æ¶ï¼æéè¦å¯¹åæ°ç­¾åã ä¸ºäºæ¹ä¾¿èµ·è§ï¼åæ°çç±»åå­ç¬¦ä¸²å¯ä»¥æ¯å®å¨éå®ç±»ååç§°çå­å­ç¬¦ä¸²ã ä¾å¦ï¼ä»¥ä¸ææé½å¹éjava.lang.stringï¼\n\njava.lang.string\nstring\nstr\n\n\nå ä¸ºåæ°çæ°ééå¸¸è¶³ä»¥åºåæ¯ä¸ªå¯è½çéæ©ï¼æä»¥éè¿è®©æ¨ä»é®å¥ä¸åæ°ç±»åå¹éçæç­å­ç¬¦ä¸²ï¼æ­¤å¿«æ·æ¹å¼å¯ä»¥èçå¾å¤è¾å¥ã\n\n\n# 1.5. beanä½ç¨å\n\nåå»ºä¸ä¸ªbeanå®ä¹æ¶ï¼å°åå»ºä¸ä¸ªéç½®ï¼è¯¥éç½®ç¨äºåå»ºè¯¥beanå®ä¹æå®ä¹çç±»çå®ä¾ã beanå®ä¹æ¯éç½®çææ³å¾éè¦ï¼å ä¸ºå®æå³æ¨å¯ä»¥ä»ä¸ä¸ªéç½®ä¸­åå»ºä¸ä¸ªç±»çè®¸å¤å¯¹è±¡å®ä¾ã\n\næ¨ä¸ä»å¯ä»¥æ§å¶è¦æå¥å°ä»ç¹å®beanå®ä¹åå»ºçå¯¹è±¡ä¸­çåç§ä¾èµé¡¹åéç½®å¼ï¼è¿å¯ä»¥æ§å¶ä»ç¹å®beanå®ä¹åå»ºçå¯¹è±¡çä½ç¨åã è¿ç§æ¹æ³åè½å¼ºå¤§ä¸çµæ´»ï¼å ä¸ºæ¨å¯ä»¥éæ©éè¿éç½®åå»ºçå¯¹è±¡çä½ç¨åï¼èä¸å¿å¨javaç±»çº§å«ä¸bakeï¼è¿éä¸ç¥éå¦ä½ç¿»è¯ï¼å¯¹è±¡çä½ç¨åã å¯ä»¥å°beanå®ä¹ä¸ºé¨ç½²å¨å¤ä¸ªä½ç¨åä¹ä¸ä¸­ã springæ¡æ¶æ¯æå­ä¸ªä½ç¨åï¼å¶ä¸­åä¸ªåªæå¨ä½¿ç¨webæç¥çapplicationcontextæ¶æå¯ç¨ã æ¨è¿å¯ä»¥åå»ºèªå®ä¹ä½ç¨åã\n\nscope         description\nsingleton     ï¼é»è®¤å¼ï¼å°æ¯ä¸ªspring iocå®¹å¨çåä¸ªbeanå®ä¹ä½ç¨åéå®ä¸ºåä¸ªå¯¹è±¡å®ä¾ã\nprototype     å°åä¸ªbeanå®ä¹çä½ç¨åéå®ä¸ºä»»ææ°éçå¯¹è±¡å®ä¾ã\nrequest       å°åä¸ªbeanå®ä¹çä½ç¨åéå®ä¸ºåä¸ªhttpè¯·æ±ççå½å¨æåã\n              ä¹å°±æ¯è¯´ï¼æ¯ä¸ªhttpè¯·æ±é½æä¸ä¸ªèªå·±çbeanå®ä¾ï¼å®æ¯å¨åä¸ªbeanå®ä¹çåºç¡ä¸åå»ºçã\n              ä»å¨webæç¥çspring applicationcontextä¸ä¸æä¸­ææã\nsession       å°åä¸ªbeanå®ä¹çä½ç¨åéå®ä¸ºhttp sessionççå½å¨æåã ä»å¨webæç¥çspring\n              applicationcontextä¸ä¸æä¸­ææã\napplication   å°åä¸ªbeanå®ä¹çä½ç¨åéå®ä¸ºservletcontextççå½å¨æåã ä»å¨webæç¥çspring\n              applicationcontextä¸ä¸æä¸­ææã\nwebsocket     å°åä¸ªbeanå®ä¹çä½ç¨åéå®ä¸ºwebsocketççå½å¨æåã ä»å¨webæç¥çspring\n              applicationcontextä¸ä¸æä¸­ææã\n\n> ä»spring 3.0å¼å§ï¼çº¿ç¨ä½ç¨åå¯ç¨ï¼ä½é»è®¤æåµä¸æªæ³¨åã æå³æ´å¤ä¿¡æ¯ï¼è¯·åè§simplethreadscopeææ¡£ã æå³å¦ä½æ³¨åæ­¤æä»»ä½å¶ä»èªå®ä¹ä½ç¨åçè¯´æï¼è¯·åéèªå®ä¹ä½ç¨åã\n\n\n# 1.5.1. åä¾ä½ç¨å\n\nä¸ä¸ªåä¾beanåªæä¸ä¸ªå±äº«å®ä¾è¢«ç®¡çï¼ææå¯¹å·æä¸ä¸ªæå¤ä¸ªä¸è¯¥beanå®ä¹å¹éçidçbeançè¯·æ±é½ä¼å¯¼è´springå®¹å¨è¿åä¸ä¸ªç¹å®çbeanå®ä¾ã\n\næ¢å¥è¯è¯´ï¼å½æ¨å®ä¹ä¸ä¸ªbeanå®ä¹å¹¶å°å¶å®ä¹ä¸ºåä¾æ¶ï¼spring iocå®¹å¨å°ä¸ºè¯¥beanå®ä¹æå®ä¹çå¯¹è±¡åå»ºä¸ä¸ªå®ä¾ã è¯¥åä¸ªå®ä¾å­å¨å¨æ­¤ç±»åä¾beançç¼å­ä¸­ï¼å¹¶ä¸å¯¹è¯¥å½åbeançææåç»­è¯·æ±åå¼ç¨é½è¿åç¼å­çå¯¹è±¡ã ä¸å¾æ¾ç¤ºäºåä¾ä½ç¨åçå·¥ä½æ¹å¼ï¼\n\n\n\nspringçåä¾beanæ¦å¿µä¸ãgang of four (gof)ãä¸ä¹¦ä¸­å®ä¹çåä¾æ¨¡å¼ä¸åã gofä¸­çåä¾å¯¹å¯¹è±¡çä½ç¨åè¿è¡ç¡¬ç¼ç ï¼ä»¥ä½¿æ¯ä¸ªclassloaderåªè½åå»ºä¸ä¸ªç¹å®ç±»çä¸ä¸ªå®ä¾ã æå¥½å°springåä¾ä½ç¨åæè¿°ä¸ºæ¯ä¸ªå®¹å¨åæ¯ä¸ªbeanã è¿æå³çï¼å¦ææ¨å¨åä¸ªspringå®¹å¨ä¸­ä¸ºç¹å®ç±»å®ä¹ä¸ä¸ªbeanï¼åspringå®¹å¨å°åå»ºè¯¥beanå®ä¹æå®ä¹çç±»çä¸ä¸ªä¸åªæä¸ä¸ªå®ä¾ã åä¾ä½ç¨åæ¯springä¸­çé»è®¤ä½ç¨åã è¦å¨xmlä¸­å®ä¹åä¾beanï¼å¯ä»¥å¦ä»¥ä¸ç¤ºä¾æç¤ºå®ä¹beanï¼\n\n<bean id="accountservice" class="com.something.defaultaccountservice"/>\n\n\x3c!-- the following is equivalent, though redundant (singleton scope is the default) --\x3e\n<bean id="accountservice" class="com.something.defaultaccountservice" scope="singleton"/>\n\n\n\n# 1.5.2. ååä½ç¨å\n\næ¯æ¬¡è¯·æ±ç¹å®beanæ¶ï¼éåä¾çååä½ç¨åé½ä¼å¯¼è´åå»ºä¸ä¸ªæ°çbeanå®ä¾ã ä¹å°±æ¯è¯´ï¼è¯¥beanè¢«æ³¨å¥å°å¦ä¸ä¸ªbeanä¸­ï¼æèæ¨å¯ä»¥éè¿å®¹å¨ä¸çgetbeanï¼ï¼æ¹æ³è°ç¨æ¥è¯·æ±å®ã éå¸¸ï¼åºå°ååä½ç¨åç¨äºæææç¶æçbeanï¼å°åä¾ä½ç¨åç¨äºæ ç¶æçbeanã\n\nä¸é¢çå¾è¡¨è¯´æäºspringååä½ç¨å\n\n\n\n(æ°æ®è®¿é®å¯¹è±¡(dao)éå¸¸ä¸è¢«éç½®ä¸ºååï¼å ä¸ºå¸åçdaoä¸ææä»»ä½ä¼è¯ç¶æãéç¨åä¾å¾çæ ¸å¿å¯¹æä»¬æ¥è¯´æ´å®¹æã)\n\nä¸é¢çç¤ºä¾å¨xmlä¸­å°beanå®ä¹ååï¼\n\n<bean id="accountservice" class="com.something.defaultaccountservice" scope="prototype"/>\n\n\nä¸å¶ä»ä½ç¨åç¸åï¼springä¸ç®¡çååbeançå®æ´çå½å¨æã å®¹å¨å®ä¾åï¼éç½®æç»è£ååå¯¹è±¡ï¼ç¶åå°å¶äº¤ç»å®¢æ·ç«¯ï¼èæ éä¿æå¯¹è¯¥ååå®ä¾çè¿ä¸æ­¥è®°å½ã å æ­¤ï¼å°½ç®¡æ è®ºå¨ä»ä¹ä½ç¨äºä¸é½ä¼å¨ææå¯¹è±¡ä¸è°ç¨åå§åçå½å¨æåè°æ¹æ³ï¼ä½å¯¹äºååï¼åä¸ä¼è°ç¨å·²éç½®çéæ¯çå½å¨æåè°ã å®¢æ·ç«¯ä»£ç å¿é¡»æ¸é¤ååä½ç¨ååçå¯¹è±¡ï¼å¹¶éæ¾ååbeanæ¥æçæè´µèµæºã ä¸ºäºä½¿springå®¹å¨éæ¾ååä½ç¨ä¸çbeanææ¥æçèµæºï¼è¯·å°è¯ä½¿ç¨èªå®ä¹beanåç½®å¤çå¨ï¼è¯¥å¤çå¨åå«å¯¹éè¦æ¸ççbeançå¼ç¨ã\n\nå¨æäºæ¹é¢ï¼springå®¹å¨å¨ååä½ç¨åbeanæ¹é¢çè§è²æ¯java newè¿ç®ç¬¦çæ¿ä»£ã è¶è¿è¯¥ç¹ï¼ä¹å°±æ¯newä¹åï¼çææçå½å¨æç®¡çå¿é¡»ç±å®¢æ·ç«¯å¤çã ï¼æå³springå®¹å¨ä¸­beanççå½å¨æçè¯¦ç»ä¿¡æ¯ï¼è¯·åéçå½å¨æåè°ãï¼\n\n\n# 1.5.3. åå«ååbeanå¼ç¨çåä¾beans\n\nå½æ¨ä½¿ç¨å¯¹ååbeanæä¾èµæ§çåä¾ä½ç¨åbeanæ¶ï¼è¯·æ³¨æï¼ä¾èµå³ç³»å¨å®ä¾åæ¶è§£æã å æ­¤ï¼å¦æå°ä¾èµçååbeanä¾èµé¡¹æ³¨å¥å°åä¾beanä¸­ï¼åå°å®ä¾åæ°çååbeanï¼ç¶åå°ä¾èµé¡¹æ³¨å¥å°åä¾beanä¸­ã ååå®ä¾æ¯æ¾ç»æä¾ç»åä¾beançå¯ä¸å®ä¾ã\n\nä½æ¯ï¼åè®¾æ¨å¸æåä¾ä½ç¨åçbeanå¨è¿è¡æ¶éå¤è·åååä½ç¨åçbeançæ°å®ä¾ã æ¨ä¸è½å°ååä½ç¨åçbeanä¾èµæ³¨å¥å°æ¨çåä¾beanä¸­ï¼å ä¸ºå½springå®¹å¨å®ä¾ååä¾beanå¹¶è§£æå¹¶æ³¨å¥å¶ä¾èµé¡¹æ¶ï¼è¯¥æ³¨å¥ä»åçä¸æ¬¡ã å¦æå¨è¿è¡æ¶ä¸æ­¢ä¸æ¬¡éè¦ååbeançæ°å®ä¾ï¼è¯·åè§[æ¹æ³æ³¨å¥](###1.4.6. æ¹æ³æ³¨å¥)ã\n\n\n# 1.5.4. request, session, application, and websocket ä½ç¨å\n\nåªæå½æ¨ä½¿ç¨webæç¥çspring applicationcontextå®ç°(å¦xmlwebapplicationcontext)æ¶ï¼request,session, application, åwebsocketä½ç¨åæå¯ç¨ãå¦æå¨å¸¸è§çspring iocå®¹å¨(å¦classpathxmlapplicationcontext)ä¸­ä½¿ç¨è¿äºä½ç¨åï¼åä¼æåºä¸ä¸ªæªç¥beanä½ç¨åçillegalstateexceptionã\n\n# åå§webéç½®\n\nä¸ºäºæ¯ærequest,session,application,websocketè¿äºåºäºwebçbeanä½ç¨åï¼éè¦å¨å®ä¹beanååä¸äºåå§åéç½®ï¼singleton,prototypeæ åä½ç¨åä¸æ¯å¿é¡»çï¼ã\n\nå¦åå®æè¿äºåå§åæ­¥éª¤åå³äºä½ çservletç¯å¢ã\n\nå¦ææ¨å¨ spring web mvc ä¸­è®¿é®ä»¥ä¸ä½ç¨å beanï¼å®éä¸æ¯å¨ spring dispatcherservlet å¤ççè¯·æ±ä¸­ï¼åä¸éè¦ç¹æ®è®¾ç½®ãdispatcherservlet å·²ç»æ´é²äºææç¸å³çç¶æã\n\nå¦æä½ ç¨çæ¯servlet2.5çwebå®¹å¨ï¼å¨springçdispatcherservletå¤é¨å¤çè¯·æ±ï¼ä¾å¦jsfæèstrutsï¼ï¼ä½ éè¦æ³¨åorg.springframework.web.context.request.requestcontextlistener ï¼servletrequestlistener.servlet 3.0+ï¼,ä¹å¯ä»¥ç¨webapplicationinitializeræ¥å£ä»¥ç¼ç¨æ¹å¼å®ç°ï¼æèå¯¹äºæ´èçå®¹å¨æ¥è¯´ï¼æ·»å ä»¥ä¸å£°æå¨web.xmlæä»¶ä¸­\n\n<web-app>\n    ...\n    <listener>\n        <listener-class>\n            org.springframework.web.context.request.requestcontextlistener\n        </listener-class>\n    </listener>\n    ...\n</web-app>\n\n\næèå¯ä»¥ç¨springçrequestcontextfilterï¼è¿ä¸ªè¿æ»¤å¨æ å°åå³äºwebåºç¨çéç½®ï¼æä»¥å¿é¡»åéå¾æ´æ¹å®ï¼ä»¥ä¸æ¯ä¸ä¸ªwebåºç¨çé¨åè¿æ»¤å¨éç½®ï¼\n\n<web-app>\n    ...\n    <filter>\n        <filter-name>requestcontextfilter</filter-name>\n        <filter-class>org.springframework.web.filter.requestcontextfilter</filter-class>\n    </filter>\n    <filter-mapping>\n        <filter-name>requestcontextfilter</filter-name>\n        <url-pattern>/*</url-pattern>\n    </filter-mapping>\n    ...\n</web-app>\n\n\ndispatcherservletãrequestcontextlistener å requestcontextfilter é½åå®å¨ç¸åçäºæï¼å³å° http è¯·æ±å¯¹è±¡ç»å®å°ä¸ºè¯¥è¯·æ±æä¾æå¡ççº¿ç¨ã è¿ä½¿å¾requeståsessionä½ç¨åç bean å¨è°ç¨é¾çæ´ä¸æ¸¸å¯ç¨ã\n\n# reqeustä½ç¨å\n\nä»¥ä¸é¢çxmlå½¢å¼çbeanå®ä¹ä¸¾ä¾ï¼\n\n<bean id="loginaction" class="com.something.loginaction" scope="request"/>\n\n\nspring å®¹å¨éè¿ä¸ºæ¯ä¸ª http è¯·æ±ä½¿ç¨ loginaction bean å®ä¹æ¥åå»º loginaction bean çæ°å®ä¾ã ä¹å°±æ¯è¯´ï¼ loginaction bean çä½ç¨åæ¯ http è¯·æ±çº§å«çã æ¨å¯ä»¥æ ¹æ®éè¦æ´æ¹æåå»ºå®ä¾çåé¨ç¶æï¼å ä¸ºä»åä¸loginaction bean å®ä¹åå»ºçå¶ä»å®ä¾ä¸ä¼çå°è¿äºç¶ææ´æ¹ã å®ä»¬æ¯éå¯¹åä¸ªè¯·æ±çã å½è¯·æ±å®æå¤çæ¶ï¼è¯¥è¯·æ±èå´åç bean å°è¢«åºå¼ã\n\nå½ä½¿ç¨æ³¨è§£é©±å¨çç»ä»¶æèjavaéç½®æ¶ï¼@reqeustscopeæ³¨è§£å¯ç¨äºæå®ä¸ä¸ªç»ä»¶ä¸ºrequestä½ç¨åï¼å¦ä¸ç¤ºä¾ï¼\n\n@requestscope\n@component\npublic class loginaction {\n    // ...\n}\n\n\n# sessionä½ç¨å\n\nä»¥ä¸é¢çxmlå½¢å¼çbeanå®ä¹ä¸¾ä¾ï¼\n\n<bean id="userpreferences" class="com.something.userpreferences" scope="session"/>\n\n\nspring å®¹å¨éè¿å¨åä¸ª http ä¼è¯ççå½å¨æä¸­ä½¿ç¨ userpreferences bean å®ä¹åå»º userpreferences bean çæ°å®ä¾ã æ¢å¥è¯è¯´ï¼userpreferences bean ä½ç¨åæ¯ http ä¼è¯çº§å«ã ä¸reqeustä½ç¨åç bean ä¸æ ·ï¼æ¨å¯ä»¥æ ¹æ®éè¦æ´æ¹æåå»ºå®ä¾çåé¨ç¶æï¼å¶ä»http sessionä¹å¨ä½¿ç¨ä»ç¸å userpreferences bean å®ä¹åå»ºçå®ä¾ä¸ä¼çå°è¿äºç¶ææ´æ¹ ï¼å ä¸ºå®ä»¬ç¹å®äºåä¸ª http ä¼è¯ã å½ http ä¼è¯æç»è¢«ä¸¢å¼æ¶ï¼ä½ç¨åä¸ºè¯¥ç¹å® http ä¼è¯ç bean ä¹å°è¢«ä¸¢å¼ã\n\nå½ä½¿ç¨æ³¨è§£é©±å¨çç»ä»¶æèjavaéç½®æ¶ï¼@sessionscopeæ³¨è§£å¯ç¨äºæå®ä¸ä¸ªç»ä»¶ä¸ºsessionä½ç¨åï¼å¦ä¸ç¤ºä¾ï¼\n\n@sessionscope\n@component\npublic class userpreferences {\n    // ...\n}\n\n\n# applicationä½ç¨å\n\nä»¥ä¸é¢çxmlå½¢å¼çbeanå®ä¹ä¸¾ä¾ï¼\n\n<bean id="apppreferences" class="com.something.apppreferences" scope="application"/>\n\n\nspring å®¹å¨éè¿ä¸ºæ´ä¸ª web åºç¨ç¨åºä½¿ç¨ä»¥ä¸å®ä¹ä¸æ¬¡æ¥åå»º apppreferences bean çæ°å®ä¾ã ä¹å°±æ¯è¯´ï¼apppreferences bean çèå´å¨ servletcontext çº§å«ï¼å¹¶å­å¨ä¸ºå¸¸è§ servletcontext å±æ§ã è¿æç¹ç±»ä¼¼äº spring åä¾ beanï¼ä½å¨ä¸¤ä¸ªéè¦æ¹é¢ææä¸åï¼å®æ¯æ¯ä¸ª servletcontext çåä¾ï¼èä¸æ¯æ¯ä¸ª spring \'applicationcontext\'ï¼å¨ä»»ä½ç»å®ç web åºç¨ç¨åºä¸­å¯è½æå¤ä¸ªï¼ï¼å¹¶ä¸å®å®éä¸æ¯å¬å¼çï¼å æ­¤ ä½ä¸º servletcontext å±æ§å¯è§ã\n\nå½ä½¿ç¨æ³¨è§£é©±å¨çç»ä»¶æèjavaéç½®æ¶ï¼@applicationscopeæ³¨è§£å¯ç¨äºæå®ä¸ä¸ªç»ä»¶ä¸ºapplicationä½ç¨åï¼å¦ä¸ç¤ºä¾ï¼\n\n@applicationscope\n@component\npublic class apppreferences {\n    // ...\n}\n\n\n# ä¾èµä¸­çä½ç¨åbean\n\nspring ioc å®¹å¨ä¸ä»ç®¡çå¯¹è±¡ï¼beanï¼çå®ä¾åï¼è¿ç®¡çåä½èï¼æä¾èµé¡¹ï¼çè¿æ¥ã å¦ææ¨æ³å°ï¼ä¾å¦ï¼ä¸ä¸ª http è¯·æ±èå´ç bean æ³¨å¥å°å¦ä¸ä¸ªçå½å¨ææ´é¿ç bean ä¸­ï¼æ¨å¯ä»¥éæ©æ³¨å¥ä¸ä¸ª aop ä»£çæ¥ä»£æ¿è¯¥ä½ç¨åç beanã ä¹å°±æ¯è¯´ï¼æ¨éè¦æ³¨å¥ä¸ä¸ªä»£çå¯¹è±¡ï¼è¯¥å¯¹è±¡å¬å¼ä¸ä½ç¨åå¯¹è±¡ç¸åçå¬å±æ¥å£ï¼ä½ä¹å¯ä»¥ä»ç¸å³ä½ç¨åï¼ä¾å¦ http è¯·æ±ï¼ä¸­æ£ç´¢çå®ç®æ å¯¹è±¡ï¼å¹¶å°æ¹æ³è°ç¨å§æç»çå®å¯¹è±¡ã\n\n> æ¨è¿å¯ä»¥å¨ä½ç¨åä¸ºåä¾ç bean ä¹é´ä½¿ç¨<aop:scoped-proxy/>ï¼ç¶åå¼ç¨éè¿å¯åºååçä¸­é´ä»£çï¼å æ­¤è½å¤å¨ååºååæ¶éæ°è·åç®æ åä¾ beanã\n> \n> å½éå¯¹ååç bean å£°æ<aop:scoped-proxy/> æ¶ï¼å±äº«ä»£çä¸çæ¯ä¸ªæ¹æ³è°ç¨é½ä¼å¯¼è´åå»ºä¸ä¸ªæ°çç®æ å®ä¾ï¼ç¶åå°è°ç¨è½¬åå°è¯¥å®ä¾ã\n> \n> æ­¤å¤ï¼ååä»£çå¹¶ä¸æ¯ä»¥çå½å¨æå®å¨çæ¹å¼ä»è¾ç­ä½ç¨åè®¿é® bean çå¯ä¸æ¹æ³ã æ¨è¿å¯ä»¥å°æ¨çæ³¨å¥ç¹ï¼å³æé å½æ°æ setter åæ°æèªå¨è£éå­æ®µï¼å£°æä¸º objectfactory<mytargetbean>ï¼ä»èåè®¸æ¯æ¬¡éè¦æ¶è°ç¨ getobject() æ¥æéæ£ç´¢å½åå®ä¾ â æ éä¿çå®ä¾æåç¬å­å¨ã\n> \n> ä½ä¸ºæ©å±åä½ï¼æ¨å¯ä»¥å£°æ objectprovider<mytargetbean>ï¼å®æä¾äºå ä¸ªé¢å¤çè®¿é®åä½ï¼åæ¬ getifavailable å getifuniqueã\n> \n> æ­¤ jsr-330 åä½ç§°ä¸º providerï¼å¹¶ä¸ provider<mytargetbean> å£°æåæ¯æ¬¡æ£ç´¢å°è¯çç¸åº get() è°ç¨ä¸èµ·ä½¿ç¨ã æå³ jsr-330 æ´ä½çæ´å¤è¯¦ç»ä¿¡æ¯ï¼è¯·åè§æ­¤å¤ã\n\nä¸ä¾ä¸­çéç½®åªæä¸è¡ï¼ä½äºè§£å¶èåçâwhyâä»¥åâhowâå¾éè¦ï¼\n\n<?xml version="1.0" encoding="utf-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n    xmlns:xsi="http://www.w3.org/2001/xmlschema-instance"\n    xmlns:aop="http://www.springframework.org/schema/aop"\n    xsi:schemalocation="http://www.springframework.org/schema/beans\n        https://www.springframework.org/schema/beans/spring-beans.xsd\n        http://www.springframework.org/schema/aop\n        https://www.springframework.org/schema/aop/spring-aop.xsd">\n\n    \x3c!-- an http session-scoped bean exposed as a proxy --\x3e\n    <bean id="userpreferences" class="com.something.userpreferences" scope="session">\n        \x3c!-- instructs the container to proxy the surrounding bean --\x3e\n        <aop:scoped-proxy/> \n    </bean>\n\n    \x3c!-- a singleton-scoped bean injected with a proxy to the above bean --\x3e\n    <bean id="userservice" class="com.something.simpleuserservice">\n        \x3c!-- a reference to the proxied userpreferences bean --\x3e\n        <property name="userpreferences" ref="userpreferences"/>\n    </bean>\n</beans>\n\n\nè¦åå»ºè¿æ ·çä»£çï¼è¦å° <aop:scoped-proxy/> åç´ æå¥å°ä½ç¨å bean å®ä¹ä¸­ï¼è¯·åééæ©è¦åå»ºçä»£çç±»åååºäºxmléç½®æ¨¡å¼ï¼ã ä¸ºä»ä¹å¨è¯·æ±ãä¼è¯åèªå®ä¹èå´çº§å«èå´åç bean å®ä¹éè¦<aop:scoped-proxy/> åç´ ï¼ èèä»¥ä¸åä¾ bean å®ä¹ï¼å¹¶å°å¶ä¸æ¨éè¦ä¸ºä¸è¿°èå´å®ä¹çåå®¹è¿è¡å¯¹æ¯ï¼è¯·æ³¨æï¼ä»¥ä¸ userpreferences bean å®ä¹ä¸å®æ´ï¼ï¼\n\n<bean id="userpreferences" class="com.something.userpreferences" scope="session"/>\n\n<bean id="usermanager" class="com.something.usermanager">\n    <property name="userpreferences" ref="userpreferences"/>\n</bean>\n\n\nå¨åé¢çç¤ºä¾ä¸­ï¼åä¾ bean (usermanager) è¢«æ³¨å¥äºå¯¹ http ä¼è¯èå´ bean (userpreferences) çå¼ç¨ã è¿éçéç¹æ¯ usermanager bean æ¯ä¸ä¸ªåä¾ï¼å®å¨æ¯ä¸ªå®¹å¨ä¸­è¢«å®ä¾åä¸æ¬¡ï¼å¹¶ä¸å®çä¾èµé¡¹ï¼å¨è¿ç§æåµä¸åªæä¸ä¸ªï¼userpreferences beanï¼ä¹åªæ³¨å¥ä¸æ¬¡ã è¿æå³ç usermanager bean åªå¯¹å®å¨ç¸åç userpreferences å¯¹è±¡ï¼å³æåæ³¨å¥å®çé£ä¸ªå¯¹è±¡ï¼è¿è¡æä½ã\n\nè¿ä¸æ¯æ¨å°çå½å¨æè¾ç­çä½ç¨å bean æ³¨å¥å°çå½å¨æè¾é¿çä½ç¨å beanï¼ä¾å¦ï¼å° http ä¼è¯ä½ç¨åç bean ä½ä¸ºä¾èµé¡¹æ³¨å¥å°åä¾ bean ä¸­ï¼æ¶æ³è¦çè¡ä¸ºã ç¸åï¼æ¨éè¦ä¸ä¸ª usermanager å¯¹è±¡ï¼å¹¶ä¸ï¼å¯¹äº http ä¼è¯ççå½å¨æï¼æ¨éè¦ä¸ä¸ªç¹å®äº http ä¼è¯ç userpreferences å¯¹è±¡ã å æ­¤ï¼å®¹å¨åå»ºä¸ä¸ªå¯¹è±¡ï¼è¯¥å¯¹è±¡å¬å¼ä¸ userpreferences ç±»å®å¨ç¸åçå¬å±æ¥å£ï¼çæ³æåµä¸æ¯ä¸ä¸ª userpreferences å®ä¾çå¯¹è±¡ï¼ï¼å®å¯ä»¥ä»ä½ç¨åæºå¶ï¼http è¯·æ±ãä¼è¯ç­ï¼ä¸­è·åçæ­£ç userpreferences å¯¹è±¡ ãå®¹å¨å°è¿ä¸ªä»£çå¯¹è±¡æ³¨å¥å° usermanager bean ä¸­ï¼å®ä¸ç¥éè¿ä¸ª userpreferences å¼ç¨æ¯ä¸ä¸ªä»£çã å¨è¿ä¸ªä¾å­ä¸­ï¼å½ä¸ä¸ª usermanager å®ä¾å¨ä¾èµæ³¨å¥ç userpreferences å¯¹è±¡ä¸è°ç¨ä¸ä¸ªæ¹æ³æ¶ï¼å®å®éä¸æ¯å¨è°ç¨ä»£çä¸çä¸ä¸ªæ¹æ³ã ç¶åä»£çä»ï¼å¨è¿ç§æåµä¸ï¼http ä¼è¯ä¸­è·åçå®ç userpreferences å¯¹è±¡ï¼å¹¶å°æ¹æ³è°ç¨å§æç»æ£ç´¢å°ççå® userpreferences å¯¹è±¡ã\n\nå æ­¤ï¼å¨å°requeståsessionä½ç¨åç bean æ³¨å¥å¯¹è±¡æ¶ï¼æ¨éè¦ä»¥ä¸ï¼æ­£ç¡®ä¸å®æ´çï¼éç½®ï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\n<bean id="userpreferences" class="com.something.userpreferences" scope="session">\n    <aop:scoped-proxy/>\n</bean>\n\n<bean id="usermanager" class="com.something.usermanager">\n    <property name="userpreferences" ref="userpreferences"/>\n</bean>\n\n\n# éæ©è¦åå»ºçä»£çå¯¹è±¡ç±»å\n\né»è®¤æåµä¸ï¼å½ spring å®¹å¨ä¸ºä½¿ç¨ <aop:scoped-proxy/> åç´ æ è®°ç bean åå»ºä»£çæ¶ï¼å°åå»ºåºäº cglib çç±»ä»£çã\n\n> cglib ä»£çåªæ¦æªå¬å±æ¹æ³è°ç¨ï¼ ä¸è¦å¨è¿æ ·çä»£çä¸è°ç¨éå¬å±æ¹æ³ã å®ä»¬ä¸ä¼å§æç»å®éä½ç¨åçç®æ å¯¹è±¡ã\n\næèï¼æ¨å¯ä»¥éç½® spring å®¹å¨ï¼éè¿ä¸º <aop:scoped-proxy/> åç´ ç proxy-target-class å±æ§çå¼æå® false æ¥ä¸ºæ­¤ç±»ä½ç¨å bean åå»ºæ åçåºäº jdk æ¥å£çä»£çã ä½¿ç¨åºäº jdk æ¥å£çä»£çæå³çæ¨ä¸éè¦åºç¨ç¨åºç±»è·¯å¾ä¸­çå¶ä»åºæ¥å®ç°æ­¤ç±»ä»£çã ä½æ¯ï¼è¿ä¹æå³çä½ç¨å bean çç±»å¿é¡»è³å°å®ç°ä¸ä¸ªæ¥å£ï¼å¹¶ä¸æ³¨å¥ä½ç¨å bean çææä¾èµé½å¿é¡»éè¿å¶æ¥å£ä¹ä¸å¼ç¨ beanã ä»¥ä¸ç¤ºä¾æ¾ç¤ºäºåºäºæ¥å£çä»£çï¼\n\n\x3c!-- defaultuserpreferences implements the userpreferences interface --\x3e\n<bean id="userpreferences" class="com.stuff.defaultuserpreferences" scope="session">\n    <aop:scoped-proxy proxy-target-class="false"/>\n</bean>\n\n<bean id="usermanager" class="com.stuff.usermanager">\n    <property name="userpreferences" ref="userpreferences"/>\n</bean>\n\n\næå³éæ©åºäºç±»æåºäºæ¥å£çä»£ççæ´å¤è¯¦ç»ä¿¡æ¯ï¼è¯·åéä»£çæºå¶ã\n\n\n# 1.5.5. èªå®ä¹ä½ç¨å\n\nbean ä½ç¨åæºå¶æ¯å¯æ©å±çã æ¨å¯ä»¥å®ä¹èªå·±çä½ç¨åï¼çè³éæ°å®ä¹ç°æä½ç¨åï¼å°½ç®¡åèè¢«è®¤ä¸ºæ¯ä¸å¥½çåæ³ï¼å¹¶ä¸æ¨ä¸è½è¦çåç½®çåä¾åååä½ç¨åã\n\n# åå»ºèªå®ä¹ä½ç¨å\n\nè¦å°èªå®ä¹ä½ç¨åéæå° spring å®¹å¨ä¸­ï¼æ¨éè¦å®ç° org.springframework.beans.factory.config.scopeæ¥å£ï¼è¿å¨æ¬èä¸­è¿è¡äºæè¿°ã æå³å¦ä½å®ç°æ¨èªå·±çä½ç¨åï¼è¯·åé spring framework æ¬èº«æä¾ç scope å®ç°å scope javadocï¼å®æ´è¯¦ç»å°è§£éäºæ¨éè¦å®ç°çæ¹æ³ã\n\nscope æ¥å£æåç§æ¹æ³å¯ä»¥ä»ä½ç¨åä¸­è·åå¯¹è±¡ï¼ä»ä½ç¨åä¸­ç§»é¤å®ä»¬ï¼ä»¥åè®©å®ä»¬è¢«éæ¯ã\n\nä¾å¦ï¼ä¼è¯ä½ç¨åå®ç°è¿åä¼è¯ä½ç¨å beanï¼å¦æå®ä¸å­å¨ï¼åè¯¥æ¹æ³å¨å°å®ç»å®å°ä¼è¯ä»¥ä¾å°æ¥å¼ç¨åè¿åè¯¥ bean çä¸ä¸ªæ°å®ä¾ï¼ã ä»¥ä¸æ¹æ³ä»ä½ç¨åè¿åå¯¹è±¡ï¼\n\nobject get(string name, objectfactory<?> objectfactory)\n\n\nä¾å¦ï¼ä¼è¯ä½ç¨åå®ç°ä»ä¼è¯ä¸­å é¤ä¼è¯ä½ç¨åç beanã åºè¯¥è¿åä¸ä¸ªå¯¹è±¡ï¼ä½å¦ææ²¡ææ¾å°å·ææå®åç§°çå¯¹è±¡ï¼æ¨å¯ä»¥è¿å nullã ä»¥ä¸æ¹æ³ä»ä½ç¨åä¸­å é¤å¯¹è±¡ï¼\n\nobject remove(string name)\n\n\nä»¥ä¸æ¹æ³æ³¨åäºä¸ä¸ªåè°ï¼å½å®è¢«éæ¯æä½ç¨åä¸­çæå®å¯¹è±¡è¢«éæ¯æ¶ï¼è¯¥ä½ç¨ååºè¯¥è°ç¨è¯¥åè°ï¼\n\nvoid registerdestructioncallback(string name, runnable destructioncallback)\n\n\næå³éæ¯åè°çæ´å¤ä¿¡æ¯ï¼è¯·åé javadoc æ spring scopeå®ç°ã\n\nä»¥ä¸æ¹æ³è·åä½ç¨åçä¼è¯æ è¯ç¬¦ï¼\n\nstring getconversationid()\n\n\nè¿ä¸ªæ è¯ç¬¦å¯¹äºæ¯ä¸ªä½ç¨åé½æ¯ä¸åçã å¯¹äºä¼è¯ä½ç¨åçå®ç°ï¼æ­¤æ è¯ç¬¦å¯ä»¥æ¯sessionæ è¯ç¬¦ã\n\n# ä½¿ç¨èªå®ä¹ä½ç¨å\n\nå¨æ¨ç¼åå¹¶æµè¯ä¸ä¸ªæå¤ä¸ªèªå®ä¹ scope å®ç°ä¹åï¼æ¨éè¦è®© spring å®¹å¨æç¥ä½ çæ°ä½ç¨åã ä»¥ä¸æ¹æ³æ¯å spring å®¹å¨æ³¨åæ° scope çä¸­å¿æ¹æ³ï¼\n\nvoid registerscope(string scopename, scope scope);\n\n\næ­¤æ¹æ³å¨ ````configurablebeanfactoryæ¥å£ä¸å£°æï¼è¯¥æ¥å£å¯éè¿ spring éå¸¦çå¤§å¤æ°å·ä½applicationcontext``` å®ç°ç beanfactory å±æ§è·å¾ã\n\nregisterscope(..) æ¹æ³çç¬¬ä¸ä¸ªåæ°æ¯ä¸ä½ç¨åå³èçå¯ä¸åç§°ã spring å®¹å¨æ¬èº«ä¸­æ­¤ç±»åç§°çç¤ºä¾æ¯singletonåprototypeã registerscope(..) æ¹æ³çç¬¬äºä¸ªåæ°æ¯æ¨å¸ææ³¨ååä½¿ç¨çèªå®ä¹ scope å®ç°çå®éå®ä¾ã\n\nâåè®¾å·²ç¼åäºèªå®ä¹å®ç°ï¼ç¶åæç§ä¸ä¸ä¸ªç¤ºä¾è¿è¡æ³¨åãâ\n\n> ä¸ä¸ä¸ªç¤ºä¾ä½¿ç¨ simplethreadscopeï¼å®åå«å¨ spring ä¸­ï¼ä½é»è®¤æåµä¸æªæ³¨åãå¯¹äºæ¨èªå·±çèªå®ä¹ scope å®ç°ï¼ä½¿ç¨æ¹æ³æ¯ç¸åçã\n\nscope threadscope = new simplethreadscope();\nbeanfactory.registerscope("thread", threadscope);\n\n\nç¶åï¼æ¨å¯ä»¥åå»ºç¬¦åèªå®ä¹ scope è§åç bean å®ä¹ï¼å¦ä¸æç¤ºï¼\n\n<bean id="..." class="..." scope="thread">\n\n\nä½¿ç¨èªå®ä¹ scope å®ç°ï¼æ¨ä¸ä»éäºä»¥ç¼ç¨æ¹å¼æ³¨åãæ¨è¿å¯ä»¥ä½¿ç¨ customscopeconfigurer ç±»ä»¥å£°ææ¹å¼è¿è¡ scope æ³¨åï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\n<?xml version="1.0" encoding="utf-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n    xmlns:xsi="http://www.w3.org/2001/xmlschema-instance"\n    xmlns:aop="http://www.springframework.org/schema/aop"\n    xsi:schemalocation="http://www.springframework.org/schema/beans\n        https://www.springframework.org/schema/beans/spring-beans.xsd\n        http://www.springframework.org/schema/aop\n        https://www.springframework.org/schema/aop/spring-aop.xsd">\n\n    <bean class="org.springframework.beans.factory.config.customscopeconfigurer">\n        <property name="scopes">\n            <map>\n                <entry key="thread">\n                    <bean class="org.springframework.context.support.simplethreadscope"/>\n                </entry>\n            </map>\n        </property>\n    </bean>\n\n    <bean id="thing2" class="x.y.thing2" scope="thread">\n        <property name="name" value="rick"/>\n        <aop:scoped-proxy/>\n    </bean>\n\n    <bean id="thing1" class="x.y.thing1">\n        <property name="thing2" ref="thing2"/>\n    </bean>\n\n</beans>\n\n\n> å½æ¨å° <aop:scoped-proxy/> æ¾å¨ factorybean å®ç°ä¸­æ¶ï¼ä½ç¨åçæ¯å·¥å bean æ¬èº«ï¼èä¸æ¯ä» getobject() è¿åçå¯¹è±¡ã\n\n\n# 1.6. èªå®ä¹beanæ§è´¨\n\nspring frameworkæä¾äºè®¸å¤æ¥å£ï¼å¯ä»¥ç¨äºèªå®ä¹beançæ§è´¨ãæ¬èå°å¶åç»å¦ä¸ï¼\n\n * lifecycle callbacks\n * applicationcontextaware & beannameaware\n * å¶ä»awareæ¥å£\n\n\n# 1.6.1. lifecycle åè°\n\nè¦ä¸å®¹å¨ç®¡ççbeançå½å¨æäº¤äºï¼ä½ å¯ä»¥å®ç°initializingbeanådisposablebeanæ¥å£ï¼å®¹å¨ä¼å¨åèä¸è°ç¨afterpropertiesset()ï¼å¨åèè°ç¨destroy()æ¹æ³ï¼è®©beanå¨åå§ååéæ¯çæ¶åæ§è¡æäºæä½ã\n\n> ð¡ jsr-250 @postconstructå@predestroyæ³¨è§£éå¸¸è¢«è®¤ä¸ºæ¯å¨ç°ä»£springåºç¨ä¸­æ¥æ¶çå½å¨æåè°çæä½³å®è·µãä½¿ç¨è¿äºæ³¨è§£æå³çæ¨çbeanä¸è¦åå°springç¹å®çæ¥å£ã\n> \n> å¦ææ¨ä¸æ³ä½¿ç¨jsr-250æ³¨è§£ï¼åéè¦è§£è¦ï¼è¯·èèä½¿ç¨init-methodådestroy-methodç beanå®ä¹åæ°æ®ã\n\nå¨åé¨ï¼springæ¡æ¶ä½¿ç¨beanpostprocessorå®ç°æ¥å¤çå®å¯ä»¥æ¾å°çä»»ä½åè°æ¥å£å¹¶è°ç¨éå½çæ¹æ³ãå¦ææ¨éè¦èªå®ä¹åè½æå¶ä»çå½å¨æè¡ä¸º,springåä¸ä¼é»è®¤æä¾ï¼æ¨å¯ä»¥èªå·±å®ç°beanpostprocessorãæå³æ´å¤ä¿¡æ¯ï¼è¯·åéå®¹å¨æ©å±ç¹ã\n\né¤äºåå§ååéæ¯åè°ä¹å¤ï¼springæç®¡å¯¹è±¡è¿å¯ä»¥å®ç°lifecycleæ¥å£ï¼ä»¥ä¾¿è¿äºå¯¹è±¡å¯ä»¥åä¸å°å®¹å¨å¯å¨åå³é­è¿ç¨ï¼ä½ä¸ºå®¹å¨èªå·±ççå½å¨æçé©±å¨ã\n\n# initializationåå§ååè°\n\norg.springframework.beans.factory.initializationbeanæ¥å£åè®¸beanå¨å®¹å¨ä¸­è®¾ç½®å®beanä¸çææå¿éå±æ§åæ§è¡åå§åå·¥ä½ãinitializingbeanæ¥å£å®ä¹äºä¸ä¸ªæ¹æ³ï¼\n\nvoid afterpropertiesset() throws exception;\n\n\n**æä»¬å»ºè®®æ¨ä¸è¦ä½¿ç¨initializingbeanæ¥å£ï¼å ä¸ºå®ä¸å¿è¦å°å°ä»£ç è¦åå°springãæèï¼æä»¬å»ºè®®ä½¿ç¨@postconstructæ³¨è§£ææå®pojoåå§åæ¹æ³ãå¨åºäºxmlçéç½®åæ°æ®çæåµä¸ï¼æ¨å¯ä»¥ä½¿ç¨init-methodå±æ§æå®å·ævoid no-argumentç­¾åçæ¹æ³çåç§°ãä½¿ç¨javaéç½®ï¼æ¨å¯ä»¥ä½¿ç¨@beançinitmethodå±æ§ã**è¯·åéæ¥æ¶çå½å¨æåè°ãèèä»¥ä¸ç¤ºä¾ï¼\n\n<bean id="exampleinitbean" class="examples.examplebean" init-method="init"/>\n\n\npublic class examplebean {\n\n    public void init() {\n        // do some initialization work\n    }\n}\n\n\næ­¤ç¤ºä¾ä¸ä»¥ä¸ç¤ºä¾å ä¹å®å¨ç¸å:\n\n<bean id="exampleinitbean" class="examples.anotherexamplebean"/>\n\n\npublic class anotherexamplebean implements initializingbean {\n\n    @override\n    public void afterpropertiesset() {\n        // do some initialization work\n    }\n}\n\n\nä½æ¯ï¼ç¬¬ä¸ä¸ªç¤ºä¾ä»£ç æ²¡æä¸springè¦åã\n\n# destructionéæ¯åè°\n\nå®ç°org.springframework.beans.factory.disposablebeanæ¥å£åè®¸beanå½åå«å®çå®¹å¨è¢«éæ¯æ¶ä¼æ¶å°åè°ãdisposablebeanæ¥å£å®ä¹äºä¸ä¸ªæ¹æ³ï¼\n\nvoid destroy() throws exception;\n\n\n**æä»¬å»ºè®®æ¨ä¸è¦ä½¿ç¨disposablebeanæ¥å£ï¼å ä¸ºå®ä¸å¿è¦å°å°ä»£ç è¦åå°springãæèï¼æä»¬å»ºè®®ä½¿ç¨@predestroyæ³¨è§£ææå®beanå®ä¹æ¯æçæ³åæ¹æ³ãå¨åºäºxmlçéç½®åæ°æ®çæåµä¸ï¼æ¨å¯ä»¥å¨ä¸­ä½¿ç¨destroy-methodå±æ§ãä½¿ç¨javaéç½®ï¼æ¨å¯ä»¥ä½¿ç¨@beançdestroymethoadå±æ§ã**è¯·åéæ¥æ¶çå½å¨æåè°ãèèä»¥ä¸ç¤ºä¾ï¼\n\n<bean id="exampleinitbean" class="examples.examplebean" destroy-method="cleanup"/>\n\n\npublic class examplebean {\n\n    public void cleanup() {\n        // do some destruction work (like releasing pooled connections)\n    }\n}\n\n\næ­¤ç¤ºä¾ä¸ä»¥ä¸ç¤ºä¾å ä¹å®å¨ç¸å:\n\n<bean id="exampleinitbean" class="examples.anotherexamplebean"/>\n\n\npublic class anotherexamplebean implements disposablebean {\n\n    @override\n    public void destroy() {\n        // do some destruction work (like releasing pooled connections)\n    }\n}\n\n\nä½æ¯ï¼ç¬¬ä¸ä¸ªç¤ºä¾ä»£ç æ²¡æä¸springè¦åã\n\n> ð¡ æ¨å¯ä»¥åé<bean>åç´ çdestroy-methodå±æ§ä¸ä¸ªç¹æ®ï¼æ¨æ­ï¼å¼ï¼è¯¥å¼æç¤ºspringå¨ç¹å®beanç±»ä¸èªå¨æ£æµpulic closeæèshutdownãï¼ä»»ä½å®ç°java.lang.autoclosableæjava.io.closableçç±»é½ä¼å¹éãï¼æ¨è¿å¯ä»¥å¨<bean>åç´ çdefault-destroy-methodå±æ§ä¸è®¾ç½®æ­¤ç¹æ®ï¼æ¨æ­çï¼å¼ä»¥åºç¨æ­¤è¡ä¸ºå°ä¸ç»beanä¸ï¼è¯·åéé»è®¤åå§ååéæ¯æ¹æ³ï¼ãè¯·æ³¨æï¼è¿æ¯javaéç½®çé»è®¤è¡ä¸ºã\n\n# é»è®¤åå§ååéæ¯æ¹æ³\n\nå½ä¸éè¿å®ç°springç¹å®çinitializingbeanådisposablebeanå®ä¹çæ¥å£æ¥å®æåå§ååéæ¯æ¹æ³åè°æ¶ï¼éå¸¸ä¼ä½¿ç¨åinit()ï¼initialize()ï¼dispose()ç­åç§°ç¼åæ¹æ³ãçæ³æåµä¸ï¼è¿äºçå½å¨æåè°æ¹æ³çåç§°å¨é¡¹ç®ä¸­åºè¯¥æ ååï¼ä»¥ä¾¿ææå¼åäººåä½¿ç¨ç¸åçæ¹æ³åç§°å¹¶ç¡®ä¿ä¸è´æ§ã\n\næ¨å¯ä»¥éç½®springå®¹å¨å¨æ¯ä¸ªbeanä¸æ¥æ¾æå®å½åçåå§ååéæ¯åè°æ¹æ³ãè¿æå³çæ¨ä½ä¸ºåºç¨ç¨åºå¼åäººåï¼ä¸ç¨ä¸ºæ¯ä¸ªbeanéç½®init-methoad="init"çå±æ§ï¼å°±å¯ä»¥ç¼ååä¸ºinit()çåå§ååè°æ¹æ³ãspring iocå®¹å¨å¨åå»ºbeanæ¶è°ç¨è¯¥æ¹æ³ï¼å¹¶æ ¹æ®ååæè¿°çæ åçå½å¨æåè°çº¦å®ï¼ãæ­¤åè½è¿ç¡®ä¿äºåå§ååéæ¯æ¹æ³åè°çå½åä¸è´çº¦å®ã\n\nåè®¾æ¨çåå§ååè°æ¹æ³åä¸ºinit()ï¼æ¨çéæ¯åè°æ¹æ³åä¸ºdestroy()ãç¶åï¼æ¨çç±»ç±»ä¼¼ä»¥ä¸ç¤ºä¾ï¼\n\npublic class defaultblogservice implements blogservice {\n\n    private blogdao blogdao;\n\n    public void setblogdao(blogdao blogdao) {\n        this.blogdao = blogdao;\n    }\n\n    // this is (unsurprisingly) the initialization callback method\n    public void init() {\n        if (this.blogdao == null) {\n            throw new illegalstateexception("the [blogdao] property must be set.");\n        }\n    }\n}\n\n\nç¶åï¼æ¨å¯ä»¥å¨ç±»ä¼¼äºä»¥ä¸åå®¹çbeanå®ä¹ä¸­ä½¿ç¨è¯¥ç±»ï¼\n\n<beans default-init-method="init">\n\n    <bean id="blogservice" class="com.something.defaultblogservice">\n        <property name="blogdao" ref="blogdao" />\n    </bean>\n\n</beans>\n\n\né¡¶çº§åç´ å±æ§ä¸çdefault-init-methodå±æ§çå­å¨ä¼å¯¼è´spring iocå®¹å¨è¯å«beanç±»ä¸­ç§°ä¸ºinitçæ¹æ³ä½ä¸ºåå§åæ¹æ³åè°ãåå»ºå¹¶ç»è£beanæ¶ï¼å¦æbeanç±»å·æè¿æ ·çæ¹æ³ï¼åä¼å¨éå½çæ¶é´è°ç¨å®ã\n\næ¨å¯ä»¥ç±»ä¼¼å°éè¿å¨é¡¶çº§åç´ ä¸ä½¿ç¨efault-destroy-methodå±æ§æ¥éç½®é»è®¤éæ¯åè°ã\n\nå½ç°æbeanç±»å·²ç»æä¸çº¦å®åè°æ¹æ³æå·®å¼çæ¹æ³æ¶ï¼å¯ä»¥éè¿ä½¿ç¨çinit-methodådestroy-methodå±æ§æå®æ¹æ³åç§°æ¥è¦çé»è®¤å¼ã\n\nspring å®¹å¨ä¿è¯å¨åbeanæ³¨å¥ææä¾èµé¡¹ä¹åç«å³è°ç¨éç½®çåå§ååè°æ¹æ³ãå æ­¤ï¼å¨åå§beanä¸æä¼è°ç¨åå§ååè°ï¼è¿æå³çaopæ¦æªå¨ç­å°æªåºç¨äºbeanãé¦åå®å¨åå»ºç®æ beanï¼ç¶ååºç¨å·æå¶æ¦æªé¾çaopä»£çãå¦æç®æ beanåä»£çåç¬å®ä¹ï¼åæ¨çä»£ç çè³å¯ä»¥ç»è¿ä»£çç´æ¥ä¸åå§ç®æ beanäº¤äºãå æ­¤ï¼å°æ¦æªå¨åºç¨äºinitæ¹æ³æ¯çç¾çï¼å ä¸ºè¿æ ·åä¼å°ç®æ beanççå½å¨æè¦åå°å¶ä»£çææ¦æªå¨ï¼å¹¶å¨ä»£ç ä¸åå§ç®æ beanç´æ¥äº¤äºæ¶çä¸å¥æªçè¯­ä¹ã\n\n# ç»åçå½å¨ææºå¶\n\næªè³spring 2.5ï¼æ¨æä¸ç§æ¹å¼æ§å¶beançå£°æå¨æï¼ä½ å¯ä»¥ç»åè¿äºæºå¶æ¥æ§å¶beançå£°æå¨æï¼\n\n * initializingbeanådisposablebeanåè°æ¥å£\n * èªå®ä¹init()ådestroyæ¹æ³\n * @postcontructå@predestroyæ³¨è§£\n\n> å¦æä¸ºbeanéç½®äºå¤ä¸ªçå½å¨ææºå¶ï¼å¹¶ä¸æ¯ä¸ªæºå¶éç½®äºä¸ååç§°çæ¹æ³ï¼åæ¯ä¸ªéç½®çæ¹æ³æç§ååºçé¡ºåºè¿è¡ãä½æ¯ï¼å¦æéç½®äºç¸ååç§°çæ¹æ³ - ä¾å¦ï¼åå§åæ¹æ³init() - å¯¹äºè¿äºçå½å¨ææºå¶ä¸­çå¤ä¸ªï¼è¯¥æ¹æ³åªä¼è¿è¡ä¸æ¬¡ã\n\nä¸ºåä¸beanéç½®çå¤ä¸ªçå½å¨ææºå¶ï¼rè¥å·æä¸åçåå§åæ¹æ³ï¼æç§å¦ä¸æç¤ºé¡ºåºæ§è¡ï¼\n\n 1. @postconstructæ³¨éçæ¹æ³\n 2. initializingbeanåè°æ¥å£ä¸­çafterpropertiesset() æ¹æ³\n 3. èªå®ä¹ç init() æ¹æ³\n\néæ¯æ¹æ³ä»¥ç¸åçé¡ºåºè°ç¨ï¼\n\n 1. @predestroyæ³¨éçæ¹æ³\n 2. disposablebeanåè°æ¥å£ä¸­çdestroy() æ¹æ³\n 3. èªå®ä¹ç destroy() æ¹æ³\n\n# å¯å¨ååæ­¢åè°\n\nlifecycleæ¥å£ä¸ºå¯¹è±¡å®ä¹äºä»»ä½å·æå¶èªèº«çå½å¨æè¦æ±çåºæ¬æ¹æ³ï¼ä¾å¦å¯å¨ååæ­¢æäºåå°è¿ç¨ï¼ï¼\n\npublic interface lifecycle {\n\n    void start();\n\n    void stop();\n\n    boolean isrunning();\n}\n\n\nä»»ä½springç®¡ççå¯¹è±¡é½å¯ä»¥å®ç°çå½å¨ææ¥å£ãç¶åï¼å½applicationcontextæ¬èº«æ¥æ¶å¼å§ååæ­¢ä¿¡å·ï¼ä¾å¦ï¼å¨è¿è¡æ¶è¿è¡åæ­¢/éå¯ï¼æ¶ï¼å®å°è¿äºè°ç¨çº§èå°è¯¥ä¸ä¸æä¸­å®ä¹çææçå½å¨æå®ç°ãå®éè¿å°å¶å§æ´¾ç»lifecycleprocessoræ¥å®ç°è¿ä¸ç¹ï¼å¦ä¸æç¤ºæç¤ºï¼\n\npublic interface lifecycleprocessor extends lifecycle {\n\n    void onrefresh();\n\n    void onclose();\n}\n\n\nè¯·æ³¨æï¼lifecycleprocessoræ¬èº«æ¯lifecycleæ¥å£çæ©å±ãå®è¿æ·»å äºå¦å¤ä¸¤ä¸ªæ¹æ³ï¼å°å¨åºç¨ä¸ä¸æå·æ°åå³é­æ¶è°ç¨ã\n\n> ð¡è¯·æ³¨æï¼å¸¸è§org.springframework.context.lifecycleæ¥å£æ¯ä¸ä¸ªç®åççº¦å®ï¼ç¨äºæ¾å¼å¯å¨ååæ­¢éç¥ï¼å¹¶ä¸æå³çä¸ä¸æå·æ°æ¶èªå¨å¯å¨ãå¯¹ç¹å®beançèªå¨å¯å¨ï¼åæ¬å¯å¨é¶æ®µï¼è¿è¡ç»ç²åº¦æ§å¶ï¼è¯·èèå®ç°org.springframework.context.smartlifecycleã\n> \n> æ­¤å¤ï¼è¯·æ³¨æï¼éæ¯åä¸ä¿è¯åèµ·åæ­¢éç¥ãä¸è¬å¨åæ­¢æ¶ï¼æælifecycleå®ç°ç±»é¦åå¨å¸¸è§éæ¯åè°ä¼ æ­ä¹åæ¥æ¶åæ­¢éç¥ãä½æ¯ï¼å¨ä¸ä¸æç­å·æ°æåæ­¢å·æ°å°è¯æé´ï¼åªè°ç¨éæ¯æ¹æ³ã\n\nå¯å¨åå³é­è°ç¨çé¡ºåºå¾éè¦ãå¦æå¨ä»»ä½ä¸¤ä¸ªå¯¹è±¡ä¹é´å­å¨ä¾èµå³ç³»ï¼åéè¦ä¾èµçå°äºå¶ä¾èµé¡¹å¯å¨åå¯å¨ï¼å¹¶ä¸å¨å¶ä¾èµé¡¹åæ­¢ååæ­¢ãä½æ¯ææ¶ï¼ç´æ¥ä¾èµæ¯æªç¥çãæ¨å¯è½åªç¥éæç§ç±»åçå¯¹è±¡åºè¯¥å¨å¦ä¸ä¸ªç±»åçå¯¹è±¡ä¹åå¯å¨ãå¨è¿äºæåµä¸ï¼smartlifecycleæ¥å£å®ä¹äºå¦ä¸ä¸ªéé¡¹ï¼å³å¨å¶ç¶æ¥å£phasedå®ä¹çgetphase()æ¹æ³ãä»¥ä¸æ¯è¯¥æ¥å£çå®ä¹ï¼\n\npublic interface phased {\n\n    int getphase();\n}\n\n\nä»¥ä¸æ¯smartlifecycleæ¥å£çå®ä¹ï¼\n\npublic interface smartlifecycle extends lifecycle, phased {\n\n    boolean isautostartup();\n\n    void stop(runnable callback);\n}\n\n\nå¯å¨æ¶ï¼é¡ºä½æä½çå¯¹è±¡é¦åå¯å¨ãåæ­¢æ¶ï¼é¡ºåºç¸åãå æ­¤ï¼ä¸ä¸ªå®ç°smartlifecycleä¸å¶getphase()æ¹æ³è¿åinteger.min_valueçå¯¹è±¡å°æ¯ç¬¬ä¸ä¸ªå¯å¨åæååæ­¢ãä¹å°±æ¯è¯´ï¼è¿åinteger.max_valueçå¼çå°æåå¯å¨å¹¶é¦ååæ­¢ï¼å¯è½æ¯å ä¸ºå®åå³äºè¦è¿è¡çå¶ä»è¿ç¨ï¼ãå¾éè¦çæ¯è¦ç¥éä¸å®ç°smartlifecycleçä»»ä½æ®élifecycleå®ä¾çé»è®¤é¡ºä½å¼æ¯0ãå æ­¤ï¼ä»»ä½è´çé¡ºä½å¼è¡¨ç¤ºå¯¹è±¡åºè¯¥å¨è¿äºæ åç»ä»¶ä¹åå¯å¨ï¼å¹¶å¨å¶ä¹ååæ­¢ï¼ãåä¹äº¦ç¶ã\n\nsmartlifecycleå®ä¹çstopæ¹æ³æ¥åä¸ä¸ªçº¿ç¨åè°ãå¨è¯¥å®ç°çå³é­è¿ç¨å®æåï¼ä»»ä½å®ç°å¿é¡»è°ç¨åè°çº¿ç¨çrun()æ¹æ³ãè¿ä½¿å¾å¨å¿è¦æ¶å¯ç¨å¼æ­¥å³é­ï¼å ä¸ºlifecycleprocessoræ¥å£çé»è®¤å®ç°defaultlifecycleprocessorï¼å¨æ¯ä¸ªé¶æ®µåçå¯¹è±¡ç»ç­å¾å®ä¹çè¶æ¶æ¶é´åè°ç¨è¯¥åè°ãé»è®¤çè¶æ¶æ¶é´ä¸º30ç§ãæ¨å¯ä»¥éè¿å¨ä¸ä¸æä¸­å®ä¹åä¸ºlifecycleprocessorçbeanæ¥è¦çé»è®¤çå½å¨æå¤çå¨å®ä¾ãå¦ææ¨åªæ³ä¿®æ¹è¶æ¶æ¶é´ï¼ä»¥ä¸å®ä¹å°±è¶³å¤äºï¼\n\n<bean id="lifecycleprocessor" class="org.springframework.context.support.defaultlifecycleprocessor">\n    \x3c!-- timeout value in milliseconds --\x3e\n    <property name="timeoutpershutdownphase" value="10000"/>\n</bean>\n\n\nå¦åæè¿°ï¼lifecycleprocessoræ¥å£ä¹å®ä¹äºå·æ°åå³é­ä¸ä¸æçåè°æ¹æ³ãåèé©±å¨äºåæ­¢è¿ç¨ï¼ä»¿ä½stop()è¢«æ¾ç¤ºè°ç¨ä¸æ ·ï¼ä½å®åçå¨ä¸ä¸æå³é­çè¿ç¨ä¸­ãå¦ä¸æ¹é¢ï¼ârefreshâåè°å¯ä»¥å¯ç¨smartlifecycle beançå¦ä¸ä¸ªåè½ãå·æ°ä¸ä¸æï¼å¨å®ä¾åå¹¶åå§åææå¯¹è±¡åï¼æ¶ï¼è°ç¨è¯¥åè°ãæ­¤æ¶ï¼é»è®¤çå½å¨æå¤çå¨æ£æ¥æ¯ä¸ªsmartlifecycleå¯¹è±¡çisautostartup()æ¹æ³è¿åçå¸å°å¼ãå¦æä¸ºtrueï¼åå¨å·æ°æ¶å¯å¨è¯¥å¯¹è±¡ï¼èä¸æ¯ç­å¾ä¸ä¸ææå¶èªå·±çstart()æ¹æ³è¢«æ¾å¼è°ç¨ï¼ä¸ä¸ä¸æå·æ°ä¸åï¼æ åä¸ä¸æå®ç°ä¸ä¼èªå¨å¯å¨ï¼ãphaseå¼åä¾èµå³ç³»ç¡®å®å¦åæè¿°çå¯å¨é¡ºåºã\n\n# å¨éwebåºç¨ä¸­ä¼éå°å³é­spring iocå®¹å¨\n\n> æ¬èä»éç¨äºéwebåºç¨ç¨åºãspringçåºäºwebçapplicationcontextå®ç°å·²æç¸å³ä»£ç ï¼è½å¨webåºç¨ç¨åºå³é­æ¶ä¼éå°å³é­spring iocå®¹å¨ã\n\nå¦æå¨éwebåºç¨ç¨åºç¯å¢ä¸­ä½¿ç¨springçiocå®¹å¨ï¼ä¾å¦ï¼å¨å¯å®¢æ·ç«¯æ¡é¢ç¯å¢ä¸­ï¼ï¼è¯·ä½¿ç¨jvmæ³¨åå³é­hookãè¿æ ·åç¡®ä¿äºä¸ä¸ªä¼éçåæ­¢ï¼å¹¶å¨åä¾beanä¸è°ç¨ç¸å³çéæ¯æ¹æ³ï¼ä»¥ä¾¿éæ¾ææèµæºãæ¨å¿é¡»æ­£ç¡®éç½®åå®ç°è¿äºéæ¯åè°ã\n\nè¦æ³¨åå³é­hookï¼è¯·è°ç¨å¨configurableapplicationcontextæ¥å£ä¸å£°æçregistershutdownhook()æ¹æ³ï¼å¦ä»¥ä¸ç¤ºä¾æ¾ç¤ºï¼\n\nimport org.springframework.context.configurableapplicationcontext;\nimport org.springframework.context.support.classpathxmlapplicationcontext;\n\npublic final class boot {\n\n    public static void main(final string[] args) throws exception {\n        configurableapplicationcontext ctx = new classpathxmlapplicationcontext("beans.xml");\n\n        // add a shutdown hook for the above context...\n        ctx.registershutdownhook();\n\n        // app runs here...\n\n        // main method exits, hook is called prior to the app shutting down...\n    }\n}\n\n\n\n# 1.6.2. applicationcontextawareåbeannameaware\n\nå½applicationcontextåå»ºå®ç°org.springframework.context.applicationcontextawareæ¥å£çå¯¹è±¡å®ä¾æ¶ï¼å°æä¾è¯¥applicationcontextçå¼ç¨ãä»¥ä¸åè¡¨æ¾ç¤ºäºapplicationcontextawareæ¥å£çå®ä¹ï¼\n\npublic interface applicationcontextaware {\n\n    void setapplicationcontext(applicationcontext applicationcontext) throws beansexception;\n}\n\n\nå æ­¤ï¼beanå¯ä»¥éè¿ç¼ç¨æ¹å¼æä½åå»ºå®ä»¬çapplicationcontextï¼éè¿applicationcontextæ¥å£æéè¿å°å¼ç¨è½¬æ¢ä¸ºè¯¥æ¥å£çå·²ç¥å­ç±»ï¼ä¾å¦å¬å¼å¶ä»åè½çconfigurableapplicationcontextï¼ãä¸ä¸ªä½ç¨å°±æ¯æ£ç´¢å¶ä»beanãææ¶è¿ç§è½åå¾æç¨ãä½æ¯ï¼ä¸è¬èè¨ï¼æ¨åºè¯¥é¿åä½¿ç¨å®ï¼å ä¸ºå®å°ä»£ç ä¸springè¦åï¼å¹¶ä¸ä¸éµå¾ªæ§å¶åè½¬çé£æ ¼(ä¾èµä½ä¸ºbeançå±æ§æä¾)ãapplicationcontextçå¶ä»æ¹æ³æä¾å¯¹æä»¶èµæºçè®¿é®ï¼åå¸åºç¨ç¨åºäºä»¶åè®¿é®messagessourceãè¿äºéå åè½å¨applicationcontextçéå åè½ä¸­æè¿°ã\n\nèªå¨æ³¨å¥æ¯è·å¾å¯¹applicationcontextçå¼ç¨çå¦ä¸ç§éæ©ãä¼ ç»çæé å½æ°æ³¨å¥åæç±»åæ³¨å¥æ¨¡å¼ï¼å¦1.4.5æè¿°ï¼å¯ä»¥åå«ä¸ºæé å½æ°åæ°æsetteræ¹æ³åæ°åå«æä¾applicationcontextçä¾èµãæ´çµæ´»çæ¹å¼ï¼åæ¬èªå¨æ³¨å¥å­æ®µåå¤ä¸ªåæ°æ¹æ³çè½åï¼è¯·ä½¿ç¨åºäºæ³¨è§£çèªå¨æ³¨å¥åè½ãå¦ææ¨å¨éè¦çå°æ¹ä½¿ç¨äº@autowiredæ³¨è§£ï¼ææç±»åçapplicationcontextå°èªå¨æ³¨å¥å°å­æ®µï¼æé å½æ°ææ¹æ³åæ°ä¸­ãæå³æ´å¤ä¿¡æ¯ï¼è¯·åéä½¿ç¨@autowiredã\n\nå½applicationcontextåå»ºä¸ä¸ªå®ç°org.springframework.beans.factory.beannameawareæ¥å£çç±»æ¶ï¼è¯¥ç±»ä¼è·å¾è·å®èªèº«å®ä¹ç¸å³çåç§°ãä»¥ä¸åè¡¨æ¾ç¤ºäºbeannameawareæ¥å£çå®ä¹ï¼\n\npublic interface beannameaware {\n\n    void setbeanname(string name) throws beansexception;\n}\n\n\nè¯¥æ¹æ³åè°å°ä¼å¨æ®ébeanå±æ§è®¾å¼åï¼åå§ååè°ä¹å(å¦initializingbeanãafterpropertiessetãèªå®ä¹åå§åæ¹æ³)è°ç¨ã\n\n\n# 1.6.3. å¶ä»awareæ¥å£\n\né¤äºapplicationcontextawareåbeannameawareä¹å¤ï¼springè¿æä¾äºæ´å¤çawareåè°æ¥å£ï¼è®©beanåå®¹å¨ææå®ä»¬éè¦ä¾èµæä¸ªæç¡®çåºç¡æ¶æãä½ä¸ºä¸è¬è§åï¼åç§°è¡¨ç¤ºä¾èµç±»åãå¦ä¸è¡¨æ ¼4(æªç¿»è¯)æ»ç»äºæéè¦çawareæ¥å£ï¼\n\nname                             injected dependency                                            explained inâ¦\napplicationcontextaware          declaring applicationcontext.                                  applicationcontextaware and beannameaware\napplicationeventpublisheraware   event publisher of the enclosing applicationcontext.           additional capabilities of the applicationcontext\nbeanclassloaderaware             class loader used to load the bean classes.                    instantiating beans\nbeanfactoryaware                 declaring beanfactory.                                         applicationcontextaware and beannameaware\nbeannameaware                    name of the declaring bean.                                    applicationcontextaware and beannameaware\nloadtimeweaveraware              defined weaver for processing class definition at load time.   load-time weaving with aspectj in the spring framework\nmessagesourceaware               configured strategy for resolving messages (with support for   additional capabilities of the applicationcontext\n                                 parametrization and internationalization).\nnotificationpublisheraware       spring jmx notification publisher.                             notifications\nresourceloaderaware              configured loader for low-level access to resources.           resources\nservletconfigaware               current servletconfig the container runs in. valid only in a   spring mvc\n                                 web-aware spring applicationcontext.\nservletcontextaware              current servletcontext the container runs in. valid only in    spring mvc\n                                 a web-aware spring applicationcontext.\n\nè¯·æ³¨æï¼ä½¿ç¨è¿äºæ¥å£ä½ çä»£ç å°ä¸spring apiè¦åï¼å¹¶ä¸ä¸éµå¾ªæ§å¶åè½¬çé£æ ¼ãå æ­¤ï¼æä»¬æ¨èå®ä»¬å¨éè¦å¯¹å®¹å¨è¿è¡ç¼ç¨è®¿é®çåºç¡æ¶æbeanä¸­ä½¿ç¨ã\n\n\n# 1.7. beanå®ä¹ç»§æ¿\n\nbeanå®ä¹å¯ä»¥åå«å¤§éçéç½®ä¿¡æ¯ï¼åæ¬æé å½æ°åæ°ï¼å±æ§å¼åç¹å®äºå®¹å¨çä¿¡æ¯ï¼ä¾å¦åå§åæ¹æ³ï¼éæå·¥åæ¹æ³åç§°ç­ãå­beanå®ä¹ä»ç¶å®ä¹ç»§æ¿éç½®æ°æ®ãå­å®ä¹å¯ä»¥æ ¹æ®éè¦è¦çæäºå¼ææ·»å å¶ä»å¼ãä½¿ç¨ç¶ãå­beanå®ä¹å¯ä»¥åå°éç½®ãå®éä¸ï¼è¿æ¯æ¨¡æ¿æ¨¡å¼çä¸ç§å½¢å¼ã\n\nå¦ææ¨ä»¥ç¼ç¨æ¹å¼ä½¿ç¨applicationcontextæ¥å£ï¼åå­beanå®ä¹ç±childbeandefinitionç±»è¡¨ç¤ºãå¤§å¤æ°ç¨æ·ä¸ä¼å¨è¿ç§çº§å«ä½¿ç¨å®ä»¬ãç¸åï¼ä»ä»¬å¨è¯¸å¦classpathxmlapplicationcontextç­ç±»ä¸­å£°æå°éç½®beanå®ä¹ãä½¿ç¨åºäºxmlçéç½®åæ°æ®æ¶ï¼å¯ä»¥ä½¿ç¨parentå±æ§æå®å­beanå®ä¹ï¼æå®ç¶beanä½ä¸ºæ­¤å±æ§çå¼ãä»¥ä¸ç¤ºä¾æ¾ç¤ºäºå¦ä½åï¼\n\n<bean id="inheritedtestbean" abstract="true"\n        class="org.springframework.beans.testbean">\n    <property name="name" value="parent"/>\n    <property name="age" value="1"/>\n</bean>\n\n<bean id="inheritswithdifferentclass"\n        class="org.springframework.beans.derivedtestbean"\n        parent="inheritedtestbean" init-method="initialize">  1ï¸â£\n    <property name="name" value="override"/>\n    \x3c!-- the age property value of 1 will be inherited from parent --\x3e\n</bean>\n\n\nå¦ææ²¡ææå®ï¼åå­beanä½¿ç¨ç¶beançå®ä¹ï¼ä½ä¹å¯ä»¥è¦çå®ãå¨åä¸ç§æåµä¸ï¼å­beanå¿é¡»ä¸ç¶beanå¼å®¹ï¼å³å®å¿é¡»æ¥åç¶å±æ§å¼ï¼ã\n\nå­beanå®ä¹ç»§æ¿ä½ç¨åï¼æé å½æ°åæ°å¼ï¼å±æ§å¼åä»ç¶ç±»è¦ççæ¹æ³ï¼å¹¶å¯éæ©æ·»å æ°å¼ãæ¨æå®çä»»ä½ä½ç¨åï¼åå§åæ¹æ³ï¼éæ¯æ¹æ³æéæå·¥åæ¹æ³è®¾ç½®å°ä¼è¦çç¶ç±»ä¸­å¯¹åºè®¾ç½®ã\n\nå©ä½çè®¾ç½®å§ç»ä»å­å®ä¹ä¸­å¼ç¨ï¼ä¾èµï¼èªå¨è£éæ¨¡å¼ï¼ä¾èµå³ç³»æ£æ¥ï¼åä¾åæå è½½ã\n\nåé¢çç¤ºä¾éè¿ä½¿ç¨abstractå±æ§å°ç¶beanå®ä¹æ¾å¼æ è®°ä¸ºæ½è±¡ç±»ãå¦æç¶å®ä¹æªæå®ç±»ï¼åç¶beanå®ä¹abstractå±æ§æ¯å¿é¡»çï¼å¦ä»¥ä¸ç¤ºä¾æ¾ç¤ºï¼\n\n<bean id="inheritedtestbeanwithoutclass" abstract="true">\n    <property name="name" value="parent"/>\n    <property name="age" value="1"/>\n</bean>\n\n<bean id="inheritswithclass" class="org.springframework.beans.derivedtestbean"\n        parent="inheritedtestbeanwithoutclass" init-method="initialize">\n    <property name="name" value="override"/>\n    \x3c!-- age will inherit the value of 1 from the parent bean definition--\x3e\n</bean>\n\n\nç¶beanæ æ³èªå¨åï¼å ä¸ºå®æ¯ä¸å®æ´çï¼å¹¶ä¸ä¹æç¡®æ è®°ä¸ºæ½è±¡ãå½å®ä¹æ¯æ½è±¡çæ¶åï¼å®ä»ç¨ä¸ºçº¯æ¨¡æ¿beanå®ä¹ï¼å®ç¨ä½å­å®ä¹çç¶å®ä¹ãå°è¯èªå·±ä½¿ç¨è¿æ ·ä¸ä¸ªæ½è±¡ç¶beanï¼éè¿å°å¶ä½ä¸ºå¦ä¸ä¸ªbeançrefå±æ§ï¼å¦åä½¿ç¨ç¶bean idæ¾ç¤ºæ§è¡getbean()è°ç¨å°è¿åéè¯¯ãåæ ·ï¼å®¹å¨çåé¨é¢çpreinstantiatesingletons()æ¹æ³å¿½ç¥äºè¢«å®ä¹ä¸ºæ½è±¡çbeanå®ä¹ã\n\n> â¹ï¸applicationcontexté»è®¤é¢åå®ä¾åææåä¾beanãå æ­¤ï¼å¦ææ¨ææç®ä»ç¨ä½ä¸ºæ¨¡æ¿çï¼ç¶ï¼beanå®ä¹ï¼å¹¶ä¸æ­¤å®ä¹å®ä¹äºç±»ï¼åå¿é¡»ç¡®ä¿å°abstractå±æ§è®¾ç½®ä¸ºtrueï¼å¦ååºç¨ä¸ä¸æå°ï¼å°è¯ï¼é¢å®ä¾åæ½è±¡ç±»ã\n\n\n# 1.8. å®¹å¨æ©å±ç¹\n\néå¸¸ï¼åºç¨ç¨åºå¼åèä¸éè¦å­ç±»åapplicationcontextå®ç°ç±»ãç¸åï¼spring iocå®¹å¨å¯ä»¥éè¿ç¹æ®çéææ¥å£å®ç°æ©å±ãæ¥ä¸æ¥çå èå°ä»ç»è¿äºéææ¥å£ã\n\n\n# 1.8.1. ç¨beanpostprocessorèªå®ä¹beans\n\nbeanpostprocessoræ¥å£å®ä¹äºå¯ä»¥å®ç°çåè°æ¹æ³ï¼ä»¥æä¾èªå·±çï¼æè¦çå®¹å¨çé»è®¤ï¼å®ä¾åé»è¾ï¼ä¾èµè§£æé»è¾ç­ãå¦æè¦å¨springå®¹å¨å®æå®ä¾åï¼éç½®ååå§åbeanåå®ç°æäºèªå®ä¹é»è¾ï¼å¯ä»¥æå¥ä¸ä¸ªæå¤ä¸ªèªå®ä¹beanpostprocessorå®ç°ã\n\næ¨å¯ä»¥éç½®å¤ä¸ªbeanpostprocessorå®ä¾ï¼æ¨å¯ä»¥éè¿è®¾ç½®orderå±æ§æ¥æ§å¶è¿äºbeanpostprocessorå®ä¾è¿è¡çé¡ºåºãåªæå½beanpostprocessorå®ç°orderedæ¥å£æ¶ï¼æè½è®¾ç½®æ­¤å±æ§ãå¦ææ¨ç¼åèªå·±çbeanpostprocessorï¼ååºèèå®ç°orderedæ¥å£ãæå³è¯¦ç»ä¿¡æ¯ï¼è¯·åébeanpostprocessoråorderedçjavadocãå¦è¯·åéå³äºbeanpostprocessorå®ä¾çç¨åºåæ³¨åçè¯´æã\n\n> â¹ï¸beanpostprocessorå®ä¾å¨beanï¼æobjectï¼å®ä¾ä¸è¿è¡ãä¹å°±æ¯è¯´ï¼spring iocå®¹å¨å®ä¾åäºä¸ä¸ªbeanå®ä¾ï¼ç¶åbeanbostprocessorå®ä¾æ§è¡å®ä»¬çåè°æ¹æ³ã\n> \n> beanpostprocessorå®ä¾ä½ç¨åæ¯å®¹å¨ãä»å½æ¨ä½¿ç¨å®¹å¨å±æ¬¡ç»ææ¶æèµ·ä½ç¨ãå¦æå¨ä¸ä¸ªå®¹å¨ä¸­å®ä¹beanpostprocessorï¼åå®ä»å¨è¯¥å®¹å¨ä¸­å¤çbeanãæ¢å¥è¯è¯´ï¼å³ä½¿ä¸¤ä¸ªå®¹å¨é½æ¯ç¸åå±æ¬¡ç»æçä¸é¨åï¼å¨ä¸ä¸ªå®¹å¨ä¸­å®ä¹çbeanä¹ä¸ä¼è¢«å¦ä¸ä¸ªå®¹å¨ä¸­å®ä¹çbeanpostprocessorå¤çã\n\nè¯¥org.springframework.beans.factory.config.beanpostprocessoræ¥å£åæ¬æ­£å¥½ä¸¤ä¸ªåè°æ¹æ³ãå½æ­¤ç±»è¢«å®¹å¨æ³¨åä¸ºåç½®å¤çå¨æ¶ï¼å¯¹äºæ¯ä¸ªå®¹å¨åå»ºçbeanå®ä¾ï¼åå¤çå¨å¨å®¹å¨åå§åæ¹æ³ï¼ä¾å¦initializationbean.afterpropertiesset()æä»»ä½å£°æçinitæ¹æ³ï¼è¢«è°ç¨åï¼å¹¶å¨ä»»ä½beanåå§ååè°ä¹åè°ç¨ãåå¤çå¨å¯ä»¥å¯¹beanå®ä¾æ§è¡ä»»ä½æä½ï¼åæ¬å®å¨å¿½ç¥åè°ãbeanåç½®å¤çå¨éå¸¸æ£æ¥åè°æ¥å£ï¼æèå®å¯è½ä¼å°beanåè£ä¸ºä»£çãä¸äºspring aopåºç¡æ¶æç±»å°±æ¯beanåå¤çå¨çå®ç°ï¼ä»¥æä¾ä»£çåè£é»è¾ã\n\napplicationcontextå°èªå¨æ£æµå¨éç½®åæ°æ®ä¸­å®ä¹çå®ç°beanpostprocessoræ¥å£çä»»ä½beanãapplicationcontextå°è¿äºbeanæ³¨åä¸ºåå¤çå¨ï¼ä»¥ä¾¿ç¨åå¯ä»¥å¨beanåå»ºåè¢«è°ç¨ãbeanåå¤çå¨è½ä»¥ä¸ä»»ä½å¶ä»beanç¸åçæ¹å¼é¨ç½²å¨å®¹å¨ä¸­ã\n\næ³¨æï¼å¨éç½®ç±»ä¸ä½¿ç¨@beanå·¥åæ¹æ³å£°æbeanpostprocessoræ¶ï¼å·¥åæ¹æ³çè¿åç±»ååºè¯¥æ¯å®ç°ç±»æ¬èº«æè³å°æ¯org.springframework.beans.factory.config.beanpostprocessoræ¥å£ï¼ä»¥æ¸æ¥å°è¡¨ç¤ºè¯¥beançåå¤çå¨æ§è´¨ãå¦åï¼applicationcontextæ æ³å¨å®å¨åå»ºå®ä¹åéè¿ç±»åèªå¨æ¢æµå°å®ãç±äºéè¦æåå®ä¾åbeanpostprocessorä»¥ä¾¿å¨ä¸ä¸æä¸­åå§åå¶ä»beanæ¶åºç¨å¤çå¨ï¼å æ­¤è¯¥æ©æç±»åæ£æµè³å³éè¦ã\n\n> â¹ï¸ä»¥ç¼ç¨æ¹å¼æ³¨åbeanpostprocessorå®ä¾\n> \n> è½ç¶beanpostprocessoræ³¨åçæ¨èæ¹æ³æ¯éè¿applicationcontextèªå¨æ£æµï¼å¦åæè¿°ï¼ï¼ä½æ¨å¯ä»¥ä½¿ç¨configurablebeanfactoryçaddbeanpostprocessoræ¹æ³è¿è¡ç¼ç¨æ¹å¼æ³¨åãå½æ¨éè¦è¯ä¼°æ¡ä»¶é»è¾æçè³ç¨äºå¨å±æ¬¡ç»æä¸­çä¸ä¸æä¸­å¤å¶beanåå¤çå¨æ¶ï¼è¿å¯è½å¾æç¨ãä½è¯·æ³¨æï¼orderedæ¥å£å¯¹ç¼ç¨æ·»å çbeanpostprocessorå®ä¾æ æãå¨è¿éï¼æ§è¡é¡ºåºå°±æ¯æ³¨åé¡ºåºãè¿è¦æ³¨æï¼æ è®ºä»»ä½æå®çé¡ºåºå¦ä½ï¼ç¼ç¨æ¹å¼æ³¨åçbeanpostprocessorå®ä¾é½ä¼å¨éè¿èªå¨æ£æµæ³¨åçé£äºå¤çå¨ä¹åä¹åæ§è¡ã\n\n> â¹ï¸beanpostprocessorå®ä¾åaopèªå¨ä»£ç\n> \n> å®ç°beanpostprocessoræ¥å£çç±»æ¯ç¹æ®çï¼å®¹å¨ä¼ç¹æ®å¤çãææbeanpostprocessorå®ä¾åå®ä»¬ç´æ¥å¼ç¨çbeanï¼å¨å¯å¨æ¶é½ä¼ä½ä¸ºapplicationcontextçç¹æ®å¯å¨é¶æ®µçä¸é¨åãæ¥ä¸æ¥ï¼ææbeanpostprocessorå®ä¾é½ä»¥æå®çé¡ºåºæ³¨åï¼å¹¶åºç¨äºå®¹å¨ä¸­çææå¶ä»beanãç±äºaopèªå¨ä»£çå®ç°ä¸ºbeanpostprocessoræ¬èº«ï¼å æ­¤beanpostprocessorå®ä¾åå®ä»¬ç´æ¥å¼ç¨çbeané½æ²¡æèµæ ¼èªå¨ä»£çï¼å æ­¤ï¼å®ä»¬æ²¡æåé¢ã\n> \n> å¦ææ¨ä½¿ç¨autowiringæ@resourceï¼å¯è½autowiringå¤±è´¥ï¼å°beansè£éå°beanpostprocessorä¸­ï¼åå¨æç´¢ç±»åå¹éçä¾èµåéæ¶ï¼springå¯è½ä¼å¾å°éè¯¯çbeanï¼å æ­¤ä½¿å¶æ æ³è¢«èªå¨ä»£çæè¢«å¶ä»åå¤çå¨å¤çãä¾å¦ï¼å¦ææ¨æè¢«@resourceæ³¨è§£æ æ³¨çä¾èµé¡¹ï¼å¦å­æ®µæsetteræ¹æ³åä¸å·²å£°æåç§°çbeanä¸ç´æ¥å¯¹åºä¸æ²¡æä½¿ç¨nameå±æ§çè¯ï¼springæç´¢å¶ä»beanä»¥æç±»åå¹éå®ä»¬ã\n\nä»¥ä¸ç¤ºä¾æ¾ç¤ºå¦ä½å¨applicationcontextä¸­ç¼åï¼æ³¨ååä½¿ç¨beanpostprocessorå®ä¾\n\n# ä¾ï¼hell world, beanpostprocessor -style\n\nç¬¬ä¸ä¸ªä¾å­è¯´æäºåºæ¬ç¨æ³ãè¯¥ç¤ºä¾æ¾ç¤ºäºèªå®ä¹beanpostprocessorå®ç°ï¼è¯¥å®ç°è°ç¨æ¯ä¸ªbeançtostring()æ¹æ³ï¼å®ç±å®¹å¨åå»ºå¹¶å°çæçå­ç¬¦ä¸²æå°å°ç³»ç»æ§å¶å°ã\n\npackage scripting;\n\nimport org.springframework.beans.factory.config.beanpostprocessor;\n\npublic class instantiationtracingbeanpostprocessor implements beanpostprocessor {\n\n    // simply return the instantiated bean as-is\n    public object postprocessbeforeinitialization(object bean, string beanname) {\n        return bean; // we could potentially return any object reference here...\n    }\n\n    public object postprocessafterinitialization(object bean, string beanname) {\n        system.out.println("bean \'" + beanname + "\' created : " + bean.tostring());\n        return bean;\n    }\n}\n\n\nä»¥ä¸beansåç´ ä½¿ç¨instantialtracingbeanpostprocessorï¼\n\n<?xml version="1.0" encoding="utf-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n    xmlns:xsi="http://www.w3.org/2001/xmlschema-instance"\n    xmlns:lang="http://www.springframework.org/schema/lang"\n    xsi:schemalocation="http://www.springframework.org/schema/beans\n        https://www.springframework.org/schema/beans/spring-beans.xsd\n        http://www.springframework.org/schema/lang\n        https://www.springframework.org/schema/lang/spring-lang.xsd">\n\n    <lang:groovy id="messenger"\n            script-source="classpath:org/springframework/scripting/groovy/messenger.groovy">\n        <lang:property name="message" value="fiona apple is just so dreamy."/>\n    </lang:groovy>\n\n    \x3c!--\n    when the above bean (messenger) is instantiated, this custom\n    beanpostprocessor implementation will output the fact to the system console\n    --\x3e\n    <bean class="scripting.instantiationtracingbeanpostprocessor"/>\n\n</beans>\n\n\nè¯·æ³¨æinstantialtracingbeanpostprocessoræ¯å¦ä½è¢«å®ä¹çãå®çè³æ²¡æåå­ï¼èä¸å ä¸ºå®æ¯ä¸ä¸ªbeanï¼å®å¯ä»¥åä»»ä½å¶ä»beanä¸æ ·ä¾èµæ³¨å¥ãï¼åé¢çéç½®è¿å®ä¹äºç±groovyèæ¬å¤ä»½çbeanãspringå¨æè¯­è¨æ¯æå¨æ­¤ç« èä¸­è¯¦è¿°ãï¼\n\nä»¥ä¸javaåºç¨ç¨åºè¿è¡åé¢çä»£ç åéç½®ï¼\n\nimport org.springframework.context.applicationcontext;\nimport org.springframework.context.support.classpathxmlapplicationcontext;\nimport org.springframework.scripting.messenger;\n\npublic final class boot {\n\n    public static void main(final string[] args) throws exception {\n        applicationcontext ctx = new classpathxmlapplicationcontext("scripting/beans.xml");\n        messenger messenger = ctx.getbean("messenger", messenger.class);\n        system.out.println(messenger);\n    }\n\n}\n\n\nåé¢åºç¨ç¨åºçè¾åºç±»ä¼¼äºä»¥ä¸åå®¹ï¼\n\nbean \'messenger\' created : org.springframework.scripting.groovy.groovymessenger@272961\norg.springframework.scripting.groovy.groovymessenger@272961\n\n\n# ä¾ï¼requiredannotationbeanpostprocessor\n\nä½¿ç¨åè°æ¥å£ææ³¨è§£è¿æ¥èªå®ä¹beanpostprocessorå®ç°æ¯æ©å±spring iocå®¹å¨çå¸¸è§æ¹æ³ãä¸ä¸ªä¾å­æ¯springçresertandannotationbeanpostprocessor - ä¸ä¸ªspringå®ç°çbeanpostprocessorï¼å®ç¡®ä¿ç¨ï¼ä»»æï¼æ³¨è§£æ è®°çbeanä¸çä¾èµæ³¨å¥å±æ§å®éä¸ï¼è¢«éç½®ä¸º)æå¼ã\n\n\n# 1.8.2. ä½¿ç¨beanfactorypostprocessorèªå®ä¹éç½®åæ°æ®\n\næä»¬æ¥ççä¸ä¸ä¸ªæ©å±ç¹æ¯org.springframework.beans.factory.config.beanfactorypostprocessorãæ­¤æ¥å£çè¯­ä¹ç±»ä¼¼äºbeanpostprocessorçè¯­ä¹ï¼å¶ä¸­ä¸ä¸ªä¸»è¦åºå«ï¼beanfactorypostprocessorå¨æä½çæ¯beanéç½®åæ°æ®ãä¹å°±æ¯è¯´ï¼spring iocå®¹å¨åè®¸beanfactorypostpostprocessorè¯»åéç½®åæ°æ®ï¼å¹¶ä¸å¨å®¹å¨å®ä¾åbeanfactorypostprocessorå®ä¾ä¹å¤çä»»ä½beanä¹åå¯è½ä¼æ´æ¹å®ã\n\næ¨å¯ä»¥éç½®å¤ä¸ªbeanfactorypostprocessorå®ä¾ï¼æ¨å¯ä»¥éè¿è®¾ç½®orderå±æ§æ¥æ§å¶è¿äºbeanfactorypostprocessorå®ä¾è¿è¡çé¡ºåºãåªæå½beanfactorypostprocessorå®ç°orderedæ¥å£æ¶ï¼æè½è®¾ç½®æ­¤å±æ§ãå¦ææ¨ç¼åèªå·±çbeanfactorypostprocessorï¼ååºèèå®ç°orderedæ¥å£ãæå³è¯¦ç»ä¿¡æ¯ï¼è¯·åébeanfactorypostprocessoråorderedçjavadocã\n\n> â¹ï¸å¦æè¦æ´æ¹å®ébeanå®ä¾ï¼å³ï¼ä»éç½®åæ°æ®åå»ºçå¯¹è±¡ï¼ï¼åéè¦ä½¿ç¨beanpostprocessorï¼ãè½ç¶ææ¯ä¸å¯ä»¥å¨beanfactorypostprocessorä¸­ä½¿ç¨beanå®ä¾ï¼ä¾å¦ï¼éè¿ä½¿ç¨beanfactory.getbean()ï¼ï¼ä½è¿æ ·åä¼å¯¼è´æ´æ©çbeanå®ä¾åï¼è¿åæ åå®¹å¨çå½å¨æãè¿å¯è½å¯¼è´è´å¯ä½ç¨ï¼ä¾å¦ç»è¿beanåå¤çã\n> \n> beanfactorypostprocessorå®ä¾ä½ç¨åæ¯å®¹å¨ãä»å½æ¨ä½¿ç¨å®¹å¨å±æ¬¡ç»ææ¶æèµ·ä½ç¨ãå¦æå¨ä¸ä¸ªå®¹å¨ä¸­å®ä¹beanfactorypostprocessorï¼åå®ä»å¨è¯¥å®¹å¨ä¸­å¤çbeanåæ°æ®ãæ¢å¥è¯è¯´ï¼å³ä½¿ä¸¤ä¸ªå®¹å¨é½æ¯ç¸åå±æ¬¡ç»æçä¸é¨åï¼å¨ä¸ä¸ªå®¹å¨ä¸­beançåæ°æ®ä¹ä¸ä¼è¢«å¦ä¸ä¸ªå®¹å¨ä¸­å®ä¹çbeanfactorypostprocessorå¤çã\n\nå°èªå¨è¿è¡å¨applicationcontextä¸­å£°æçbeanå·¥ååå¤çå¨ï¼ä»¥ä¾¿å°æ´æ¹åºç¨äºå®ä¹å®¹å¨çéç½®åæ°æ®ãspringåæ¬è®¸å¤é¢å®ä¹çbeanå·¥ååå¤çå¨ï¼ä¾å¦propertyoverrideconfigureråpropertysourcesplaceholderconfigurerãæ¨è¿å¯ä»¥ä½¿ç¨èªå®ä¹beanfactorypostprocessor - ä¾å¦ï¼æ³¨åèªå®ä¹å±æ§ç¼è¾å¨ã\n\napplicationcontextä¼èªå¨æ£æµé¨ç½²å¨å®ä¸­çä»»ä½å®ç°äºbeanfactorypostpostpostpostoræ¥å£çbeanãå®å¨éå½çæ¶é´ä½¿ç¨è¿äºä½ä¸ºbeanå·¥ååå¤çå¨çbeanãæ¨å¯ä»¥æç§ä»»ä½å¶ä»beançæ¹å¼é¨ç½²è¿äºåå¤çå¨beanã\n\n> â¹ï¸ä¸beanpostprocessorä¸æ ·ï¼æ¨éå¸¸ä¸å¸æéç½®beanfactorypostprocessorsä¸ºå»¶è¿åå§åãå¦ææ²¡æå¶ä»beanå¼ç¨bean(factory)postprocessorï¼åæ ¹æ¬ä¸ä¼ç«å³å®ä¾åãå æ­¤ï¼å°å¶æ è®°ä¸ºå»¶æ¶åå§åå°è¢«å¿½ç¥ï¼å¹¶ä¸å³ä½¿å¨åç´ å£°æä¸å°default-lazy-initå±æ§è®¾ç½®ä¸ºtrueï¼bean(factory)postprocessorä¹ä¼ç«å³å®ä¾åã\n\n# ä¾ï¼ç±»åç§°æ¿æ¢propertysourcesplaceholderconfigurer\n\næ¨å¯ä»¥éè¿propertysourcesplaceholderconfigurerä½¿ç¨æ åjava propertiesæ ¼å¼å¨åç¬æä»¶ä¸­ä»beanå®ä¹ä¸­å¤é¨åå±æ§å¼ãè¿æ ·åä½¿å¾é¨ç½²åºç¨ç¨åºçäººè½å¤èªå®ä¹ç¹å®äºç¯å¢çå±æ§ï¼ä¾å¦æ°æ®åºurlåå¯ç ï¼èæ éæå¿ä¿®æ¹å®¹å¨çä¸»è¦xmlå®ä¹æä»¶å¸¦æ¥çå¤ææ§æé£é©ã\n\nèèä»¥ä¸åºäºxmlçéç½®åæ°æ®çæ®µï¼å¶ä¸­å®ä¹äºå·æå ä½ç¬¦å¼çæ°æ®æºï¼\n\n<bean class="org.springframework.context.support.propertysourcesplaceholderconfigurer">\n    <property name="locations" value="classpath:com/something/jdbc.properties"/>\n</bean>\n\n<bean id="datasource" destroy-method="close"\n        class="org.apache.commons.dbcp.basicdatasource">\n    <property name="driverclassname" value="${jdbc.driverclassname}"/>\n    <property name="url" value="${jdbc.url}"/>\n    <property name="username" value="${jdbc.username}"/>\n    <property name="password" value="${jdbc.password}"/>\n</bean>\n\n\nè¯¥ç¤ºä¾æ¾ç¤ºäºä»å¤é¨å±æ§æä»¶éç½®çå±æ§ãå¨è¿è¡æ¶ï¼propertysourceplaceholterconfigureråºç¨äºæ¿æ¢æ°æ®æºçæäºå±æ§çåæ°æ®ãè¦æ¿æ¢çå¼è¢«æå®ä¸º$ {property-name}çå ä½ç¬¦å½¢å¼ï¼å®éµå¾ªantålog4jåjsp el é£æ ¼ã\n\nå®éå¼æ¥èªæ åjava propertiesæ ¼å¼çå¦ä¸ä¸ªæä»¶ï¼\n\njdbc.driverclassname=org.hsqldb.jdbcdriver\njdbc.url=jdbc:hsqldb:hsql://production:9002\njdbc.username=sa\njdbc.password=root\n\n\nå æ­¤ï¼$ {jdbc.username}å­ç¬¦ä¸²å¨è¿è¡æ¶æ¿æ¢ä¸º\'sa\'ï¼å±æ§æä»¶ä¸­å¶ä»å ä½ç¬¦å¼ä¹ä¸æ ·æé®å¼å¹éæ¿æ¢ãpropertysourcesplaceholderconfigureræ£æ¥å¨beanå®ä¹çå¤§å¤æ°å±æ§ä¸­çå ä½ç¬¦ãæ­¤å¤ï¼æ¨å¯ä»¥èªå®ä¹å ä½ç¬¦åç¼ååç¼ã\n\nä½¿ç¨spring 2.5ä¸­å¼å¥çä¸ä¸æå½åç©ºé´ï¼æ¨å¯ä»¥ä½¿ç¨ä¸ç¨éç½®åç´ éç½®å±æ§å ä½ç¬¦ãæ¨å¯ä»¥å¨locationå±æ§ä¸­æä¾ä¸ä¸ªæå¤ä¸ªä½ç½®ä½ä¸ºéå·åéçåè¡¨ï¼å¦ä»¥ä¸ç¤ºä¾æ¾ç¤ºï¼\n\n<context:property-placeholder location="classpath:com/something/jdbc.properties"/>\n\n\nè¯¥propertysourcesplaceholderconfigurerä¸ä»ä¼å¨ä½ æå®çpropertiesæä»¶ä¸­æ¥æ¾ãé»è®¤æåµä¸ï¼å¦æä¸è½å¨æå®çå±æ§æä»¶ä¸­æ¾å°å±æ§ï¼å®ä¼éå¯¹spring environmentå±æ§éç½®åæ®éçjava systemå±æ§éç½®è¿è¡æ¥æ¾ã\n\n> ð¡æ¨å¯ä»¥ä½¿ç¨propertysourceplaceholderconfigureræ¥æ¿æ¢ç±»åï¼å½æ¨å¿é¡»å¨è¿è¡æ¶éæ©ç¹å®å®ç°ç±»æ¶æç¨ãä»¥ä¸ç¤ºä¾æ¾ç¤ºäºå¦ä½æ§è¡æ­¤æä½ï¼\n> \n> <bean class="org.springframework.beans.factory.config.propertysourcesplaceholderconfigurer">\n>     <property name="locations">\n>         <value>classpath:com/something/strategy.properties</value>\n>     </property>\n>     <property name="properties">\n>         <value>custom.strategy.class=com.something.defaultstrategy</value>\n>     </property>\n> </bean>\n> \n> <bean id="servicestrategy" class="${custom.strategy.class}"/>\n> \n> \n> å¦æå¨è¿è¡æ¶æ æ³å¨è¿è¡æ¶è§£æå°ææç±»å«ï¼åå¨å°è¦åå»ºæ¶ï¼å¯¹äºéæå è½½beanï¼applicationcontextçpreinstantiatesingletons()é¶æ®µï¼ï¼beanè§£æå¤±è´¥ã\n\n# ä¾ï¼propertyoverrideconfigurer\n\npropertyoverrideconfigurerï¼å¦ä¸ä¸ªbean factoryåå¤çå¨ï¼ç±»ä¼¼äºpropertysourceplaceholderconfigurerï¼ä½ä¸åèä¸åï¼åå§å®ä¹å¯ä»¥å·æé»è®¤å¼ææ ¹æ¬æ²¡æå¼ä½ä¸ºbeançå±æ§ãå¦æè¦ççpropertiesæä»¶æ²¡ææäºbeanå±æ§çæ¡ç®ï¼åä½¿ç¨é»è®¤ä¸ä¸æå®ä¹ã\n\nè¯·æ³¨æï¼beanå®ä¹æ æ³æç¥è¢«è¦çï¼å æ­¤è¦ççéç½®åºç¨äºxmlå®ä¹æä»¶ä¸ä¼æ¾èæè§ãå¦ææå¤ä¸ªpropertyoverrideconfigurerå®ä¾å®ä¹ç¸åçbeanå±æ§çä¸åå¼ï¼ç±äºè¦çæºå¶åªä¼ä½¿ç¨æåä¸ä¸ªã\n\nå±æ§æä»¶éç½®è¡éç¨ä»¥ä¸æ ¼å¼ï¼\n\nbeanname.property=value\n\n\nä»¥ä¸åè¡¨æ¾ç¤ºäºæ ¼å¼çç¤ºä¾ï¼\n\ndatasource.driverclassname=com.mysql.jdbc.driver\ndatasource.url=jdbc:mysql:mydb\n\n\næ­¤ç¤ºä¾æä»¶å¯ä»¥ä¸åå«ä¸ä¸ªåä¸ºdatasourceçbeançå®¹å¨å®ä¹ä¸èµ·ä½¿ç¨ï¼å¶ä¸­åå«driveråurlå±æ§ã\n\nè¿æ¯æå¤åå±æ§åç§°ï¼åªè¦é¤äºè¢«è¦ççæç»å±æ§ä¹å¤çè·¯å¾ä¸ççæ¯ä¸ªç»ä»¶é½æ¯éç©ºçï¼å¯è½ç±æé å½æ°åå§åï¼ãå¨ä»¥ä¸ç¤ºä¾ä¸­ï¼tom beançfredå±æ§çbobå±æ§çsammyå±æ§è®¾ç½®ä¸ºå¸¸é123ï¼\n\ntom.fred.bob.sammy=123\n\n\n> â¹ï¸æå®çè¦çå¼å§ç»æ¯å­é¢éãå®ä»¬ä¸ä¼ç¿»è¯æbeanå¼ç¨ãæ­¤çº¦å®è¿éç¨äºxml beanå®ä¹ä¸­çåå§å¼æå®ä¸ºbeanå¼ç¨æ¶ã\n\nå¨spring 2.5ä¸­å¼å¥çä¸ä¸æå½åç©ºé´ï¼å¯ä»¥ä½¿ç¨ä¸ç¨éç½®åç´ éç½®å±æ§è¦çï¼å¦ä»¥ä¸ç¤ºä¾æ¾ç¤ºï¼\n\n<context:property-override location="classpath:override.properties"/>\n\n\n\n# 1.8.3. ä½¿ç¨factorybeanèªå®ä¹å®ä¾åé»è¾\n\næ¬èº«æ¯å·¥åçå¯¹è±¡å¯ä»¥å®ç°org.springframework.beans.factory.factorybeanæ¥å£ã\n\nfactorybeanæ¥å£æ¯spring iocå®¹å¨çå®ä¾åé»è¾çå¯ææç¹ãå¦ææ¨æå¤æçåå§åä»£ç ï¼åå¨javaä¸­å¯ä»¥æ¯åé¿çï¼å¯è½ï¼xmlæ´å¥½å°è¡¨è¾¾ï¼æ¨å¯ä»¥åå»ºèªå·±çfactorybeanï¼å¨è¯¥ç±»ä¸­åå¥å¤æçåå§åé»è¾ï¼ç¶åå°æ¨çèªå®ä¹factorybeanæå¥å®¹å¨ä¸­ã\n\nfactorybeanæ¥å£æä¾ä¸ä¸ªæ¹æ³ï¼\n\n * object getobject()ï¼è¿åæ­¤å·¥ååå»ºçå¯¹è±¡çå®ä¾ãå®ä¾å¯è½ä¼è¢«å±äº«ï¼å·ä½åå³äºæ­¤åºåæ¯å¦è¿ååä¾æååã\n\n * boolean issingleton()ï¼å¦æfactorybeanè¿ååä¾beanæ­¤æ¹æ³è¿åtrueå¦åè¿åfalseã\n\n * class getobjecttype()ï¼è¿ågetobject()æ¹æ³è¿åçå¯¹è±¡ç±»åï¼å¦æç±»åä¸è½æåæ¨æ­åè¿ånullã\n\nfactorybeanææ³åæ¥å£ç¨äºspringæ¡æ¶åçè®¸å¤å°æ¹ãspringåé¨å°±æfactorybeanæ¥å£ç50å¤ä¸ªå®ç°ã\n\nå½æ¨éè¦è¯¢é®å®éfactorybeanå®ä¾èä¸æ¯å®çæçbeanæ¶ï¼è¯·å¨è°ç¨applicationcontextçgetbean()æ¹æ³æ¶ä½¿ç¨andç¬¦å·ï¼ï¼ï¼åç¼ãå¯¹äºç»å®çfactorybeanï¼è°ç¨å®¹å¨ä¸çgetbean("mybean")è¿åfactorybeanäº§ççbeanï¼èè°ç¨getbean("&mybean")è¿åfactorybeanå®ä¾æ¬èº«ã\n\n\n# 1.9. åºäºæ³¨è§£çå®¹å¨éç½®\n\n> åºäºæ³¨è§£çéç½®æ¯å¦æ¯åºäºxmlçéç½®æ´å¥½ï¼\n> \n> åºäºæ³¨è§£çéç½®å¼åºäºæ­¤é®é¢ãé¿è¯ç­è¯´æ¯âå¾çæåµâãä¹å°±æ¯è¯´ï¼æ¯ç§æ¹æ³é½æå¶å©å¼ãèä¸éå¸¸ç±å¼åäººåå³å®åªç§ç­ç¥æ´éåä»ä»¬ãç±äºå®ä»¬çå®ä¹æ¹å¼ï¼æ³¨è§£å¨ä»ä»¬çå£°æä¸­æä¾äºä¸ä¸æï¼æä»¥éç½®æ´ç­æ´ç®ç»ãä½æ¯ï¼xmléç½®çä¼å¿æ¯ä¸ä¾µå¥æºä»£ç æä¸éè¦éæ°ç¼è¯å®ä»¬ãä¸äºå¼åäººååæ¬¢æ³¨è§£çæ¹å¼ï¼èå¶ä»å¼åäººååè®¤ä¸ºè¢«æ³¨è§£çç±»ä¸åæ¯pojoï¼èä¸è¿ä¼ä½¿å¾éç½®åå¾åæ£ï¼æ´é¾æ§å¶ã\n> \n> æ è®ºåªç§éæ©ï¼springé½å¯ä»¥å¼å®¹è¿ä¸¤ç§é£æ ¼ï¼çè³å°å®ä»¬æ··åå¨ä¸èµ·ãå¼å¾æ³¨æçæ¯ï¼éè¿å¶javaconfigéé¡¹ï¼springè®©æ³¨è§£ä»¥éä¾µå¥æ§æ¹å¼ä½¿ç¨ï¼èæ éæ¥è§¦ç®æ ç»ä»¶æºä»£ç ï¼å¹¶ä¸å¨å·¥å·æ¹é¢ï¼ææéç½®æ ·å¼é½æ¯æeclipseçspring toolsæ¯æã\n\nåºäºæ³¨è§£çéç½®æä¾äºxmléç½®çæ¿ä»£æ¹æ³ï¼å®ä¾èµäºè¦è£éçç»ä»¶èä¸æ¯ç¨å°æ¬å·å£°æçå­èç åæ°æ®ãå¼åèéè¿å¨ç¸å³ç±»ï¼æ¹æ³æå­æ®µå£°æä¸ä½¿ç¨æ³¨è§£ï¼å°éç½®ç§»å¨å°ç»ä»¶ç±»èªèº«ä¸­èä¸æ¯ä½¿ç¨xmlãå¦ç¤ºä¾requiredannotationbeanpostprocessorï¼ä½¿ç¨beanpostprocessorä¸æ³¨è§£ç»åæ¯æ©å±spring iocå®¹å¨çå¸¸è§æ¹æ³ãä¾å¦ï¼spring 2.0å¼å¥äº@requiredæ³¨è§£ï¼ä½¿å¾å¼ºå¶ä¾èµå±æ§æä¸ºå¯è½ãspring 2.5ä½¿å¾å¯ä»¥éµå¾ªç¸åçä¸è¬æ¹æ³æ¥é©±å¨springçä¾èµæ³¨å¥ãæ¬è´¨ä¸ï¼@autowiredæ³¨éæä¾äºç¸åçè½åï¼å¦autowiringæè¿°ï¼ä½å·ææ´ç»ç²åº¦çæ§å¶åæ´å¹¿æ³çéç¨æ§ãspring 2.5è¿å¢å äºå¯¹jsr-250æ³¨è§£çæ¯æï¼ä¾å¦@postconstructå@predestroyãspring 3.0æ·»å äºåå«å¨javax.injectä¸­çæ¯æjsr-330ï¼javaä¾èµæ³¨å¥ï¼çæ³¨è§£ï¼ä¾å¦@injectå@namedãæå³è¿äºæ³¨è§£çè¯¦ç»ä¿¡æ¯å¯ä»¥å¨ç¸å³ç« èä¸­æ¾å°ã\n\n> â¹ï¸åºäºæ³¨è§£çæ³¨å¥å¨xmlæ³¨å¥ä¹åè¿è¡ãå æ­¤ï¼åºäºxmlçéç½®è¦çäºéè¿ä¸¤ç§æ¹æ³å±æ§çè£éã\n\nå½ç¶ï¼æ¨å¯ä»¥å°å®ä»¬æ³¨åä¸ºåç¬çbeanå®ä¹ï¼ä½ä¹å¯ä»¥éè¿å¨åºäºxmlçspringéç½®ä¸­åå«ä»¥ä¸æ ç­¾æ¥éå¼æ³¨åï¼æ³¨æåå«contextå½åç©ºé´ï¼ï¼\n\n<?xml version="1.0" encoding="utf-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n    xmlns:xsi="http://www.w3.org/2001/xmlschema-instance"\n    xmlns:context="http://www.springframework.org/schema/context"\n    xsi:schemalocation="http://www.springframework.org/schema/beans\n        https://www.springframework.org/schema/beans/spring-beans.xsd\n        http://www.springframework.org/schema/context\n        https://www.springframework.org/schema/context/spring-context.xsd">\n\n    <context:annotation-config/>\n\n</beans>\n\n\n(éå¼æ³¨åçåå¤çå¨åæ¬autowiredannotationbeanpostprocessor, commonannotationbeanpostprocessor, persistenceannotationbeanpostprocessor,requiredannotationbeanpostprocessor, commonannotationbeanpostprocessor, persistenceannotationbeanpostprocessor, requiredannotationbeanpostprocessor.)\n\n> â¹ï¸<context:annotation-config />ä»æ¥æ¾å¨å®ä¹å®çåä¸åºç¨ç¨åºä¸ä¸æä¸­çæ³¨è§£ãè¿æå³çï¼å¦æå°<context:annotation-config />æ¾å¨dispatcherservletçwebapplicationcontextä¸­ï¼ååªä¼æ«æcontrollerä¸­ç@autowired æ³¨è§£çbeanãæå³æ´å¤ä¿¡æ¯ï¼è¯·åédispatcherservletã\n\n\n# 1.9.1. @required\n\n@requiredæ³¨è§£éç¨äºbeanå±æ§setteræ¹æ³ï¼å¦ä¸ä¾æç¤ºï¼\n\npublic class simplemovielister {\n\n    private moviefinder moviefinder;\n\n    @required\n    public void setmoviefinder(moviefinder moviefinder) {\n        this.moviefinder = moviefinder;\n    }\n\n    // ...\n}\n\n\næ­¤æ³¨è§£è¡¨ç¤ºå¿é¡»éè¿beanå®ä¹ä¸­çæ¾å¼å±æ§å¼æéè¿èªå¨è£éå¨éç½®beanæ¶å¡«åbeançå±æ§ãå¦æå°æªå¡«ååæ³¨è§£å½±åçbeanå±æ§ï¼åè¯¥å®¹å¨ä¼æåºå¼å¸¸ãè¿åè®¸æ´æ©çå¤±è´¥ï¼é¿åäºåç»­çnullpointerexceptionç­ãæä»¬ä»ç¶å»ºè®®æ¨å°æ­è¨æ¾å¥beanç±»æ¬èº«ï¼ä¾å¦ï¼initæ¹æ³ï¼ãè¿æ ·åå³ä½¿å¨å®¹å¨å¤é¨ä½¿ç¨ç±»æ¶ï¼ä¹å¯ä»¥æ¿å°æéçå¼ç¨åå¼ã\n\n> â¹ï¸@requiredå¨spring framework 5.1ä¸­æ­£å¼è¿æ¶ï¼æ¯æä½¿ç¨æé å½æ°æ³¨å¥æéçè®¾ç½®ï¼æinitializingbean.afterpropertiesset()çèªå®ä¹å®ç°ä»¥åbeanå±æ§çsetterå®ç°ï¼ã\n\n\n# 1.9.2. ä½¿ç¨@autowired\n\n> â¹ï¸jsr 330ç@injectæ³¨è§£å¯ä»¥ç¨äºä»£æ¿æ¬èä¸­åå«çç¤ºä¾ä¸­çspring @autowiredæ³¨éãæå³è¯¦ç»ä¿¡æ¯ï¼è¯·åéæ­¤å¤ã\n\nä½ å¯ä»¥åºç¨@autowiredæ³¨è§£äºæé å¨ï¼å°±åä¸é¢è¿æ ·ï¼\n\npublic class movierecommender {\n\n    private final customerpreferencedao customerpreferencedao;\n\n    @autowired\n    public movierecommender(customerpreferencedao customerpreferencedao) {\n        this.customerpreferencedao = customerpreferencedao;\n    }\n\n    // ...\n}\n\n\n> â¹ï¸æªè³spring framework 4.3ï¼å¦æç®æ beanä»å®ä¹ä¸ä¸ªæé å½æ°ï¼åä¸åéè¦å¨æ­¤æé å½æ°ä¸ç¨@autowiredæ³¨è§£ãä½æ¯ï¼å¦ææå¤ä¸ªæé å½æ°å¹¶ä¸æ²¡æä¸»/é»è®¤æé å½æ°ï¼åè³å°æä¸ä¸ªæé å½æ°å¿é¡»ç¨@autowiredæ³¨è§£ï¼ä»¥æç¤ºå®¹å¨ä½¿ç¨åªä¸ä¸ªæé å¨ã\n\nä½ ä¹å¯ä»¥åä¸é¢è¿æ ·åºç¨@autowiredæ³¨è§£äºä¼ ç»setteræ¹æ³ï¼\n\npublic class simplemovielister {\n\n    private moviefinder moviefinder;\n\n    @autowired\n    public void setmoviefinder(moviefinder moviefinder) {\n        this.moviefinder = moviefinder;\n    }\n\n    // ...\n}\n\n\nä½ è¿å¯ä»¥åä¸é¢è¿æ ·åºç¨@autowiredæ³¨è§£äºä»»æåç§°åå¤åæ°çæ¹æ³ï¼\n\npublic class movierecommender {\n\n    private moviecatalog moviecatalog;\n\n    private customerpreferencedao customerpreferencedao;\n\n    @autowired\n    public void prepare(moviecatalog moviecatalog,\n            customerpreferencedao customerpreferencedao) {\n        this.moviecatalog = moviecatalog;\n        this.customerpreferencedao = customerpreferencedao;\n    }\n\n    // ...\n}\n\n\nä½ ä¹å¯ä»¥å°@autowiredåºç¨äºå­æ®µï¼çè³å°å¶ä¸æé å½æ°æ··åï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\npublic class movierecommender {\n\n    private final customerpreferencedao customerpreferencedao;\n\n    @autowired\n    private moviecatalog moviecatalog;\n\n    @autowired\n    public movierecommender(customerpreferencedao customerpreferencedao) {\n        this.customerpreferencedao = customerpreferencedao;\n    }\n\n    // ...\n}\n\n\n> ð¡ç¡®ä¿æ¨çç®æ ç»ä»¶ï¼ä¾å¦ï¼moviecatalogæcustomerpreferencedaoï¼åç¨@ autowiredæ³¨è§£çæ³¨å¥ç¹çç±»åå£°æä¸è´ãå¦åï¼è¿è¡æ¶å¯è½å ç±»åä¸å¹éèæ³¨å¥å¤±è´¥ã\n> \n> å¯¹äºéè¿ç±»è·¯å¾æ«ææ¾å°çxmlå®ä¹çbeanæç»ä»¶ç±»ï¼å®¹å¨éå¸¸é¢åç¥éç¡®åçç±»åãä½æ¯ï¼å¯¹äº@beanå·¥åæ¹æ³ï¼æ¨éè¦ç¡®ä¿å£°æçè¿åç±»åæ¯è¶³å¤æç¡®çãå¯¹äºå®ç°å¤ä¸ªæ¥å£æå¯è½ç±å¶å®ç°ç±»åå¼ç¨çç»ä»¶ï¼èèå¨å·¥åæ¹æ³ä¸å£°ææå·ä½çè¿åç±»åï¼è³å°è·æ³¨å¥ç¹éè¦çç±»åä¸æ ·ï¼ã\n\næ¨è¿å¯ä»¥å°@autowiredæ³¨è§£æ·»å å°ææå¾å°è¯¥ç±»åæ°ç»çå­æ®µææ¹æ³ä¸ï¼è®©springä»applicationcontextè¿åææè¿ç§ç±»åçbeanï¼å¦ä¸æç¤ºï¼\n\npublic class movierecommender {\n\n    @autowired\n    private moviecatalog[] moviecatalogs;\n\n    // ...\n}\n\n\nç±»åéåä¹æ¯ä¸æ ·ï¼\n\npublic class movierecommender {\n\n    private set<moviecatalog> moviecatalogs;\n\n    @autowired\n    public void setmoviecatalogs(set<moviecatalog> moviecatalogs) {\n        this.moviecatalogs = moviecatalogs;\n    }\n\n    // ...\n}\n\n\n> ð¡å¦ææ¨å¸æä»¥ç¹å®é¡ºåºæåºæ°ç»æåè¡¨ä¸­çåç´ ï¼æ¨çç®æ beanå¯ä»¥å®ç°org.springframework.core.orderedæ¥å£æä½¿ç¨@orderææ å@priorityæ³¨è§£ãå¦åï¼å®ä»¬çé¡ºåºè·å®¹å¨ä¸­å®ä¹çç®æ beançæ³¨åé¡ºåºä¸æ ·ã\n> \n> æ¨å¯ä»¥éå¯¹åä¸ªbeanå®ä¹ï¼å¦ææå¤ä¸ªä½¿ç¨ç¸åçbeanç±»çå®ä¹ï¼å¨ç®æ ç±»çº§å«å@beanæ¹æ³ä¸­å£°æ@orderæ³¨è§£ã@orderå¼å¯è½ä¼å½±åæ³¨å¥ç¹çä¼åçº§ï¼ä½è¯·æ³¨æå®ä»¬ä¸ä¼å½±ååä¾çå¯å¨é¡ºåºï¼è¿æ¯ç±ä¾èµå³ç³»å@dependsonå£°æå³å®çé®é¢ã\n> \n> è¯·æ³¨æï¼æ åjavax.annotation.priorityæ³¨è§£å¨@beançº§å«ä¸å¯ç¨ï¼å ä¸ºå®æ æ³å¨æ¹æ³ä¸­å£°æãå®çè¯­ä¹è·éè¿@orderå¼ä¸æ¯ç§ç±»åçåä¸ªbeanä¸ç@primaryç»åç±»ä¼¼ã\n\nåªè¦é¢æçkeyç±»åä¸ºstringï¼å³ä½¿æ¯mapå®ä¾ä¹å¯ä»¥èªå¨æ³¨å¥ãæ å°å¼åå«é¢æç±»åçææbeanï¼é®åå«ç¸åºçbeanåç§°ï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\npublic class movierecommender {\n\n    private map<string, moviecatalog> moviecatalogs;\n\n    @autowired\n    public void setmoviecatalogs(map<string, moviecatalog> moviecatalogs) {\n        this.moviecatalogs = moviecatalogs;\n    }\n\n    // ...\n}\n\n\né»è®¤æåµä¸ï¼å½æ²¡æå¹éçåébeanå¯ç¨äºç»å®æ³¨å¥ç¹æ¶ï¼èªå¨æ³¨å¥å¤±è´¥ãå¨å£°æçæ°ç»ï¼éåææ å°çæåµä¸ï¼é¢æè³å°æä¸ä¸ªå¹éçåç´ ã\n\né»è®¤è¡ä¸ºæ¯å°å¸¦æ³¨è§£çæ¹æ³åå­æ®µè§ä¸ºå¿é¡»çä¾èµé¡¹ãæ¨å¯ä»¥éè¿ä»¥ä¸ç¤ºä¾ä¸­æ¼ç¤ºæ´æ¹æ­¤è¡ä¸ºï¼ä½¿æ¡æ¶è½å¤è®©å¶åä¸ºéå¿é¡»çæ¥è·³è¿ä¸ä¸ªä¸æ»¡è¶³ä¾èµçæ³¨å¥ç¹ï¼å³ï¼éè¿å°@autowiredä¸­çrequiredå±æ§è®¾ç½®ä¸ºfalse)ï¼\n\npublic class simplemovielister {\n\n    private moviefinder moviefinder;\n\n    @autowired(required = false)\n    public void setmoviefinder(moviefinder moviefinder) {\n        this.moviefinder = moviefinder;\n    }\n\n    // ...\n}\n\n\nå¦æå®çä¾èµé¡¹ï¼æå¨å¤ä¸ªåæ°çæåµä¸ï¼ä¸å¯ç¨ï¼åä¸ä¼è°ç¨æ­¤éå¿éçæ¹æ³ãå¨è¿ç§æåµä¸ï¼éå¿é¡»çå­æ®µä¸ä¼å¡«åï¼ä¼ç¨å¶é»è®¤å¼ä»£æ¿ã\n\nè¢«æ³¨å¥çæé å¨åå·¥åæ¹æ³åæ°æ¯ä¸ä¸ªç¹æ®æåµï¼å ä¸º@autowiredä¸­requiredå±æ§ç±äºspringçæé å½æ°è§£æç®æ³å¯è½æ½å¨å°å¤çå¤ä¸ªæé å½æ°ï¼å æ­¤å·æç¨å¾®ä¸åçå«ä¹ãé»è®¤æåµä¸æé å¨åå·¥åæ¹æ³åæ°æ¯å¿é¡»çï¼ä½å¨åä¸ªæé å½æ°åºæ¯ä¸­æä¸äºç¹æ®è§åï¼ä¾å¦å¤åç´ æ³¨å¥ç¹ï¼æ°ç»ï¼éåï¼æ å°ï¼ï¼å¦ææ²¡æå¯å¹éçbeanï¼åè§£æä¸ºç©ºå®ä¾ãè¿åè®¸å¸¸è§çå®ç°æ¨¡å¼ï¼å¶ä¸­ææä¾èµå³ç³»é½å¯ä»¥å¨å¯ä¸çå¤åæ°æé å½æ°ä¸­å£°æ - ä¾å¦ï¼å¨æ²¡æ@autowiredæ³¨è§£çæåµä¸è¢«å£°æä¸ºåä¸ªå¬å±æé å½æ°ã\n\n> â¹ï¸ç»å®beanåªæä¸ä¸ªæé å½æ°å¯ä»¥è¢«required=trueç@autowiredå£°æï¼è¡¨æè¿ä¸ªæé å¨æ¯å¶ä½ä¸ºspring beanè¦æ³¨å¥çæé å¨ãå æ­¤ï¼å¦æå¶requiredå±æ§ä¸ºé»è®¤å¼trueï¼ååªæåä¸ªæé å½æ°å¯ä»¥ç¨@autowiredæ³¨è§£å£°æãå¦æå¤ä¸ªæé å½æ°å£°æäºè¿ä¸ªæ³¨è§£ï¼åå®ä»¬é½å¿é¡»å°requiredè®¾ç½®ä¸ºfalseï¼ä»¥ä¾¿è¢«è§ä¸ºç¨äºèªå¨è£éçåéèï¼ç±»ä¼¼äºxmlä¸­çautowire=constructorï¼ãspringå®¹å¨å°éæ©è½æå¤§æ»¡è¶³ä¾èµçæé å¨ãå¦æåéèæ²¡æä¸ä¸ªæ»¡è¶³çï¼åå°ä½¿ç¨ä¸»/é»è®¤æé å½æ°ï¼å¦æå­å¨ï¼ãåæ ·ï¼å¦æç±»å£°æå¤ä¸ªæé å½æ°ï¼ä½é½æ²¡æå£°æ@autowiredæ³¨è§£ï¼åå°ä½¿ç¨ä¸»/é»è®¤æé å½æ°ï¼å¦æå­å¨ï¼ãå¦æç±»ä»å£°æåä¸ªæé å½æ°ï¼å³ä½¿æ²¡ææ³¨è§£ï¼ä¹å°å§ç»ä½¿ç¨å®ãè¯·æ³¨æï¼æ³¨è§£å£°æçæé å½æ°ä¿®é¥°ç¬¦ä¸å¿ä¸ºpublicã\n> \n> å¨setteræ¹æ³ä¸å»ºè®®ä½¿ç¨@autowiredçrequiredå±æ§èä¸æ¯å·²å¼ç¨ç@requiredæ³¨è§£ãå°requiredå±æ§è®¾ç½®ä¸ºfalseè¡¨ç¤ºèªå¨æ³¨å¥ç®æ ä¸æ¯å¿é¡»çï¼å¦æå®æ æ³èªå¨æ³¨å¥åå°å¿½ç¥è¯¥å±æ§ãå¦ä¸æ¹é¢ï¼@requiredå¼ºå¶å±æ§è®¾ç½®ï¼æ è®ºç¨å®¹å¨æ¯æçä»ä¹ææ®µï¼å¦ææ²¡æå®ä¹ä»»ä½å¼ï¼åä¼æåºç¸åºçå¼å¸¸ã\n\næèï¼æ¨å¯ä»¥éè¿java 8çjava.util.optionsè¡¨ç¤ºç¹å®ä¾èµçéå¿è¦æ§è´¨ï¼å¦ä»¥ä¸ç¤ºä¾æç¤ºï¼\n\npublic class simplemovielister {\n\n    @autowired\n    public void setmoviefinder(optional<moviefinder> moviefinder) {\n        ...\n    }\n}\n\n\næªè³spring framework 5.0ï¼æ¨ä¹å¯ä»¥ä½¿ç¨@nullableæ³¨éï¼ä»»ä½åä¸­çä»»ä½ç±»å - ä¾å¦ï¼jsr-305ä¸­çjavax.annotation.nullableï¼æåªæ¯å©ç¨kotlinåç½®çç©ºå®å¨æ¯æï¼\n\npublic class simplemovielister {\n\n    @autowired\n    public void setmoviefinder(@nullable moviefinder moviefinder) {\n        ...\n    }\n}\n\n\næ¨è¿å¯ä»¥ä½¿ç¨@autowiredç¨äºä¼æå¨ç¥çå¯è§£æä¾èµæ§çæ¥å£ï¼beanfactoryï¼applicationcontextï¼environmentï¼resourceloaderï¼applicationeventpublisheråmessagesourceãè¿äºæ¥å£åå¶æ©å±æ¥å£ï¼ä¾å¦configurableapplicationcontextæresourcepatternresolverï¼ä¼èªå¨è§£æï¼æ éç¹æ®è®¾ç½®ãä»¥ä¸ç¤ºä¾æ³¨å¥applicationcontextå¯¹è±¡ï¼\n\npublic class movierecommender {\n\n    @autowired\n    private applicationcontext context;\n\n    public movierecommender() {\n    }\n\n    // ...\n}\n\n\n> â¹ï¸@autowiredï¼@injectï¼@valueå@resourceæ³¨è§£ç±spring beanpostprocessorå®ç°å¤çãè¿æå³çæ¨æ æ³å¨æ¨èªå·±çbeanpostprocessoræbeanfactorypostprocessorç±»åä¸­åºç¨è¿äºæ³¨è§£ï¼å¦ææï¼ãè¿äºç±»åå¿é¡»éè¿ä½¿ç¨xmlæspring @beanæ¹æ³æ¾å¼æ³¨å¥ã\n\n\n# 1.9.3. ä½¿ç¨@primaryè°æ´åºäºæ³¨è§£çèªå¨æ³¨å¥\n\nå ä¸ºæç±»åçèªå¨æ³¨å¥å¯è½æå¤ä¸ªåéèï¼æä»¥éå¸¸éè¦æ´ç²¾ç»å°æ§å¶éæ©è¿ç¨ãå®ç°è¿ä¸ç®æ çä¸ç§æ¹æ³æ¯springç@primaryæ³¨è§£ã@primaryè¡¨ç¤ºå½åå¼ä¾èµæå¤ä¸ªåéèæ¶ï¼åºç»åºæ³¨å¥beançé¦éé¡¹ãå¦æåéèä¸­å­å¨ä¸ä¸ªä¸»beanï¼åå®å°æä¸ºèªå¨æ³¨å¥çå¼ã\n\nå°±åä»¥ä¸éç½®ï¼å°firstmoviecatalogå®ä¹ä¸ºmoviecatalogç±»åçä¸»beanï¼\n\n@configuration\npublic class movieconfiguration {\n\n    @bean\n    @primary\n    public moviecatalog firstmoviecatalog() { ... }\n\n    @bean\n    public moviecatalog secondmoviecatalog() { ... }\n\n    // ...\n}\n\n\nä½¿ç¨åé¢çéç½®ï¼ä¸é¢çmovierecommenderå°æ³¨å¥firstmoviecatalogï¼\n\npublic class movierecommender {\n\n    @autowired\n    private moviecatalog moviecatalog;\n\n    // ...\n}\n\n\nç¸åºçbeanå®ä¹å¦ä¸ï¼\n\n<?xml version="1.0" encoding="utf-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n    xmlns:xsi="http://www.w3.org/2001/xmlschema-instance"\n    xmlns:context="http://www.springframework.org/schema/context"\n    xsi:schemalocation="http://www.springframework.org/schema/beans\n        https://www.springframework.org/schema/beans/spring-beans.xsd\n        http://www.springframework.org/schema/context\n        https://www.springframework.org/schema/context/spring-context.xsd">\n\n    <context:annotation-config/>\n\n    <bean class="example.simplemoviecatalog" primary="true">\n        \x3c!-- inject any dependencies required by this bean --\x3e\n    </bean>\n\n    <bean class="example.simplemoviecatalog">\n        \x3c!-- inject any dependencies required by this bean --\x3e\n    </bean>\n\n    <bean id="movierecommender" class="example.movierecommender"/>\n\n</beans>\n\n\n\n# 1.9.4. ä½¿ç¨@qualifiersè°æ´åºäºæ³¨è§£çèªå¨æ³¨å¥\n\n\n# éå½\n\n\n# æå¡å®ä½å¨æ¨¡å¼\n\n> æå¡å®ä½å¨æ¨¡å¼ æå¡å®ä½å¨æ¨¡å¼ï¼service locator patternï¼ç¨å¨æä»¬æ³ä½¿ç¨ jndi æ¥è¯¢å®ä½åç§æå¡çæ¶åãèèå°ä¸ºæä¸ªæå¡æ¥æ¾ jndi çä»£ä»·å¾é«ï¼æå¡å®ä½å¨æ¨¡å¼ååå©ç¨äºç¼å­ææ¯ãå¨é¦æ¬¡è¯·æ±æä¸ªæå¡æ¶ï¼æå¡å®ä½å¨å¨ jndi ä¸­æ¥æ¾æå¡ï¼å¹¶ç¼å­è¯¥æå¡å¯¹è±¡ãå½åæ¬¡è¯·æ±ç¸åçæå¡æ¶ï¼æå¡å®ä½å¨ä¼å¨å®çç¼å­ä¸­æ¥æ¾ï¼è¿æ ·å¯ä»¥å¨å¾å¤§ç¨åº¦ä¸æé«åºç¨ç¨åºçæ§è½\n\næå¡å®ä½å¨æ¨¡å¼ï¼service locator patternï¼ç¨å¨æä»¬æ³ä½¿ç¨ jndi æ¥è¯¢å®ä½åç§æå¡çæ¶åãèèå°ä¸ºæä¸ªæå¡æ¥æ¾ jndi çä»£ä»·å¾é«ï¼æå¡å®ä½å¨æ¨¡å¼ååå©ç¨äºç¼å­ææ¯ãå¨é¦æ¬¡è¯·æ±æä¸ªæå¡æ¶ï¼æå¡å®ä½å¨å¨ jndi ä¸­æ¥æ¾æå¡ï¼å¹¶ç¼å­è¯¥æå¡å¯¹è±¡ãå½åæ¬¡è¯·æ±ç¸åçæå¡æ¶ï¼æå¡å®ä½å¨ä¼å¨å®çç¼å­ä¸­æ¥æ¾ï¼è¿æ ·å¯ä»¥å¨å¾å¤§ç¨åº¦ä¸æé«åºç¨ç¨åºçæ§è½ãä»¥ä¸æ¯è¿ç§è®¾è®¡æ¨¡å¼çå®ä½ã\n\n * æå¡ï¼serviceï¼ - å®éå¤çè¯·æ±çæå¡ãå¯¹è¿ç§æå¡çå¼ç¨å¯ä»¥å¨ jndi æå¡å¨ä¸­æ¥æ¾å°ã\n\n * context / åå§ç context - jndi context å¸¦æå¯¹è¦æ¥æ¾çæå¡çå¼ç¨ã\n\n * æå¡å®ä½å¨ï¼service locatorï¼ - æå¡å®ä½å¨æ¯éè¿ jndi æ¥æ¾åç¼å­æå¡æ¥è·åæå¡çåç¹æ¥è§¦ã\n\n * ç¼å­ï¼cacheï¼ - ç¼å­å­å¨æå¡çå¼ç¨ï¼ä»¥ä¾¿å¤ç¨å®ä»¬ã\n\n * å®¢æ·ç«¯ï¼clientï¼ - client æ¯éè¿ servicelocator è°ç¨æå¡çå¯¹è±¡ã\n\n',charsets:{cjk:!0}}],themeConfig:{nav:[{text:"é¦é¡µ",link:"/"},{text:"ææ¡£ç¿»è¯",items:[{text:"Spring Framwork",items:[{text:"Spring Core",link:"/pages/spring/core/"}]},{text:"RabbitMQ",items:[{text:"AMQP0-9-1æ¨¡å",link:"/pages/rabbitMQ/AMQP0-9-1/"}]}]},{text:"å¼åæå",items:[{text:"VsCodeä½¿ç¨æå·§",link:"/pages/dev/vscode/"},{text:"IDEAä½¿ç¨æå·§",link:"/pages/dev/idea/"}]},{text:"è¯»ä¹¦ç¬è®°",items:[{text:"Java8å®æ",link:"/pages/note/java8InAction/"}]}],sidebarDepth:2,logo:"/assets/favicon.ico",repo:"cheysen/ccc-docs",searchMaxSuggestions:10,lastUpdated:"ä¸æ¬¡æ´æ°",sidebar:{"/01.ææ¡£ç¿»è¯/":[{title:"Spring Framework",collapsable:!1,children:[["01.Spring Framework/01.core.md","Spring Core","/pages/spring/core/"]]},{title:"RabbitMQ",collapsable:!1,children:[["02.RabbitMQ/01.AMQP0-9-1æ¨¡å.md","AMQP0-9-1æ¨¡å","/pages/rabbitMQ/AMQP0-9-1/"]]}],catalogue:{},"/02.å¼åæå/":[["01.ideaä½¿ç¨æå·§.md","ideaä½¿ç¨æå·§","/pages/dev/idea/"],["02.vscodeä½¿ç¨æå·§.md","vscodeä½¿ç¨æå·§","/pages/dev/vscode/"]],"/03.è¯»ä¹¦ç¬è®°/":[["01.Java8å®æ.md","Java8å®æ","/pages/note/java8InAction/"]]},updateBar:{showToArticle:!1},category:!1,tag:!1,author:{name:"cheysen"},social:{icons:[{iconClass:"icon-youjian",title:"åé®ä»¶",link:"mailto:1457516535@qq.com"},{iconClass:"icon-github",title:"GitHub",link:"https://github.com/cheysen"},{iconClass:"icon-erji",title:"å¬é³ä¹"}]},footer:{createYear:2020,copyrightInfo:"cheysen | MIT License"},htmlModules:{}}},cc=(t(365),t(150),t(206),t(138),t(216)),lc=t(217),pc=(t(371),t(231),t(42));var uc={computed:{$filterPosts:function(){return this.$site.pages.filter((function(n){var e=n.frontmatter,t=e.pageComponent,r=e.article,a=e.home;return!(t||!1===r||!0===a)}))},$sortPosts:function(){return(n=this.$filterPosts).sort((function(n,e){var t=n.frontmatter.sticky,r=e.frontmatter.sticky;return t&&r?t==r?Object(pc.a)(n,e):t-r:t&&!r?-1:!t&&r?1:Object(pc.a)(n,e)})),n;var n},$sortPostsByDate:function(){return(n=this.$filterPosts).sort((function(n,e){return Object(pc.a)(n,e)})),n;var n},$groupPosts:function(){return function(n){for(var e={},t={},r=function(r,a){var o=n[r].frontmatter,i=o.categories,s=o.tags;"array"===Object(pc.n)(i)&&i.forEach((function(t){t&&(e[t]||(e[t]=[]),e[t].push(n[r]))})),"array"===Object(pc.n)(s)&&s.forEach((function(e){e&&(t[e]||(t[e]=[]),t[e].push(n[r]))}))},a=0,o=n.length;a<o;a++)r(a);return{categories:e,tags:t}}(this.$sortPosts)},$categoriesAndTags:function(){return function(n){var e=[],t=[];for(var r in n.categories)e.push({key:r,length:n.categories[r].length});for(var a in n.tags)t.push({key:a,length:n.tags[a].length});return{categories:e,tags:t}}(this.$groupPosts)}}};Ia.component(cc.default),Ia.component(lc.default);function fc(n){return n.toString().padStart(2,"0")}t(375);Ia.component("Badge",(function(){return Promise.all([t.e(0),t.e(3)]).then(t.bind(null,480))})),Ia.component("CodeBlock",(function(){return Promise.resolve().then(t.bind(null,216))})),Ia.component("CodeGroup",(function(){return Promise.resolve().then(t.bind(null,217))}));t(376);var dc=[{},function(n){var e=n.Vue,t=(n.options,n.router,n.siteData);t.pages.map((function(n){var e=n.frontmatter,r=e.date,a=e.author;"string"==typeof r&&"Z"===r.charAt(r.length-1)&&(n.frontmatter.date=function(n){n instanceof Date||(n=new Date(n));return"".concat(n.getUTCFullYear(),"-").concat(fc(n.getUTCMonth()+1),"-").concat(fc(n.getUTCDate())," ").concat(fc(n.getUTCHours()),":").concat(fc(n.getUTCMinutes()),":").concat(fc(n.getUTCSeconds()))}(r)),a?n.author=a:t.themeConfig.author&&(n.author=t.themeConfig.author)})),e.mixin(uc)},{},function(n){n.Vue.mixin({computed:{$dataBlock:function(){return this.$options.__data__block__}}})},{},{},function(n){var e=n.router;"undefined"!=typeof window&&(window._hmt=window._hmt||[],function(){var n=document.createElement("script");n.src="https://hm.baidu.com/hm.js?01293bffa6c3962016c08ba685c79d78";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(n,e)}(),e.afterEach((function(n){_hmt.push(["_trackPageview",n.fullPath])})))}],mc=[];t(209);function hc(n,e){return(hc=Object.setPrototypeOf||function(n,e){return n.__proto__=e,n})(n,e)}t(210),t(211);function bc(n){return(bc=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)})(n)}function gc(n,e){if(e&&("object"===Ai(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}function vc(n){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var t,r=bc(n);if(e){var a=bc(this).constructor;t=Reflect.construct(r,arguments,a)}else t=r.apply(this,arguments);return gc(this,t)}}var yc=function(n){!function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&hc(n,e)}(t,n);var e=vc(t);function t(){return ls(this,t),e.apply(this,arguments)}return us(t)}(function(){function n(){ls(this,n),this.store=new Ia({data:{state:{}}})}return us(n,[{key:"$get",value:function(n){return this.store.state[n]}},{key:"$set",value:function(n,e){Ia.set(this.store.state,n,e)}},{key:"$emit",value:function(){var n;(n=this.store).$emit.apply(n,arguments)}},{key:"$on",value:function(){var n;(n=this.store).$on.apply(n,arguments)}}]),n}());Object.assign(yc.prototype,{getPageAsyncComponent:Ni,getLayoutAsyncComponent:Ui,getAsyncComponent:Ji,getVueComponent:Xi});var xc={install:function(n){var e=new yc;n.$vuepress=e,n.prototype.$vuepress=e}};function wc(n){n.beforeEach((function(e,t,r){if(Sc(n,e.path))r();else if(/(\/|\.html)$/.test(e.path))if(/\/$/.test(e.path)){var a=e.path.replace(/\/$/,"")+".html";Sc(n,a)?r(a):r()}else r();else{var o=e.path+"/",i=e.path+".html";Sc(n,i)?r(i):Sc(n,o)?r(o):r()}}))}function Sc(n,e){var t=e.toLowerCase();return n.options.routes.some((function(n){return n.path.toLowerCase()===t}))}var _c={props:{pageKey:String,slotKey:{type:String,default:"default"}},render:function(n){var e=this.pageKey||this.$parent.$page.key;return Hi("pageKey",e),Ia.component(e)||Ia.component(e,Ni(e)),Ia.component(e)?n(e):n("")}},kc={functional:!0,props:{slotKey:String,required:!0},render:function(n,e){var t=e.props,r=e.slots;return n("div",{class:["content__".concat(t.slotKey)]},r()[t.slotKey])}},Cc={computed:{openInNewWindowTitle:function(){return this.$themeLocaleConfig.openNewWindowText||"(opens new window)"}}},Ac=(t(377),t(378),Object(ac.a)(Cc,(function(){var n=this.$createElement,e=this._self._c||n;return e("span",[e("svg",{staticClass:"icon outbound",attrs:{xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",x:"0px",y:"0px",viewBox:"0 0 100 100",width:"15",height:"15"}},[e("path",{attrs:{fill:"currentColor",d:"M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"}}),this._v(" "),e("polygon",{attrs:{fill:"currentColor",points:"45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"}})]),this._v(" "),e("span",{staticClass:"sr-only"},[this._v(this._s(this.openInNewWindowTitle))])])}),[],!1,null,null,null).exports);function jc(){return(jc=Object(r.a)(regeneratorRuntime.mark((function n(e){var t,r,a,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t="undefined"!=typeof window&&window.__VUEPRESS_ROUTER_BASE__?window.__VUEPRESS_ROUTER_BASE__:sc.routerBase||sc.base,wc(r=new ki({base:t,mode:"history",fallback:!1,routes:ic,scrollBehavior:function(n,e,t){return t||(n.hash?!Ia.$vuepress.$get("disableScrollBehavior")&&{selector:decodeURIComponent(n.hash)}:{x:0,y:0})}})),a={},n.prev=4,n.next=7,Promise.all(dc.filter((function(n){return"function"==typeof n})).map((function(n){return n({Vue:Ia,options:a,router:r,siteData:sc,isServer:e})})));case 7:n.next=12;break;case 9:n.prev=9,n.t0=n.catch(4),console.error(n.t0);case 12:return o=new Ia(Object.assign(a,{router:r,render:function(n){return n("div",{attrs:{id:"app"}},[n("RouterView",{ref:"layout"}),n("div",{class:"global-ui"},mc.map((function(e){return n(e)})))])}})),n.abrupt("return",{app:o,router:r});case 14:case"end":return n.stop()}}),n,null,[[4,9]])})))).apply(this,arguments)}Ia.config.productionTip=!1,Ia.use(ki),Ia.use(xc),Ia.mixin(function(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ia;Ci(e),t.$vuepress.$set("siteData",e);var r=n(t.$vuepress.$get("siteData")),a=new r,o=Object.getOwnPropertyDescriptors(Object.getPrototypeOf(a)),i={};return Object.keys(o).reduce((function(n,e){return e.startsWith("$")&&(n[e]=o[e].get),n}),i),{computed:i}}((function(n){return function(){function e(){ls(this,e)}return us(e,[{key:"setPage",value:function(n){this.__page=n}},{key:"$site",get:function(){return n}},{key:"$themeConfig",get:function(){return this.$site.themeConfig}},{key:"$frontmatter",get:function(){return this.$page.frontmatter}},{key:"$localeConfig",get:function(){var n,e,t=this.$site.locales,r=void 0===t?{}:t;for(var a in r)"/"===a?e=r[a]:0===this.$page.path.indexOf(a)&&(n=r[a]);return n||e||{}}},{key:"$siteTitle",get:function(){return this.$localeConfig.title||this.$site.title||""}},{key:"$canonicalUrl",get:function(){var n=this.$page.frontmatter.canonicalUrl;return"string"==typeof n&&n}},{key:"$title",get:function(){var n=this.$page,e=this.$page.frontmatter.metaTitle;if("string"==typeof e)return e;var t=this.$siteTitle,r=n.frontmatter.home?null:n.frontmatter.title||n.title;return t?r?r+" | "+t:t:r||"VuePress"}},{key:"$description",get:function(){var n=function(n){if(n){var e=n.filter((function(n){return"description"===n.name}))[0];if(e)return e.content}}(this.$page.frontmatter.meta);return n||(this.$page.frontmatter.description||this.$localeConfig.description||this.$site.description||"")}},{key:"$lang",get:function(){return this.$page.frontmatter.lang||this.$localeConfig.lang||"en-US"}},{key:"$localePath",get:function(){return this.$localeConfig.path||"/"}},{key:"$themeLocaleConfig",get:function(){return(this.$site.themeConfig.locales||{})[this.$localePath]||{}}},{key:"$page",get:function(){return this.__page?this.__page:function(n,e){for(var t=0;t<n.length;t++){var r=n[t];if(r.path.toLowerCase()===e.toLowerCase())return r}return{path:"",frontmatter:{}}}(this.$site.pages,this.$route.path)}}]),e}()}),sc)),Ia.component("Content",_c),Ia.component("ContentSlotsDistributor",kc),Ia.component("OutboundLink",Ac),Ia.component("ClientOnly",{functional:!0,render:function(n,e){var t=e.parent,r=e.children;if(t._isMounted)return r;t.$once("hook:mounted",(function(){t.$forceUpdate()}))}}),Ia.component("Layout",Ui("Layout")),Ia.component("NotFound",Ui("NotFound")),Ia.prototype.$withBase=function(n){var e=this.$site.base;return"/"===n.charAt(0)?e+n.slice(1):n},window.__VUEPRESS__={version:"1.9.2",hash:"24c931b"},function(n){return jc.apply(this,arguments)}(!1).then((function(n){var e=n.app;n.router.onReady((function(){e.$mount("#app")}))}))}]);